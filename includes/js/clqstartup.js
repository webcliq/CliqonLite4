;/* Cliqon Startup JS generated to maximise speed of loading as per Steve Souders */

/* Modernizr 2.8.1 (Custom Build) | MIT & BSD
 * Build: http://modernizr.com/download/#-fontface-backgroundsize-borderimage-borderradius-boxshadow-flexbox-flexboxlegacy-hsla-multiplebgs-opacity-rgba-textshadow-cssanimations-csscolumns-generatedcontent-cssgradients-cssreflections-csstransforms-csstransforms3d-csstransitions-applicationcache-canvas-canvastext-draganddrop-hashchange-history-audio-video-indexeddb-input-inputtypes-localstorage-postmessage-sessionstorage-websockets-websqldatabase-webworkers-shiv-cssclasses-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-load
 */
;window.Modernizr=function(a,b,c){function B(a){j.cssText=a}function C(a,b){return B(n.join(a+";")+(b||""))}function D(a,b){return typeof a===b}function E(a,b){return!!~(""+a).indexOf(b)}function F(a,b){for(var d in a){var e=a[d];if(!E(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function G(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:D(f,"function")?f.bind(d||b):f}return!1}function H(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return D(b,"string")||D(b,"undefined")?F(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),G(e,b,c))}function I(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)t[c[d]]=c[d]in k;return t.list&&(t.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),t}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:e=k.value!=l)),s[a[d]]=!!e;return s}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.8.0",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={},s={},t={},u=[],v=u.slice,w,x=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},y=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=D(e[d],"function"),D(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),z={}.hasOwnProperty,A;!D(z,"undefined")&&!D(z.call,"undefined")?A=function(a,b){return z.call(a,b)}:A=function(a,b){return b in a&&D(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=v.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(v.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(v.call(arguments)))};return e}),r.flexbox=function(){return H("flexWrap")},r.flexboxlegacy=function(){return H("boxDirection")},r.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},r.canvastext=function(){return!!e.canvas&&!!D(b.createElement("canvas").getContext("2d").fillText,"function")},r.postmessage=function(){return!!a.postMessage},r.websqldatabase=function(){return!!a.openDatabase},r.indexedDB=function(){return!!H("indexedDB",a)},r.hashchange=function(){return y("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},r.history=function(){return!!a.history&&!!history.pushState},r.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},r.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},r.rgba=function(){return B("background-color:rgba(150,255,150,.5)"),E(j.backgroundColor,"rgba")},r.hsla=function(){return B("background-color:hsla(120,40%,100%,.5)"),E(j.backgroundColor,"rgba")||E(j.backgroundColor,"hsla")},r.multiplebgs=function(){return B("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},r.backgroundsize=function(){return H("backgroundSize")},r.borderimage=function(){return H("borderImage")},r.borderradius=function(){return H("borderRadius")},r.boxshadow=function(){return H("boxShadow")},r.textshadow=function(){return b.createElement("div").style.textShadow===""},r.opacity=function(){return C("opacity:.55"),/^0.55$/.test(j.opacity)},r.cssanimations=function(){return H("animationName")},r.csscolumns=function(){return H("columnCount")},r.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return B((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),E(j.backgroundImage,"gradient")},r.cssreflections=function(){return H("boxReflect")},r.csstransforms=function(){return!!H("transform")},r.csstransforms3d=function(){var a=!!H("perspective");return a&&"webkitPerspective"in g.style&&x("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},r.csstransitions=function(){return H("transition")},r.fontface=function(){var a;return x('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&g.indexOf(d.split(" ")[0])===0}),a},r.generatedcontent=function(){var a;return x(["#",h,"{font:0/0 a}#",h,':after{content:"',l,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a},r.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c},r.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c},r.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(a){return!1}},r.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(a){return!1}},r.webworkers=function(){return!!a.Worker},r.applicationcache=function(){return!!a.applicationCache};for(var J in r)A(r,J)&&(w=J.toLowerCase(),e[w]=r[J](),u.push((e[w]?"":"no-")+w));return e.input||I(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)A(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},B(""),i=k=null,function(a,b){function l(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function m(){var a=s.elements;return typeof a=="string"?a.split(" "):a}function n(a){var b=j[a[h]];return b||(b={},i++,a[h]=i,j[i]=b),b}function o(a,c,d){c||(c=b);if(k)return c.createElement(a);d||(d=n(c));var g;return d.cache[a]?g=d.cache[a].cloneNode():f.test(a)?g=(d.cache[a]=d.createElem(a)).cloneNode():g=d.createElem(a),g.canHaveChildren&&!e.test(a)&&!g.tagUrn?d.frag.appendChild(g):g}function p(a,c){a||(a=b);if(k)return a.createDocumentFragment();c=c||n(a);var d=c.frag.cloneNode(),e=0,f=m(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function q(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?o(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function r(a){a||(a=b);var c=n(a);return s.shivCSS&&!g&&!c.hasCSS&&(c.hasCSS=!!l(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||q(a,c),a}var c="3.7.0",d=a.html5||{},e=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g,h="_html5shiv",i=0,j={},k;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",g="hidden"in a,k=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){g=!0,k=!0}})();var s={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:d.shivCSS!==!1,supportsUnknownElements:k,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:r,createElement:o,createDocumentFragment:p};a.html5=s,r(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.hasEvent=y,e.testProp=function(a){return F([a])},e.testAllProps=H,e.testStyles=x,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+u.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};

/* stratified.js */
var __oni_rt={};(function(exports){function CFException_toString(){var e=this.name+": "+this.message;if(this.__oni_stack){for(var t=0;t<this.__oni_stack.length;++t){var n=this.__oni_stack[t];if(n.length==1)n=n[0];else n="    at "+n.slice(0,2).join(":");e+="\n"+n}}return e}function adopt_native_stack(e,t){if(!e.stack)return;if(exports.hostenv!=="nodejs"){e.stack="";return}var n=String(e.stack);var r=n.indexOf(": ");var i=r===-1?0:r+2;if(n.lastIndexOf("\n",i)!==-1)i=0;var s=String(e.message);if(s&&n.lastIndexOf(s,i)==i){n=n.slice(i+s.length)}else{n=n.replace(/^\w*Error/,"")}n=n.trim();e.stack="";var o=n.split("\n");var u;for(u=0;u<o.length;u++){if(t&&o[u].indexOf(t)!==-1||o[u].indexOf("stratified-node.js")!==-1||o[u].indexOf("stratified.js")!==-1){break}e.__oni_stack.push([o[u]])}}function CFException(e,t,n,r){this.type=e;this.val=t;if(e=="t"&&(t instanceof Error||typeof t=="object"&&t.message)){if(t._oniE!==token_oniE){t._oniE=token_oniE;t.__oni_stack=t.__oni_stack||[];t.line=n;t.file=r||"unknown SJS source";adopt_native_stack(t,r);if(!t.hasOwnProperty("toString"))t.toString=CFException_toString}if(n)t.__oni_stack.push([r||"unknown SJS source",n])}}function ReturnToParentContinuation(e,t,n){this.frame=e;this.idx=t;this.val=n}function cont(e,t,n){var r=e.cont(t,n);while(r&&r.__oni_rtpc){r=r.execute()}return r}function is_ef(e){return e&&e.__oni_ef}function setEFProto(e){for(var t in EF_Proto)e[t]=EF_Proto[t]}function mergeCallstacks(e,t){if(e.callstack){e.callstack=e.callstack.concat(t.callstack);if(e.callstack.length>20)e.callstack.splice(20/2,e.callstack.length-20+1,["    ...(frames omitted)"])}else{e.callstack=t.callstack}}function execIN(e,t){if(!e||e.__oni_dis!=token_dis){return e}return e.exec(e.ndata,t)}function Env(e,t,n,r,i,s,o,u){this.aobj=e;this.tobj=t;this.file=n;this.blbref=r;this.blrref=i;this.blscope=s;this.fold=o;this.branch=u}function copyEnv(e){return new Env(e.aobj,e.tobj,e.file,e.blbref,e.blrref,e.blscope,e.fold,e.branch)}function I_call(e,t){try{var n=e[0].call(t);if(is_ef(n)){if(!n.callstack)n.callstack=[];n.callstack.push([t.file,e[1]])}return n}catch(r){if(r&&r.__oni_cfx){if(r.type=="blb"&&r.ef==t.blscope){return UNDEF}}else{r=new CFException("t",r,e[1],t.file)}return r}}function I_nblock(e,t){try{return e[0].call(t)}catch(n){if(!(n&&n.__oni_cfx)){n=new CFException("t",n,e[1],t.file)}return n}}function I_blocklambda(e,t){return e.bind(t)}function EF_Seq(e,t){this.ndata=e;this.env=t;if(e[0]&8){if(e[0]&64){this.env=copyEnv(t);this.env.blbref=t.blscope;this.env.blrref=t.blrref;this.env.blscope=this}else{t.blbref=this;t.blrref=this;t.blscope=this}}else if(e[0]&1){this.env=copyEnv(t);if(e[0]&64)this.env.blbref=t.blscope;this.env.blscope=null}this.tailcall=!(e[0]&8);this.swallow_r=e[0]&1;if(e[0]&32)this.swallow_r=2;this.sc=e[0]&(2|4);if(e[0]&16){this.unreturnable=true;this.toplevel=true}}function I_seq(e,t){return cont(new EF_Seq(e,t),1)}function EF_Sc(e,t){this.ndata=e;this.env=t;this.i=2;this.pars=[]}function I_sc(e,t){return cont(new EF_Sc(e,t),0)}function testIsFunction(e){if(typeof e=="function")return true;return!!/(?:\[[^o])|(?:^\/)/.exec(""+e)}function EF_Fcall(e,t){this.ndata=e;this.env=t;this.i=2;this.pars=[]}function I_fcall(e,t){return cont(new EF_Fcall(e,t),0)}function EF_If(e,t){this.ndata=e;this.env=t}function I_if(e,t){return cont(new EF_If(e,t),0)}function EF_Switch(e,t){this.ndata=e;this.env=t;this.phase=0}function I_switch(e,t){return cont(new EF_Switch(e,t),0)}function EF_Try(e,t){this.ndata=e;this.env=t;this.state=0}function I_try(e,t){return cont(new EF_Try(e,t),0)}function EF_Loop(e,t){this.ndata=e;this.env=t}function I_loop(e,t){return cont(new EF_Loop(e,t),e[0],true)}function EF_ForIn(e,t){this.ndata=e;this.env=t}function I_forin(e,t){return cont(new EF_ForIn(e,t),0)}function EF_Par(e,t){this.ndata=e;this.env=t;this.pending=0;this.children=new Array(this.ndata.length)}function I_par(e,t){return cont(new EF_Par(e,t),-1)}function EF_Alt(e,t){this.ndata=e;this.env=t;this.pending=0;this.children=new Array(this.ndata.length)}function I_alt(e,t){return cont(new EF_Alt(e,t),-1)}function EF_Suspend(e,t){this.ndata=e;this.env=t}function I_sus(e,t){return cont(new EF_Suspend(e,t),0)}function EF_Spawn(e,t,n,r){this.ndata=e;this.env=t;this.notifyAsync=n;this.notifyVal=r}function EF_SpawnWaitFrame(e){this.waitarr=e;e.push(this)}function I_spawn(e,t){function a(){r=true}function f(e){if(n!==undefined)return;n=e;r=false;if(!o.length){if(n&&n.__oni_cfx&&(n.type!="t"||n.val instanceof Error)){setTimeout(function(){if(!s)n.mapToJS(true)},0)}}else while(o.length)cont(o.shift(),n)}var n,r,i,s=false;var o=[];var u={abort:function(){if(!r)return;l.quench();l.abort();r=false;n=new CFException("t",new StratumAborted,e[0],t.file);while(o.length)cont(o.shift(),n)},value:function(){if(!r){s=true;return n}return new EF_SpawnWaitFrame(o)},waitforValue:function(){return this.value()},running:function(){return r},waiting:function(){return o.length},toString:function(){return"[object Stratum]"}};var l=new EF_Spawn(e,t,a,f);cont(l,0);return u}function EF_Collapse(e,t){this.ndata=e;this.env=t}function I_collapse(e,t){return cont(new EF_Collapse(e,t),0)}function dummy(){}function QuasiProto(e){this.parts=e}var UNDEF;var token_oniE={};var CFETypes={r:"return",b:"break",c:"continue",blb:"blocklambda break"};CFException.prototype={__oni_cfx:true,toString:function(){if(this.type in CFETypes)return"Unexpected "+CFETypes[this.type]+" statement";else return"Uncaught internal SJS control flow exception ("+this.type+":: "+this.val+")"},mapToJS:function(e){if(this.type=="t"){if(e&&this.val.__oni_stack){var t=window.onerror;var n=false;var r=this.val.toString();if(t){n=t.call(window,r,"",0,0,this.val)}if(!n){if(console){if(console.error)console.error(r);else console.log(r)}}}else throw this.val}else if(!this.ef)throw new Error(this.toString());else throw this}};ReturnToParentContinuation.prototype={__oni_rtpc:true,execute:function(){return this.frame.cont(this.idx,this.val)}};exports.is_ef=is_ef;var EF_Proto={toString:function(){return"<suspended SJS>"},__oni_ef:true,wait:function(){return this},setChildFrame:function(e,t){if(this.child_frame&&this.child_frame.callstack){mergeCallstacks(e,this.child_frame)}this.async=true;this.child_frame=e;e.parent=this;e.parent_idx=t},quench:function(){if(this.child_frame)this.child_frame.quench()},abort:function(){this.aborted=true;if(!this.child_frame){return this}else return this.child_frame.abort()},returnToParent:function(e){if(e&&e.__oni_cfx&&e.type=="t"&&this.callstack&&e.val.__oni_stack){e.val.__oni_stack=e.val.__oni_stack.concat(this.callstack)}if(this.swallow_r){if(e&&e.__oni_cfx){if(e.type=="r"){if(!e.ef||e.ef==this)e=e.val}}else if(is_ef(e))e.swallow_r=this.swallow_r;else if(this.swallow_r!==2)e=UNDEF}this.unreturnable=true;if(this.async){if(this.parent){return new ReturnToParentContinuation(this.parent,this.parent_idx,e)}else if(e&&e.__oni_cfx){e.mapToJS(true)}}else return e}};var token_dis={};exports.ex=execIN;exports.exseq=function(e,t,n,r){var i=I_seq(r,new Env(e,t,n));if(i&&i.__oni_cfx)return i.mapToJS();return i};exports.exbl=function(e,t){var n=I_seq(t,e);if(n&&n.__oni_cfx)return n.mapToJS();return n};var StratumAborted=exports.StratumAborted=function(){};StratumAborted.prototype=new Error("stratum aborted");exports.C=function(e,t){return{exec:I_call,ndata:[e,t],__oni_dis:token_dis}};exports.Nb=function(e,t){return{exec:I_nblock,ndata:[e,t],__oni_dis:token_dis}};exports.Bl=function(e){return{exec:I_blocklambda,ndata:e,__oni_dis:token_dis}};setEFProto(EF_Seq.prototype={});EF_Seq.prototype.cont=function(e,t){if(is_ef(t)){this.setChildFrame(t,e)}else{if(t&&t.__oni_cfx){if(t.type=="blb"&&t.ef==this.env.blscope){t=UNDEF}else{return this.returnToParent(t)}}while(e<this.ndata.length){if(this.sc&&e>1){if(this.sc==2){if(t)break}else{if(!t)break}}this.child_frame=null;t=execIN(this.ndata[e],this.env);if(this.aborted){if(is_ef(t)){t.quench();t=t.abort();return this.returnToParent(t)}}if(++e==this.ndata.length&&this.tailcall){break}if(t&&t.__oni_cfx){if(t.type==="blb"&&t.ef===this.env.blscope)t=undefined;break}else if(is_ef(t)){this.setChildFrame(t,e);return this}}return this.returnToParent(t)}};exports.Seq=function(){return{exec:I_seq,ndata:arguments,__oni_dis:token_dis}};setEFProto(EF_Sc.prototype={});EF_Sc.prototype.cont=function(e,t){if(is_ef(t)){this.setChildFrame(t,e)}else if(t&&t.__oni_cfx){return this.returnToParent(t)}else{this.child_frame=null;if(e==1){this.pars.push(t)}var n;while(this.i<this.ndata.length){n=execIN(this.ndata[this.i],this.env);if(this.aborted){if(is_ef(n)){n.quench();n=n.abort();return this.returnToParent(n)}}++this.i;if(n&&n.__oni_cfx)return this.returnToParent(n);if(is_ef(n)){this.setChildFrame(n,1);return this}this.pars.push(n)}this.child_frame=null;try{n=this.ndata[1].apply(this.env,this.pars)}catch(r){n=new CFException("t",r,this.ndata[0],this.env.file)}return this.returnToParent(n)}};exports.Sc=function(){return{exec:I_sc,ndata:arguments,__oni_dis:token_dis}};setEFProto(EF_Fcall.prototype={});EF_Fcall.prototype.cont=function(idx,val){if(is_ef(val)){this.setChildFrame(val,idx)}else if(val&&val.__oni_cfx){return this.returnToParent(val)}else if(idx==2){return this.returnToParent(this.o)}else{if(idx==1){if(this.i==3)this.l=val;else this.pars.push(val)}var rv;while(this.i<this.ndata.length){rv=execIN(this.ndata[this.i],this.env);if(this.aborted){if(is_ef(rv)){rv.quench();rv=rv.abort();return this.returnToParent(rv)}}++this.i;if(rv&&rv.__oni_cfx)return this.returnToParent(rv);if(is_ef(rv)){this.child_frame=null;this.setChildFrame(rv,1);return this}if(this.i==3)this.l=rv;else this.pars.push(rv)}this.child_frame=null;try{switch(this.ndata[0]){case 0:if(typeof this.l=="function"){rv=this.l.apply(null,this.pars)}else if(!testIsFunction(this.l)){rv=new CFException("t",new Error("'"+this.l+"' is not a function"),this.ndata[1],this.env.file)}else{var command="this.l(";for(var i=0;i<this.pars.length;++i){if(i)command+=",";command+="this.pars["+i+"]"}command+=")";rv=eval(command)}break;case 1:if(typeof this.l[0]==="undefined"){rv=new CFException("t",new Error("'"+this.l[1]+"' on '"+this.l[0]+"' is not a function"),this.ndata[1],this.env.file)}else if(typeof this.l[0][this.l[1]]=="function"){rv=this.l[0][this.l[1]].apply(this.l[0],this.pars)}else if(UA!=="msie"&&!testIsFunction(this.l[0][this.l[1]])){rv=new CFException("t",new Error("'"+this.l[0][this.l[1]]+"' is not a function"),this.ndata[1],this.env.file)}else{var command="this.l[0][this.l[1]](";for(var i=0;i<this.pars.length;++i){if(i)command+=",";command+="this.pars["+i+"]"}command+=")";rv=eval(command)}break;case 2:var ctor=this.l;if(ctor&&(/\{\s*\[native code\]\s*\}\s*$/.test(ctor.toString())||ctor.apply==undefined)){var pars=this.pars;var command="new ctor(";for(var i=0;i<pars.length;++i){if(i)command+=",";command+="pars["+i+"]"}command+=")";rv=eval(command)}else if(!testIsFunction(ctor)){rv=new CFException("t",new Error("'"+ctor+"' is not a function"),this.ndata[1],this.env.file)}else{var f=function(){};f.prototype=ctor.prototype;this.o=new f;rv=ctor.apply(this.o,this.pars);if(is_ef(rv)){this.setChildFrame(rv,2);return this}else{if(!rv||"object function".indexOf(typeof rv)==-1)rv=this.o}}break;default:rv=new CFException("i","Invalid Fcall mode")}}catch(e){if(e&&e.__oni_cfx){if(e.type=="blb"&&e.ef==this.env.blscope){rv=UNDEF}else rv=e}else rv=new CFException("t",e,this.ndata[1],this.env.file)}if(is_ef(rv)){if(this.aborted){rv=rv.abort();return this.returnToParent(rv)}if(!rv.callstack)rv.callstack=[];rv.callstack.push([this.env.file,this.ndata[1]])}return this.returnToParent(rv)}};exports.Fcall=function(){return{exec:I_fcall,ndata:arguments,__oni_dis:token_dis}};setEFProto(EF_If.prototype={});EF_If.prototype.cont=function(e,t){switch(e){case 0:t=execIN(this.ndata[0],this.env);if(this.aborted){if(is_ef(t)){t.quench();t=t.abort();return this.returnToParent(t)}};case 1:if(t&&t.__oni_cfx)break;if(is_ef(t)){this.setChildFrame(t,1);return this}if(t)t=execIN(this.ndata[1],this.env);else t=execIN(this.ndata[2],this.env);break;default:t=new CFException("i","invalid state in EF_If")}return this.returnToParent(t)};exports.If=function(e,t,n){return{exec:I_if,ndata:[e,t,n],__oni_dis:token_dis}};var Default={};exports.Default=Default;setEFProto(EF_Switch.prototype={});EF_Switch.prototype.cont=function(e,t){switch(this.phase){case 0:if(e==0){t=execIN(this.ndata[0],this.env);if(this.aborted){if(is_ef(t)){t.quench();t=t.abort();return this.returnToParent(t)}}}if(t&&t.__oni_cfx)return this.returnToParent(t);if(is_ef(t)){this.setChildFrame(t,1);return this}this.phase=1;this.testval=t;e=-1;case 1:while(true){if(e>-1){if(t&&t.__oni_cfx)return this.returnToParent(t);if(is_ef(t)){this.setChildFrame(t,e);return this}else if(t==Default||t==this.testval)break}if(++e>=this.ndata[1].length)return this.returnToParent(null);this.child_frame=null;t=execIN(this.ndata[1][e][0],this.env);if(this.aborted){if(is_ef(t)){t.quench();t=t.abort();return this.returnToParent(t)}}}this.phase=2;t=0;case 2:while(true){if(is_ef(t)){this.setChildFrame(t,e);return this}if(t&&t.__oni_cfx){if(t.type=="b"){t=t.val}return this.returnToParent(t)}if(e>=this.ndata[1].length){return this.returnToParent(t)}this.child_frame=null;t=execIN(this.ndata[1][e][1],this.env);if(this.aborted){if(is_ef(t)){t.quench();t=t.abort();return this.returnToParent(t)}}++e};default:throw new Error("Invalid phase in Switch SJS node")}};exports.Switch=function(e,t){return{exec:I_switch,ndata:[e,t],__oni_dis:token_dis}};setEFProto(EF_Try.prototype={});EF_Try.prototype.cont=function(e,t){if(is_ef(t)){this.setChildFrame(t,this.state)}else{switch(this.state){case 0:this.state=1;t=execIN(this.ndata[1],this.env);if(is_ef(t)){this.setChildFrame(t);return this};case 1:this.state=2;if(!this.aborted&&this.ndata[2]&&(t&&t.__oni_cfx&&t.type=="t"||this.ndata[0]&1)){var n;if(this.ndata[0]&1){n=t&&t.__oni_cfx?[t.val,true]:[t,false]}else n=t.val;t=this.ndata[2](this.env,n);if(this.aborted&&is_ef(t)){t=t.abort()}if(!this.NDATA_TRY_RETRACT_BLOCK&&!this.ndata[3])return this.returnToParent(t);if(is_ef(t)){this.child_frame=null;this.setChildFrame(t);return this}};case 2:this.state=3;this.rv=t;if(this.aborted&&this.ndata[4]){t=execIN(this.ndata[4],this.env);if(is_ef(t)){this.child_frame=null;this.setChildFrame(t);return this}};case 3:this.state=4;if(this.ndata[3]){t=execIN(this.ndata[3],this.env);if(is_ef(t)){this.child_frame=null;this.setChildFrame(t);return this}};case 4:if(this.rv&&this.rv.__oni_cfx&&!(t&&t.__oni_cfx)){t=this.rv}break;default:t=new CFException("i","invalid state in CF_Try")}return this.returnToParent(t)}};EF_Try.prototype.quench=function(){if(this.state!==4)this.child_frame.quench()};EF_Try.prototype.abort=function(){this.aborted=true;if(this.state!==4){var e=this.child_frame.abort();if(is_ef(e)){this.setChildFrame(e)}else{this.parent=UNDEF;if(cont(this,0)!==this){return}}}return this};exports.Try=function(){return{exec:I_try,ndata:arguments,__oni_dis:token_dis}};setEFProto(EF_Loop.prototype={});EF_Loop.prototype.cont=function(e,t){if(is_ef(t)){this.setChildFrame(t,e)}else{while(true){if(e==0){if(t&&t.__oni_cfx){return this.returnToParent(t)}t=execIN(this.ndata[1],this.env);if(this.aborted){if(is_ef(t)){t.quench();t=t.abort();return this.returnToParent(t)}}if(is_ef(t)){this.child_frame=null;this.setChildFrame(t,2);return this}e=2}if(e>1){if(e==2){if(!t||t&&t.__oni_cfx){return this.returnToParent(t)}}while(1){if(e>2){if(t&&t.__oni_cfx){if(t.type=="blb"&&t.ef==this.env.blscope){t=UNDEF}else{if(t.type=="b"){t=UNDEF}else if(t.type=="c"){t=UNDEF;break}return this.returnToParent(t)}}if(e>=this.ndata.length)break}this.child_frame=null;t=execIN(this.ndata[e+1],this.env);if(this.aborted){if(is_ef(t)){t.quench();t=t.abort();return this.returnToParent(t)}}++e;if(is_ef(t)){this.setChildFrame(t,e);return this}}e=1}if(this.ndata[2]){t=execIN(this.ndata[2],this.env);if(this.aborted){if(is_ef(t)){t.quench();t=t.abort();return this.returnToParent(t)}}if(is_ef(t)){this.child_frame=null;this.setChildFrame(t,0);return this}}e=0}}};exports.Loop=function(){return{exec:I_loop,ndata:arguments,__oni_dis:token_dis}};setEFProto(EF_ForIn.prototype={});EF_ForIn.prototype.cont=function(e,t){if(is_ef(t)){this.setChildFrame(t,e)}else{if(e==0){t=execIN(this.ndata[0],this.env);if(this.aborted){if(is_ef(t)){t.quench();t=t.abort();return this.returnToParent(t)}}if(is_ef(t)){this.child_frame=null;this.setChildFrame(t,1);return this}e=1}if(e==1){if(t&&t.__oni_cfx)return this.returnToParent(t);for(var n in t){if(typeof this.remainingX==="undefined"){t=this.ndata[1](this.env,n);if(t&&t.__oni_cfx){if(t.type=="b"){t=UNDEF}else if(t.type=="c"){t=UNDEF;continue}return this.returnToParent(t)}if(is_ef(t))this.remainingX=[]}else this.remainingX.push(n)}if(is_ef(t)){if(!this.remainingX)this.remainingX=[];this.child_frame=null;this.setChildFrame(t,2);return this}return this.returnToParent(t)}if(e==2){while(1){if(t&&t.__oni_cfx){if(t.type=="b"){t=UNDEF}else if(t.type=="c"){t=UNDEF;if(this.remainingX.length)continue}return this.returnToParent(t)}if(is_ef(t)){this.child_frame=null;this.setChildFrame(t,2);return this}if(!this.remainingX.length){return this.returnToParent(t)}t=this.ndata[1](this.env,this.remainingX.shift())}}}};exports.ForIn=function(e,t){return{exec:I_forin,ndata:[e,t],__oni_dis:token_dis}};setEFProto(EF_Par.prototype={});EF_Par.prototype.cont=function(e,t){if(is_ef(t)){this.setChildFrame(t,e)}else{if(e==-1){for(var n=0;n<this.ndata.length;++n){t=execIN(this.ndata[n],this.env);if(this.aborted){if(is_ef(t)){++this.pending;this.setChildFrame(t,n);this.quench();return this.abortInner()}return this.pendingCFE}else if(is_ef(t)){++this.pending;this.setChildFrame(t,n)}else if(t&&t.__oni_cfx){this.pendingCFE=t;this.quench();return this.abortInner()}}}else{--this.pending;this.children[e]=UNDEF;if(t&&t.__oni_cfx&&!this.aborted&&!(t.type==="blb"&&t.ef===this.env.blscope)){this.pendingCFE=t;this.quench();return this.returnToParent(this.abortInner())}}if(this.pending<2){if(!this.pendingCFE){if(this.pending==0)return this.returnToParent(t);for(var n=0;n<this.children.length;++n)if(this.children[n])return this.returnToParent(this.children[n]);return this.returnToParent(new CFException("i","invalid state in Par"))}else{if(this.pending==0)return this.returnToParent(this.pendingCFE)}}this.async=true;return this}};EF_Par.prototype.quench=function(){if(this.aborted)return;for(var e=0;e<this.children.length;++e){if(this.children[e])this.children[e].quench()}};EF_Par.prototype.abort=function(){this.parent=UNDEF;if(this.aborted){this.pendingCFE=UNDEF;return this}return this.abortInner()};EF_Par.prototype.abortInner=function(){this.aborted=true;for(var e=0;e<this.children.length;++e)if(this.children[e]){var t=this.children[e].abort();if(is_ef(t))this.setChildFrame(t,e);else{--this.pending;this.children[e]=UNDEF}}if(!this.pending)return this.pendingCFE;this.async=true;return this};EF_Par.prototype.setChildFrame=function(e,t){if(this.children[t]&&this.children[t].callstack){mergeCallstacks(e,this.children[t])}this.children[t]=e;e.parent=this;e.parent_idx=t};exports.Par=function(){return{exec:I_par,ndata:arguments,__oni_dis:token_dis}};setEFProto(EF_Alt.prototype={});EF_Alt.prototype.cont=function(e,t){if(is_ef(t)){this.setChildFrame(t,e)}else{if(e==-1){for(var n=0;n<this.ndata.length;++n){var r=copyEnv(this.env);r.fold=this;r.branch=n;t=execIN(this.ndata[n],r);if(this.aborted){if(is_ef(t)){++this.pending;this.setChildFrame(t,n);this.quench();return this.abortInner()}return this.pendingRV}else if(is_ef(t)){++this.pending;this.setChildFrame(t,n)}else{this.pendingRV=t;this.quench();return this.abortInner()}}}else{--this.pending;this.children[e]=UNDEF;if(this.collapsing){if(this.pending==1){var i=this.collapsing.cf;this.collapsing=UNDEF;cont(i,1)}return}else{if(!this.aborted){this.pendingRV=t;this.quench();return this.returnToParent(this.abortInner())}if(this.pending==0)return this.returnToParent(this.pendingRV)}}this.async=true;return this}};EF_Alt.prototype.quench=function(e){if(this.aborted)return;if(this.collapsing){this.children[this.collapsing.branch].quench()}else{for(var t=0;t<this.children.length;++t){if(t!==e&&this.children[t])this.children[t].quench()}}};EF_Alt.prototype.abort=function(){this.parent=UNDEF;if(this.aborted){this.pendingRV=UNDEF;return this}return this.abortInner()};EF_Alt.prototype.abortInner=function(){this.aborted=true;if(this.collapsing){var e=this.collapsing.branch;this.collapsing=UNDEF;var t=this.children[e].abort();if(is_ef(t))this.setChildFrame(t,e);else{--this.pending;this.children[e]=UNDEF}}else{for(var n=0;n<this.children.length;++n)if(this.children[n]){var t=this.children[n].abort();if(is_ef(t))this.setChildFrame(t,n);else{--this.pending;this.children[n]=UNDEF}}}if(!this.pending)return this.pendingRV;this.async=true;return this};EF_Alt.prototype.setChildFrame=function(e,t){if(this.children[t]&&this.children[t].callstack){mergeCallstacks(e,this.children[t])}this.children[t]=e;e.parent=this;e.parent_idx=t};EF_Alt.prototype.docollapse=function(e,t){this.quench(e);for(var n=0;n<this.children.length;++n){if(n==e)continue;if(this.children[n]){var r=this.children[n].abort();if(is_ef(r))this.setChildFrame(r,n);else{--this.pending;this.children[n]=UNDEF}}}if(this.pending<=1)return true;this.collapsing={branch:e,cf:t};return false};exports.Alt=function(){return{exec:I_alt,ndata:arguments,__oni_dis:token_dis}};setEFProto(EF_Suspend.prototype={});EF_Suspend.prototype.cont=function(e,t){if(is_ef(t)){this.setChildFrame(t,e)}else{switch(e){case 0:try{var n=this;var r=function(){try{cont(n,2,arguments)}catch(e){var t=function(){throw e};setTimeout(t,0)}};t=this.ndata[0](this.env,r)}catch(i){t=new CFException("t",i)}if(this.returning){if(is_ef(t)){this.setChildFrame(t,null);this.quench();t=this.abort();if(is_ef(t)){this.setChildFrame(t,3);this.async=true;return this}}return cont(this,3,null)}if(is_ef(t)){this.setChildFrame(t,1);return this};case 1:if(t&&t.__oni_cfx){this.returning=true;break}this.suspendCompleted=true;this.async=true;return this;case 2:if(this.returning){return}this.returning=true;if(t&&t.__oni_cfx){t=new CFException("i","Suspend: Resume function threw ("+t.toString()+")");break}this.retvals=t;if(!this.suspendCompleted){if(!this.child_frame){this.returning=true;return}else{this.quench();t=this.abort();if(is_ef(t)){this.setChildFrame(t,3);return this}}};case 3:try{this.ndata[1].apply(this.env,this.retvals);t=UNDEF}catch(i){t=new CFException("i","Suspend: Return function threw ("+i+")")}break;default:t=new CFException("i","Invalid state in Suspend ("+e+")")}return this.returnToParent(t)}};EF_Suspend.prototype.quench=function(){this.returning=true;if(!this.suspendCompleted)this.child_frame.quench()};EF_Suspend.prototype.abort=function(){this.returning=true;if(!this.suspendCompleted)return this.child_frame.abort()};exports.Suspend=function(e,t){return{exec:I_sus,ndata:[e,t],__oni_dis:token_dis}};setEFProto(EF_Spawn.prototype={});EF_Spawn.prototype.cont=function(e,t){if(e==0)t=execIN(this.ndata[1],this.env);if(is_ef(t)){this.setChildFrame(t,1);if(e==0)this.notifyAsync()}else{this.notifyVal(t)}};EF_Spawn.prototype.abort=function(){this.aborted=true;if(this.child_frame){var e=this.child_frame.abort();if(is_ef(e)){this.notifyAsync();this.setChildFrame(e,1)}}};setEFProto(EF_SpawnWaitFrame.prototype={});EF_SpawnWaitFrame.prototype.quench=function(){};EF_SpawnWaitFrame.prototype.abort=function(){var e=this.waitarr.indexOf(this);this.waitarr.splice(e,1)};EF_SpawnWaitFrame.prototype.cont=function(e){if(this.parent)cont(this.parent,this.parent_idx,e)};exports.Spawn=function(e,t){return{exec:I_spawn,ndata:[e,t],__oni_dis:token_dis}};setEFProto(EF_Collapse.prototype={});EF_Collapse.prototype.__oni_collapse=true;EF_Collapse.prototype.cont=function(e,t){if(e==0){var n=this.env.fold;if(!n)return new CFException("t",new Error("Unexpected collapse statement"),this.ndata,this.env.file);if(n.docollapse(this.env.branch,this))return true;this.async=true;return this}else if(e==1)return this.returnToParent(true);else return this.returnToParent(new CFException("t","Internal error in SJS runtime (collapse)",this.ndata,this.env.file))};EF_Collapse.prototype.quench=function(){};EF_Collapse.prototype.abort=function(){};exports.Collapse=function(e){return{exec:I_collapse,ndata:e,__oni_dis:token_dis}};exports.G=window;var hold0,clear0;if(exports.G.setImmediate){hold0=exports.G.setImmediate;clear0=exports.G.clearImmediate}else if(exports.G.postMessage&&!exports.G.importScripts){var postMessageIsAsync=true;var oldOnMessage=exports.G.onmessage;exports.G.onmessage=function(){postMessageIsAsync=false};exports.G.postMessage("","*");exports.G.onmessage=oldOnMessage;if(postMessageIsAsync){var MESSAGE_PREFIX="com.onilabs.hold0"+Math.random();var tasks={};function isStringAndStartsWith(e,t){return typeof e==="string"&&e.substring(0,t.length)===t}function onGlobalMessage(e){if(e.source===exports.G&&isStringAndStartsWith(e.data,MESSAGE_PREFIX)){var t=e.data.substring(MESSAGE_PREFIX.length);var n;if(n=tasks[t]){delete tasks[t];n()}}}if(exports.G.addEventListener){exports.G.addEventListener("message",onGlobalMessage,false)}else{exports.G.attachEvent("onmessage",onGlobalMessage)}var id_counter=1;var hold0=function(e){var t=id_counter++;tasks[t]=e;exports.G.postMessage(MESSAGE_PREFIX+t,"*");return t};var clear0=function(e){delete tasks[e]}}}if(!hold0){hold0=function(e){return setTimeout(e,0)};clear0=clearTimeout}exports.Hold=function(e){if(e===UNDEF)return{__oni_ef:true,wait:function(){return this},quench:dummy,abort:dummy};if(e===0){var t={__oni_ef:true,wait:function(){return this},abort:dummy,quench:function(){t=null;clear0(this.co)},co:hold0(function(){if(t&&t.parent)cont(t.parent,t.parent_idx,UNDEF)})};return t}else{var t={__oni_ef:true,wait:function(){return this},abort:dummy,quench:function(){t=null;clearTimeout(this.co)}};t.co=setTimeout(function(){if(t&&t.parent)cont(t.parent,t.parent_idx,UNDEF)},e);return t}};exports.Throw=function(e,t,n){return new CFException("t",e,t,n)};exports.Arr=function(){return Array.prototype.slice.call(arguments,0)};exports.Obj=function(){var e=new Object;for(var t=0;t<arguments[0].length;++t)e[arguments[0][t]]=arguments[t+1];return e};exports.QuasiProto=QuasiProto;exports.Quasi=function(){return new QuasiProto(Array.prototype.slice.call(arguments,0))};exports.Return=function(e){return new CFException("r",e)};exports.Break=function(e){return new CFException("b",e)};exports.Cont=function(e){return new CFException("c",e)};exports.BlBreak=function(e,t){var n=new CFException("blb",t);if(!e.blbref)throw new Error("Internal runtime error; no reference frame in BlBreak");if(e.blbref.unreturnable&&!e.blbref.toplevel)throw new Error("Blocklambda break to inactive scope");n.ef=e.blbref;return n};exports.BlReturn=function(e){var t=new CFException("r",e);if(!this.blrref)throw new Error("Internal runtime error; no reference frame in BlReturn");if(this.blrref.unreturnable){if(this.blrref.toplevel)throw new Error("Invalid blocklambda 'return' statement; 'return' is only allowed in blocklambdas that are nested in functions");else{throw new Error("Blocklambda return to inactive function")}}t.ef=this.blrref;return t};exports.With=function(e,t){return t(this,e)};exports.join_str=function(){var e="";for(var t=0,n=arguments.length;t<n;++t)e+=arguments[t];return e};exports.infix={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"<<":function(e,t){return e<<t},">>":function(e,t){return e>>t},">>>":function(e,t){return e>>>t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"===":function(e,t){return e===t},"!==":function(e,t){return e!==t},"&":function(e,t){return e&t},"^":function(e,t){return e^t},"|":function(e,t){return e|t},",":function(e,t){return e,t},"instanceof":function(e,t){return e instanceof t},"in":function(e,t){return e in t}};var UA=navigator.userAgent.toLowerCase();if(UA.indexOf(" chrome/")>=0)UA="chrome";else if(UA.indexOf(" firefox/")>=0)UA="firefox";else if(UA.indexOf(" safari/")>=0)UA="safari";else if(UA.indexOf(" msie ")>=0)UA="msie";else UA="unknown";exports.hostenv="xbrowser";exports.UA=UA;exports.modules={};exports.modsrc={}})(__oni_rt);(function(e){function t(e,t){e.decl_scopes.push({vars:[],funs:"",fscoped_ctx:0,bl:t,continue_scope:0,break_scope:0});if(t){var n=e.decl_scopes[e.decl_scopes.length-2];n.notail=true}}function n(e){var t="";if(e.vars.length)t+="var "+e.vars.join(",")+";";t+=e.funs;return t}function r(e){return e.decl_scopes[e.decl_scopes.length-1]}function i(e){e.stmt_scopes.push({seq:[]})}function s(e,t,n){var r=e.stmt_scopes.pop().seq;var i="";if(r.length){if(e.js_ctx==0){if(t)i+=t;for(var s=0;s<r.length;++s){var o=r[s].v();if(o.length){if(s||t)i+=",";i+=o}}if(n)i+=n}else{for(var s=0;s<r.length;++s)i+=r[s].nb()}}return i}function o(e){return e.stmt_scopes[e.stmt_scopes.length-1]}function u(e){switch(e.mode){case"debug":e.allow_nblock=false;e.full_nblock=false;break;case"optimize":e.allow_nblock=true;e.full_nblock=true;break;case"normal":default:e.allow_nblock=true;e.full_nblock=false}if(typeof e.scopes!=="undefined")throw new Error("Internal parser error: Nested script");e.decl_scopes=[];e.stmt_scopes=[];e.js_ctx=0;t(e);i(e)}function a(e,t){if(e==C)return;if(e.is_compound_stmt){for(var n=0;n<e.stmts.length;++n)a(e.stmts[n],t);return}else if(e.is_var_decl){e.collect_var_decls(r(t).vars);if(e.is_empty)return}else if(e.is_fun_decl){r(t).funs+=e.fun_decl();return}var i=o(t).seq;if(e.is_nblock&&t.js_ctx==0){var s=i.length?i[i.length-1]:null;if(!s||!s.is_nblock_seq){s=new y(t);i.push(s)}s.pushStmt(e)}else i.push(e)}function f(e){var t=e.decl_scopes.pop();var r=n(t)+s(e,(e.globalReturn?"return ":"")+"__oni_rt.exseq(this.arguments,this,"+e.filename+",["+(16|8),"])");return r}function l(e){switch(o(e).seq.length){case 1:var t=e.stmt_scopes.pop().seq[0];t.is_var_decl=false;return t;case 0:e.stmt_scopes.pop();return C;default:return new p(s(e))}}function c(e,t,n){var r="__oni_rt.Nb(function(){";if(t)r+="return ";return r+e+"},"+(n||0)+")"}function h(){}function p(e){this.seq=e}function d(e,t){this.exp=e;this.clauses=t}function v(e,t,n,r,i){this.is_nblock=r.allow_nblock;if(i&&r.js_ctx)n="return "+n;this.code="function "+e+X(t)+n+"}"}function m(e,t,n,i){if(r(i).fscoped_ctx){return S([[new K(e,i),new v("",t,n,i)]],i)}else return new g(e,t,n,i)}function g(e,t,n,r){this.code="function "+e+X(t)+n+"}"}function y(){this.stmts=[]}function b(e){this.stmts=[];this.pctx=e}function w(e,t){this.exp=e;this.line=this.exp.line;this.is_nblock=e.is_nblock}function E(e,t){var n=new b(t);for(var r=0;r<e.length;++r)n.stmts.push(new x(e[r],t));return n}function S(e,t){return E(e,t).toBlock()}function x(e,t){this.d=e;if(!this.d[0].is_id)this.is_dest=true;this.is_empty=this.d.length<2;this.pctx=t;this.line=t.line;if(!this.is_empty)this.is_nblock=t.allow_nblock&&e[1].is_nblock&&!this.is_dest}function T(e,t,n,r){this.t=e;this.c=t;this.a=n;this.line=e.line;this.file=r.filename;this.is_nblock=r.full_nblock&&e.is_nblock&&t.is_nblock&&(!n||n.is_nblock)}function N(e,t,n){this.block=e;this.crf=t;this.file=n.filename}function k(e,t){this.exp=e;this.line=e.line;this.file=t.filename;this.is_nblock=t.full_nblock&&e.is_nblock}function L(e,t){this.line=t.line;this.exp=e}function A(e,t){this.line=t.line-t.newline;this.exp=e;this.js_ctx=t.js_ctx;this.is_nblock=t.allow_nblock&&(e?e.is_nblock:true)}function O(e){this.line=e.line}function M(e,t,n){this.f=e;this.lbl=n;this.is_nblock=true;this.js_ctx=t.js_ctx}function _(e,t){this.line=e.line;this.lbl=t;this.is_nblock=true}function D(e,t,n,r,i,s){var o;if(e||t){if(t)o=E(t,s);else o=new b(s);if(e)o.stmts.push(new w(e,s));o.stmts.push(new P(0,n,i,r));o=o.toBlock()}else o=new P(0,n,i,r);return o}function P(e,t,n,r){this.init_state=e;this.test_exp=t;this.inc_exp=r;this.body=n}function H(e,t,n,r,i){var s;if(t){s=E([t],i);s.stmts.push(new B(t[0],n,r,i));s=s.toBlock()}else s=new B(e,n,r,i);return s}function B(e,t,n,r){this.lhs=e;this.obj=t;this.body=n;this.pctx=r}function j(e,t,n){this.exp=e;this.body=t;this.line=this.exp.line;this.file=n.filename;this.is_nblock=n.allow_nblock&&e.is_nblock&&t.is_nblock}function F(e,t,n){this.value=e;this.line=t.line}function I(e,t,n,r){this.left=e;this.id=t;this.right=n;this.line=r.line;this.is_nblock=r.allow_nblock&&e.is_nblock&&n.is_nblock}function q(e,t){this.is_nblock=t.allow_nblock;this.line=t.line;this.parts=e;for(var n=0,r=e.length;n<r;++n){if(Array.isArray(e[n])&&!e[n][0].is_nblock){this.is_nblock=false;break}}}function R(e,t){this.parts=e;this.line=t.line;this.is_nblock=false}function U(e,t,n,r){if(!e.is_ref&&!e.is_id){this.is_dest=true;if(t!="=")throw new Error("Invalid operator in destructuring assignment")}this.left=e;this.id=t;this.right=n;this.line=r.line;this.is_nblock=r.allow_nblock&&e.is_nblock&&n.is_nblock&&!this.is_dest}function z(e,t,n){this.id=e;this.right=t;this.line=n.line;this.is_nblock=n.allow_nblock&&t.is_nblock&&e!="spawn"}function W(e,t,n){if(!e.is_ref&&!e.is_id)throw new Error("Invalid argument for postfix op '"+t+"'");this.left=e;this.id=t;this.line=n.line;this.is_nblock=n.allow_nblock&&e.is_nblock}function X(e){var t="";var n=true;var r=[];if(!e.length)return"(){";var i="";try{for(var s=0;s<e.length;++s){if(n&&!(e[s]instanceof K))n=false;e[s].collect_var_decls(r);i+=e[s].destruct("arguments["+s+"]")}if(n){return"("+r.join(",")+"){"}if(r.length){t+="var "+r.join(",")+";"}t+=i;return"(){"+t}catch(o){throw new Error("Invalid syntax in parameter list")}}function V(e,t,n,r){this.is_nblock=n.allow_nblock;this.js_ctx=n.js_ctx;this.line=n.line;this.bound=r;this.code="function";var i=[];if(e){if(e.collect_pars)e.collect_pars(i);else i.push(e)}this.code+=X(i);if(n.js_ctx){this.code+="return "+t.nb()+"}"}else{this.code+="return __oni_rt.exseq(arguments,this,"+n.filename+",["+(1+32)+","+t.v()+"])}"}}function $(e,t,n){if(t.is_fun_call){t.args.unshift(e);if(!t.is_nblock)t.nblock_form=false;return t}else return new Y(t,[e],n)}function J(e,t){if(e=="hold"){var n=new F("__oni_rt.Hold",t);n.is_id=true;return n}else if(e=="arguments"){return new Q("arguments","aobj",t)}return new K(e,t)}function K(e,t){this.name=e;this.line=t.line}function Q(e,t,n){this.js_ctx=n.js_ctx;this.line=n.line;this.name=e;this.ename=t}function G(e){for(var t=0;t<e.length;++t)if(!e[t].is_nblock)return false;return true}function Y(e,t,n){this.l=e;this.args=t;this.nblock_form=e.is_nblock&&G(t);this.line=n.line}function Z(e,t,n){this.l=e;this.name=t;this.line=n.line;this.is_nblock=n.allow_nblock&&e.is_nblock}function et(e,t,n){this.l=e;this.idxexp=t;this.line=n.line;this.is_nblock=n.allow_nblock&&e.is_nblock&&t.is_nblock}function tt(e,t){this.e=e;this.is_nblock=t.allow_nblock&&e.is_nblock}function nt(e,t){this.elements=e;this.line=t.line;this.is_nblock=t.allow_nblock&&G(e)}function rt(e,t){this.props=e;this.line=t.line;this.is_nblock=t.allow_nblock&&function(){for(var t=0;t<e.length;++t){if(!e[t][2].is_nblock)return false}return true}()}function it(e){if(e.charAt(0)=="'"||e.charAt(0)=='"')return e;return'"'+e+'"'}function st(e,t,n,r){this.t=e;this.c=t;this.a=n;this.line=e.line;this.is_nblock=r.allow_nblock&&e.is_nblock&&t.is_nblock&&(n===undefined||n.is_nblock)}function ot(e,t){this.exp=e;this.args=t;this.line=e.line}function ut(e,t,n,r){if(n[0]||n[1]||n[2])return new N(new at(e,t),n,r);else return new at(e,t)}function at(e,t){this.op=e;this.blocks=t}function ft(e,t,n,r,i){var s;if(e){s=E(t,i);s.stmts.push(lt(t,n,r,i));s=s.toBlock()}else s=lt(t,n,r,i);return s}function lt(e,t,n,r){var i=n[0]||n[1]||n[2];var s=new ct(e,t,i,r);if(i)s=new ht((new N(s,n,r)).v(),r);return s}function ct(e,t,n,r){this.decls=e;this.block=t;this.wrapped=n;this.file=r.filename}function ht(e,t){this.code=e;this.line=t.line;this.file=t.filename}function pt(e,t,n,r,i){var s;if(e){if(!t.is_id)throw new Error("Variable name expected in 'using' expression");s=E([[t]],i);s.stmts.push(new dt(t,n,r,i));s=s.toBlock()}else s=new dt(t,n,r,i);return s}function dt(e,t,n,r){this.line=r.line;this.body=n;this.assign1=new U(new K("_oniW",r),"=",t,r);if(e)this.assign2=new U(e,"=",new K("_oniW",r),r)}function vt(e,t,n){this.code="__oni_rt.Bl(function"+X(e)+t+"})"}function mt(e,t){this.lbl=e;this.stmt=t}function gt(){}function St(){}function xt(e,t){this.id=e;this.value=t}function Tt(e){if(e.charAt(0)==="@"){this.alternate=true;this.id="<@id>";this.value=e.substr(1)}else this.value=e}function Ct(e,t){var n=new St;n.id=e;if(t)n.tokenizer=t;Nt.put(e,n);return n}function kt(e,t){var n=e.id;if(n=="<@id>")return"@"+e.value;if(n=="<id>"||n=="<string>"||n=="<number>")return e.value;if(n=='"'){if((e=Xt(t)).id!="<string>"||Xt(t,undefined,wt).id!='istr-"')throw new Error("Non-literal strings can't be used as property names ("+e+")");return'"'+e.value+'"'}throw new Error("Invalid object literal syntax; property name expected, but saw "+e)}function Lt(e){i(e);while(e.token.id!="}"){var t=Ut(e);a(t,e)}Xt(e,"}");return l(e)}function At(e){t(e,true);i(e);while(e.token.id!="}"){var r=Ut(e);a(r,e);}Xt(e,"}");var o=e.decl_scopes.pop();var u=1+64;if(o.notail)u+=8;return n(o)+s(e,"return __oni_rt.exbl(this,["+u,"])")}function Ot(e,t){var n;if(e=="||"){n=[];Xt(t)}else{n=Dt(t,"|","|")}var r=At(t);return new vt(n,r,t)}function Mt(e,r){t(e);i(e);Xt(e,"{");while(e.token.id!="}"){var o=Ut(e);a(o,e)}Xt(e,"}");var u=e.decl_scopes.pop();var f=1;if(u.notail)f+=8;if(r)f+=32;return n(u)+s(e,"return __oni_rt.exseq(arguments,this,"+e.filename+",["+f,"])")}function _t(e){var t=e.token;Xt(e);var n=t.exsf(e);while(e.token.id!="|"&&e.token.excbp>110){t=e.token;Xt(e);n=t.excf(n,e)}return n}function Dt(e,t,n){if(!t){t="(";n=")"}var r=[];Xt(e,t);while(e.token.id!=n){if(r.length)Xt(e,",");switch(e.token.id){case"{":case"[":r.push(_t(e));break;case"<id>":r.push(e.token.exsf(e));Xt(e);break;default:throw new Error("Expected function parameter but found '"+e.token+"'")}token=e.token}Xt(e,n);return r}function Pt(e){var t=Xt(e);if(e.token.id!=="<id>"&&e.token.id!=="<@id>")throw new Error("Unexpected "+e.token+" in quasi template");if(e.src.charAt(e.lastIndex)!="("){return t.exsf(e)}else{Xt(e);Xt(e,"(");var n=[];while(e.token.id!=")"){if(n.length)Xt(e,",");n.push(zt(e,110))}return new Y(t.exsf(e),n,e)}}function Ht(e){return e.id==";"||e.id=="}"||e.id=="<eof>"}function Bt(e){if(e.token.id!="}"&&e.token.id!="<eof>"&&!e.newline)Xt(e,";")}function jt(e,t){var n=[];var r=t?Wt:zt;do{if(n.length)Xt(e,",");var i=r(e,120);if(e.token.id=="="){Xt(e);var s=r(e,110);n.push([i,s])}else n.push([i])}while(e.token.id==",");return n}function Ft(e){var t=[];var n=null;if(e.token.id=="catch"||e.token.value=="catchall"){var r=e.token.value=="catchall";n=[];Xt(e);n.push(Xt(e,"(").value);Xt(e,"<id>");Xt(e,")");Xt(e,"{");n.push(Lt(e));n.push(r)}t.push(n);if(e.token.value=="retract"){Xt(e);Xt(e,"{");t.push(Lt(e))}else t.push(null);if(e.token.id=="finally"){Xt(e);Xt(e,"{");t.push(Lt(e))}else t.push(null);return t}function It(e,t){var n={src:e,line:1,lastIndex:0,token:null};if(t)for(var r in t)n[r]=t[r];return n}function qt(e,t){var n=It(e+"\n",t);try{return Rt(n)}catch(r){var i=r.mes||r;var s=r.line||n.line;var o=new Error("SJS syntax error "+(n.filename?"in "+n.filename+",":"at")+" line "+s+": "+i);o.compileError={message:i,line:s};throw o}}function Rt(e){u(e);Xt(e);while(e.token.id!="<eof>"){var t=Ut(e);a(t,e);}return f(e)}function Ut(e){var t=e.token;Xt(e);if(t.stmtf){return t.stmtf(e)}else if(t.id=="<id>"&&e.token.id==":"){Xt(e);var n=Ut(e);return new mt(t.value,n)}else{var r=zt(e,0,t);Bt(e);return new w(r,e)}}function zt(e,t,n){t=t||0;if(!n){n=e.token;Xt(e)}var r=n.exsf(e);while(t<e.token.excbp){n=e.token;if(e.newline&&n.asi_restricted)return r;Xt(e);r=n.excf(r,e)}return r}function Wt(e,t,n){t=t||0;if(!n){n=e.token;Xt(e)}var r=n.exsf(e);while(t<e.token.excbp&&e.token.id!="in"){n=e.token;if(e.newline&&n.asi_restricted)return r;Xt(e);r=n.excf(r,e)}return r}function Xt(e,t,n){if(!n){if(e.token)n=e.token.tokenizer;else n=yt}if(t&&(!e.token||e.token.id!=t))throw new Error("Unexpected "+e.token);e.token=null;e.newline=0;while(!e.token){n.lastIndex=e.lastIndex;var r=n.exec(e.src);if(!r){e.token=Nt.lookup("<eof>");break}e.lastIndex=n.lastIndex;if(n==yt){if(r[4]){e.token=Nt.lookup(r[4]);if(!e.token){e.token=new Tt(r[4])}}else if(r[1]){var i=r[1].match(/(?:\r\n|\n|\r)/g);if(i){e.line+=i.length;e.newline+=i.length}}else if(r[5])e.token=new xt("<string>",r[5]);else if(r[6]){var s=r[6];var i=s.match(/(?:\r\n|\n|\r)/g);e.line+=i.length;e.newline+=i.length;s=s.replace(/\\(?:\r\n|\n|\r)/g,"").replace(/(?:\r\n|\n|\r)/g,"\\n");e.token=new xt("<string>",s)}else if(r[2])e.token=new xt("<number>",r[2]);else if(r[3])e.token=new xt("<regex>",r[3]);else if(r[7])throw new Error("Unexpected characters: '"+r[7]+"'");else throw new Error("Internal scanner error")}else if(n==bt){if(r[2]){e.token=Nt.lookup(r[2]);if(!e.token){e.token=new Tt(r[2])}}else if(r[1]){var i=r[1].match(/(?:\r\n|\n|\r)/g);if(i){e.line+=i.length;e.newline+=i.length}}else{n=yt}}else if(n==wt){if(r[1])e.token=new xt("<string>",r[1]);else if(r[2]){++e.line;++e.newline}else if(r[3]){++e.line;++e.newline;e.token=new xt("<string>","\\n")}else if(r[4]){e.token=Nt.lookup("istr-"+r[4])}}else if(n==Et){if(r[1])e.token=new xt("<string>",r[1]);else if(r[2]){++e.line;++e.newline}else if(r[3]){++e.line;++e.newline;e.token=new xt("<string>","\\n")}else if(r[4]){e.token=Nt.lookup("quasi-"+r[4])}}else throw new Error("Internal scanner error: no tokenizer")}return e.token}h.prototype={is_nblock:false,v:function(e){if(this.is_nblock&&this.nblock_val)return c(this.nblock_val(),this.is_value,this.line);else return this.val(e)},nb:function(){if(this.nblock_val)return this.nblock_val();else throw new Error("Illegal statement in __js block")}};p.prototype=new h;p.prototype.nblock_val=function(){return this.seq};p.prototype.val=function(e){return this.seq.length?e?this.seq:"__oni_rt.Seq("+0+","+this.seq+")":"0"};d.prototype=new h;d.prototype.nblock_val=function(){var e="switch("+this.exp.nb()+"){";for(var t=0,n=this.clauses.length;t<n;++t){var r=this.clauses[t];e+=(r[0]?"case "+r[0].nb()+":":"default:")+r[1].nb()}return e+"}"};d.prototype.val=function(){var e="[";for(var t=0,n=this.clauses.length;t<n;++t){var r=this.clauses[t];if(t)e+=",";e+="["+(r[0]?r[0].v():"__oni_rt.Default")+","+r[1].v()+"]"}e+="]";return"__oni_rt.Switch("+this.exp.v()+","+e+")"};v.prototype=new h;v.prototype.v=function(){return this.code};v.prototype.nblock_val=function(){return this.code};g.prototype=new h;g.prototype.is_fun_decl=true;g.prototype.fun_decl=function(){return this.code};y.prototype=new h;y.prototype.is_nblock=true;y.prototype.is_nblock_seq=true;y.prototype.pushStmt=function(e){this.stmts.push(e);if(typeof this.line==="undefined")this.line=this.stmts[0].line};y.prototype.nblock_val=function(){var e="";for(var t=0;t<this.stmts.length-1;++t){e+=this.stmts[t].nb()}if(this.stmts[t].is_value)e+="return ";e+=this.stmts[t].nb();return e};b.prototype=new h;b.prototype.is_compound_stmt=true;b.prototype.toBlock=function(){i(this.pctx);a(this,this.pctx);return l(this.pctx)};w.prototype=new h;w.prototype.is_value=true;w.prototype.nblock_val=function(){return this.exp.nb()+";"};w.prototype.v=function(e){return this.exp.v(e)};x.prototype=new h;x.prototype.is_var_decl=true;x.prototype.collect_var_decls=function(e){try{this.d[0].collect_var_decls(e)}catch(t){throw new Error("Invalid syntax in variable declaration")}};x.prototype.nblock_val=function(){return this.d[0].name+"="+this.d[1].nb()+";"};x.prototype.val=function(){if(this.is_dest){return(new U(this.d[0],"=",this.d[1],this.pctx)).val()}else return"__oni_rt.Sc("+this.line+",function(_oniX){return "+this.d[0].name+"=_oniX;},"+this.d[1].v()+")"};T.prototype=new h;T.prototype.nblock_val=function(){var e="if("+this.t.nb()+"){"+this.c.nb()+"}";if(this.a)e+="else{"+this.a.nb()+"}";return e};T.prototype.val=function(){var e;var t=this.c.v();if(this.t.is_nblock){e="__oni_rt.Nb(function(){if("+this.t.nb()+")return __oni_rt.ex("+t+",this);";if(this.a)e+="else return __oni_rt.ex("+this.a.v()+",this);";return e+"},"+this.line+")"}else{e="__oni_rt.If("+this.t.v()+","+t;if(this.a)e+=","+this.a.v();return e+")"}};N.prototype=new h;N.prototype.nblock_val=function(){var e="try{"+this.block.nb()+"}";if(this.crf[0]){if(this.crf[0][2])throw new Error("catchall statement not allowed in __js block");e+="catch("+this.crf[0][0]+"){"+this.crf[0][1].nb()+"}"}if(this.crf[1])throw new Error("retract statement not allowed in __js block");if(this.crf[2])e+="finally{"+this.crf[2].nb()+"}";return e};N.prototype.val=function(){var e=this.block.v();var t="__oni_rt.Try("+(this.crf[0]&&this.crf[0][2]?1:0);t+=","+e;if(this.crf[0]){var n=this.crf[0][1].v();t+=",function(__oni_env,"+this.crf[0][0]+"){";if(n.length)t+="return __oni_rt.ex("+n+",__oni_env)";t+="}"}else t+=",0";if(this.crf[2]){var r=this.crf[2].v();t+=","+r}else t+=",0";if(this.crf[1]){var i=this.crf[1].v();t+=","+i}return t+")"};var C=new h;C.is_nblock=true;C.nblock_val=function(){return";"};C.v=function(){return"0"};k.prototype=new h;k.prototype.nblock_val=function(){return"throw "+this.exp.nb()+";"};k.prototype.val=function(){return"__oni_rt.Sc("+this.line+",__oni_rt.Throw,"+this.exp.v()+","+this.line+","+this.file+")"};L.prototype=new h;L.prototype.val=function(){var e=this.exp?","+this.exp.v():"";return"__oni_rt.Sc("+this.line+",__oni_rt.BlReturn"+e+")"};A.prototype=new h;A.prototype.nblock_val=function(){var e;if(this.js_ctx){e="return";if(this.exp)e+=" "+this.exp.nb();e+=";"}else{e="return __oni_rt.Return(";if(this.exp)e+=this.exp.nb();e+=");"}return e};A.prototype.val=function(){var e=this.exp?","+this.exp.v():"";return"__oni_rt.Sc("+this.line+",__oni_rt.Return"+e+")"};O.prototype=new h;O.prototype.val=function(){return"__oni_rt.Collapse("+this.line+")"};M.prototype=new h;M.prototype.nblock_val=function(){var e;if(this.js_ctx){e=this.f=="b"?"break":"continue";if(this.lbl)e+=" "+this.lbl;e+=";"}else{e="return __oni_rt."+(this.f=="b"?"Break":"Cont")+"(";if(this.lbl)e+="'"+this.lbl+"'";e+=");"}return e};_.prototype=new h;_.prototype.nblock_val=function(){if(this.js_ctx)throw new Error("Blocklamdas cannot contain 'break' statements in __js{...} contexts");var e="return __oni_rt.BlBreak(this";if(this.lbl)e+=",'"+this.lbl+"'";e+=");";return e};P.prototype=new h;P.prototype.nblock_val=function(){if(this.init_state==2){return"do{"+this.body.nb()+"}while("+this.test_exp.nb()+");"}else if(this.test_exp&&this.inc_exp){return"for(;"+this.test_exp.nb()+";"+this.inc_exp.nb()+"){"+this.body.nb()+"}"}else if(this.test_exp){return"while("+this.test_exp.nb()+"){"+this.body.nb()+"}"}else throw new Error("Can't encode this loop as __js yet")};P.prototype.val=function(){var e=this.test_exp?this.test_exp.v():"1";var t=this.body.v(true);return"__oni_rt.Loop("+this.init_state+","+e+","+(this.inc_exp?this.inc_exp.v():"0")+","+t+")"};B.prototype=new h;B.prototype.nblock_val=function(){return"for("+this.lhs.nb()+" in "+this.obj.nb()+"){"+this.body.nb()+"}"};B.prototype.val=function(){var e="__oni_rt.ForIn("+this.obj.v();e+=",function(__oni_env, _oniY) { return __oni_rt.ex(__oni_rt.Seq("+0+",";e+=(new U(this.lhs,"=",new K("_oniY",this.pctx),this.pctx)).v();if(this.body)e+=","+this.body.v();return e+"), __oni_env)})"};j.prototype=new h;j.prototype.nblock_val=function(){return"with("+this.exp.nb()+")"+this.body.nb()};j.prototype.val=function(){var e="__oni_rt.Sc("+this.line+",__oni_rt.With,"+this.exp.v()+",function(__oni_env,__oni_z){with(__oni_z) return __oni_rt.ex("+this.body.v()+",__oni_env)})";return e};F.prototype=new h;F.prototype.is_nblock=true;F.prototype.v=function(){return this.value};F.prototype.nblock_val=function(){return this.value};F.prototype.destruct=function(){if(this.value!="")throw new Error("invalid pattern");return""};F.prototype.collect_var_decls=function(){};I.prototype=new h;I.prototype.is_value=true;I.prototype.collect_pars=function(e){if(this.id!=",")throw new Error("invalid parameter list syntax");e.push(this.left);if(this.right.collect_pars)this.right.collect_pars(e);else e.push(this.right)};I.prototype.nblock_val=function(){return this.left.nb()+" "+this.id+" "+this.right.nb()};I.prototype.val=function(){if(this.is_nblock){return c(this.nb(),true,this.line)}else if(this.id=="||"){return"__oni_rt.Seq("+2+","+this.left.v()+","+this.right.v()+")"}else if(this.id=="&&"){return"__oni_rt.Seq("+4+","+this.left.v()+","+this.right.v()+")"}else return"__oni_rt.Sc("+this.line+",__oni_rt.infix['"+this.id+"'],"+this.left.v()+","+this.right.v()+")"};q.prototype=new h;q.prototype.is_value=true;q.prototype.nblock_val=function(){for(var e=0,t=this.parts.length;e<t;++e){var n=this.parts[e];if(Array.isArray(n)){this.parts[e]="("+n[0].nb()+")"}else{this.parts[e]='"'+n+'"'}}return"("+this.parts.join("+")+")"};q.prototype.val=function(){if(this.is_nblock)return c(this.nb(),true,this.line);for(var e=0,t=this.parts.length;e<t;++e){var n=this.parts[e];if(Array.isArray(n)){this.parts[e]=n[0].v()}else{this.parts[e]='"'+n+'"'}}return"__oni_rt.Sc("+this.line+",__oni_rt.join_str,"+this.parts.join(",")+")"};R.prototype=new h;R.prototype.is_value=true;R.prototype.val=function(){var e="__oni_rt.Sc("+this.line+",__oni_rt.Quasi";for(var t=0;t<this.parts.length;++t){if(t%2)e+=","+this.parts[t].v();else e+=',"'+this.parts[t].replace(/\"/g,'\\"')+'"'}return e+")"};U.prototype=new h;U.prototype.is_value=true;U.prototype.nblock_val=function(){var e=this.right.nb();if(this.left.name==="__oni_altns")e="Object.create("+e+")";return this.left.nb()+this.id+e};U.prototype.val=function(){var e;if(this.is_nblock){e=c(this.nb(),true,this.line)}else if(this.is_dest){e="__oni_rt.Sc("+this.line+",function(_oniX";try{var t=[],n=this.left.destruct("_oniX",t);for(var r=1;r<=t.length;++r)e+=",_oniX"+r;e+="){"+n+"return _oniX;},"+this.right.v();for(var r=0;r<t.length;++r)e+=","+t[r];e+=")"}catch(i){throw{mes:"Invalid left side in destructuring assignment ",line:this.line}}}else if(!this.left.is_ref||this.left.is_nblock){var s="_oniX";if(this.left.name==="__oni_altns")s="Object.create("+s+")";e="__oni_rt.Sc("+this.line+",function(_oniX){return "+this.left.nb()+this.id+s+";},"+this.right.v()+")"}else{e="__oni_rt.Sc("+this.line+",function(l, r){return l[0][l[1]]"+this.id+"r;},"+this.left.ref()+","+this.right.v()+")"}return e};z.prototype=new h;z.prototype.is_value=true;z.prototype.nblock_val=function(){return this.id+" "+this.right.nb()};z.prototype.val=function(){var e;if(this.id=="spawn")e="__oni_rt.Spawn("+this.line+","+this.right.v()+")";else if(this.right.is_nblock){e=c(this.nb(),true,this.line)}else if(this.right.is_ref){e="__oni_rt.Sc("+this.line+",function(r){return "+this.id+" r[0][r[1]]},"+this.right.ref()+")"}else{e="__oni_rt.Sc("+this.line+",function(r){return "+this.id+" r},"+this.right.v()+")"}return e};W.prototype=new h;W.prototype.is_value=true;W.prototype.nblock_val=function(){return this.left.nb()+this.id+" "};W.prototype.val=function(){var e;if(this.left.is_nblock){e=c(this.nb(),true,this.line)}else if(this.left.is_ref){e="__oni_rt.Sc("+this.line+",function(l){return l[0][l[1]]"+this.id+"},"+this.left.ref()+")"}return e};V.prototype=new h;V.prototype.v=function(){if(this.bound)return c(this.nb(),true,this.line);else return this.code};V.prototype.nb=function(){if(this.bound)return"("+this.code+").bind("+(this.js_ctx?"this":"this.tobj")+")";else return this.code};K.prototype=new h;K.prototype.is_nblock=true;K.prototype.is_id=true;K.prototype.is_value=true;K.prototype.nblock_val=function(){return this.name};K.prototype.destruct=function(e){if(this.name==="__oni_altns")e="Object.create("+e+")";return this.name+"="+e+";"};K.prototype.collect_var_decls=function(e){e.push(this.name)};Q.prototype=new h;Q.prototype.is_nblock=true;Q.prototype.is_id=true;Q.prototype.is_value=true;Q.prototype.nblock_val=function(){if(this.js_ctx)return this.name;else return"this."+this.ename};Q.prototype.destruct=Q.prototype.collect_var_decls=function(){throw new Error("'"+this.name+"' not allowed in destructuring pattern")};Y.prototype=new h;Y.prototype.is_value=true;Y.prototype.is_fun_call=true;Y.prototype.nblock_val=function(){var e=this.l.nb()+"(";for(var t=0;t<this.args.length;++t){if(t)e+=",";e+=this.args[t].nb()}return e+")"};Y.prototype.val=function(){var e;if(this.nblock_form){e=this.l.nb()+"(";for(var t=0;t<this.args.length;++t){if(t)e+=",";e+=this.args[t].nb()}return"__oni_rt.C(function(){return "+e+")},"+this.line+")"}else if(this.l.is_ref){e="__oni_rt.Fcall(1,"+this.line+","+this.l.ref()}else{e="__oni_rt.Fcall(0,"+this.line+","+this.l.v()}for(var t=0;t<this.args.length;++t){e+=","+this.args[t].v()}e+=")";return e};Z.prototype=new h;Z.prototype.is_ref=true;Z.prototype.is_value=true;Z.prototype.nblock_val=function(){return this.l.nb()+"."+this.name};Z.prototype.val=function(){return"__oni_rt.Sc("+this.line+",function(l){return l."+this.name+";},"+this.l.v()+")"};Z.prototype.ref=function(){return"__oni_rt.Sc("+this.line+",function(l){return [l,'"+this.name+"'];},"+this.l.v()+")"};Z.prototype.destruct=function(e,t){t.push(this.ref());var n="_oniX"+t.length;return n+"[0]["+n+"[1]]="+e+";"};Z.prototype.collect_var_decls=function(e){if(this.l instanceof K&&this.l.name==="__oni_altns")return;throw new Error("var declaration must not contain property accessor as lvalue")};et.prototype=new h;et.prototype.is_ref=true;et.prototype.is_value=true;et.prototype.nblock_val=function(){return this.l.nb()+"["+this.idxexp.nb()+"]"};et.prototype.val=function(){return"__oni_rt.Sc("+this.line+",function(l, idx){return l[idx];},"+this.l.v()+","+this.idxexp.v()+")"};et.prototype.ref=function(){if(this.is_nblock)return"__oni_rt.Nb(function(){return ["+this.l.nb()+","+this.idxexp.nb()+"]},"+this.line+")";else return"__oni_rt.Sc("+this.line+",function(l, idx){return [l, idx];},"+this.l.v()+","+this.idxexp.v()+")"};tt.prototype=new h;tt.prototype.is_value=true;tt.prototype.nblock_val=function(){return"("+this.e.nb()+")"};tt.prototype.v=function(e){return this.e.v(e)};tt.prototype.destruct=function(e,t){return this.e.destruct(e,t)};tt.prototype.collect_var_decls=function(e){return this.e.collect_var_decls(e)};tt.prototype.collect_pars=function(e){if(this.e.collect_pars)this.e.collect_pars(e);else e.push(this.e)};nt.prototype=new h;nt.prototype.is_value=true;nt.prototype.nblock_val=function(){var e="[";for(var t=0;t<this.elements.length;++t){if(t)e+=",";e+=this.elements[t].nb()}return e+"]"};nt.prototype.val=function(){var e="__oni_rt.Sc("+this.line+",__oni_rt.Arr";for(var t=0;t<this.elements.length;++t){e+=","+this.elements[t].v()}return e+")"};nt.prototype.destruct=function(e,t){var n="";for(var r=0;r<this.elements.length;++r){n+=this.elements[r].destruct(e+"["+r+"]",t)}return n};nt.prototype.collect_var_decls=function(e){for(var t=0;t<this.elements.length;++t)this.elements[t].collect_var_decls(e)};rt.prototype=new h;rt.prototype.is_value=true;rt.prototype.nblock_val=function(){var e="{";for(var t=0;t<this.props.length;++t){if(t!=0)e+=",";e+=this.props[t][1]+":"+this.props[t][2].nb()}return e+"}"};rt.prototype.val=function(){var e="__oni_rt.Sc("+this.line+",__oni_rt.Obj, [";for(var t=0;t<this.props.length;++t){if(t)e+=",";if(this.props[t][0]=="pat")throw{mes:"Missing initializer for object property "+it(this.props[t][1]),line:this.props[t][2]};e+=it(this.props[t][1])}e+="]";for(var t=0;t<this.props.length;++t){e+=","+this.props[t][2].v()}return e+")"};rt.prototype.destruct=function(e,t){var n="";for(var r=0;r<this.props.length;++r){var i=this.props[r];var s=i[1];var o;if(o=i[1].charAt(0)==="@"){s=i[1].slice(1)}if(i[0]=="pat"){var u=i[1];if(o)u="__oni_altns."+s;n+=u+"="+e+"."+s+";"}else n+=i[2].destruct(e+"["+it(s)+"]",t)}return n};rt.prototype.collect_var_decls=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n[0]=="pat"){if(n[1].charAt(0)==="@")continue;e.push(n[1])}else n[2].collect_var_decls(e)}};st.prototype=new h;st.prototype.is_value=true;st.prototype.nblock_val=function(){return this.t.nb()+"?"+this.c.nb()+":"+(this.a?this.a.nb():"undefined")};st.prototype.val=function(){return"__oni_rt.If("+this.t.v()+","+this.c.v()+","+(this.a?this.a.v():"undefined")+")"};ot.prototype=new h;ot.prototype.is_value=true;ot.prototype.nblock_val=function(){var e="new "+this.exp.nb()+"(";for(var t=0;t<this.args.length;++t){if(t)e+=",";e+=this.args[t].nb()}return e+")"};ot.prototype.val=function(){var e="__oni_rt.Fcall(2,"+this.line+","+this.exp.v();for(var t=0;t<this.args.length;++t){e+=","+this.args[t].v()}e+=")";return e};at.prototype=new h;at.prototype.is_nblock=false;at.prototype.val=function(){var e="__oni_rt.";if(this.op=="and")e+="Par(";else e+="Alt(";for(var t=0;t<this.blocks.length;++t){var n=this.blocks[t].v();if(t)e+=",";e+=n}return e+")"};ct.prototype=new h;ct.prototype.val=function(){var e="__oni_rt.Suspend(function(__oni_env,";if(this.wrapped)e+="_oniX){resume=_oniX;";else e+="resume){";var t=this.block.v();if(t.length)e+="return __oni_rt.ex("+t+",__oni_env)";e+="}, function() {";for(var n=0;n<this.decls.length;++n){var r=this.decls[n][0].name;if(r=="arguments")throw new Error("Cannot use 'arguments' as variable name in waitfor()");e+=r+"=arguments["+n+"];"}e+="})";return e};ht.prototype=new h;ht.prototype.val=function(){return"__oni_rt.Nb(function(){var resume;"+"return __oni_rt.ex("+this.code+",this)},"+this.line+")"};dt.prototype=new h;dt.prototype.val=function(){var e="__oni_rt.Nb(function(){var _oniW;"+"return __oni_rt.ex(__oni_rt.Seq("+0+","+this.assign1.v()+",";if(this.assign2)e+=this.assign2.v()+",";e+="__oni_rt.Try("+0+","+this.body.v()+",0,"+"__oni_rt.Nb(function(){if(_oniW&&_oniW.__finally__)return _oniW.__finally__()},"+this.line+"),0)),this)},"+this.line+")";return e};vt.prototype=new h;vt.prototype.val=function(){return this.code};mt.prototype=new h;mt.prototype.nblock_val=function(){return this.lbl+": "+this.stmt.nb()};mt.prototype.val=function(){throw new Error("labeled statements not implemented yet")};gt.prototype={lookup:function(e){return this["$"+e]},put:function(e,t){this["$"+e]=t},del:function(e){delete this["$"+e]}};var yt=/(?:[ \f\t\v\u00A0\u2028\u2029]+|\/\/.*|#!.*)*(?:((?:(?:\r\n|\n|\r)|\/\*(?:.|\n|\r)*?\*\/)+)|((?:0[xX][\da-fA-F]+)|(?:(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][-+]?\d+)?))|(\/(?:\\.|\[(?:\\[^\r\n]|[^\n\r\]])*\]|[^\[\/\r\n])+\/[gimy]*)|(==|!=|->|=>|>>|<<|<=|>=|--|\+\+|\|\||&&|\.\.|[-*\/%+&^|]=|[;,?:|^&=<>+\-*\/%!~.\[\]{}()\"`]|[$@_\w]+)|('(?:\\[^\r\n]|[^\\\'\r\n])*')|('(?:\\(?:(?:[^\r\n]|(?:\r\n|\n|\r)))|[^\\\'])*')|(\S+))/g;var bt=/(?:[ \f\t\v\u00A0\u2028\u2029]+|\/\/.*|#!.*)*(?:((?:(?:\r\n|\n|\r)|\/\*(?:.|\n|\r)*?\*\/)+)|(>>>=|===|!==|>>>|<<=|>>=|==|!=|->|=>|>>|<<|<=|>=|--|\+\+|\|\||&&|\.\.|[-*\/%+&^|]=|[;,?:|^&=<>+\-*\/%!~.\[\]{}()\"`]|[$@_\w]+))/g;var wt=/((?:\\[^\r\n]|\#(?!\{)|[^#\\\"\r\n])+)|(\\(?:\r\n|\n|\r))|((?:\r\n|\n|\r))|(\"|\#\{)/g;var Et=/((?:\\[^\r\n]|\$(?![\{a-zA-Z_$@])|[^$\\\`\r\n])+)|(\\(?:\r\n|\n|\r))|((?:\r\n|\n|\r))|(\`|\$\{|\$(?=[a-zA-Z_$@]))/g;St.prototype={exsf:function(e){throw new Error("Unexpected '"+this+"'")},excbp:0,excf:function(e,t){throw new Error("Unexpected '"+this+"'")},stmtf:null,tokenizer:yt,toString:function(){return"'"+this.id+"'"},exs:function(e){this.exsf=e;return this},exc:function(e,t){this.excbp=e;if(t)this.excf=t;return this},stmt:function(e){this.stmtf=e;return this},ifx:function(e,t){this.excbp=e;if(t)e-=.5;this.excf=function(t,n){var r=zt(n,e);return new I(t,this.id,r,n)};return this},asg:function(e,t){this.excbp=e;if(t)e-=.5;this.excf=function(t,n){var r=zt(n,e);return new U(t,this.id,r,n)};return this},pre:function(e){return this.exs(function(t){var n=zt(t,e);return new z(this.id,n,t)})},pst:function(e){return this.exc(e,function(e,t){return new W(e,this.id,t)})}};xt.prototype=new St;xt.prototype.tokenizer=bt;xt.prototype.toString=function(){return"literal '"+this.value+"'"};xt.prototype.exsf=function(e){return new F(this.value,e,this.id)};Tt.prototype=new xt("<id>");Tt.prototype.exsf=function(e){if(this.alternate===true){if(this.value.length){return new Z(new K("__oni_altns",e),this.value,e)}else{return new K("__oni_altns",e)}}else{return J(this.value,e)}};var Nt=new gt;Ct("[").exs(function(e){var t=[];while(e.token.id!="]"){if(t.length)Xt(e,",");if(e.token.id==","){t.push(function(e){return new F("",e)}(e))}else if(e.token.id=="]")break;else t.push(zt(e,110))}Xt(e,"]");return new nt(t,e)}).exc(270,function(e,t){var n=zt(t);Xt(t,"]");return new et(e,n,t)});Ct(".").exc(270,function(e,t){if(t.token.id!="<id>")throw new Error("Expected an identifier, found '"+t.token+"' instead");var n=t.token.value;Xt(t);return new Z(e,n,t)});Ct("new").exs(function(e){var t=zt(e,260);var n=[];if(e.token.id=="("){Xt(e);while(e.token.id!=")"){if(n.length)Xt(e,",");n.push(zt(e,110))}Xt(e,")")}return new ot(t,n)});Ct("(").exs(function(e){if(e.token.id==")"){var t=Xt(e,")");if(t.id!="->"&&t.id!="=>")throw new Error("Was expecting '->' or '=>' after empty parameter list, but saw '"+e.token.id+"'");Xt(e);return t.exsf(e)}var n=zt(e);Xt(e,")");return new tt(n,e)}).exc(260,function(e,t){var n=[];while(t.token.id!=")"){if(n.length)Xt(t,",");n.push(zt(t,110))}Xt(t,")");if(t.token.id=="{"){yt.lastIndex=t.lastIndex;while(1){var r=yt.exec(t.src);if(r&&(r[4]=="|"||r[4]=="||")){n.push(Ot(Xt(t).id,t))}else if(r&&r[1]){continue}break}}return new Y(e,n,t)});Ct("..").exc(255,function(e,t){var n=zt(t,255);return $(e,n,t)});Ct("++").pre(240).pst(250).asi_restricted=true;Ct("--").pre(240).pst(250).asi_restricted=true;Ct("delete").pre(240);Ct("void").pre(240);Ct("typeof").pre(240);Ct("+").pre(240).ifx(220);Ct("-").pre(240).ifx(220);Ct("~").pre(240);Ct("!").pre(240);Ct("*").ifx(230);Ct("/").ifx(230);Ct("%").ifx(230);Ct("<<").ifx(210);Ct(">>").ifx(210);Ct(">>>").ifx(210);Ct("<").ifx(200);Ct(">").ifx(200);Ct("<=").ifx(200);Ct(">=").ifx(200);Ct("instanceof").ifx(200);Ct("in").ifx(200);Ct("==").ifx(190);Ct("!=").ifx(190);Ct("===").ifx(190);Ct("!==").ifx(190);Ct("&").ifx(180);Ct("^").ifx(170);Ct("|").ifx(160);Ct("&&").ifx(150);Ct("||").ifx(140);Ct("?").exc(130,function(e,t){var n=zt(t,110);if(t.token.id==":"){Xt(t,":");var r=zt(t,110)}return new st(e,n,r,t)});Ct("=").asg(120,true);Ct("*=").asg(120,true);Ct("/=").asg(120,true);Ct("%=").asg(120,true);Ct("+=").asg(120,true);Ct("-=").asg(120,true);Ct("<<=").asg(120,true);Ct(">>=").asg(120,true);Ct(">>>=").asg(120,true);Ct("&=").asg(120,true);Ct("^=").asg(120,true);Ct("|=").asg(120,true);Ct("->").exs(function(e){var t=zt(e,119.5);return new V(undefined,t,e)}).exc(120,function(e,t){var n=zt(t,119.5);return new V(e,n,t)});Ct("=>").exs(function(e){var t=zt(e,119.5);return new V(undefined,t,e,true)}).exc(120,function(e,t){var n=zt(t,119.5);return new V(e,n,t,true)});Ct("spawn").pre(115);Ct(",").ifx(110,true);Ct("{").exs(function(e){var t=e.token.id;if(t=="|"||t=="||"){return Ot(t,e)}else{var n=[];while(e.token.id!="}"){if(n.length)Xt(e,",");var r=e.token;if(r.id=="}")break;r=kt(r,e);Xt(e);if(e.token.id==":"){Xt(e);var i=zt(e,110);n.push(["prop",r,i])}else if(e.token.id=="}"||e.token.id==","){if(r.charAt(0)=="'"||r.charAt(0)=='"')throw new Error("Quoted identifiers not allowed in destructuring patterns ("+r+")");n.push(["pat",r,e.line])}else throw new Error("Unexpected token '"+e.token+"'")}Xt(e,"}",bt);return new rt(n,e)}}).exc(260,function(e,t){var n=t.token.id;if(n!="|"&&n!="||")throw new Error("Unexpected token '"+t.token+"' - was expecting '|' or '||'");var r=[Ot(n,t)];return new Y(e,r,t);}).stmt(Lt);Ct(";").stmt(function(e){return C});Ct(")",bt);Ct("]",bt);Ct("}");Ct(":");Ct("<eof>").exs(function(e){throw new Error("Unexpected end of input (exs)")}).stmt(function(e){throw new Error("Unexpected end of input (stmt)")});Ct("function").exs(function(e){var t="";if(e.token.id=="<id>"){t=e.token.value;Xt(e)}var n=Dt(e);var r=Mt(e);return new v(t,n,r,e,false)}).stmt(function(e){if(e.token.id!="<id>")throw new Error("Malformed function declaration");var t=e.token.value;Xt(e);var n=Dt(e);var r=Mt(e);return m(t,n,r,e)});Ct("this",bt).exs(function(e){return new Q("this","tobj",e)});Ct("true",bt).exs(function(e){return new F("true",e)});Ct("false",bt).exs(function(e){return new F("false",e)});Ct("null",bt).exs(function(e){return new F("null",e)});Ct("collapse",bt).exs(function(e){return new O(e)});Ct('"',wt).exs(function(e){var t=[],n=-1;while(e.token.id!='istr-"'){switch(e.token.id){case"<string>":if(n!=-1&&typeof t[n]=="string"){t[n]+=e.token.value}else{t.push(e.token.value);++n}break;case"istr-#{":Xt(e);t.push([zt(e)]);++n;break;case"<eof>":throw new Error("Unterminated string");break;default:throw new Error("Internal parser error: Unknown token in string ("+e.token+")")}Xt(e,undefined,wt)}Xt(e);if(n==-1){t.push("");n=0}if(n==0&&typeof t[0]=="string"){var r='"'+t[0]+'"';return new F(r,e,"<string>")}return new q(t,e)});Ct("istr-#{",yt);Ct('istr-"',bt);Ct("`",Et).exs(function(e){var t=[],n=0;while(e.token.id!="quasi-`"){switch(e.token.id){case"<string>":if(n%2)t[n-1]+=e.token.value;else{t.push(e.token.value);++n}break;case"quasi-${":Xt(e);if(n%2==0){t.push("");++n}t.push(zt(e));++n;break;case"quasi-$":if(n%2==0){t.push("");++n}t.push(Pt(e));++n;break;case"<eof>":throw new Error("Unterminated string");break;default:throw new Error("Internal parser error: Unknown token in string ("+e.token+")")}Xt(e,undefined,Et)}Xt(e);if(n==0){t.push("")}return new R(t,e);});Ct("quasi-${",yt);Ct("quasi-$",yt);Ct("quasi-`",bt);Ct("var").stmt(function(e){var t=jt(e);Bt(e);return S(t,e)});Ct("else");Ct("if").stmt(function(e){Xt(e,"(");var t=zt(e);Xt(e,")");var n=Ut(e);var r=null;if(e.token.id=="else"){Xt(e);r=Ut(e)}return new T(t,n,r,e)});Ct("while").stmt(function(e){Xt(e,"(");var t=zt(e);Xt(e,")");++r(e).break_scope;++r(e).continue_scope;var n=Ut(e);--r(e).break_scope;--r(e).continue_scope;return new P(0,t,n)});Ct("do").stmt(function(e){++r(e).break_scope;++r(e).continue_scope;var t=Ut(e);--r(e).break_scope;--r(e).continue_scope;Xt(e,"while");Xt(e,"(");var n=zt(e);Xt(e,")");Bt(e);return new P(2,n,t)});Ct("for").stmt(function(e){Xt(e,"(");var t=null;var n=null;if(e.token.id=="var"){Xt(e);n=jt(e,true)}else{if(e.token.id!=";")t=Wt(e)}if(e.token.id==";"){Xt(e);var i=null;if(e.token.id!=";")i=zt(e);Xt(e,";");var s=null;if(e.token.id!=")")s=zt(e);Xt(e,")");++r(e).break_scope;++r(e).continue_scope;var o=Ut(e);--r(e).break_scope;--r(e).continue_scope;return D(t,n,i,s,o,e)}else if(e.token.id=="in"){Xt(e);if(n&&n.length>1)throw new Error("More than one variable declaration in for-in loop");var u=zt(e);Xt(e,")");++r(e).break_scope;++r(e).continue_scope;var o=Ut(e);--r(e).break_scope;--r(e).continue_scope;var a=n?n[0]:null;return H(t,a,u,o,e)}else throw new Error("Unexpected token '"+e.token+"' in for-statement")});Ct("continue").stmt(function(e){var t=null;if(e.token.id=="<id>"&&!e.newline){t=e.token.value;Xt(e)}Bt(e);if(r(e).continue_scope)return new M("c",e,t);else if(r(e).bl)return new A(undefined,e);else throw new Error("Unexpected 'continue' statement")});Ct("break").stmt(function(e){var t=null;if(e.token.id=="<id>"&&!e.newline){t=e.token.value;Xt(e)}Bt(e);if(r(e).break_scope)return new M("b",e,t);else if(r(e).bl)return new _(e,t);else throw new Error("Unexpected 'break' statement")});Ct("return").stmt(function(e){var t=null;if(!Ht(e.token)&&!e.newline)t=zt(e);Bt(e);if(r(e).bl)return new L(t,e);else return new A(t,e)});Ct("with").stmt(function(e){Xt(e,"(");var t=zt(e);Xt(e,")");var n=Ut(e);return new j(t,n,e)});Ct("case");Ct("default");Ct("switch").stmt(function(e){Xt(e,"(");var t=zt(e);Xt(e,")");Xt(e,"{");++r(e).break_scope;var n=[];while(e.token.id!="}"){var s=null;if(e.token.id=="case"){Xt(e);s=zt(e)}else if(e.token.id=="default"){Xt(e)}else throw new Error("Invalid token '"+e.token+"' in switch statement");Xt(e,":");i(e);o(e).exp=s;while(e.token.id!="case"&&e.token.id!="default"&&e.token.id!="}"){var u=Ut(e);a(u,e)}n.push(function(e){return[o(e).exp,l(e)]}(e))}--r(e).break_scope;Xt(e,"}");return new d(t,n);t,n,e});Ct("throw").stmt(function(e){if(e.newline)throw new Error("Illegal newline after throw");var t=zt(e);Bt(e);return new k(t,e);});Ct("catch");Ct("finally");Ct("try").stmt(function(e){Xt(e,"{");var t=Lt(e);var n=e.token.value;if(n!="and"&&n!="or"){var r=Ft(e);if(!r[0]&&!r[1]&&!r[2])throw new Error("Missing 'catch', 'finally' or 'retract' after 'try'");return new N(t,r,e)}else{var i=[t];do{Xt(e);Xt(e,"{");i.push(Lt(e))}while(e.token.value==n);var r=Ft(e);return ut(n,i,r,e)}});Ct("waitfor").stmt(function(e){if(e.token.id=="{"){Xt(e,"{");var t=[Lt(e)];var n=e.token.value;if(n!="and"&&n!="or")throw new Error("Missing 'and' or 'or' after 'waitfor' block");do{Xt(e);Xt(e,"{");t.push(Lt(e))}while(e.token.value==n);var i=Ft(e);return ut(n,t,i,e)}else{Xt(e,"(");var s=e.token.id=="var";if(s)Xt(e);var o=[];if(e.token.id==")"){if(s)throw new Error("Missing variables in waitfor(var)")}else o=jt(e);Xt(e,")");Xt(e,"{");++r(e).fscoped_ctx;var u=Lt(e);var i=Ft(e);--r(e).fscoped_ctx;return ft(s,o,u,i,e)}});Ct("using").stmt(function(e){var t;Xt(e,"(");if(t=e.token.id=="var")Xt(e);var n,r;var i=zt(e,120);if(e.token.id=="="){n=i;Xt(e);r=zt(e)}else{if(t)throw new Error("Syntax error in 'using' expression");r=i}Xt(e,")");var s=Ut(e);return pt(t,n,r,s,e)});Ct("__js").stmt(function(e){if(e.allow_nblock)++e.js_ctx;var t=Ut(e);if(e.allow_nblock)--e.js_ctx;t.is_nblock=e.allow_nblock;return t});Ct("abstract");Ct("boolean");Ct("byte");Ct("char");Ct("class");Ct("const");Ct("debugger");Ct("double");Ct("enum");Ct("export");Ct("extends");Ct("final");Ct("float");Ct("goto");Ct("implements");Ct("import");Ct("int");Ct("interface");Ct("long");Ct("native");Ct("package");Ct("private");Ct("protected");Ct("public");Ct("short");Ct("static");Ct("super");Ct("synchronized");Ct("throws");Ct("transient");Ct("volatile");e.compile=qt})(__oni_rt.c1={});__oni_rt.modsrc["builtin:apollo-sys-common.sjs"]='__oni_rt.sys=exports;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar UNDEF;\n\n\n\n\n\nif(!(__oni_rt.G.__oni_rt_bundle)){\n__oni_rt.G.__oni_rt_bundle={};\n}\n\n\n\n\n\n\n\n\n\nexports.hostenv=__oni_rt.hostenv;\n\n\n\n\n\n__js exports.getGlobal=function(){return __oni_rt.G};\n\n\n\n\n\n\n\n\n\n__js exports.isArrayLike=function(obj){return Array.isArray(obj)||!!(obj&&Object.prototype.hasOwnProperty.call(obj,\'callee\'))||!!(__oni_rt.G.NodeList&&obj instanceof NodeList)||!!(__oni_rt.G.FileList&&obj instanceof FileList)||!!(__oni_rt.G.StaticNodeList&&obj instanceof StaticNodeList);\n\n\n\n\n\n};\n\n\n\n\n\n\n\n\n\n\n\n__js {\nvar _flatten=function(arr,rv){var l=arr.length;\n\nfor(var i=0;i<l;++i){\nvar elem=arr[i];\nif(exports.isArrayLike(elem))_flatten(elem,rv);else rv.push(elem);\n\n\n\n}\n};\n\nexports.flatten=function(arr){var rv=[];\n\nif(arr.length===UNDEF)throw new Error("flatten() called on non-array");\n_flatten(arr,rv);\nreturn rv;\n};\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__js exports.expandSingleArgument=function(args){if(args.length==1&&exports.isArrayLike(args[0]))args=args[0];\n\n\nreturn args;\n};\n\n\n\n\n\n\n\n\n\n__js exports.isQuasi=function(obj){return (obj instanceof __oni_rt.QuasiProto);\n\n};\n\n\n\n\n\n\n__js exports.Quasi=function(arr){return __oni_rt.Quasi.apply(__oni_rt,arr)};\n\n\n\n\n\n\n__js exports.mergeObjects=function(){var rv={};\n\nvar sources=exports.expandSingleArgument(arguments);\nfor(var i=0;i<sources.length;i++ ){\nexports.extendObject(rv,sources[i]);\n}\nreturn rv;\n};\n\n\n\n\n\n__js exports.extendObject=function(dest,source){for(var o in source){\n\nif(Object.prototype.hasOwnProperty.call(source,o))dest[o]=source[o];\n}\nreturn dest;\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__js {\nfunction URI(){}\nURI.prototype={toString:function(){\nreturn "#{this.protocol}://#{this.authority}#{this.relative}";\n\n}};\n\nURI.prototype.params=function(){if(!this._params){\n\nvar rv={};\nthis.query.replace(parseURLOptions.qsParser,function(_,k,v){if(k)rv[decodeURIComponent(k)]=decodeURIComponent(v);\n\n});\nthis._params=rv;\n}\nreturn this._params;\n};\n\nvar parseURLOptions={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],qsParser:/(?:^|&)([^&=]*)=?([^&]*)/g,parser:/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/};\n\n\n\n\n\n\nexports.parseURL=function(str){var o=parseURLOptions,m=o.parser.exec(str),uri=new URI(),i=14;\n\n\n\n\nwhile(i-- )uri[o.key[i]]=m[i]||"";\nreturn uri;\n};\n}\n\n\n\n\n\n\n\n\n\n__js exports.constructQueryString=function(){var hashes=exports.flatten(arguments);\n\nvar hl=hashes.length;\nvar parts=[];\nfor(var h=0;h<hl;++h){\nvar hash=hashes[h];\nfor(var q in hash){\nvar l=encodeURIComponent(q)+"=";\nvar val=hash[q];\nif(!exports.isArrayLike(val))parts.push(l+encodeURIComponent(val));else{\n\n\nfor(var i=0;i<val.length;++i)parts.push(l+encodeURIComponent(val[i]));\n\n}\n}\n}\nreturn parts.join("&");\n};\n\n\n\n\n\n\n\n\n__js exports.constructURL=function(){var url_spec=exports.flatten(arguments);\n\nvar l=url_spec.length;\nvar rv=url_spec[0];\n\n\nfor(var i=1;i<l;++i){\nvar comp=url_spec[i];\nif(typeof comp!="string")break;\nif(rv.charAt(rv.length-1)!="/")rv+="/";\nrv+=comp.charAt(0)=="/"?comp.substr(1):comp;\n}\n\n\nvar qparts=[];\nfor(;i<l;++i){\nvar part=exports.constructQueryString(url_spec[i]);\nif(part.length)qparts.push(part);\n\n}\nvar query=qparts.join("&");\nif(query.length){\nif(rv.indexOf("?")!=-1)rv+="&";else rv+="?";\n\n\n\nrv+=query;\n}\nreturn rv;\n};\n\n\n\n\n\n\n\n__js exports.isSameOrigin=function(url1,url2){var a1=exports.parseURL(url1).authority;\n\nif(!a1)return true;\nvar a2=exports.parseURL(url2).authority;\nreturn !a2||(a1==a2);\n};\n\n\n\n\n\n\n\n\n\n\n__js exports.canonicalizeURL=function(url,base){if(__oni_rt.hostenv=="nodejs"&&__oni_rt.G.process.platform==\'win32\'){\n\n\n\nurl=url.replace(/\\\\/g,"/");\nbase=base.replace(/\\\\/g,"/");\n}\n\nvar a=exports.parseURL(url);\n\n\nif(base&&(base=exports.parseURL(base))&&(!a.protocol||a.protocol==base.protocol)){\n\nif(!a.directory&&!a.protocol){\na.directory=base.directory;\nif(!a.path&&(a.query||a.anchor))a.file=base.file;\n\n}else if(a.directory&&a.directory.charAt(0)!=\'/\'){\n\n\na.directory=(base.directory||"/")+a.directory;\n}\nif(!a.protocol){\na.protocol=base.protocol;\nif(!a.authority)a.authority=base.authority;\n\n}\n}\n\n\nvar pin=a.directory.split("/");\nvar l=pin.length;\nvar pout=[];\nfor(var i=0;i<l;++i){\nvar c=pin[i];\nif(c==".")continue;\nif(c==".."&&pout.length>1)pout.pop();else pout.push(c);\n\n\n\n}\na.directory=pout.join("/");\n\n\nvar rv="";\nif(a.protocol)rv+=a.protocol+":";\nif(a.authority)rv+="//"+a.authority;else if(a.protocol=="file")rv+="//";\n\n\n\nrv+=a.directory+a.file;\nif(a.query)rv+="?"+a.query;\nif(a.anchor)rv+="#"+a.anchor;\nreturn rv;\n};\n\n\n\n\n\n\n\n\n\n\n\nexports.jsonp=jsonp_hostenv;\n\n\n\n\n\n\n\nexports.getXDomainCaps=getXDomainCaps_hostenv;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexports.request=request_hostenv;\n\n\n\n\n\n\nexports.makeMemoizedFunction=function(f,keyfn){var lookups_in_progress={};\n\n\nvar memoizer=function(){var key=keyfn?keyfn.apply(this,arguments):arguments[0];\n\nvar rv=memoizer.db[key];\nif(typeof rv!==\'undefined\')return rv;\nif(!lookups_in_progress[key])lookups_in_progress[key]=spawn (function(self,args){\nreturn memoizer.db[key]=f.apply(self,args);\n\n})(this,arguments);\ntry{\nreturn lookups_in_progress[key].waitforValue();\n}finally{\n\nif(lookups_in_progress[key].waiting()==0){\nlookups_in_progress[key].abort();\ndelete lookups_in_progress[key];\n}\n}\n};\n\nmemoizer.db={};\nreturn memoizer;\n};\n\n\n\n\n\n\n\nexports.eval=eval_hostenv;\n\n\n\n\nvar pendingLoads={};\n\n\n\n\nfunction makeRequire(parent){var rf=function(module,settings){\n\n__js var opts=exports.extendObject({},settings);\n\nif(opts.callback){\ntry{\nvar rv=exports.isArrayLike(module)?requireInnerMultiple(module,rf,parent,opts):requireInner(module,rf,parent,opts);\n}catch(e){\nopts.callback(e);return;\n}\nopts.callback(UNDEF,rv);\nreturn;\n}else return exports.isArrayLike(module)?requireInnerMultiple(module,rf,parent,opts):requireInner(module,rf,parent,opts);\n\n\n};\n\n__js {\n\nrf.resolve=function(module,settings){var opts=exports.extendObject({},settings);\n\nreturn resolve(module,rf,parent,opts);\n};\n\nrf.url=function(relative){return resolve(relative,rf,parent,{loader:\'dummy\'}).path;\n\n\n};\n\nrf.path="";\nrf.alias={};\n\n\nif(exports.require){\nrf.hubs=exports.require.hubs;\nrf.modules=exports.require.modules;\nrf.extensions=exports.require.extensions;\n}else{\n\n\nrf.hubs=augmentHubs(getHubs_hostenv());\nrf.modules={};\n\nrf.extensions=getExtensions_hostenv();\n}\n\n}\n\nreturn rf;\n}\nexports._makeRequire=makeRequire;\n\n__js function augmentHubs(hubs){hubs.addDefault=function(hub){\n\nif(!this.defined(hub[0])){\n\nthis.push(hub);\nreturn true;\n}\nreturn false;\n};\nhubs.defined=function(prefix){for(var i=0;i<this.length;i++ ){\n\nvar h=this[i][0];\nvar l=Math.min(h.length,prefix.length);\nif(h.substr(0,l)==prefix.substr(0,l))return true;\n}\nreturn false;\n};\nreturn hubs;\n}\n\nfunction html_sjs_extractor(html,descriptor){var re=/<script (?:[^>]+ )?(?:type=[\'"]text\\/sjs[\'"]|main=[\'"]([^\'"]+)[\'"])[^>]*>((.|[\\r\\n])*?)<\\/script>/mg;\n\nvar match;\nvar src=\'\';\nwhile(match=re.exec(html)){\nif(match[1])src+=\'require("\'+match[1]+\'")\';else src+=match[2];\n\nsrc+=\';\';\n}\nif(!src)throw new Error("No sjs found in HTML file");\nreturn default_compiler(src,descriptor);\n}\n\n\n__js function resolveAliases(module,aliases){var ALIAS_REST=/^([^:]+):(.*)$/;\n\nvar alias_rest,alias;\nvar rv=module;\nvar level=10;\nwhile((alias_rest=ALIAS_REST.exec(rv))&&(alias=aliases[alias_rest[1]])){\n\nif(--level==0)throw new Error("Too much aliasing in modulename \'"+module+"\'");\n\nrv=alias+alias_rest[2];\n}\nreturn rv;\n}\n\n\n__js function resolveHubs(module,hubs,require_obj,parent,opts){var path=module;\n\nvar loader=opts.loader||default_loader;\nvar src=opts.src||default_src_loader;\nvar resolve=default_resolver;\n\n\nif(path.indexOf(":")==-1)path=resolveSchemelessURL_hostenv(path,require_obj,parent);\n\n\nvar level=10;\nfor(var i=0,hub;hub=hubs[i++ ];){\nif(path.indexOf(hub[0])==0){\n\nif(typeof hub[1]=="string"){\npath=hub[1]+path.substring(hub[0].length);\ni=0;\n\nif(path.indexOf(":")==-1)path=resolveSchemelessURL_hostenv(path,require_obj,parent);\n\nif(--level==0)throw new Error("Too much indirection in hub resolution for module \'"+module+"\'");\n\n}else if(typeof hub[1]=="object"){\n\nif(hub[1].src)src=hub[1].src;\nif(hub[1].loader)loader=hub[1].loader;\nresolve=hub[1].resolve||loader.resolve||resolve;\n\nbreak;\n}else throw new Error("Unexpected value for require.hubs element \'"+hub[0]+"\'");\n\n\n}\n}\n\nreturn {path:path,loader:loader,src:src,resolve:resolve};\n}\n\n\n__js function default_src_loader(path){throw new Error("Don\'t know how to load module at "+path);\n\n}\n\n\nvar compiled_src_tag=/^\\/\\*\\__oni_compiled_sjs_1\\*\\//;\nfunction default_compiler(src,descriptor){var f;\n\n\nif(typeof (src)===\'function\'){\nf=src;\n}else if(compiled_src_tag.exec(src)){\n\n\n\n\n\n\nf=new Function("module","exports","require","__onimodulename","__oni_altns",src);\n}else{\n\nf=exports.eval("(function(module,exports,require, __onimodulename, __oni_altns){"+src+"\\n})",{filename:"module #{descriptor.id}"});\n\n}\nf(descriptor,descriptor.exports,descriptor.require,"module #{descriptor.id}",{});\n\n}\n\ndefault_compiler.module_args=[\'module\',\'exports\',\'require\',\'__onimodulename\',\'__oni_altns\'];\n\nfunction default_loader(path,parent,src_loader,opts,spec){var compile=exports.require.extensions[spec.type];\n\nif(!compile)throw new Error("Unknown type \'"+spec.type+"\'");\n\n\nvar descriptor=exports.require.modules[path];\nvar pendingHook=pendingLoads[path];\n\nif(!descriptor&&!pendingHook){\n\npendingHook=pendingLoads[path]=spawn (function(){waitfor{\n\nvar src,loaded_from;\nif(typeof src_loader==="string"){\nsrc=src_loader;\nloaded_from="[src string]";\n}else if(path in __oni_rt.modsrc){\n\n\nloaded_from="[builtin]";\nsrc=__oni_rt.modsrc[path];\ndelete __oni_rt.modsrc[path];\n\n}else{\n\n({src,loaded_from})=src_loader(path);\n}\nvar descriptor={id:path,exports:{},loaded_from:loaded_from,loaded_by:parent,required_by:{}};\n\n\n\n\n\n\ndescriptor.require=makeRequire(descriptor);\n\nif(opts.main)descriptor.require.main=descriptor;\nexports.require.modules[path]=descriptor;\ntry{\ncompile(src,descriptor);\nreturn descriptor;\n}catch(e){\ndelete exports.require.modules[path];\nthrow e;\n}retract{\ndelete exports.require.modules[path];\n}\n}or{\nwaitfor(){\nhold(0);\npendingHook.resume=resume;\n}\n}\n})();\n}\n\nif(pendingHook){\n\n\n\nvar p=parent;\n\n\n\n\n\nwhile(p.loaded_by){\nif(path===p.id)return descriptor.exports;\n\np=p.loaded_by;\n}\n\n\ntry{\ndescriptor=pendingHook.waitforValue();\n}retract{\n\nif(pendingHook.waiting()==0&&pendingHook.resume){\npendingHook.resume();\npendingHook.value();\n}\n}finally{\n\n\nif(pendingHook.waiting()==0)delete pendingLoads[path];\n\n}\n}\n\nif(!descriptor.required_by[parent.id])descriptor.required_by[parent.id]=1;else ++descriptor.required_by[parent.id];\n\n\n\n\nreturn descriptor.exports;\n}\n\n__js function default_resolver(spec){if(!spec.ext)spec.path+="."+spec.type;\n\n\n};\n\n\nfunction http_src_loader(path){return {src:request_hostenv([path,{format:\'compiled\'}],{mime:\'text/plain\'}),loaded_from:path};\n\n\n\n\n}\n\n\n\n\n\n\nvar github_api="https://api.github.com/";\nvar github_opts={cbfield:"callback"};\nfunction github_src_loader(path){var user,repo,tag;\n\ntry{\n[ ,user,repo,tag,path]=/github:\\/([^\\/]+)\\/([^\\/]+)\\/([^\\/]+)\\/(.+)/.exec(path);\n}catch(e){throw new Error("Malformed module id \'"+path+"\'")}\n\nvar url=exports.constructURL(github_api,\'repos\',user,repo,"contents",path,{ref:tag});\n\nwaitfor{\nvar data=jsonp_hostenv(url,github_opts).data;\n}or{\n\nhold(10000);\nthrow new Error("Github timeout");\n}\nif(data.message&&!data.content)throw new Error(data.message);\n\n\n\nvar str=exports.require(\'sjs:string\');\n\nreturn {src:str.utf8ToUtf16(str.base64ToOctets(data.content)),loaded_from:url};\n\n\n\n}\n\n\nfunction resolve(module,require_obj,parent,opts){var path=resolveAliases(module,require_obj.alias);\n\n\n\nvar hubs=exports.require.hubs;\n\nvar resolveSpec=resolveHubs(path,hubs,require_obj,parent,opts);\n\n\nresolveSpec.path=exports.canonicalizeURL(resolveSpec.path,parent.id);\n\n\n\nvar ext,extMatch=/.+\\.([^\\.\\/]+)$/.exec(resolveSpec.path);\nif(extMatch){\next=extMatch[1].toLowerCase();\nresolveSpec.ext=ext;\nif(!exports.require.extensions[ext])ext=null;\n}\nresolveSpec.type=ext||\'sjs\';\n\nresolveSpec.resolve(resolveSpec,parent);\n\n__js {\n\nvar preload=__oni_rt.G.__oni_rt_bundle;\nvar pendingHubs=false;\nif(preload.h){\n\nvar deleteHubs=[];\nfor(var k in preload.h){\nif(!Object.prototype.hasOwnProperty.call(preload.h,k))continue;\nvar entries=preload.h[k];\nvar parent=getTopReqParent_hostenv();\nvar resolved=resolveHubs(k,hubs,exports.require,parent,{});\nif(resolved.path===k){\n\npendingHubs=true;\ncontinue;\n}\n\nfor(var i=0;i<entries.length;i++ ){\nvar ent=entries[i];\npreload.m[resolved.path+ent[0]]=ent[1];\n}\ndeleteHubs.push(k);\n}\n\nif(!pendingHubs)delete preload.h;else{\n\n\nfor(var i=0;i<deleteHubs.length;i++ )delete preload.h[deleteHubs[i]];\n\n}\n}\n\nif(module in __oni_rt.modsrc){\n\n\nif(!preload.m)preload.m={};\npreload.m[resolveSpec.path]=__oni_rt.modsrc[module];\ndelete __oni_rt.modsrc[module];\n}\n\nif(preload.m){\nvar path=resolveSpec.path;\n\nif(path.indexOf(\'!sjs\',path.length-4)!==-1)path=path.slice(0,-4);\n\nvar contents=preload.m[path];\nif(contents!==undefined){\nresolveSpec.src=function(){delete preload.m[path];\n\n\nreturn {src:contents,loaded_from:path+"#bundle"};\n};\n}\n}\n\n}\nreturn resolveSpec;\n}\n\n\n\n\n\n__js exports.resolve=function(url,require_obj,parent,opts){require_obj=require_obj||exports.require;\n\nparent=parent||getTopReqParent_hostenv();\nopts=opts||{};\nreturn resolve(url,require_obj,parent,opts);\n};\n\n\nfunction requireInner(module,require_obj,parent,opts){var resolveSpec=resolve(module,require_obj,parent,opts);\n\n\n\n\nmodule=resolveSpec.loader(resolveSpec.path,parent,resolveSpec.src,opts,resolveSpec);\nif(opts.copyTo){\nexports.extendObject(opts.copyTo,module);\n}\n\nreturn module;\n}\n\n\nfunction requireInnerMultiple(modules,require_obj,parent,opts){var rv={};\n\n\n\n\nfunction inner(i,l){if(l===1){\n\nvar descriptor=modules[i];\nvar id,exclude,include,name;\n__js if(typeof descriptor===\'string\'){\nid=descriptor;\nexclude=[];\ninclude=null;\nname=null;\n}else{\n\nid=descriptor.id;\nexclude=descriptor.exclude||[];\ninclude=descriptor.include||null;\nname=descriptor.name||null;\n}\n\nvar module=requireInner(id,require_obj,parent,opts);\n\n\n__js {\nvar addSym=function(k,v){if(rv[k]!==undefined){\n\nif(rv[k]===v)return;\nthrow new Error("require([.]) name clash while merging module \'#{id}\': Symbol \'#{k}\' defined in multiple modules");\n}\nrv[k]=v;\n};\n\nif(name){\naddSym(name,module);\n}else if(include){\nfor(var i=0;i<include.length;i++ ){\nvar o=include[i];\nif(!(o in module))throw new Error("require([.]) module #{id} has no symbol #{o}");\naddSym(o,module[o]);\n}\n}else{\nfor(var o in module){\n\n\n\nif(exclude.indexOf(o)!==-1)continue;\naddSym(o,module[o]);\n}\n}\n}\n}else{\n\nvar split=Math.floor(l/2);\nwaitfor{\ninner(i,split);\n}and{\n\ninner(i+split,l-split);\n}\n}\n}\n\n\ninner(0,modules.length);\n\nreturn rv;\n}\n\n\n__js exports.require=makeRequire(getTopReqParent_hostenv());\n\n__js exports.require.modules[\'builtin:apollo-sys.sjs\']={id:\'builtin:apollo-sys.sjs\',exports:exports,loaded_from:"[builtin]",required_by:{"[system]":1}};\n\n\n\n\n\n\nexports.init=function(cb){init_hostenv();\n\ncb();\n};\n\n';__oni_rt.modsrc["builtin:apollo-sys-xbrowser.sjs"]='var location;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__js function determineLocation(){if(!location){\n\nlocation={};\nvar scripts=document.getElementsByTagName("script"),matches;\nfor(var i=0;i<scripts.length;++i){\nif((matches=/^(.*\\/)(?:[^\\/]*)stratified(?:[^\\/]*)\\.js(?:\\?.*)?$/.exec(scripts[i].src))){\nlocation.location=exports.canonicalizeURL(matches[1]+"modules/",document.location.href);\nlocation.requirePrefix=scripts[i].getAttribute("require-prefix");\nlocation.req_base=scripts[i].getAttribute("req-base")||document.location.href;\nlocation.main=scripts[i].getAttribute("main");\nbreak;\n}\n}\n}\nreturn location;\n}\n\n\n\n\nif(determineLocation().requirePrefix){\n__oni_rt.G[determineLocation().requirePrefix]={require:__oni_rt.sys.require};\n}else __oni_rt.G.require=__oni_rt.sys.require;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction jsonp_hostenv(url,settings){var opts=exports.mergeObjects({iframe:false,cbfield:"callback"},settings);\n\n\n\n\n\n\n\n\n\n\nurl=exports.constructURL(url,opts.query);\nif(opts.iframe||opts.forcecb)return jsonp_iframe(url,opts);else return jsonp_indoc(url,opts);\n\n\n\n};\n\nvar jsonp_req_count=0;\nvar jsonp_cb_obj="_oni_jsonpcb";\nfunction jsonp_indoc(url,opts){if(!window[jsonp_cb_obj])window[jsonp_cb_obj]={};\n\n\nvar cb="cb"+(jsonp_req_count++ );\nvar cb_query={};\ncb_query[opts.cbfield]=jsonp_cb_obj+"."+cb;\nurl=exports.constructURL(url,cb_query);\nvar elem=document.createElement("script");\nelem.setAttribute("src",url);\nelem.setAttribute("async","async");\nelem.setAttribute("type","text/javascript");\nvar complete=false;\nwaitfor(var rv){\nwindow[jsonp_cb_obj][cb]=resume;\ndocument.getElementsByTagName("head")[0].appendChild(elem);\n\nwaitfor(){\nif(elem.addEventListener)elem.addEventListener("error",resume,false);else{\n\n\nvar readystatechange=function(){if(elem.readyState==\'loaded\'&&!complete)resume();\n\n};\nelem.attachEvent("onreadystatechange",readystatechange);\n}\n}finally{\n\nif(elem.removeEventListener)elem.removeEventListener("error",resume,false);else elem.detachEvent("onreadystatechange",readystatechange);\n\n\n\n}\n\nthrow new Error("Could not complete JSONP request to \'"+url+"\'");\n}finally{\n\nelem.parentNode.removeChild(elem);\ndelete window[jsonp_cb_obj][cb];\n}\ncomplete=true;\nreturn rv;\n}\n\nfunction jsonp_iframe(url,opts){var cb=opts.forcecb||"R";\n\nvar cb_query={};\nif(opts.cbfield)cb_query[opts.cbfield]=cb;\n\nurl=exports.constructURL(url,cb_query);\nvar iframe=document.createElement("iframe");\ndocument.getElementsByTagName("head")[0].appendChild(iframe);\nvar doc=iframe.contentWindow.document;\nwaitfor(var rv){\ndoc.open();\niframe.contentWindow[cb]=resume;\n\n\nhold(0);\ndoc.write("\\x3Cscript type=\'text/javascript\' src=\\""+url+"\\">\\x3C/script>");\ndoc.close();\n}finally{\n\niframe.parentNode.removeChild(iframe);\n}\n\n\nhold(0);\nreturn rv;\n};\n\n\nvar XHR_caps;\nvar activex_xhr_ver;\n\nfunction getXHRCaps(){if(!XHR_caps){\n\nXHR_caps={};\n\nif(__oni_rt.G.XMLHttpRequest)XHR_caps.XHR_ctor=function(){\nreturn new XMLHttpRequest()};else XHR_caps.XHR_ctor=function(){\n\nif(typeof activex_xhr_ver!==\'undefined\')return new ActiveXObject(activex_xhr_ver);\n\n\nfor(var v in {"MSXML2.XMLHTTP.6.0":1,"MSXML2.XMLHTTP.3.0":1,"MSXML2.XMLHTTP":1}){\n\n\n\n\ntry{\nvar req=new ActiveXObject(v);\nactivex_xhr_ver=v;\nreturn req;\n}catch(e){\n}\n}\nthrow new Error("Browser does not support XMLHttpRequest");\n};\n\n\nXHR_caps.XHR_CORS=("withCredentials" in XHR_caps.XHR_ctor());\nif(!XHR_caps.XHR_CORS)XHR_caps.XDR=(typeof __oni_rt.G.XDomainRequest!==\'undefined\');\n\nXHR_caps.CORS=(XHR_caps.XHR_CORS||XHR_caps.XDR)?"CORS":"none";\n}\nreturn XHR_caps;\n}\n\n\n\n\n\n\nfunction getXDomainCaps_hostenv(){return getXHRCaps().CORS;\n\n}\n\n\n\n\n\n__js function getTopReqParent_hostenv(){var base=determineLocation().req_base;\n\nreturn {id:base,loaded_from:base,required_by:{"[system]":1}};\n\n\n\n}\n\n\n\n\n\n\n\n\n\n__js function resolveSchemelessURL_hostenv(url_string,req_obj,parent){if(req_obj.path&&req_obj.path.length)url_string=exports.constructURL(req_obj.path,url_string);\n\n\nreturn exports.canonicalizeURL(url_string,parent.id);\n}\n\n\n\n\n\n\nfunction request_hostenv(url,settings){var opts=exports.mergeObjects({method:"GET",body:null,response:\'string\',throwing:true},settings);\n\n\n\n\n\n\n\n\n\n\n\nurl=exports.constructURL(url,opts.query);\n\nvar caps=getXHRCaps();\nif(!caps.XDR||exports.isSameOrigin(url,document.location)){\nvar req=caps.XHR_ctor();\nreq.open(opts.method,url,true,opts.username||"",opts.password||"");\n}else{\n\n\nreq=new XDomainRequest();\nreq.open(opts.method,url);\n}\n\nwaitfor(var error){\nif(typeof req.onerror!==\'undefined\'){\nreq.onload=function(){resume()};\nreq.onerror=function(){resume(true)};\nreq.onabort=function(){resume(true)};\n}else{\n\nreq.onreadystatechange=function(evt){if(req.readyState!=4)return;else resume();\n\n\n\n\n};\n}\n\nif(opts.headers&&req.setRequestHeader)for(var h in opts.headers)req.setRequestHeader(h,opts.headers[h]);\n\n\n\n\n\nif(opts.mime&&req.overrideMimeType)req.overrideMimeType(opts.mime);\n\nif(opts.response===\'arraybuffer\')req.responseType=\'arraybuffer\';\n\n\nreq.send(opts.body);\n}retract{\n\nreq.abort();\n}\n\n\nif(error||(typeof req.status!==\'undefined\'&&!(req.status.toString().charAt(0) in {\'0\':1,\'2\':1}))){\n\n\nif(opts.throwing){\nvar txt="Failed "+opts.method+" request to \'"+url+"\'";\nif(req.statusText)txt+=": "+req.statusText;\nif(req.status)txt+=" ("+req.status+")";\nvar err=new Error(txt);\nerr.status=req.status;\nerr.data=req.response;\nthrow err;\n}else if(opts.response===\'string\'){\n\nreturn "";\n}\n\n}\nif(opts.response===\'string\')return req.responseText;else if(opts.response===\'arraybuffer\'){\n\n\nreturn {status:req.status,content:req.response,getHeader:name->req.getResponseHeader(name)};\n\n\n\n\n}else{\n\n\nreturn {status:req.status,content:req.responseText,getHeader:name->req.getResponseHeader(name)};\n\n\n\n\n}\n}\n\n\n\n\n__js function getHubs_hostenv(){return [["sjs:",determineLocation().location||{src:function(path){\n\n\nthrow new Error("Can\'t load module \'"+path+"\': The location of the StratifiedJS standard module lib is unknown - it can only be inferred automatically if you load stratified.js in the normal way through a <script> element.");\n\n}}],["github:",{src:github_src_loader}],["http:",{src:http_src_loader}],["https:",{src:http_src_loader}],["file:",{src:http_src_loader}],["x-wmapp1:",{src:http_src_loader}],["local:",{src:http_src_loader}]];\n\n\n\n\n\n\n\n\n\n\n\n\n}\n\nfunction getExtensions_hostenv(){return {\'sjs\':default_compiler,\'js\':function(src,descriptor){\n\n\n\n\n\nvar f=new Function("module","exports",src);\n\nf.apply(descriptor.exports,[descriptor,descriptor.exports]);\n},\'html\':html_sjs_extractor};\n\n\n\n}\n\n\n\n\nfunction eval_hostenv(code,settings){if(__oni_rt.UA=="msie"&&__oni_rt.G.execScript)return eval_msie(code,settings);\n\n\n\nvar filename=(settings&&settings.filename)||"sjs_eval_code";\nfilename="\'#{filename.replace(/\\\'/g,\'\\\\\\\'\')}\'";\nvar mode=(settings&&settings.mode)||"normal";\nvar js=__oni_rt.c1.compile(code,{filename:filename,mode:mode});\nreturn __oni_rt.G.eval(js);\n}\n\n\n\n\n\n\n\nvar IE_resume_counter=0;\n__oni_rt.IE_resume={};\nfunction eval_msie(code,settings){var filename=(settings&&settings.filename)||"sjs_eval_code";\n\nfilename="\'#{filename.replace(/\\\'/g,\'\\\\\\\'\')}\'";\nvar mode=(settings&&settings.mode)||"normal";\ntry{\nwaitfor(var rv,isexception){\nvar rc=++IE_resume_counter;\n__oni_rt.IE_resume[rc]=resume;\nvar js=__oni_rt.c1.compile("try{"+code+"\\n}catchall(rv) { spawn(hold(0),__oni_rt.IE_resume["+rc+"](rv[0],rv[1])) }",{filename:filename,mode:mode});\n\n\n__oni_rt.G.execScript(js);\n}\nif(isexception)throw rv;\n}finally{\n\ndelete __oni_rt.IE_resume[rc];\n}\nreturn rv;\n}\n\n\n\n\nfunction init_hostenv(){}\n\n\n\n\nif(!__oni_rt.G.__oni_rt_no_script_load){\nfunction runScripts(){var scripts=document.getElementsByTagName("script");\n\n\n\n\n\n\n\n\n\nvar ss=[];\nfor(var i=0;i<scripts.length;++i){\nvar s=scripts[i];\nif(s.getAttribute("type")=="text/sjs"){\nss.push(s);\n}\n}\n\nfor(var i=0;i<ss.length;++i){\nvar s=ss[i];\nvar m=s.getAttribute("module");\n\nvar content=s.textContent||s.innerHTML;\nif(__oni_rt.UA=="msie"){\n\ncontent=content.replace(/\\r\\n/,"");\n}\nif(m)__oni_rt.modsrc[m]=content;else{\n\n\nvar descriptor={id:document.location.href+"_inline_sjs_"+(i+1)};\n\n\n__oni_rt.sys.require.main=descriptor;\nvar f=exports.eval("(function(module, __onimodulename){"+content+"\\n})",{filename:"module #{descriptor.id}"});\n\nf(descriptor);\n}\n}\n\nvar mainModule=determineLocation().main;\nif(mainModule){\n__oni_rt.sys.require(mainModule,{main:true});\n}\n};\n\nif(document.readyState==="complete"){\nrunScripts();\n}else{\n\n\nif(__oni_rt.G.addEventListener)__oni_rt.G.addEventListener("load",runScripts,true);else __oni_rt.G.attachEvent("onload",runScripts);\n\n\n\n}\n}\n\n\n';if(!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){var t=this.length>>>0;var n=Math.floor(arguments[1]||0);if(n<0)n=Math.max(t-Math.abs(n),0);for(;n<t;++n){if(n in this&&this[n]===e)return n}return-1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(e){var t=this.length>>>0;var n=arguments[1]===undefined?t:Math.floor(arguments[1]);if(n>=0)n=Math.min(n,t-1);else n+=t;for(;n>=0;--n){if(n in this&&this[n]===e)return n}return-1}}if(!Object.create){Object.create=function(t){function n(){}n.prototype=t;return new n}}if(!Object.keys){Object.keys=function(e){var t=[],n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))t.push(n);return t}}if(!Object.getPrototypeOf){Object.getPrototypeOf="".__proto__===String.prototype?function(e){return e.__proto__}:function(e){return e.constructor.prototype}}if(!Function.prototype.bind){Function.prototype.bind=function(e){var t=[].slice,n=t.call(arguments,1),r=this,i=function(){},s=function(){var s=e||{};try{if(this instanceof i)s=this}catch(o){}return r.apply(s,n.concat(t.call(arguments)))};i.prototype=r.prototype;s.prototype=new i;return s}}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!__oni_rt.sys){__oni_rt.G.eval("(function(exports) {"+__oni_rt.c1.compile(__oni_rt.modsrc["builtin:apollo-sys-common.sjs"],{filename:"'apollo-sys-common.sjs'"})+"\n"+__oni_rt.c1.compile(__oni_rt.modsrc["builtin:apollo-sys-"+__oni_rt.hostenv+".sjs"],{filename:"'apollo-sys-"+__oni_rt.hostenv+".sjs'"})+"})({})");delete __oni_rt.modsrc["builtin:apollo-sys-common.sjs"];delete __oni_rt.modsrc["builtin:apollo-sys-"+__oni_rt.hostenv+".sjs"]};

/*! jQuery v2.1.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m=a.document,n="2.1.0",o=function(a,b){return new o.fn.init(a,b)},p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};o.fn=o.prototype={jquery:n,constructor:o,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=o.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return o.each(this,a,b)},map:function(a){return this.pushStack(o.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},o.extend=o.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||o.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(o.isPlainObject(d)||(e=o.isArray(d)))?(e?(e=!1,f=c&&o.isArray(c)?c:[]):f=c&&o.isPlainObject(c)?c:{},g[b]=o.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},o.extend({expando:"jQuery"+(n+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===o.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isPlainObject:function(a){if("object"!==o.type(a)||a.nodeType||o.isWindow(a))return!1;try{if(a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=o.trim(a),a&&(1===a.indexOf("use strict")?(b=m.createElement("script"),b.text=a,m.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":k.call(a)},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?o.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),o.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||o.guid++,f):void 0},now:Date.now,support:l}),o.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=o.type(a);return"function"===c||o.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+-new Date,t=a.document,u=0,v=0,w=eb(),x=eb(),y=eb(),z=function(a,b){return a===b&&(j=!0),0},A="undefined",B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ab=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(cb){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function db(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;if((b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[],!a||"string"!=typeof a)return d;if(1!==(i=b.nodeType)&&9!==i)return[];if(n&&!e){if(f=Z.exec(a))if(h=f[1]){if(9===i){if(g=b.getElementById(h),!g||!g.parentNode)return d;if(g.id===h)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h)return d.push(g),d}else{if(f[2])return G.apply(d,b.getElementsByTagName(a)),d;if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(h)),d}if(c.qsa&&(!o||!o.test(a))){if(q=p=s,u=b,v=9===i&&a,1===i&&"object"!==b.nodeName.toLowerCase()){m=ob(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--)m[j]=q+pb(m[j]);u=$.test(a)&&mb(b.parentNode)||b,v=m.join(",")}if(v)try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}return xb(a.replace(P,"$1"),b,d,e)}function eb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function fb(a){return a[s]=!0,a}function gb(a){var b=l.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function hb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function ib(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function jb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function lb(a){return fb(function(b){return b=+b,fb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function mb(a){return a&&typeof a.getElementsByTagName!==A&&a}c=db.support={},f=db.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},k=db.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;return e!==l&&9===e.nodeType&&e.documentElement?(l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=gb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=gb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&gb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=gb(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==A?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==A&&n?b.getElementsByClassName(a):void 0},p=[],o=[],(c.qsa=Y.test(e.querySelectorAll))&&(gb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),gb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")})),(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&gb(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},z=b?function(a,b){if(a===b)return j=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:4&d?-1:1)}:function(a,b){if(a===b)return j=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0;if(f===g)return ib(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)k.unshift(c);while(h[d]===k[d])d++;return d?ib(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e):l},db.matches=function(a,b){return db(a,null,null,b)},db.matchesSelector=function(a,b){if((a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']"),!(!c.matchesSelector||!n||p&&p.test(b)||o&&o.test(b)))try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return db(b,l,null,[a]).length>0},db.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},db.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):void 0;return void 0!==f?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},db.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},db.uniqueSort=function(a){var b,d=[],e=0,f=0;if(j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z),j){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return i=null,a},e=db.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=db.selectors={cacheLength:50,createPseudo:fb,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ab,bb),a[3]=(a[4]||a[5]||"").replace(ab,bb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||db.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&db.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&T.test(c)&&(b=ob(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ab,bb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=db.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[u,n,m];break}}else if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(t&&((l[s]||(l[s]={}))[a]=[u,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||db.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?fb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:fb(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?fb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:fb(function(a){return function(b){return db(a,b).length>0}}),contains:fb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:fb(function(a){return U.test(a||"")||db.error("unsupported lang: "+a),a=a.replace(ab,bb).toLowerCase(),function(b){var c;do if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:lb(function(){return[0]}),last:lb(function(a,b){return[b-1]}),eq:lb(function(a,b,c){return[0>c?c+b:c]}),even:lb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:lb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:lb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:lb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=jb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=kb(b);function nb(){}nb.prototype=d.filters=d.pseudos,d.setFilters=new nb;function ob(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=Q.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?db.error(a):x(a,i).slice(0)}function pb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function qb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=v++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[s]||(b[s]={}),(h=i[d])&&h[0]===u&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function rb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function sb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function tb(a,b,c,d,e,f){return d&&!d[s]&&(d=tb(d)),e&&!e[s]&&(e=tb(e,f)),fb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||wb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:sb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=sb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=sb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ub(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=qb(function(a){return a===b},i,!0),l=qb(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return!g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++)if(c=d.relative[a[j].type])m=[qb(rb(m),c)];else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[s]){for(e=++j;f>e;e++)if(d.relative[a[e].type])break;return tb(j>1&&rb(m),j>1&&pb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(P,"$1"),c,e>j&&ub(a.slice(j,e)),f>e&&ub(a=a.slice(e)),f>e&&pb(a))}m.push(c)}return rb(m)}function vb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=null==t?1:Math.random()||.1,x=v.length;for(k&&(h=g!==l&&g);q!==x&&null!=(m=v[q]);q++){if(e&&m){n=0;while(o=a[n++])if(o(m,g,i)){j.push(m);break}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}if(p+=q,c&&q!==p){n=0;while(o=b[n++])o(r,s,g,i);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=E.call(j));s=sb(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&db.uniqueSort(j)}return k&&(u=w,h=t),r};return c?fb(f):f}g=db.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=ob(a)),c=b.length;while(c--)f=ub(b[c]),f[s]?d.push(f):e.push(f);f=y(a,vb(e,d))}return f};function wb(a,b,c){for(var d=0,e=b.length;e>d;d++)db(a,b[d],c);return c}function xb(a,b,e,f){var h,i,j,k,l,m=ob(a);if(!f&&1===m.length){if(i=m[0]=m[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&n&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(ab,bb),b)||[])[0],!b)return e;a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){if(j=i[h],d.relative[k=j.type])break;if((l=d.find[k])&&(f=l(j.matches[0].replace(ab,bb),$.test(i[0].type)&&mb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&pb(i),!a)return G.apply(e,f),e;break}}}return g(a,m)(f,b,!n,e,$.test(a)&&mb(b.parentNode)||b),e}return c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=gb(function(a){return 1&a.compareDocumentPosition(l.createElement("div"))}),gb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||hb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&gb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||hb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),gb(function(a){return null==a.getAttribute("disabled")})||hb(J,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),db}(a);o.find=t,o.expr=t.selectors,o.expr[":"]=o.expr.pseudos,o.unique=t.uniqueSort,o.text=t.getText,o.isXMLDoc=t.isXML,o.contains=t.contains;var u=o.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(o.isFunction(b))return o.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return o.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return o.filter(b,a,c);b=o.filter(b,a)}return o.grep(a,function(a){return g.call(b,a)>=0!==c})}o.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?o.find.matchesSelector(d,a)?[d]:[]:o.find.matches(a,o.grep(b,function(a){return 1===a.nodeType}))},o.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(o(a).filter(function(){for(b=0;c>b;b++)if(o.contains(e[b],this))return!0}));for(b=0;c>b;b++)o.find(a,e[b],d);return d=this.pushStack(c>1?o.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?o(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=o.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof o?b[0]:b,o.merge(this,o.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:m,!0)),v.test(c[1])&&o.isPlainObject(b))for(c in b)o.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=m.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=m,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):o.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(o):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),o.makeArray(a,this))};A.prototype=o.fn,y=o(m);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};o.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&o(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),o.fn.extend({has:function(a){var b=o(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(o.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?o(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&o.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?o.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(o(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(o.unique(o.merge(this.get(),o(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}o.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return o.dir(a,"parentNode")},parentsUntil:function(a,b,c){return o.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return o.dir(a,"nextSibling")},prevAll:function(a){return o.dir(a,"previousSibling")},nextUntil:function(a,b,c){return o.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return o.dir(a,"previousSibling",c)},siblings:function(a){return o.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return o.sibling(a.firstChild)},contents:function(a){return a.contentDocument||o.merge([],a.childNodes)}},function(a,b){o.fn[a]=function(c,d){var e=o.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=o.filter(d,e)),this.length>1&&(C[a]||o.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return o.each(a.match(E)||[],function(a,c){b[c]=!0}),b}o.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):o.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){o.each(b,function(b,c){var d=o.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&o.each(arguments,function(a,b){var c;while((c=o.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?o.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},o.extend({Deferred:function(a){var b=[["resolve","done",o.Callbacks("once memory"),"resolved"],["reject","fail",o.Callbacks("once memory"),"rejected"],["notify","progress",o.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return o.Deferred(function(c){o.each(b,function(b,f){var g=o.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&o.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?o.extend(a,d):d}},e={};return d.pipe=d.then,o.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&o.isFunction(a.promise)?e:0,g=1===f?a:o.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&o.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;o.fn.ready=function(a){return o.ready.promise().done(a),this},o.extend({isReady:!1,readyWait:1,holdReady:function(a){a?o.readyWait++:o.ready(!0)},ready:function(a){(a===!0?--o.readyWait:o.isReady)||(o.isReady=!0,a!==!0&&--o.readyWait>0||(H.resolveWith(m,[o]),o.fn.trigger&&o(m).trigger("ready").off("ready")))}});function I(){m.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),o.ready()}o.ready.promise=function(b){return H||(H=o.Deferred(),"complete"===m.readyState?setTimeout(o.ready):(m.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},o.ready.promise();var J=o.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===o.type(c)){e=!0;for(h in c)o.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,o.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(o(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};o.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=o.expando+Math.random()}K.uid=1,K.accepts=o.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,o.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(o.isEmptyObject(f))o.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,o.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{o.isArray(b)?d=b.concat(b.map(o.camelCase)):(e=o.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!o.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?o.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}o.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),o.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;
while(c--)d=g[c].name,0===d.indexOf("data-")&&(d=o.camelCase(d.slice(5)),P(f,d,e[d]));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=o.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),o.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||o.isArray(c)?d=L.access(a,b,o.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=o.queue(a,b),d=c.length,e=c.shift(),f=o._queueHooks(a,b),g=function(){o.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:o.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),o.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?o.queue(this[0],a):void 0===b?this:this.each(function(){var c=o.queue(this,a,b);o._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&o.dequeue(this,a)})},dequeue:function(a){return this.each(function(){o.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=o.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===o.css(a,"display")||!o.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=m.createDocumentFragment(),b=a.appendChild(m.createElement("div"));b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";l.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return m.activeElement}catch(a){}}o.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=o.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof o!==U&&o.event.triggered!==b.type?o.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],n=q=h[1],p=(h[2]||"").split(".").sort(),n&&(l=o.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=o.event.special[n]||{},k=o.extend({type:n,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&o.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),o.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],n=q=h[1],p=(h[2]||"").split(".").sort(),n){l=o.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||o.removeEvent(a,n,r.handle),delete i[n])}else for(n in i)o.event.remove(a,n+b[j],c,d,!0);o.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,p=[d||m],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||m,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+o.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[o.expando]?b:new o.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:o.makeArray(c,[b]),n=o.event.special[q]||{},e||!n.trigger||n.trigger.apply(d,c)!==!1)){if(!e&&!n.noBubble&&!o.isWindow(d)){for(i=n.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||m)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:n.bindType||q,l=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),l&&l.apply(g,c),l=k&&g[k],l&&l.apply&&o.acceptData(g)&&(b.result=l.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||n._default&&n._default.apply(p.pop(),c)!==!1||!o.acceptData(d)||k&&o.isFunction(d[q])&&!o.isWindow(d)&&(h=d[k],h&&(d[k]=null),o.event.triggered=q,d[q](),o.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=o.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=o.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=o.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((o.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?o(e,this).index(i)>=0:o.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||m,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[o.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new o.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=m),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&o.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return o.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=o.extend(new o.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?o.event.trigger(e,null,b):o.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},o.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},o.Event=function(a,b){return this instanceof o.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.getPreventDefault&&a.getPreventDefault()?Z:$):this.type=a,b&&o.extend(this,b),this.timeStamp=a&&a.timeStamp||o.now(),void(this[o.expando]=!0)):new o.Event(a,b)},o.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z,this.stopPropagation()}},o.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){o.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!o.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.focusinBubbles||o.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){o.event.simulate(b,a.target,o.event.fix(a),!0)};o.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),o.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return o().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=o.guid++)),this.each(function(){o.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,o(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){o.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){o.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?o.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return o.nodeName(a,"table")&&o.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)o.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=o.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&o.nodeName(a,b)?o.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}o.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=o.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||o.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===o.type(e))o.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;o.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===o.inArray(e,d))&&(i=o.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f,g,h=o.event.special,i=0;void 0!==(c=a[i]);i++){if(o.acceptData(c)&&(f=c[L.expando],f&&(b=L.cache[f]))){if(d=Object.keys(b.events||{}),d.length)for(g=0;void 0!==(e=d[g]);g++)h[e]?o.event.remove(c,e):o.removeEvent(c,e,b.handle);L.cache[f]&&delete L.cache[f]}delete M.cache[c[M.expando]]}}}),o.fn.extend({text:function(a){return J(this,function(a){return void 0===a?o.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?o.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||o.cleanData(ob(c)),c.parentNode&&(b&&o.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(o.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return o.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(o.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,o.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,n=k-1,p=a[0],q=o.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(k&&(c=o.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=o.map(ob(c,"script"),kb),g=f.length;k>j;j++)h=c,j!==n&&(h=o.clone(h,!0,!0),g&&o.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,o.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&o.contains(i,h)&&(h.src?o._evalUrl&&o._evalUrl(h.src):o.globalEval(h.textContent.replace(hb,"")))}return this}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){o.fn[a]=function(a){for(var c,d=[],e=o(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),o(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d=o(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:o.css(d[0],"display");return d.detach(),e}function tb(a){var b=m,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||o("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||o.contains(a.ownerDocument,a)||(g=o.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",e=m.documentElement,f=m.createElement("div"),g=m.createElement("div");g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",f.appendChild(g);function h(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",e.appendChild(f);var d=a.getComputedStyle(g,null);b="1%"!==d.top,c="4px"===d.width,e.removeChild(f)}a.getComputedStyle&&o.extend(l,{pixelPosition:function(){return h(),b},boxSizingReliable:function(){return null==c&&h(),c},reliableMarginRight:function(){var b,c=g.appendChild(m.createElement("div"));return c.style.cssText=g.style.cssText=d,c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.innerHTML="",b}})}(),o.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:0,fontWeight:400},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=o.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=o.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=o.css(a,"border"+R[f]+"Width",!0,e))):(g+=o.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=o.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===o.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):f[g]||(e=S(d),(c&&"none"!==c||!e)&&L.set(d,"olddisplay",e?c:o.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}o.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=o.camelCase(b),i=a.style;return b=o.cssProps[h]||(o.cssProps[h]=Fb(i,h)),g=o.cssHooks[b]||o.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(o.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||o.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]="",i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=o.camelCase(b);return b=o.cssProps[h]||(o.cssProps[h]=Fb(a.style,h)),g=o.cssHooks[b]||o.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||o.isNumeric(f)?f||0:e):e}}),o.each(["height","width"],function(a,b){o.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&zb.test(o.css(a,"display"))?o.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===o.css(a,"boxSizing",!1,e),e):0)}}}),o.cssHooks.marginRight=yb(l.reliableMarginRight,function(a,b){return b?o.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),o.each({margin:"",padding:"",border:"Width"},function(a,b){o.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(o.cssHooks[a+b].set=Gb)}),o.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(o.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=o.css(a,b[g],!1,d);return f}return void 0!==c?o.style(a,b,c):o.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?o(this).show():o(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}o.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(o.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?o.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=o.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){o.fx.step[a.prop]?o.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[o.cssProps[a.prop]]||o.cssHooks[a.prop])?o.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},o.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},o.fx=Kb.prototype.init,o.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(o.cssNumber[a]?"":"px"),g=(o.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(o.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,o.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=o.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&S(a),p=L.get(a,"fxshow");c.queue||(h=o._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,o.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=o.css(a,"display"),"none"===j&&(j=tb(a.nodeName)),"inline"===j&&"none"===o.css(a,"float")&&(m.display="inline-block")),c.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(n?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;n=!0}l[d]=p&&p[d]||o.style(a,d)}if(!o.isEmptyObject(l)){p?"hidden"in p&&(n=p.hidden):p=L.access(a,"fxshow",{}),f&&(p.hidden=!n),n?o(a).show():k.done(function(){o(a).hide()}),k.done(function(){var b;L.remove(a,"fxshow");for(b in l)o.style(a,b,l[b])});for(d in l)g=Ub(n?p[d]:0,d,k),d in p||(p[d]=g.start,n&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=o.camelCase(c),e=b[d],f=a[c],o.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=o.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=o.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:o.extend({},b),opts:o.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=o.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return o.map(k,Ub,j),o.isFunction(j.opts.start)&&j.opts.start.call(a,j),o.fx.timer(o.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}o.Animation=o.extend(Xb,{tweener:function(a,b){o.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),o.speed=function(a,b,c){var d=a&&"object"==typeof a?o.extend({},a):{complete:c||!c&&b||o.isFunction(a)&&a,duration:a,easing:c&&b||b&&!o.isFunction(b)&&b};return d.duration=o.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in o.fx.speeds?o.fx.speeds[d.duration]:o.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){o.isFunction(d.old)&&d.old.call(this),d.queue&&o.dequeue(this,d.queue)},d},o.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=o.isEmptyObject(a),f=o.speed(b,c,d),g=function(){var b=Xb(this,o.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=o.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&o.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=o.timers,g=d?d.length:0;for(c.finish=!0,o.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),o.each(["toggle","show","hide"],function(a,b){var c=o.fn[b];o.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),o.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){o.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),o.timers=[],o.fx.tick=function(){var a,b=0,c=o.timers;for(Lb=o.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||o.fx.stop(),Lb=void 0},o.fx.timer=function(a){o.timers.push(a),a()?o.fx.start():o.timers.pop()},o.fx.interval=13,o.fx.start=function(){Mb||(Mb=setInterval(o.fx.tick,o.fx.interval))},o.fx.stop=function(){clearInterval(Mb),Mb=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(a,b){return a=o.fx?o.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=m.createElement("input"),b=m.createElement("select"),c=b.appendChild(m.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=m.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var Yb,Zb,$b=o.expr.attrHandle;o.fn.extend({attr:function(a,b){return J(this,o.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){o.removeAttr(this,a)})}}),o.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?o.prop(a,b,c):(1===f&&o.isXMLDoc(a)||(b=b.toLowerCase(),d=o.attrHooks[b]||(o.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=o.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void o.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=o.propFix[c]||c,o.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&o.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?o.removeAttr(a,c):a.setAttribute(c,c),c}},o.each(o.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||o.find.attr;$b[b]=function(a,b,d){var e,f;
return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;o.fn.extend({prop:function(a,b){return J(this,o.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[o.propFix[a]||a]})}}),o.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!o.isXMLDoc(a),f&&(b=o.propFix[b]||b,e=o.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),l.optSelected||(o.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;o.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(o.isFunction(a))return this.each(function(b){o(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=o.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(o.isFunction(a))return this.each(function(b){o(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?o.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(o.isFunction(a)?function(c){o(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=o(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;o.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=o.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,o(this).val()):a,null==e?e="":"number"==typeof e?e+="":o.isArray(e)&&(e=o.map(e,function(a){return null==a?"":a+""})),b=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=o.valHooks[e.type]||o.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),o.extend({valHooks:{select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&o.nodeName(c.parentNode,"optgroup"))){if(b=o(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=o.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=o.inArray(o(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(a,b){return o.isArray(b)?a.checked=o.inArray(o(a).val(),b)>=0:void 0}},l.checkOn||(o.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),o.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){o.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),o.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=o.now(),dc=/\?/;o.parseJSON=function(a){return JSON.parse(a+"")},o.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&o.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=m.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(o.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,o.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=o.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&o.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":o.parseJSON,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,o.ajaxSettings),b):tc(o.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=o.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?o(l):o.event,n=o.Deferred(),p=o.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(n.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=o.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=o.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===o.active++&&o.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(o.lastModified[d]&&v.setRequestHeader("If-Modified-Since",o.lastModified[d]),o.etag[d]&&v.setRequestHeader("If-None-Match",o.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(o.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(o.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?n.resolveWith(l,[r,x,v]):n.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--o.active||o.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return o.get(a,b,c,"json")},getScript:function(a,b){return o.get(a,void 0,b,"script")}}),o.each(["get","post"],function(a,b){o[b]=function(a,c,d,e){return o.isFunction(c)&&(e=e||d,d=c,c=void 0),o.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){o.fn[b]=function(a){return this.on(b,a)}}),o._evalUrl=function(a){return o.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},o.fn.extend({wrapAll:function(a){var b;return o.isFunction(a)?this.each(function(b){o(this).wrapAll(a.call(this,b))}):(this[0]&&(b=o(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(o.isFunction(a)?function(b){o(this).wrapInner(a.call(this,b))}:function(){var b=o(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=o.isFunction(a);return this.each(function(c){o(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){o.nodeName(this,"body")||o(this).replaceWith(this.childNodes)}).end()}}),o.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},o.expr.filters.visible=function(a){return!o.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(o.isArray(b))o.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==o.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}o.param=function(a,b){var c,d=[],e=function(a,b){b=o.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=o.ajaxSettings&&o.ajaxSettings.traditional),o.isArray(a)||a.jquery&&!o.isPlainObject(a))o.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=o.prop(this,"elements");return a?o.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!o(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=o(this).val();return null==c?null:o.isArray(c)?o.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),o.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=o.ajaxSettings.xhr();a.ActiveXObject&&o(a).on("unload",function(){for(var a in Dc)Dc[a]()}),l.cors=!!Fc&&"withCredentials"in Fc,l.ajax=Fc=!!Fc,o.ajaxTransport(function(a){var b;return l.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort"),f.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}:void 0}),o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return o.globalEval(a),a}}}),o.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),o.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=o("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),m.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||o.expando+"_"+cc++;return this[a]=!0,a}}),o.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=o.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||o.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&o.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),o.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||m;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=o.buildFragment([a],b,e),e&&e.length&&o(e).remove(),o.merge([],d.childNodes))};var Ic=o.fn.load;o.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h),a=a.slice(0,h)),o.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&o.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?o("<div>").append(o.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},o.expr.filters.animated=function(a){return o.grep(o.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return o.isWindow(a)?a:9===a.nodeType&&a.defaultView}o.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=o.css(a,"position"),l=o(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=o.css(a,"top"),i=o.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),o.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},o.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){o.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,o.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===o.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),o.nodeName(a[0],"html")||(d=a.offset()),d.top+=o.css(a[0],"borderTopWidth",!0),d.left+=o.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-o.css(c,"marginTop",!0),left:b.left-d.left-o.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!o.nodeName(a,"html")&&"static"===o.css(a,"position"))a=a.offsetParent;return a||Jc})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;o.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),o.each(["top","left"],function(a,b){o.cssHooks[b]=yb(l.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?o(a).position()[b]+"px":c):void 0})}),o.each({Height:"height",Width:"width"},function(a,b){o.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){o.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return o.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?o.css(b,c,g):o.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),o.fn.size=function(){return this.length},o.fn.andSelf=o.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return o});var Lc=a.jQuery,Mc=a.$;return o.noConflict=function(b){return a.$===o&&(a.$=Mc),b&&a.jQuery===o&&(a.jQuery=Lc),o},typeof b===U&&(a.jQuery=a.$=o),o});

/*! jQuery UI - v1.9.1 - 2012-10-25
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:u.widgetEventPrefix||t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var r,i=this;n?(t=r=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(i.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=n.match(/^(\w+)\s*(.*)$/),a=u[1]+i.eventNamespace,f=u[2];f?r.delegate(f,a,o):t.bind(a,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()}).mouseleave(function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")}).insertAfter(n),n.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,n=this.options,r={},i=this,s=this.originalMousePosition,o=this.axis,u=e.pageX-s.left||0,a=e.pageY-s.top||0,f=this._change[o];if(!f)return!1;var l=f.apply(this,[e,u,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey)l=this._updateRatio(l,e);return l=this._respectSize(l,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.ui.ie6?1:0,i=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-r+"px",top:this.elementOffset.top-r+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var a=o;o=i,i=a}if(s>u){var a=u;u=s,s=a}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!a||a.element==n.element[0])return;var f=!1;r.tolerance=="touch"?f=!(a.left>o||a.right<i||a.top>u||a.bottom<s):r.tolerance=="fit"&&(f=a.left>i&&a.right<o&&a.top>s&&a.bottom<u),f?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,n._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&((t.metaKey||t.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),n._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&!t.metaKey&&!t.ctrlKey&&!a.startselected&&(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,n._trigger("unselecting",t,{unselecting:a.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==r)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(s.instance!==this.currentContainer)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}}for(var s=r.length-1;s>=0;s--){var f=r[s][1],l=r[s][0];for(var u=0,c=l.length;u<c;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){if(r&&!n.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else{var s=1e4,o=null,u=this.containers[r].floating?"left":"top",a=this.containers[r].floating?"width":"height",f=this.positionAbs[u]+this.offset.click[u];for(var l=this.items.length-1;l>=0;l--){if(!e.contains(this.containers[r].element[0],this.items[l].item[0]))continue;if(this.items[l].item[0]==this.currentItem[0])continue;var c=this.items[l].item.offset()[u],h=!1;Math.abs(c-f)>Math.abs(c+this.items[l][a]-f)&&(h=!0,c+=this.items[l][a]),Math.abs(c-f)<s&&(s=Math.abs(c-f),o=this.items[l],this.direction=h?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,r="ui-effects-";e.effects={effect:{}},function(t,n){function p(e,t,n){var r=a[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function d(e){var n=o(),r=n._rgba=[];return e=e.toLowerCase(),h(s,function(t,i){var s,o=i.re.exec(e),a=o&&i.parse(o),f=i.space||"rgba";if(a)return s=n[f](a),n[u[f].cache]=s[u[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&t.extend(r,c.transparent),n):c[e]}function v(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),i=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=t.Color=function(e,n,r,i){return new t.Color.fn.parse(e,n,r,i)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=o.support={},l=t("<p>")[0],c,h=t.each;l.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=l.style.backgroundColor.indexOf("rgba")>-1,h(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),o.fn=t.extend(o.prototype,{parse:function(r,i,s,a){if(r===n)return this._rgba=[null,null,null,null],this;if(r.jquery||r.nodeType)r=t(r).css(i),i=n;var f=this,l=t.type(r),v=this._rgba=[];i!==n&&(r=[r,i,s,a],l="array");if(l==="string")return this.parse(d(r)||c._default);if(l==="array")return h(u.rgba.props,function(e,t){v[t.idx]=p(r[t.idx],t)}),this;if(l==="object")return r instanceof o?h(u,function(e,t){r[t.cache]&&(f[t.cache]=r[t.cache].slice())}):h(u,function(t,n){var i=n.cache;h(n.props,function(e,t){if(!f[i]&&n.to){if(e==="alpha"||r[e]==null)return;f[i]=n.to(f._rgba)}f[i][t.idx]=p(r[e],t,!0)}),f[i]&&e.inArray(null,f[i].slice(0,3))<0&&(f[i][3]=1,n.from&&(f._rgba=n.from(f[i])))}),this},is:function(e){var t=o(e),n=!0,r=this;return h(u,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],h(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return h(u,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=o(e),r=n._space(),i=u[r],s=this.alpha()===0?o("transparent"):this,f=s[i.cache]||i.to(s._rgba),l=f.slice();return n=n[i.cache],h(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],u=a[r.type]||{};if(o===null)return;s===null?l[i]=o:(u.mod&&(o-s>u.mod/2?s+=u.mod:s-o>u.mod/2&&(s-=u.mod)),l[i]=p((o-s)*t+s,r))}),this[r](l)},blend:function(e){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=o(e)._rgba;return o(t.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),r=n.pop();return e&&n.push(~~(r*255)),"#"+t.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,u.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,f===0||f===1?c=f:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},u.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(v(o,s,t+1/3)*255),Math.round(v(o,s,t)*255),Math.round(v(o,s,t-1/3)*255),i]},h(u,function(e,r){var s=r.props,u=r.cache,a=r.to,f=r.from;o.fn[e]=function(e){a&&!this[u]&&(this[u]=a(this._rgba));if(e===n)return this[u].slice();var r,i=t.type(e),l=i==="array"||i==="object"?e:arguments,c=this[u].slice();return h(s,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=c[t.idx]),c[t.idx]=p(n,t)}),f?(r=o(f(c)),r[u]=c,r):o(c)},h(s,function(n,r){if(o.fn[n])return;o.fn[n]=function(s){var o=t.type(s),u=n==="alpha"?this._hsla?"hsla":"rgba":e,a=this[u](),f=a[r.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=t.type(s)),s==null&&r.empty?this:(o==="string"&&(l=i.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[r.idx]=s,this[u](a)))}})}),h(r,function(e,n){t.cssHooks[n]={set:function(e,r){var i,s,u="";if(t.type(r)!=="string"||(i=d(r))){r=o(i||r);if(!f.rgba&&r._rgba[3]!==1){s=n==="backgroundColor"?e.parentNode:e;while((u===""||u==="transparent")&&s&&s.style)try{u=t.css(s,"backgroundColor"),s=s.parentNode}catch(a){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=o(e.elem,n),e.end=o(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},c=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={},r,i;if(t&&t.length&&t[0]&&t[t[0]]){i=t.length;while(i--)r=t[i],typeof t[r]=="string"&&(n[e.camelCase(r)]=t[r])}else for(r in t)typeof t[r]=="string"&&(n[r]=t[r]);return n}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").andSelf():r;f=f.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i.call(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=jQuery.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function i(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function s(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?n&&e.effects[t]?!1:!0:!1}e.extend(e.effects,{version:"1.9.1",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data(r+t[n],e[0].style[t[n]])},restore:function(e,n){var i,s;for(s=0;s<n.length;s++)n[s]!==null&&(i=e.data(r+n[s]),i===t&&(i=""),e.css(n[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function a(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,s=t.mode;(r.is(":hidden")?s==="hide":s==="show")?u():o.call(r[0],t,u)}var t=i.apply(this,arguments),r=t.mode,s=t.queue,o=e.effects.effect[t.effect],u=!o&&n&&e.effects[t.effect];return e.fx.off||!o&&!u?r?this[r](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):o?s===!1?this.each(a):this.queue(s||"fx",a):u.call(this,{options:t,duration:t.duration,callback:t.complete,mode:t.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery),function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n),r=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(r.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!r.collapsible&&(r.active===!1||r.active==null)&&(r.active=0),r.active<0&&(r.active+=this.headers.length),this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(n){var r=e(this),i=r.attr("id"),s=r.next(),o=s.attr("id");i||(i=t+"-header-"+n,r.attr("id",i)),o||(o=t+"-panel-"+n,s.attr("id",o)),r.attr("aria-controls",o),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(r.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,n,r=this.options.heightStyle,i=this.element.parent();r==="fill"?(e.support.minHeight||(n=i.css("overflow"),i.css("overflow","hidden")),t=i.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),n&&i.css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):r==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={};if(!t)return;e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._on(this.headers,n)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var n=t._create;t._create=function(){if(this.options.navigation){var t=this,r=this.element.find(this.options.header),i=r.next(),s=r.add(i).find("a").filter(this.options.navigationFilter)[0];s&&r.add(i).each(function(n){if(e.contains(this,s))return t.options.active=Math.floor(n/2),!1})}n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var n=t._create,r=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),n.call(this)},_setOption:function(e){if(e==="autoHeight"||e==="clearStyle"||e==="fillSpace")this.options.heightStyle=this._mergeHeightStyle();r.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;if(e.fillSpace)return"fill";if(e.clearStyle)return"content";if(e.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var n=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var n=t._findActive;t._findActive=function(e){return e===-1&&(e=!1),e&&typeof e!="number"&&(e=this.headers.index(this.headers.filter(e)),e===-1&&(e=!1)),n.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var n=t._trigger;t._trigger=function(e,t,r){var i=n.apply(this,arguments);return i?(e==="beforeActivate"?i=n.call(this,"changestart",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel}):e==="activate"&&(i=n.call(this,"change",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel})),i):!1}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var n=t._create;t._create=function(){var e=this.options;e.animate===null&&(e.animated?e.animated==="slide"?e.animate=300:e.animated==="bounceslide"?e.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animate=e.animated:e.animate=!1),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this.document.find(t||"body")[0]),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})}(jQuery),function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c="ui-state-hover"+(a?"":" ui-state-active"),h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.1"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.1",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.1",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t=this,r=this.options,i=r.title||"&#160;",s,o,u,a,f;s=(this.uiDialog=e("<div>")).addClass(n+r.dialogClass).css({display:"none",outline:0,zIndex:r.zIndex}).attr("tabIndex",-1).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).mousedown(function(e){t.moveToTop(!1,e)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),o=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){s.focus()}).prependTo(s),u=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),t.close(e)}).appendTo(o),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(u),a=e("<span>").uniqueId().addClass("ui-dialog-title").html(i).prependTo(o),f=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(f),s.attr({role:"dialog","aria-labelledby":a.attr("id")}),o.find("*").add(o).disableSelection(),this._hoverable(u),this._focusable(u),r.draggable&&e.fn.draggable&&this._makeDraggable(),r.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(r.buttons),this._isOpen=!1,e.fn.bgiframe&&s.bgiframe(),this._on(s,{keydown:function(t){if(!r.modal||t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",s),i=n.filter(":first"),o=n.filter(":last");if(t.target===o[0]&&!t.shiftKey)return i.focus(1),!1;if(t.target===i[0]&&t.shiftKey)return o.focus(1),!1}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!this._isOpen)return;if(!1===this._trigger("beforeClose",t))return;return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),this},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this.options,i;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",n):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),i={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(i),this._trigger("focus",n),this)},open:function(){if(this._isOpen)return;var t,n=this.options,r=this.uiDialog;return this._size(),this._position(n.position),r.show(n.show),this.overlay=n.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=r)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(t){var n=this,r=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r?(e.each(t,function(t,r){r=e.isFunction(r)?{click:r,text:t}:r;var i=e("<button type='button'></button>").attr(r,!0).unbind("click").click(function(){r.click.apply(n.element[0],arguments)}).appendTo(n.uiButtonSet);e.fn.button&&i.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=this.options,s=this.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,u(n))},resize:function(e,t){r._trigger("resize",e,u(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("resizeStop",t,u(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i,s,o=this.uiDialog;switch(t){case"buttons":this._createButtons(r);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(n+r);break;case"disabled":r?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":i=o.is(":data(draggable)"),i&&!r&&o.draggable("destroy"),!i&&r&&this._makeDraggable();break;case"position":this._position(r);break;case"resizable":s=o.is(":data(resizable)"),s&&!r&&o.resizable("destroy"),s&&typeof r=="string"&&o.resizable("option","handles",r),!s&&r!==!1&&this._makeResizable(r);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(r||"&#160;"))}this._super(t,r)},_size:function(){var t,n,r,i=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),n=Math.max(0,i.minHeight-t),i.height==="auto"?e.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),r=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(r,n))):this.element.height(Math.max(i.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(r){var i=e.ui.dialog.overlay.instances;i.length!==0&&i[i.length-1]===n&&t.options.closeOnEscape&&!r.isDefaultPrevented()&&r.keyCode&&r.keyCode===e.ui.keyCode.ESCAPE&&(t.close(r),r.preventDefault())}),n.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances),r=0;n!==-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}}(jQuery),function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}}(jQuery),function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var r=e(t.target).closest(".ui-menu-item");!n&&r.not(".ui-state-disabled").length&&(n=!0,this.select(t),r.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),r.each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.9.1",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){e==="value"&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,r,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&i.values.length!==2&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(i.range==="min"||i.range==="max"?" ui-slider-range-"+i.range:""))),r=i.values&&i.values.length||1;for(t=s.length;t<r;t++)u.push(o);this.handles=s.add(e(u.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){i.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));i>n&&(i=n,s=e(this),o=t)}),c.range===!0&&this.values(1)===c.min&&(o+=1,s=e(this.handles[o])),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++n}function s(e){return e.hash.length>1&&e.href.replace(r,"")===location.href.replace(r,"")}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.9.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options,r=n.active,i=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs();if(r===null){i&&this.tabs.each(function(t,n){if(e(n).attr("aria-controls")===i)return r=t,!1}),r===null&&(r=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(r===null||r===-1)r=this.tabs.length?0:!1}r!==!1&&(r=this.tabs.index(this.tabs.eq(r)),r===-1&&(r=n.collapsible?!1:0)),n.active=r,!n.collapsible&&n.active===!1&&this.anchors.length&&(n.active=0),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r,i=this.element.parent();t==="fill"?(e.support.minHeight||(r=i.css("overflow"),i.css("overflow","hidden")),n=i.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),r&&i.css("overflow",r),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n):t.removeAttr("aria-controls")}),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(n,r){if(e.data(r.tab[0],"cache.tabs")){n.preventDefault();return}r.jqXHR.success(function(){t.options.cache&&e.data(r.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(t,n,r){var i=this.options.ajaxOptions;return e.extend({},i,{error:function(e,t){try{i.error(e,t,r.tab.closest("li").index(),r.tab[0])}catch(n){}}},this._superApply(arguments))},_setOption:function(e,t){e==="cache"&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target!==this.element[0]||!this.options.spinner)return;var n=t.tab.find("span"),r=n.html();n.html(this.options.spinner),t.jqXHR.complete(function(){n.html(r)})}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var n=this.options,r;if(t&&n.disabled===!0||e.isArray(n.disabled)&&e.inArray(t,n.disabled)!==-1)r=!0;this._superApply(arguments),r&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var n=this.options,r;if(t&&n.disabled===!1||e.isArray(n.disabled)&&e.inArray(t,n.disabled)===-1)r=!0;this._superApply(arguments),r&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(n,r,i){i===t&&(i=this.anchors.length);var s,o,u=this.options,a=e(u.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,r)),f=n.indexOf("#")?this._tabId(a):n.replace("#","");return a.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),a.attr("aria-controls",f),s=i>=this.tabs.length,o=this.element.find("#"+f),o.length||(o=this._createPanel(f),s?i>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[i])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?a.appendTo(this.tablist):a.insertBefore(this.tabs[i]),u.disabled=e.map(u.disabled,function(e){return e>=i?++e:e}),this.refresh(),this.tabs.length===1&&u.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var n=this.options,r=this.tabs.eq(t).remove(),i=this._getPanelForTab(r).remove();return r.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;e.active===null&&e.selected!==t&&(e.active=e.selected===-1?!1:e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if(e!=="selected")return this._super(e,t);var n=this.options;this._super("active",t===-1?!1:t),n.selected=n.active,n.selected===!1&&(n.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,n){var r=this._superApply(arguments);return r?(e==="beforeActivate"&&n.newTab.length?r=this._super("select",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()}):e==="activate"&&n.newTab.length&&(r=this._super("show",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()})),r):!1}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){e=this._getIndex(e);if(e===-1){if(!this.options.collapsible||this.options.selected===-1)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e=this.options,t;e.active==null&&e.cookie&&(t=parseInt(this._cookie(),10),t===-1&&(t=!1),e.active=t),this._super()},_cookie:function(n){var r=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(r.push(n===!1?-1:n),r.push(this.options.cookie)),e.cookie.apply(null,r)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,n,r){var i=e.extend({},r);return t==="load"&&(i.panel=i.panel[0],i.tab=i.tab.find(".ui-tabs-anchor")[0]),this._super(t,n,i)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,n,r=this.options.fx;return r&&(e.isArray(r)?(t=r[0],n=r[1]):t=n=r),r?{show:n,hide:t}:null},_toggle:function(e,t){function o(){n.running=!1,n._trigger("activate",e,t)}function u(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.show?r.animate(s.show,s.show.duration,function(){o()}):(r.show(),o())}var n=this,r=t.newPanel,i=t.oldPanel,s=this._getFx();if(!s)return this._super(e,t);n.running=!0,i.length&&s.hide?i.animate(s.hide,s.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i.hide(),u())}}))}(jQuery),function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.9.1",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length)return;if(this.options.track&&r.data("ui-tooltip-id")){this._find(r).position(e.extend({of:r},this.options.position)),this._off(this.document,"mousemove");return}r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t;e(this).data("tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),this.title&&(e(this).uniqueId(),n.parents[this.id]={element:this,title:this.title},this.title="")}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("tooltip-open"))return;i._delay(function(){this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.originalEvent.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(e,t){t.element.title=t.title,delete n.parents[e]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),e.fn.bgiframe&&i.bgiframe(),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(jQuery);
$.widget("app.dialog",$.ui.dialog,{options:{iconButtons:[]},_create:function(){this._super();var e=this.uiDialog.find(".ui-dialog-titlebar");$.each(this.options.iconButtons,function(t,n){var r=$("<button/>").text(this.text),i=e.find("[role='button']:last").css("right");r.button({icons:{primary:this.icon},text:false}).addClass("ui-dialog-titlebar-close").css("right",parseInt(i)+22+"px").click(this.click).appendTo(e)})}});

/*! jquery-dialogextend 2.0.3 2014-07-08 */
(function(){var i;i=jQuery,i.widget("ui.dialogExtend",{version:"2.0.0",modes:{},options:{closable:!0,dblclick:!1,titlebar:!1,icons:{close:"ui-icon-closethick",restore:"ui-icon-newwin"},load:null,beforeRestore:null,restore:null},_create:function(){return this._state="normal",i(this.element[0]).data("ui-dialog")||i.error("jQuery.dialogExtend Error : Only jQuery UI Dialog element is accepted"),this._verifyOptions(),this._initStyles(),this._initButtons(),this._initTitleBar(),this._setState("normal"),this._on("load",function(i){return console.log("test",i)}),this._trigger("load")},_setState:function(t){return i(this.element[0]).removeClass("ui-dialog-"+this._state).addClass("ui-dialog-"+t),this._state=t},_verifyOptions:function(){var t,e,o;!this.options.dblclick||this.options.dblclick in this.modes||(i.error("jQuery.dialogExtend Error : Invalid <dblclick> value '"+this.options.dblclick+"'"),this.options.dblclick=!1),this.options.titlebar&&"none"!==(e=this.options.titlebar)&&"transparent"!==e&&(i.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'"),this.options.titlebar=!1),o=[];for(t in this.modes)this["_verifyOptions_"+t]?o.push(this["_verifyOptions_"+t]()):o.push(void 0);return o},_initStyles:function(){var t,e,o;i(".dialog-extend-css").length||(e="",e+='<style class="dialog-extend-css" type="text/css">',e+=".ui-dialog .ui-dialog-titlebar-buttonpane>a { float: right; }",e+=".ui-dialog .ui-dialog-titlebar-restore { width: 19px; height: 18px; }",e+=".ui-dialog .ui-dialog-titlebar-restore span { display: block; margin: 1px; }",e+=".ui-dialog .ui-dialog-titlebar-restore:hover,",e+=".ui-dialog .ui-dialog-titlebar-restore:focus { padding: 0; }",e+=".ui-dialog .ui-dialog-titlebar ::selection { background-color: transparent; }",e+="</style>",i(e).appendTo("body")),o=[];for(t in this.modes)o.push(this["_initStyles_"+t]());return o},_initButtons:function(){var t,e,o,n,a,l=this;n=i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar"),t=i('<div class="ui-dialog-titlebar-buttonpane"></div>').appendTo(n),t.css({position:"absolute",top:"50%",right:"0.3em","margin-top":"-10px",height:"18px"}),n.find(".ui-dialog-titlebar-close").css({position:"relative","float":"right",top:"auto",right:"auto",margin:0}).find(".ui-icon").removeClass("ui-icon-closethick").addClass(this.options.icons.close).end().appendTo(t).end(),t.append('<a class="ui-dialog-titlebar-restore ui-corner-all ui-state-default" href="#"><span class="ui-icon '+this.options.icons.restore+'" title="restore">restore</span></a>').find(".ui-dialog-titlebar-restore").attr("role","button").mouseover(function(){return i(this).addClass("ui-state-hover")}).mouseout(function(){return i(this).removeClass("ui-state-hover")}).focus(function(){return i(this).addClass("ui-state-focus")}).blur(function(){return i(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-close").toggle(this.options.closable).end().find(".ui-dialog-titlebar-restore").hide().click(function(i){return i.preventDefault(),l.restore()}).end(),a=this.modes;for(o in a)e=a[o],this._initModuleButton(o,e);return n.dblclick(function(){return l.options.dblclick?"normal"!==l._state?l.restore():l[l.options.dblclick]():void 0}).select(function(){return!1})},_initModuleButton:function(t,e){var o,n=this;return o=i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-buttonpane"),o.append('<a class="ui-dialog-titlebar-'+t+' ui-corner-all ui-state-default" href="#" title="'+t+'"><span class="ui-icon '+this.options.icons[t]+'">'+t+"</span></a>").find(".ui-dialog-titlebar-"+t).attr("role","button").mouseover(function(){return i(this).addClass("ui-state-hover")}).mouseout(function(){return i(this).removeClass("ui-state-hover")}).focus(function(){return i(this).addClass("ui-state-focus")}).blur(function(){return i(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-"+t).toggle(this.options[e.option]).click(function(i){return i.preventDefault(),n[t]()}).end()},_initTitleBar:function(){var t;switch(this.options.titlebar){case!1:return 0;case"none":return i(this.element[0]).dialog("option","draggable")&&(t=i("<div />").addClass("ui-dialog-draggable-handle").css("cursor","move").height(5),i(this.element[0]).dialog("widget").prepend(t).draggable("option","handle",t)),i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").find(".ui-dialog-title").html("&nbsp;").end().css({"background-color":"transparent","background-image":"none",border:0,position:"absolute",right:0,top:0,"z-index":9999}).end();case"transparent":return i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css({"background-color":"transparent","background-image":"none",border:0});default:return i.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'")}},state:function(){return this._state},restore:function(){return this._trigger("beforeRestore"),this._restore(),this._toggleButtons(),this._trigger("restore")},_restore:function(){return"normal"!==this._state?(this["_restore_"+this._state](),this._setState("normal"),i(this.element[0]).dialog("widget").focus()):void 0},_saveSnapshot:function(){return"normal"===this._state?(this.original_config_resizable=i(this.element[0]).dialog("option","resizable"),this.original_config_draggable=i(this.element[0]).dialog("option","draggable"),this.original_size_height=i(this.element[0]).dialog("widget").outerHeight(),this.original_size_width=i(this.element[0]).dialog("option","width"),this.original_size_maxHeight=i(this.element[0]).dialog("option","maxHeight"),this.original_position_mode=i(this.element[0]).dialog("widget").css("position"),this.original_position_left=i(this.element[0]).dialog("widget").offset().left-i("body").scrollLeft(),this.original_position_top=i(this.element[0]).dialog("widget").offset().top-i("body").scrollTop(),this.original_titlebar_wrap=i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css("white-space")):void 0},_loadSnapshot:function(){return{config:{resizable:this.original_config_resizable,draggable:this.original_config_draggable},size:{height:this.original_size_height,width:this.original_size_width,maxHeight:this.original_size_maxHeight},position:{mode:this.original_position_mode,left:this.original_position_left,top:this.original_position_top},titlebar:{wrap:this.original_titlebar_wrap}}},_toggleButtons:function(t){var e,o,n,a,l,s;n=t||this._state,i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-restore").toggle("normal"!==n).css({right:"1.4em"}).end(),a=this.modes;for(o in a)e=a[o],i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-"+o).toggle(n!==e.state&&this.options[e.option]);l=this.modes,s=[];for(o in l)e=l[o],e.state===n?s.push(i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-restore").insertAfter(i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-"+o)).end()):s.push(void 0);return s}})}).call(this),function(){var i;i=jQuery,i.extend(!0,i.ui.dialogExtend.prototype,{modes:{collapse:{option:"collapsable",state:"collapsed"}},options:{collapsable:!1,icons:{collapse:"ui-icon-triangle-1-s"},beforeCollapse:null,collapse:null},collapse:function(){var t,e;return t=i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").height()+15,this._trigger("beforeCollapse"),"normal"!==this._state&&this._restore(),this._saveSnapshot(),e=i(this.element[0]).dialog("widget").position(),i(this.element[0]).dialog("option",{resizable:!1,height:t,maxHeight:t,position:[e.left-i(document).scrollLeft(),e.top-i(document).scrollTop()]}).on("dialogclose",this._collapse_restore).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content"),this._setState("collapsed"),this._toggleButtons(),this._trigger("collapse")},_restore_collapsed:function(){var t;return t=this._loadSnapshot(),i(this.element[0]).show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",t.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:t.config.resizable,height:t.size.height,maxHeight:t.size.maxHeight}).off("dialogclose",this._collapse_restore)},_initStyles_collapse:function(){var t;return i(".dialog-extend-collapse-css").length?void 0:(t="",t+='<style class="dialog-extend-collapse-css" type="text/css">',t+=".ui-dialog .ui-dialog-titlebar-collapse { width: 19px; height: 18px; }",t+=".ui-dialog .ui-dialog-titlebar-collapse span { display: block; margin: 1px; }",t+=".ui-dialog .ui-dialog-titlebar-collapse:hover,",t+=".ui-dialog .ui-dialog-titlebar-collapse:focus { padding: 0; }",t+="</style>",i(t).appendTo("body"))},_collapse_restore:function(){return i(this).dialogExtend("restore")}})}.call(this),function(){var i;i=jQuery,i.extend(!0,i.ui.dialogExtend.prototype,{modes:{maximize:{option:"maximizable",state:"maximized"}},options:{maximizable:!1,icons:{maximize:"ui-icon-extlink"},beforeMaximize:null,maximize:null},maximize:function(){var t,e;return t=i(window).height()-11,e=i(window).width()-11,this._trigger("beforeMaximize"),"normal"!==this._state&&this._restore(),this._saveSnapshot(),i(this.element[0]).dialog("option","draggable")&&i(this.element[0]).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end(),i(this.element[0]).dialog("widget").css("position","fixed").find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane").show().end().find(".ui-dialog-content").dialog("option",{resizable:!1,draggable:!1,height:t,width:e,position:{my:"left top",at:"left top",of:window}}),this._setState("maximized"),this._toggleButtons(),this._trigger("maximize")},_restore_maximized:function(){var t;return t=this._loadSnapshot(),i(this.element[0]).dialog("widget").css("position",t.position.mode).find(".ui-dialog-titlebar").css("white-space",t.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:t.config.resizable,draggable:t.config.draggable,height:t.size.height,width:t.size.width,maxHeight:t.size.maxHeight,position:{my:"left top",at:"left+"+t.position.left+" top+"+t.position.top,of:window}}),i(this.element[0]).dialog("option","draggable")?i(this.element[0]).dialog("widget").draggable("option","handle",i(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle").length?i(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle"):".ui-dialog-titlebar").find(".ui-dialog-draggable-handle").css("cursor","move"):void 0},_initStyles_maximize:function(){var t;return i(".dialog-extend-maximize-css").length?void 0:(t="",t+='<style class="dialog-extend-maximize-css" type="text/css">',t+=".ui-dialog .ui-dialog-titlebar-maximize { width: 19px; height: 18px; }",t+=".ui-dialog .ui-dialog-titlebar-maximize span { display: block; margin: 1px; }",t+=".ui-dialog .ui-dialog-titlebar-maximize:hover,",t+=".ui-dialog .ui-dialog-titlebar-maximize:focus { padding: 0; }",t+="</style>",i(t).appendTo("body"))}})}.call(this),function(){var i;i=jQuery,i.extend(!0,i.ui.dialogExtend.prototype,{modes:{minimize:{option:"minimizable",state:"minimized"}},options:{minimizable:!1,minimizeLocation:"left",icons:{minimize:"ui-icon-minus"},beforeMinimize:null,minimize:null},minimize:function(){var t,e,o;return this._trigger("beforeMinimize"),"normal"!==this._state&&this._restore(),o=200,i("#dialog-extend-fixed-container").length?e=i("#dialog-extend-fixed-container"):(e=i('<div id="dialog-extend-fixed-container"></div>').appendTo("body"),e.css({position:"fixed",bottom:1,left:1,right:1,"z-index":9999})),this._toggleButtons("minimized"),t=i(this.element[0]).dialog("widget").clone().children().remove().end(),i(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").clone(!0,!0).appendTo(t),t.css({"float":this.options.minimizeLocation,margin:1}),e.append(t),i(this.element[0]).data("dialog-extend-minimize-controls",t),i(this.element[0]).dialog("option","draggable")&&t.removeClass("ui-draggable"),t.css({height:"auto",width:o,position:"static"}),i(this.element[0]).on("dialogbeforeclose",this._minimize_restoreOnClose).dialog("widget").hide(),this._setState("minimized"),this._trigger("minimize")},_restore_minimized:function(){return i(this.element[0]).dialog("widget").show(),i(this.element[0]).off("dialogbeforeclose",this._minimize_restoreOnClose),i(this.element[0]).data("dialog-extend-minimize-controls").remove(),i(this.element[0]).removeData("dialog-extend-minimize-controls")},_initStyles_minimize:function(){var t;return i(".dialog-extend-minimize-css").length?void 0:(t="",t+='<style class="dialog-extend-minimize-css" type="text/css">',t+=".ui-dialog .ui-dialog-titlebar-minimize { width: 19px; height: 18px; }",t+=".ui-dialog .ui-dialog-titlebar-minimize span { display: block; margin: 1px; }",t+=".ui-dialog .ui-dialog-titlebar-minimize:hover,",t+=".ui-dialog .ui-dialog-titlebar-minimize:focus { padding: 0; }",t+="</style>",i(t).appendTo("body"))},_verifyOptions_minimize:function(){var t;return!this.options.minimizeLocation||"left"!==(t=this.options.minimizeLocation)&&"right"!==t?(i.error("jQuery.dialogExtend Error : Invalid <minimizeLocation> value '"+this.options.minimizeLocation+"'"),this.options.minimizeLocation="left"):void 0},_minimize_restoreOnClose:function(){return i(this).dialogExtend("restore")}})}.call(this);

/*! jQuery UI - v1.10.4 - 2014-04-02
* http://jqueryui.com
* Includes: jquery.ui.datepicker-af.js, jquery.ui.datepicker-ar-DZ.js, jquery.ui.datepicker-ar.js, jquery.ui.datepicker-az.js, jquery.ui.datepicker-be.js, jquery.ui.datepicker-bg.js, jquery.ui.datepicker-bs.js, jquery.ui.datepicker-ca.js, jquery.ui.datepicker-cs.js, jquery.ui.datepicker-cy-GB.js, jquery.ui.datepicker-da.js, jquery.ui.datepicker-de.js, jquery.ui.datepicker-el.js, jquery.ui.datepicker-en-AU.js, jquery.ui.datepicker-en-GB.js, jquery.ui.datepicker-en-NZ.js, jquery.ui.datepicker-eo.js, jquery.ui.datepicker-es.js, jquery.ui.datepicker-et.js, jquery.ui.datepicker-eu.js, jquery.ui.datepicker-fa.js, jquery.ui.datepicker-fi.js, jquery.ui.datepicker-fo.js, jquery.ui.datepicker-fr-CA.js, jquery.ui.datepicker-fr-CH.js, jquery.ui.datepicker-fr.js, jquery.ui.datepicker-gl.js, jquery.ui.datepicker-he.js, jquery.ui.datepicker-hi.js, jquery.ui.datepicker-hr.js, jquery.ui.datepicker-hu.js, jquery.ui.datepicker-hy.js, jquery.ui.datepicker-id.js, jquery.ui.datepicker-is.js, jquery.ui.datepicker-it.js, jquery.ui.datepicker-ja.js, jquery.ui.datepicker-ka.js, jquery.ui.datepicker-kk.js, jquery.ui.datepicker-km.js, jquery.ui.datepicker-ko.js, jquery.ui.datepicker-ky.js, jquery.ui.datepicker-lb.js, jquery.ui.datepicker-lt.js, jquery.ui.datepicker-lv.js, jquery.ui.datepicker-mk.js, jquery.ui.datepicker-ml.js, jquery.ui.datepicker-ms.js, jquery.ui.datepicker-nb.js, jquery.ui.datepicker-nl-BE.js, jquery.ui.datepicker-nl.js, jquery.ui.datepicker-nn.js, jquery.ui.datepicker-no.js, jquery.ui.datepicker-pl.js, jquery.ui.datepicker-pt-BR.js, jquery.ui.datepicker-pt.js, jquery.ui.datepicker-rm.js, jquery.ui.datepicker-ro.js, jquery.ui.datepicker-ru.js, jquery.ui.datepicker-sk.js, jquery.ui.datepicker-sl.js, jquery.ui.datepicker-sq.js, jquery.ui.datepicker-sr-SR.js, jquery.ui.datepicker-sr.js, jquery.ui.datepicker-sv.js, jquery.ui.datepicker-ta.js, jquery.ui.datepicker-th.js, jquery.ui.datepicker-tj.js, jquery.ui.datepicker-tr.js, jquery.ui.datepicker-uk.js, jquery.ui.datepicker-vi.js, jquery.ui.datepicker-zh-CN.js, jquery.ui.datepicker-zh-HK.js, jquery.ui.datepicker-zh-TW.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

jQuery(function(e){e.datepicker.regional.af={closeText:"Selekteer",prevText:"Vorige",nextText:"Volgende",currentText:"Vandag",monthNames:["Januarie","Februarie","Maart","April","Mei","Junie","Julie","Augustus","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],dayNames:["Sondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrydag","Saterdag"],dayNamesShort:["Son","Maa","Din","Woe","Don","Vry","Sat"],dayNamesMin:["So","Ma","Di","Wo","Do","Vr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.af)}),jQuery(function(e){e.datepicker.regional["ar-DZ"]={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["ar-DZ"])}),jQuery(function(e){e.datepicker.regional.ar={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:[" ","","","","","","","",""," "," "," "],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ar)}),jQuery(function(e){e.datepicker.regional.az={closeText:"Bala",prevText:"&#x3C;Geri",nextText:"rli&#x3E;",currentText:"Bugn",monthNames:["Yanvar","Fevral","Mart","Aprel","May","yun","yul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],monthNamesShort:["Yan","Fev","Mar","Apr","May","yun","yul","Avq","Sen","Okt","Noy","Dek"],dayNames:["Bazar","Bazar ertsi","rnb axam","rnb","Cm axam","Cm","nb"],dayNamesShort:["B","Be","a","","Ca","C",""],dayNamesMin:["B","B","","","","C",""],weekHeader:"Hf",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.az)}),jQuery(function(e){e.datepicker.regional.be={closeText:"",prevText:"&larr;.",nextText:".&rarr;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.be)}),jQuery(function(e){e.datepicker.regional.bg={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",nextBigText:"&#x3E;&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"Wk",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.bg)}),jQuery(function(e){e.datepicker.regional.bs={closeText:"Zatvori",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Danas",monthNames:["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljak","Utorak","Srijeda","etvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sri","et","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","e","Pe","Su"],weekHeader:"Wk",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.bs)}),jQuery(function(e){e.datepicker.regional.ca={closeText:"Tanca",prevText:"Anterior",nextText:"Segent",currentText:"Avui",monthNames:["gener","febrer","mar","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],monthNamesShort:["gen","feb","mar","abr","maig","juny","jul","ag","set","oct","nov","des"],dayNames:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],dayNamesShort:["dg","dl","dt","dc","dj","dv","ds"],dayNamesMin:["dg","dl","dt","dc","dj","dv","ds"],weekHeader:"Set",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ca)}),jQuery(function(e){e.datepicker.regional.cs={closeText:"Zavt",prevText:"&#x3C;Dve",nextText:"Pozdji&#x3E;",currentText:"Nyn",monthNames:["leden","nor","bezen","duben","kvten","erven","ervenec","srpen","z","jen","listopad","prosinec"],monthNamesShort:["led","no","be","dub","kv","er","vc","srp","z","j","lis","pro"],dayNames:["nedle","pondl","ter","steda","tvrtek","ptek","sobota"],dayNamesShort:["ne","po","t","st","t","p","so"],dayNamesMin:["ne","po","t","st","t","p","so"],weekHeader:"Td",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.cs)}),jQuery(function(e){e.datepicker.regional["cy-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["Ionawr","Chwefror","Mawrth","Ebrill","Mai","Mehefin","Gorffennaf","Awst","Medi","Hydref","Tachwedd","Rhagfyr"],monthNamesShort:["Ion","Chw","Maw","Ebr","Mai","Meh","Gor","Aws","Med","Hyd","Tac","Rha"],dayNames:["Dydd Sul","Dydd Llun","Dydd Mawrth","Dydd Mercher","Dydd Iau","Dydd Gwener","Dydd Sadwrn"],dayNamesShort:["Sul","Llu","Maw","Mer","Iau","Gwe","Sad"],dayNamesMin:["Su","Ll","Ma","Me","Ia","Gw","Sa"],weekHeader:"Wy",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["cy-GB"])}),jQuery(function(e){e.datepicker.regional.da={closeText:"Luk",prevText:"&#x3C;Forrige",nextText:"Nste&#x3E;",currentText:"Idag",monthNames:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],dayNamesShort:["Sn","Man","Tir","Ons","Tor","Fre","Lr"],dayNamesMin:["S","Ma","Ti","On","To","Fr","L"],weekHeader:"Uge",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.da)}),jQuery(function(e){e.datepicker.regional.de={closeText:"Schlieen",prevText:"&#x3C;Zurck",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.de)}),jQuery(function(e){e.datepicker.regional.el={closeText:"",prevText:"",nextText:"",currentText:" ",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.el)}),jQuery(function(e){e.datepicker.regional["en-AU"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["en-AU"])}),jQuery(function(e){e.datepicker.regional["en-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["en-GB"])}),jQuery(function(e){e.datepicker.regional["en-NZ"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["en-NZ"])}),jQuery(function(e){e.datepicker.regional.eo={closeText:"Fermi",prevText:"&#x3C;Anta",nextText:"Sekv&#x3E;",currentText:"Nuna",monthNames:["Januaro","Februaro","Marto","Aprilo","Majo","Junio","Julio","Agusto","Septembro","Oktobro","Novembro","Decembro"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Ag","Sep","Okt","Nov","Dec"],dayNames:["Dimano","Lundo","Mardo","Merkredo","ado","Vendredo","Sabato"],dayNamesShort:["Dim","Lun","Mar","Mer","a","Ven","Sab"],dayNamesMin:["Di","Lu","Ma","Me","a","Ve","Sa"],weekHeader:"Sb",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.eo)}),jQuery(function(e){e.datepicker.regional.es={closeText:"Cerrar",prevText:"&#x3C;Ant",nextText:"Sig&#x3E;",currentText:"Hoy",monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ogo","sep","oct","nov","dic"],dayNames:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],dayNamesShort:["dom","lun","mar","mi","juv","vie","sb"],dayNamesMin:["D","L","M","X","J","V","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.es)}),jQuery(function(e){e.datepicker.regional.et={closeText:"Sulge",prevText:"Eelnev",nextText:"Jrgnev",currentText:"Tna",monthNames:["Jaanuar","Veebruar","Mrts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],monthNamesShort:["Jaan","Veebr","Mrts","Apr","Mai","Juuni","Juuli","Aug","Sept","Okt","Nov","Dets"],dayNames:["Phapev","Esmaspev","Teisipev","Kolmapev","Neljapev","Reede","Laupev"],dayNamesShort:["Phap","Esmasp","Teisip","Kolmap","Neljap","Reede","Laup"],dayNamesMin:["P","E","T","K","N","R","L"],weekHeader:"nd",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.et)}),jQuery(function(e){e.datepicker.regional.eu={closeText:"Egina",prevText:"&#x3C;Aur",nextText:"Hur&#x3E;",currentText:"Gaur",monthNames:["urtarrila","otsaila","martxoa","apirila","maiatza","ekaina","uztaila","abuztua","iraila","urria","azaroa","abendua"],monthNamesShort:["urt.","ots.","mar.","api.","mai.","eka.","uzt.","abu.","ira.","urr.","aza.","abe."],dayNames:["igandea","astelehena","asteartea","asteazkena","osteguna","ostirala","larunbata"],dayNamesShort:["ig.","al.","ar.","az.","og.","ol.","lr."],dayNamesMin:["ig","al","ar","az","og","ol","lr"],weekHeader:"As",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.eu)}),jQuery(function(e){e.datepicker.regional.fa={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"yy/mm/dd",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.fa)}),jQuery(function(e){e.datepicker.regional.fi={closeText:"Sulje",prevText:"&#xAB;Edellinen",nextText:"Seuraava&#xBB;",currentText:"Tnn",monthNames:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Keskuu","Heinkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],monthNamesShort:["Tammi","Helmi","Maalis","Huhti","Touko","Kes","Hein","Elo","Syys","Loka","Marras","Joulu"],dayNamesShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayNames:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],dayNamesMin:["Su","Ma","Ti","Ke","To","Pe","La"],weekHeader:"Vk",dateFormat:"d.m.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.fi)}),jQuery(function(e){e.datepicker.regional.fo={closeText:"Lat aftur",prevText:"&#x3C;Fyrra",nextText:"Nsta&#x3E;",currentText:" dag",monthNames:["Januar","Februar","Mars","Aprl","Mei","Juni","Juli","August","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],dayNames:["Sunnudagur","Mnadagur","Tsdagur","Mikudagur","Hsdagur","Frggjadagur","Leyardagur"],dayNamesShort:["Sun","Mn","Ts","Mik","Hs","Fr","Ley"],dayNamesMin:["Su","M","T","Mi","H","Fr","Le"],weekHeader:"Vk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.fo)}),jQuery(function(e){e.datepicker.regional["fr-CA"]={closeText:"Fermer",prevText:"Prcdent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthNamesShort:["janv.","fvr.","mars","avril","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["fr-CA"])}),jQuery(function(e){e.datepicker.regional["fr-CH"]={closeText:"Fermer",prevText:"&#x3C;Prc",nextText:"Suiv&#x3E;",currentText:"Courant",monthNames:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthNamesShort:["janv.","fvr.","mars","avril","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sm",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["fr-CH"])}),jQuery(function(e){e.datepicker.regional.fr={closeText:"Fermer",prevText:"Prcdent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthNamesShort:["janv.","fvr.","mars","avril","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.fr)}),jQuery(function(e){e.datepicker.regional.gl={closeText:"Pechar",prevText:"&#x3C;Ant",nextText:"Seg&#x3E;",currentText:"Hoxe",monthNames:["Xaneiro","Febreiro","Marzo","Abril","Maio","Xuo","Xullo","Agosto","Setembro","Outubro","Novembro","Decembro"],monthNamesShort:["Xan","Feb","Mar","Abr","Mai","Xu","Xul","Ago","Set","Out","Nov","Dec"],dayNames:["Domingo","Luns","Martes","Mrcores","Xoves","Venres","Sbado"],dayNamesShort:["Dom","Lun","Mar","Mr","Xov","Ven","Sb"],dayNamesMin:["Do","Lu","Ma","M","Xo","Ve","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.gl)}),jQuery(function(e){e.datepicker.regional.he={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["'","'","'","'","'","'",""],dayNamesMin:["'","'","'","'","'","'",""],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.he)}),jQuery(function(e){e.datepicker.regional.hi={closeText:"",prevText:"",nextText:"",currentText:"",monthNames:[" ","","","","","",""," ","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.hi)}),jQuery(function(e){e.datepicker.regional.hr={closeText:"Zatvori",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Danas",monthNames:["Sijeanj","Veljaa","Oujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthNamesShort:["Sij","Velj","Ou","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],dayNames:["Nedjelja","Ponedjeljak","Utorak","Srijeda","etvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sri","et","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","e","Pe","Su"],weekHeader:"Tje",dateFormat:"dd.mm.yy.",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.hr)}),jQuery(function(e){e.datepicker.regional.hu={closeText:"bezr",prevText:"vissza",nextText:"elre",currentText:"ma",monthNames:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],monthNamesShort:["Jan","Feb","Mr","pr","Mj","Jn","Jl","Aug","Szep","Okt","Nov","Dec"],dayNames:["Vasrnap","Htf","Kedd","Szerda","Cstrtk","Pntek","Szombat"],dayNamesShort:["Vas","Ht","Ked","Sze","Cs","Pn","Szo"],dayNamesMin:["V","H","K","Sze","Cs","P","Szo"],weekHeader:"Ht",dateFormat:"yy.mm.dd.",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.hu)}),jQuery(function(e){e.datepicker.regional.hy={closeText:"",prevText:"&#x3C;.",nextText:".&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.hy)}),jQuery(function(e){e.datepicker.regional.id={closeText:"Tutup",prevText:"&#x3C;mundur",nextText:"maju&#x3E;",currentText:"hari ini",monthNames:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agus","Sep","Okt","Nop","Des"],dayNames:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],dayNamesShort:["Min","Sen","Sel","Rab","kam","Jum","Sab"],dayNamesMin:["Mg","Sn","Sl","Rb","Km","jm","Sb"],weekHeader:"Mg",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.id)}),jQuery(function(e){e.datepicker.regional.is={closeText:"Loka",prevText:"&#x3C; Fyrri",nextText:"Nsti &#x3E;",currentText:" dag",monthNames:["Janar","Febrar","Mars","Aprl","Ma","Jn","Jl","gst","September","Oktber","Nvember","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Ma","Jn","Jl","g","Sep","Okt","Nv","Des"],dayNames:["Sunnudagur","Mnudagur","rijudagur","Mivikudagur","Fimmtudagur","Fstudagur","Laugardagur"],dayNamesShort:["Sun","Mn","ri","Mi","Fim","Fs","Lau"],dayNamesMin:["Su","M","r","Mi","Fi","F","La"],weekHeader:"Vika",dateFormat:"dd.mm.yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.is)}),jQuery(function(e){e.datepicker.regional.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.it)}),jQuery(function(e){e.datepicker.regional.ja={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ja)}),jQuery(function(e){e.datepicker.regional.ka={closeText:"",prevText:"&#x3c; ",nextText:" &#x3e;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ka)}),jQuery(function(e){e.datepicker.regional.kk={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.kk)}),jQuery(function(e){e.datepicker.regional.km={closeText:"",prevText:"",nextText:"",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.km)}),jQuery(function(e){e.datepicker.regional.ko={closeText:"",prevText:"",nextText:"",currentText:"",monthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"Wk",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ko)}),jQuery(function(e){e.datepicker.regional.ky={closeText:"",prevText:"&#x3c;",nextText:"&#x3e;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ky)}),jQuery(function(e){e.datepicker.regional.lb={closeText:"Ferdeg",prevText:"Zrck",nextText:"Weider",currentText:"Haut",monthNames:["Januar","Februar","Merz","Abrll","Mee","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Me","Abr","Mee","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonndeg","Mindeg","Dnschdeg","Mttwoch","Donneschdeg","Freideg","Samschdeg"],dayNamesShort:["Son","Mi","Dn","Mt","Don","Fre","Sam"],dayNamesMin:["So","M","D","M","Do","Fr","Sa"],weekHeader:"W",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.lb)}),jQuery(function(e){e.datepicker.regional.lt={closeText:"Udaryti",prevText:"&#x3C;Atgal",nextText:"Pirmyn&#x3E;",currentText:"iandien",monthNames:["Sausis","Vasaris","Kovas","Balandis","Gegu","Birelis","Liepa","Rugpjtis","Rugsjis","Spalis","Lapkritis","Gruodis"],monthNamesShort:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rugp","Rugs","Spa","Lap","Gru"],dayNames:["sekmadienis","pirmadienis","antradienis","treiadienis","ketvirtadienis","penktadienis","etadienis"],dayNamesShort:["sek","pir","ant","tre","ket","pen","e"],dayNamesMin:["Se","Pr","An","Tr","Ke","Pe","e"],weekHeader:"SAV",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.lt)}),jQuery(function(e){e.datepicker.regional.lv={closeText:"Aizvrt",prevText:"Iepr.",nextText:"Nk.",currentText:"odien",monthNames:["Janvris","Februris","Marts","Aprlis","Maijs","Jnijs","Jlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],monthNamesShort:["Jan","Feb","Mar","Apr","Mai","Jn","Jl","Aug","Sep","Okt","Nov","Dec"],dayNames:["svtdiena","pirmdiena","otrdiena","trediena","ceturtdiena","piektdiena","sestdiena"],dayNamesShort:["svt","prm","otr","tre","ctr","pkt","sst"],dayNamesMin:["Sv","Pr","Ot","Tr","Ct","Pk","Ss"],weekHeader:"Ned.",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.lv)}),jQuery(function(e){e.datepicker.regional.mk={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.mk)}),jQuery(function(e){e.datepicker.regional.ml={closeText:"",prevText:"",nextText:" ",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ml)}),jQuery(function(e){e.datepicker.regional.ms={closeText:"Tutup",prevText:"&#x3C;Sebelum",nextText:"Selepas&#x3E;",currentText:"hari ini",monthNames:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],monthNamesShort:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ogo","Sep","Okt","Nov","Dis"],dayNames:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],dayNamesShort:["Aha","Isn","Sel","Rab","kha","Jum","Sab"],dayNamesMin:["Ah","Is","Se","Ra","Kh","Ju","Sa"],weekHeader:"Mg",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ms)}),jQuery(function(e){e.datepicker.regional.nb={closeText:"Lukk",prevText:"&#xAB;Forrige",nextText:"Neste&#xBB;",currentText:"I dag",monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],dayNamesShort:["sn","man","tir","ons","tor","fre","lr"],dayNames:["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],dayNamesMin:["s","ma","ti","on","to","fr","l"],weekHeader:"Uke",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.nb)
}),jQuery(function(e){e.datepicker.regional["nl-BE"]={closeText:"Sluiten",prevText:"",nextText:"",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["nl-BE"])}),jQuery(function(e){e.datepicker.regional.nl={closeText:"Sluiten",prevText:"",nextText:"",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.nl)}),jQuery(function(e){e.datepicker.regional.nn={closeText:"Lukk",prevText:"&#xAB;Frre",nextText:"Neste&#xBB;",currentText:"I dag",monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],dayNamesShort:["sun","mn","tys","ons","tor","fre","lau"],dayNames:["sundag","mndag","tysdag","onsdag","torsdag","fredag","laurdag"],dayNamesMin:["su","m","ty","on","to","fr","la"],weekHeader:"Veke",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.nn)}),jQuery(function(e){e.datepicker.regional.no={closeText:"Lukk",prevText:"&#xAB;Forrige",nextText:"Neste&#xBB;",currentText:"I dag",monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],dayNamesShort:["sn","man","tir","ons","tor","fre","lr"],dayNames:["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],dayNamesMin:["s","ma","ti","on","to","fr","l"],weekHeader:"Uke",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.no)}),jQuery(function(e){e.datepicker.regional.pl={closeText:"Zamknij",prevText:"&#x3C;Poprzedni",nextText:"Nastpny&#x3E;",currentText:"Dzi",monthNames:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],monthNamesShort:["Sty","Lu","Mar","Kw","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"],dayNames:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],dayNamesShort:["Nie","Pn","Wt","r","Czw","Pt","So"],dayNamesMin:["N","Pn","Wt","r","Cz","Pt","So"],weekHeader:"Tydz",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.pl)}),jQuery(function(e){e.datepicker.regional["pt-BR"]={closeText:"Fechar",prevText:"&#x3C;Anterior",nextText:"Prximo&#x3E;",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["pt-BR"])}),jQuery(function(e){e.datepicker.regional.pt={closeText:"Fechar",prevText:"Anterior",nextText:"Seguinte",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],weekHeader:"Sem",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.pt)}),jQuery(function(e){e.datepicker.regional.rm={closeText:"Serrar",prevText:"&#x3C;Suandant",nextText:"Precedent&#x3E;",currentText:"Actual",monthNames:["Schaner","Favrer","Mars","Avrigl","Matg","Zercladur","Fanadur","Avust","Settember","October","November","December"],monthNamesShort:["Scha","Fev","Mar","Avr","Matg","Zer","Fan","Avu","Sett","Oct","Nov","Dec"],dayNames:["Dumengia","Glindesdi","Mardi","Mesemna","Gievgia","Venderdi","Sonda"],dayNamesShort:["Dum","Gli","Mar","Mes","Gie","Ven","Som"],dayNamesMin:["Du","Gl","Ma","Me","Gi","Ve","So"],weekHeader:"emna",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.rm)}),jQuery(function(e){e.datepicker.regional.ro={closeText:"nchide",prevText:"&#xAB; Luna precedent",nextText:"Luna urmtoare &#xBB;",currentText:"Azi",monthNames:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthNamesShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Duminic","Luni","Mari","Miercuri","Joi","Vineri","Smbt"],dayNamesShort:["Dum","Lun","Mar","Mie","Joi","Vin","Sm"],dayNamesMin:["Du","Lu","Ma","Mi","Jo","Vi","S"],weekHeader:"Spt",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ro)}),jQuery(function(e){e.datepicker.regional.ru={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ru)}),jQuery(function(e){e.datepicker.regional.sk={closeText:"Zavrie",prevText:"&#x3C;Predchdzajci",nextText:"Nasledujci&#x3E;",currentText:"Dnes",monthNames:["janur","februr","marec","aprl","mj","jn","jl","august","september","oktber","november","december"],monthNamesShort:["Jan","Feb","Mar","Apr","Mj","Jn","Jl","Aug","Sep","Okt","Nov","Dec"],dayNames:["nedea","pondelok","utorok","streda","tvrtok","piatok","sobota"],dayNamesShort:["Ned","Pon","Uto","Str","tv","Pia","Sob"],dayNamesMin:["Ne","Po","Ut","St","t","Pia","So"],weekHeader:"Ty",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.sk)}),jQuery(function(e){e.datepicker.regional.sl={closeText:"Zapri",prevText:"&#x3C;Prejnji",nextText:"Naslednji&#x3E;",currentText:"Trenutni",monthNames:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljek","Torek","Sreda","etrtek","Petek","Sobota"],dayNamesShort:["Ned","Pon","Tor","Sre","et","Pet","Sob"],dayNamesMin:["Ne","Po","To","Sr","e","Pe","So"],weekHeader:"Teden",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.sl)}),jQuery(function(e){e.datepicker.regional.sq={closeText:"mbylle",prevText:"&#x3C;mbrapa",nextText:"Prpara&#x3E;",currentText:"sot",monthNames:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nntor","Dhjetor"],monthNamesShort:["Jan","Shk","Mar","Pri","Maj","Qer","Kor","Gus","Sht","Tet","Nn","Dhj"],dayNames:["E Diel","E Hn","E Mart","E Mrkur","E Enjte","E Premte","E Shtune"],dayNamesShort:["Di","H","Ma","M","En","Pr","Sh"],dayNamesMin:["Di","H","Ma","M","En","Pr","Sh"],weekHeader:"Ja",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.sq)}),jQuery(function(e){e.datepicker.regional["sr-SR"]={closeText:"Zatvori",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Danas",monthNames:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljak","Utorak","Sreda","etvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sre","et","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","e","Pe","Su"],weekHeader:"Sed",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["sr-SR"])}),jQuery(function(e){e.datepicker.regional.sr={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.sr)}),jQuery(function(e){e.datepicker.regional.sv={closeText:"Stng",prevText:"&#xAB;Frra",nextText:"Nsta&#xBB;",currentText:"Idag",monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNamesShort:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"],dayNames:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"],dayNamesMin:["S","M","Ti","On","To","Fr","L"],weekHeader:"Ve",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.sv)}),jQuery(function(e){e.datepicker.regional.ta={closeText:"",prevText:"",nextText:"",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ta)}),jQuery(function(e){e.datepicker.regional.th={closeText:"",prevText:"&#xAB;&#xA0;",nextText:"&#xA0;&#xBB;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["..","..","..","..","..","..","..","..","..","..","..",".."],dayNames:["","","","","","",""],dayNamesShort:[".",".",".",".",".",".","."],dayNamesMin:[".",".",".",".",".",".","."],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.th)}),jQuery(function(e){e.datepicker.regional.tj={closeText:"",prevText:"&#x3c;",nextText:"&#x3e;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.tj)}),jQuery(function(e){e.datepicker.regional.tr={closeText:"kapat",prevText:"&#x3C;geri",nextText:"ileri&#x3e",currentText:"bugn",monthNames:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],monthNamesShort:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],dayNames:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],dayNamesShort:["Pz","Pt","Sa","a","Pe","Cu","Ct"],dayNamesMin:["Pz","Pt","Sa","a","Pe","Cu","Ct"],weekHeader:"Hf",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.tr)}),jQuery(function(e){e.datepicker.regional.uk={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.uk)}),jQuery(function(e){e.datepicker.regional.vi={closeText:"ng",prevText:"&#x3C;Trc",nextText:"Tip&#x3E;",currentText:"Hm nay",monthNames:["Thng Mt","Thng Hai","Thng Ba","Thng T","Thng Nm","Thng Su","Thng By","Thng Tm","Thng Chn","Thng Mi","Thng Mi Mt","Thng Mi Hai"],monthNamesShort:["Thng 1","Thng 2","Thng 3","Thng 4","Thng 5","Thng 6","Thng 7","Thng 8","Thng 9","Thng 10","Thng 11","Thng 12"],dayNames:["Ch Nht","Th Hai","Th Ba","Th T","Th Nm","Th Su","Th By"],dayNamesShort:["CN","T2","T3","T4","T5","T6","T7"],dayNamesMin:["CN","T2","T3","T4","T5","T6","T7"],weekHeader:"Tu",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.vi)}),jQuery(function(e){e.datepicker.regional["zh-CN"]={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["zh-CN"])}),jQuery(function(e){e.datepicker.regional["zh-HK"]={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd-mm-yy",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["zh-HK"])}),jQuery(function(e){e.datepicker.regional["zh-TW"]={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"yy/mm/dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["zh-TW"])});

/* webix.js v1.10.0 */
if(!window.webix)webix={};webix.assert=function(e,t){if(!e){webix.assert_error(t)}};webix.assert_config=function(e){var t=e.cells||e.rows||e.elements||e.cols;if(t)for(var n=0;n<t.length;n++)if(t[n]===null||typeof t[n]==="undefined")webix.assert_error("You have trailing comma or Null element in collection's configuration")};webix.assert_error=function(e){webix.log("error",e);if(webix.message&&typeof e=="string")webix.message({type:"debug",text:e,expire:-1});if(webix.debug!==false)debugger};webix.assert_core_ready=function(){if(window.webix_on_core_ready)window.webix_on_core_ready()};webix.assert_level=0;webix.assert_level_in=function(){webix.assert_level++;if(webix.assert_level==100)webix.assert_error("Attempt to copy object with self reference")};webix.assert_level_out=function(){webix.assert_level--};webix.version="1.10.0";webix.codebase="./";webix.name="core";webix.clone=function(e){var t=webix.clone._function;t.prototype=e;return new t};webix.clone._function=function(){};webix.extend=function(e,t,n){webix.assert(e,"Invalid mixing target");webix.assert(t,"Invalid mixing source");if(e._webix_proto_wait){webix.PowerArray.insertAt.call(e._webix_proto_wait,t,1);return e}for(var r in t)if(!e[r]||n)e[r]=t[r];if(t.defaults)webix.extend(e.defaults,t.defaults);if(t.$init)t.$init.call(e);return e};webix.copy=function(e){webix.assert(e,"Invalid mixing target");webix.assert_level_in();var t;if(arguments.length>1){t=arguments[0];e=arguments[1]}else t=webix.isArray(e)?[]:{};for(var n in e){if(e[n]&&typeof e[n]=="object"&&!webix.isDate(e[n])){t[n]=webix.isArray(e[n])?[]:{};webix.copy(t[n],e[n])}else{t[n]=e[n]}}webix.assert_level_out();return t};webix.single=function(e){var t=null;var n=function(n){if(!t)t=new e({});if(t._reinit)t._reinit.apply(t,arguments);return t};return n};webix.protoUI=function(){if(webix.debug_proto)webix.log("UI registered: "+arguments[0].name);var e=arguments;var t=e[0].name;var n=function(e){if(!n)return webix.ui[t].prototype;var r=n._webix_proto_wait;if(r){var i=[r[0]];for(var s=1;s<r.length;s++){i[s]=r[s];if(i[s]._webix_proto_wait)i[s]=i[s].call(webix,i[s].name);if(i[s].prototype&&i[s].prototype.name)webix.ui[i[s].prototype.name]=i[s]}webix.ui[t]=webix.proto.apply(webix,i);if(n._webix_type_wait)for(var s=0;s<n._webix_type_wait.length;s++)webix.type(webix.ui[t],n._webix_type_wait[s]);n=r=null}if(this!=webix)return new webix.ui[t](e);else return webix.ui[t]};n._webix_proto_wait=Array.prototype.slice.call(arguments,0);return webix.ui[t]=n};webix.proto=function(){if(webix.debug_proto)webix.log("Proto chain:"+arguments[0].name+"["+arguments.length+"]");var e=arguments;var t=e[0];var n=!!t.$init;var r=[];webix.assert(t,"Invalid mixing target");for(var i=e.length-1;i>0;i--){webix.assert(e[i],"Invalid mixing source");if(typeof e[i]=="function")e[i]=e[i].prototype;if(e[i].$init)r.push(e[i].$init);if(e[i].defaults){var s=e[i].defaults;if(!t.defaults)t.defaults={};for(var o in s)if(webix.isUndefined(t.defaults[o]))t.defaults[o]=s[o]}if(e[i].type&&t.type){for(var o in e[i].type)if(!t.type[o])t.type[o]=e[i].type[o]}for(var u in e[i]){if(!t[u]&&t[u]!==false)t[u]=e[i][u]}}if(n)r.push(t.$init);t.$init=function(){for(var e=0;e<r.length;e++)r[e].apply(this,arguments)};if(t.$skin)t.$skin();var a=function(e){this.$ready=[];webix.assert(this.$init,"object without init method");this.$init(e);if(this._parseSettings)this._parseSettings(e,this.defaults);for(var t=0;t<this.$ready.length;t++)this.$ready[t].call(this)};a.prototype=t;t=e=null;return a};webix.bind=function(e,t){return function(){return e.apply(t,arguments)}};webix.require=function(e,t,n){if(webix.require.disabled){if(t)t.call(n||this);return}if(typeof e!="string"){var r=e.length||0;var i=t;if(!r){for(var s in e)r++;t=function(){r--;if(r===0)i.apply(this,arguments)};for(var s in e)webix.require(s,t,n)}else{t=function(){if(r){r--;webix.require(e[e.length-r-1],t,n)}else return i.apply(this,arguments)};t()}return}if(webix._modules[e]!==true){if(e.substr(-4)==".css"){var o=webix.html.create("LINK",{type:"text/css",rel:"stylesheet",href:webix.codebase+e});document.head.appendChild(o);if(t)t.call(n||window);return}var u=arguments[4];if(!t){webix.exec(webix.ajax().sync().get(webix.codebase+e).responseText);webix._modules[e]=true}else{if(!webix._modules[e]){webix._modules[e]=[[t,n]];webix.ajax(webix.codebase+e,function(t){webix.exec(t);var n=webix._modules[e];webix._modules[e]=true;for(var r=0;r<n.length;r++)n[r][0].call(n[r][1]||window,!r)})}else webix._modules[e].push([t,n])}}else if(t)t()};webix._modules={};webix.exec=function(e){if(window.execScript)window.execScript(e);else window.eval(e)};webix.wrap=function(e,t){if(!e)return t;return function(){var n=e.apply(this,arguments);t.apply(this,arguments);return n}};webix.isUndefined=function(e){return typeof e=="undefined"};webix.delay=function(e,t,n,r){return window.setTimeout(function(){if(!(t&&t.$destructed)){var r=e.apply(t,n||[]);e=t=n=null;return r}},r||1)};webix.once=function(e){var t=true;return function(){if(t){t=false;e.apply(this,arguments)}}};webix.uid=function(){if(!this._seed)this._seed=(new Date).valueOf();this._seed++;return this._seed};webix.toNode=function(e){if(typeof e=="string")return document.getElementById(e);return e};webix.toArray=function(e){return webix.extend(e||[],webix.PowerArray,true)};webix.toFunctor=function(str,scope){if(typeof str=="string"){var method=str.replace("()","");if(scope&&scope[method])return scope[method];return window[method]||eval(str)}return str};webix.isArray=function(e){return Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object Array]"};webix.isDate=function(e){return e instanceof Date};webix._events={};webix.event=function(e,t,n,r){e=webix.toNode(e);webix.assert(e,"Invalid node as target for webix.event");var i=webix.uid();if(r)n=webix.bind(n,r);webix._events[i]=[e,t,n];if(e.addEventListener)e.addEventListener(t,n,false);else if(e.attachEvent)e.attachEvent("on"+t,webix._events[i][2]=function(){return n.apply(e,arguments)});return i};webix.eventRemove=function(e){if(!e)return;webix.assert(this._events[e],"Removing non-existing event");var t=webix._events[e];if(t[0].removeEventListener)t[0].removeEventListener(t[1],t[2],false);else if(t[0].detachEvent)t[0].detachEvent("on"+t[1],t[2]);delete this._events[e]};webix.log=function(e,t,n){if(arguments.length==1){t=e;e="log"}if(window.console&&window.console.log){e=e.toLowerCase();if(window.console[e])window.console[e](t||"unknown error");else window.console.log(e+": "+t);if(n)window.console.log(n)}};webix.log_full_time=function(e){webix._start_time_log=new Date;webix.log("Timing start ["+e+"]");window.setTimeout(function(){var t=new Date;webix.log("Timing end ["+e+"]:"+(t.valueOf()-webix._start_time_log.valueOf())/1e3+"s")},1)};webix.log_time=function(e){var t="_start_time_log"+e;if(!webix[t]){webix[t]=new Date;webix.log("Info","Timing start ["+e+"]")}else{var n=new Date;webix.log("Info","Timing end ["+e+"]:"+(n.valueOf()-webix[t].valueOf())/1e3+"s");webix[t]=null}};webix.debug_code=function(e){e.call(webix)};webix.EventSystem={$init:function(){if(!this._evs_events){this._evs_events={};this._evs_handlers={};this._evs_map={}}},blockEvent:function(){this._evs_events._block=true},unblockEvent:function(){this._evs_events._block=false},mapEvent:function(e){webix.extend(this._evs_map,e,true)},on_setter:function(e){if(e){for(var t in e){var n=webix.toFunctor(e[t],this.$scope);var r=t.indexOf("->");if(r!==-1){this[t.substr(0,r)].attachEvent(t.substr(r+2),webix.bind(n,this))}else this.attachEvent(t,n)}}},callEvent:function(e,t){if(this._evs_events._block)return true;e=e.toLowerCase();var n=this._evs_events[e.toLowerCase()];var r=true;if(webix.log)if((webix.debug||this.debug)&&!webix.debug_blacklist[e])webix.log("info","["+this.name+"@"+(this._settings||{}).id+"] event:"+e,t);if(n)for(var i=0;i<n.length;i++){if(n[i].apply(this,t||[])===false)r=false}if(this._evs_map[e]){var s=this._evs_map[e];s.$eventSource=this;if(!s.callEvent(e,t))r=false;s.$eventSource=null}return r},attachEvent:function(e,t,n){webix.assert(t,"Invalid event handler for "+e);e=e.toLowerCase();n=n||webix.uid();t=webix.toFunctor(t,this.$scope);var r=this._evs_events[e]||webix.toArray();if(arguments[3])r.unshift(t);else r.push(t);this._evs_events[e]=r;this._evs_handlers[n]={f:t,t:e};return n},detachEvent:function(e){if(!this._evs_handlers[e]){return}var t=this._evs_handlers[e].t;var n=this._evs_handlers[e].f;var r=this._evs_events[t];r.remove(n);delete this._evs_handlers[e]},hasEvent:function(e){e=e.toLowerCase();return this._evs_events[e]?true:false}};webix.extend(webix,webix.EventSystem);webix.PowerArray={removeAt:function(e,t){if(e>=0)this.splice(e,t||1)},remove:function(e){this.removeAt(this.find(e))},insertAt:function(e,t){if(!t&&t!==0)this.push(e);else{var n=this.splice(t,this.length-t);this[t]=e;this.push.apply(this,n)}},find:function(e){for(var t=0;t<this.length;t++)if(e==this[t])return t;return-1},each:function(e,t){for(var n=0;n<this.length;n++)e.call(t||this,this[n])},map:function(e,t){for(var n=0;n<this.length;n++)this[n]=e.call(t||this,this[n]);return this},filter:function(e,t){for(var n=0;n<this.length;n++)if(!e.call(t||this,this[n])){this.splice(n,1);n--}return this}};webix.env={};(function(){if(navigator.userAgent.indexOf("Mobile")!=-1||navigator.userAgent.indexOf("Windows Phone")!=-1)webix.env.mobile=true;if(webix.env.mobile||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1)webix.env.touch=true;if(navigator.userAgent.indexOf("Opera")!=-1)webix.env.isOpera=true;else{webix.env.isIE=!!document.all;if(webix.env.isIE){var e=parseFloat(navigator.appVersion.split("MSIE")[1]);if(e==8)webix.env.isIE8=true}webix.env.isFF=navigator.userAgent.indexOf("Firefox")!=-1;webix.env.isWebKit=navigator.userAgent.indexOf("KHTML")!=-1;webix.env.isSafari=webix.env.isWebKit&&navigator.userAgent.indexOf("Mac")!=-1}if(navigator.userAgent.toLowerCase().indexOf("android")!=-1)webix.env.isAndroid=true;webix.env.transform=false;webix.env.transition=false;var t=-1;var n=["","webkit","Moz","O","ms"];var r=["","-webkit-","-Moz-","-o-","-ms-"];var i=document.createElement("DIV");for(var s=0;s<n.length;s++){var o=n[s]?n[s]+"Transform":"transform";if(typeof i.style[o]!="undefined"){t=s;break}}if(t>-1){webix.env.cssPrefix=r[t];var u=webix.env.jsPrefix=n[t];webix.env.transform=u?u+"Transform":"transform";webix.env.transition=u?u+"Transition":"transition";webix.env.transitionDuration=u?u+"TransitionDuration":"transitionDuration";i.style[webix.env.transform]="translate3d(0,0,0)";webix.env.translate=i.style[webix.env.transform]?"translate3d":"translate";webix.env.transitionEnd=webix.env.cssPrefix=="-Moz-"?"transitionend":u?u+"TransitionEnd":"transitionend"}})();webix.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();webix.html={_native_on_selectstart:0,denySelect:function(){if(!webix._native_on_selectstart)webix._native_on_selectstart=document.onselectstart;document.onselectstart=webix.html.stopEvent},allowSelect:function(){if(webix._native_on_selectstart!==0){document.onselectstart=webix._native_on_selectstart||null}webix._native_on_selectstart=0},index:function(e){var t=0;while(e=e.previousSibling)t++;return t},_style_cache:{},createCss:function(e){var t="";for(var n in e)t+=n+":"+e[n]+";";var r=this._style_cache[t];if(!r){r="s"+webix.uid();this.addStyle("."+r+"{"+t+"}");this._style_cache[t]=r}return r},addStyle:function(e){var t=document.createElement("style");t.setAttribute("type","text/css");t.setAttribute("media","screen");if(t.styleSheet)t.styleSheet.cssText=e;else t.appendChild(document.createTextNode(e));document.getElementsByTagName("head")[0].appendChild(t)},create:function(e,t,n){t=t||{};var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);if(t.style)r.style.cssText=t.style;if(t["class"])r.className=t["class"];if(n)r.innerHTML=n;return r},getValue:function(e){e=webix.toNode(e);if(!e)return"";return webix.isUndefined(e.value)?e.innerHTML:e.value},remove:function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.remove(e[t]);else if(e&&e.parentNode)e.parentNode.removeChild(e)},insertBefore:function(e,t,n){if(!e)return;if(t&&t.parentNode)t.parentNode.insertBefore(e,t);else n.appendChild(e)},locate:function(e,t){var n;if(e.tagName)n=e;else{e=e||event;n=e.target||e.srcElement}while(n){if(n.getAttribute){var r=n.getAttribute(t);if(r)return r}n=n.parentNode}return null},offset:function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect();var n=document.body;var r=document.documentElement;var i=window.pageYOffset||r.scrollTop||n.scrollTop;var s=window.pageXOffset||r.scrollLeft||n.scrollLeft;var o=r.clientTop||n.clientTop||0;var u=r.clientLeft||n.clientLeft||0;var a=t.top+i-o;var f=t.left+s-u;return{y:Math.round(a),x:Math.round(f),width:e.offsetHeight,height:e.offsetWidth}}else{var a=0,f=0;while(e){a=a+parseInt(e.offsetTop,10);f=f+parseInt(e.offsetLeft,10);e=e.offsetParent}return{y:a,x:f,width:e.offsetHeight,height:e.offsetWidth}}},posRelative:function(e){e=e||event;if(!webix.isUndefined(e.offsetX))return{x:e.offsetX,y:e.offsetY};else return{x:e.layerX,y:e.layerY}},pos:function(e){e=e||event;if(e.touches&&e.touches[0])e=e.touches[0];if(e.pageX||e.pageY)return{x:e.pageX,y:e.pageY};var t=webix.env.isIE&&document.compatMode!="BackCompat"?document.documentElement:document.body;return{x:e.clientX+t.scrollLeft-t.clientLeft,y:e.clientY+t.scrollTop-t.clientTop}},preventEvent:function(e){if(e&&e.preventDefault)e.preventDefault();return webix.html.stopEvent(e)},stopEvent:function(e){(e||event).cancelBubble=true;return false},addCss:function(e,t){e.className+=" "+t},removeCss:function(e,t){e.className=e.className.replace(RegExp(" "+t,"g"),"")}};webix.ready=function(e){if(this._ready)e.call();else this._ready_code.push(e)};webix.debug_ready=webix.ready;webix._ready_code=[];(function(){var e=document.getElementsByTagName("SCRIPT");webix.assert(e.length,"Can't locate codebase");if(e.length){e=(e[e.length-1].getAttribute("src")||"").split("/");e.splice(e.length-1,1);webix.codebase=e.slice(0,e.length).join("/")+"/"}var t=function(){webix.callEvent("onReady",[])};webix.attachEvent("onReady",function(){webix.delay(function(){webix._ready=true;for(var e=0;e<webix._ready_code.length;e++)webix._ready_code[e].call();webix._ready_code=[]})});if(document.readyState=="complete")t();else webix.event(window,"load",t)})();webix.locale=webix.locale||{};webix.assert_core_ready();webix.ready(function(){webix.event(document.body,"click",function(e){webix.callEvent("onClick",[e||event])})});webix.editStop=function(){webix.callEvent("onEditEnd",[])};webix.debug_blacklist={onmousemoving:1};(function(e){function n(e,t){var n=this;n.promise=n;n.state="pending";n.val=null;n.fn=e||null;n.er=t||null;n.next=[]}var t=typeof setImmediate!=="undefined"?setImmediate:function(e){setTimeout(e,0)};n.prototype.resolve=function(e){var n=this;if(n.state==="pending"){n.val=e;n.state="resolving";t(function(){n.fire()})}};n.prototype.reject=function(e){var n=this;if(n.state==="pending"){n.val=e;n.state="rejecting";t(function(){n.fire()})}};n.prototype.then=function(e,t){var r=this;var i=new n(e,t);r.next.push(i);if(r.state==="resolved"){i.resolve(r.val)}if(r.state==="rejected"){i.reject(r.val)}return i};n.prototype.fail=function(e){return this.then(null,e)};n.prototype.finish=function(e){var t=this;t.state=e;if(t.state==="resolved"){t.next.map(function(e){e.resolve(t.val)})}if(t.state==="rejected"){t.next.map(function(e){e.reject(t.val)})}};n.prototype.thennable=function(e,t,n,r,i){var s=this;i=i||s.val;if(typeof i==="object"&&typeof e==="function"){try{var o=0;e.call(i,function(e){if(o++!==0)return;t(e)},function(e){if(o++!==0)return;n(e)})}catch(u){n(u)}}else{r(i)}};n.prototype.fire=function(){var e=this;var t;try{t=e.val&&e.val.then}catch(n){e.val=n;e.state="rejecting";return e.fire()}e.thennable(t,function(t){e.val=t;e.state="resolving";e.fire()},function(t){e.val=t;e.state="rejecting";e.fire()},function(n){e.val=n;if(e.state==="resolving"&&typeof e.fn==="function"){try{e.val=e.fn.call(undefined,e.val)}catch(r){e.val=r;return e.finish("rejected")}}if(e.state==="rejecting"&&typeof e.er==="function"){try{e.val=e.er.call(undefined,e.val);e.state="resolving"}catch(r){e.val=r;return e.finish("rejected")}}if(e.val===e){e.val=TypeError();return e.finish("rejected")}e.thennable(t,function(t){e.val=t;e.finish("resolved")},function(t){e.val=t;e.finish("rejected")},function(t){e.val=t;e.state==="resolving"?e.finish("resolved"):e.finish("rejected")})})};n.prototype.done=function(){if(this.state="rejected"&&!this.next){throw this.val}return null};n.prototype.nodeify=function(e){if(typeof e==="function")return this.then(function(t){try{e(null,t)}catch(n){setImmediate(function(){throw n})}return t},function(t){try{e(t)}catch(n){setImmediate(function(){throw n})}return t});return this};n.prototype.spread=function(e,t){return this.all().then(function(t){return typeof e==="function"&&e.apply(null,t)},t)};n.prototype.all=function(){var e=this;return this.then(function(t){function o(){if(++i===s)r.resolve(t)}var r=new n;if(!(t instanceof Array)){r.reject(TypeError);return r}var i=0;var s=t.length;for(var u=0,a=t.length;u<a;u++){var f=t[u];var l;try{l=f&&f.then}catch(c){r.reject(c);break}(function(n){e.thennable(l,function(e){t[n]=e;o()},function(e){t[n]=e;o()},function(){o()},f)})(u)}return r})};var r={defer:function(){return new n(null,null)},fcall:function(){var e=new n;var t=Array.apply([],arguments);var r=t.shift();try{var i=r.apply(null,t);e.resolve(i)}catch(s){e.reject(s)}return e},nfcall:function(){var e=new n;var t=Array.apply([],arguments);var r=t.shift();try{t.push(function(t,n){if(t){return e.reject(t)}return e.resolve(n)});r.apply(null,t)}catch(i){e.reject(i)}return e}};if(typeof module!=="undefined"){module.exports=r}else{e.promise=r}})(webix);(function(){function t(e,t,i){var s={name:t,data:i};var o=webix.promise.defer();o._syncid=setTimeout(function(){n(e,s,o)},1);o.sync=function(){clearTimeout(this._syncid);return r(e,s)};return o}function n(e,t,n){webix.ajax().post(e,t).then(function(e){var t=o(e.text());if(!t)n.reject();else n.resolve(t.data)},function(e){n.reject(e)});webix.callEvent("onRemoteCall",[n,t])}function r(e,t,n){webix.callEvent("onRemoteCall",[null,t]);return o(webix.ajax().sync().post(e,t).responseText).data}function s(e,t){if(typeof t=="string"){if(i.test(t))return new Date(t)}return t}function o(t){try{if(e.parseDates)return JSON.parse(t,s);else return JSON.parse(t)}catch(n){webix.assert(false,n.toString());return null}}var e={timeout:30,parseDates:true};var i=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;var u=webix.remote=function(e,t,n,r){if(!t){var i=document.getElementsByTagName("script");t=i[i.length-1].src}n=n||u;r=r||"";for(var s in e){if(typeof e[s]=="object"){var o=n[s]={};u(e[s],t,o,s+".")}else n[s]=a(t,r+s)}};var a=function(e,n){return function(){return t(e,n,JSON.stringify([].splice.call(arguments,0)))}};u.config=e})();webix.skin={};webix.skin.air={topLayout:"wide",barHeight:34,tabbarHeight:36,rowHeight:34,toolbarHeight:22,listItemHeight:28,inputHeight:34,inputPadding:2,menuHeight:34,menuMargin:0,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:-1,calendarHeight:70,padding:0};webix.skin["aircompact"]={topLayout:"wide",barHeight:24,tabbarHeight:26,rowHeight:26,toolbarHeight:22,listItemHeight:28,inputHeight:29,inputPadding:2,menuHeight:25,menuMargin:0,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:-1,calendarHeight:70,padding:0};webix.skin.web={name:"web",topLayout:"space",barHeight:28,tabbarHeight:30,rowHeight:30,toolbarHeight:22,listItemHeight:28,inputHeight:28,inputPadding:2,menuMargin:0,menuHeight:27,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:3,tabTopOffset:3,calendarHeight:70,padding:0};webix.skin.clouds={topLayout:"wide",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:22,listItemHeight:32,inputHeight:30,inputPadding:2,menuHeight:34,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0};webix.skin.terrace={topLayout:"space",barHeight:37,tabbarHeight:39,rowHeight:38,toolbarHeight:22,listItemHeight:28,inputHeight:30,inputPadding:2,menuMargin:0,menuHeight:32,labelTopHeight:16,layoutMargin:{space:20,wide:20,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:20,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,calendar:{height:70},padding:17};webix.skin.metro={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:36,listItemHeight:32,inputHeight:30,buttonHeight:45,inputPadding:2,menuHeight:36,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0};webix.skin.light={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:32,toolbarHeight:36,listItemHeight:32,inputHeight:34,buttonHeight:45,inputPadding:3,menuHeight:36,labelTopHeight:16,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0};webix.skin.glamour={topLayout:"space",barHeight:39,tabbarHeight:39,rowHeight:32,toolbarHeight:39,listItemHeight:32,inputHeight:34,buttonHeight:34,inputPadding:3,menuHeight:36,labelTopHeight:16,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:3,form:8,accordion:0},tabMargin:1,tabOffset:0,tabBottomOffset:1,calendarHeight:70,padding:0};webix.skin.touch={topLayout:"space",barHeight:42,tabbarHeight:50,rowHeight:42,toolbarHeight:42,listItemHeight:42,inputHeight:42,inputPadding:4,menuHeight:42,labelTopHeight:24,unitHeaderHeight:34,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:0,form:0,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendar:{headerHeight:70,timepickerHeight:35,height:310,width:300},padding:0,customCheckbox:true,customRadio:true};webix.skin.flat={topLayout:"space",barHeight:45,tabbarHeight:45,rowHeight:34,toolbarHeight:45,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:16,propertyItemHeight:28,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:5,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:true,customRadio:true,calendarHeight:70,padding:0,accordionType:"accordion"};webix.skin.compact={topLayout:"space",barHeight:34,tabbarHeight:34,rowHeight:24,toolbarHeight:34,listItemHeight:28,inputHeight:30,buttonHeight:30,inputPadding:3,menuHeight:28,labelTopHeight:16,layoutMargin:{space:5,wide:5,clean:0,head:4,line:-1,toolbar:4,form:4,accordion:5},layoutPadding:{space:5,wide:0,clean:0,head:0,line:0,toolbar:3,form:12,accordion:0},tabMargin:3,tabOffset:0,tabBottomOffset:3,tabTopOffset:1,customCheckbox:true,customRadio:true,calendarHeight:70,padding:0,accordionType:"accordion"};webix.skin.set=function(e){webix.assert(webix.skin[e],"Incorrect skin name: "+e);webix.skin.$active=webix.skin[e];webix.skin.$name=e;if(webix.ui){for(var t in webix.ui){var n=webix.ui[t];if(n&&n.prototype&&n.prototype.$skin)n.prototype.$skin(n.prototype)}}};webix.skin.set(window.webix_skin||"flat");webix.Destruction={$init:function(){webix.destructors.push(this)},destructor:function(){if(this._last_editor)this.editCancel();if(this.callEvent)this.callEvent("onDestruct",[]);this.destructor=function(){};if(this.getChildViews){var e=this.getChildViews();if(e)for(var t=0;t<e.length;t++)e[t].destructor();if(this._destroy_with_me)for(var t=0;t<this._destroy_with_me.length;t++)this._destroy_with_me[t].destructor()}delete webix.ui.views[this._settings.id];this._htmlmap=null;this._htmlrows=null;if(this._html)document.body.appendChild(this._html);this._html=null;if(this._contentobj){this._contentobj.innerHTML="";this._contentobj._htmlmap=null}if(this._viewobj&&this._viewobj.parentNode){this._viewobj.parentNode.removeChild(this._viewobj)}if(this.data&&this.data.destructor)this.data.destructor();if(this.unbind)this.unbind();this.data=null;this._viewobj=this.$view=this._contentobj=this._dataobj=null;this._evs_events=this._evs_handlers={};if(webix.UIManager._view==this)webix.UIManager._view=null;this.$scope=null;this.$destructed=true}};webix.destructors=[];webix.event(window,"unload",function(){webix.callEvent("unload",[]);webix._final_destruction=true;for(var e=0;e<webix.destructors.length;e++)webix.destructors[e].destructor();webix.destructors=[];webix.ui._popups=webix.toArray();for(var t in webix._events){var n=webix._events[t];if(n[0].removeEventListener)n[0].removeEventListener(n[1],n[2],false);else if(n[0].detachEvent)n[0].detachEvent("on"+n[1],n[2]);delete webix._events[t]}});(function(){var e={};var t=new RegExp("(\\r\\n|\\n)","g");var n=new RegExp('(\\")',"g");var r={"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var i=/[&<>"'`]/g;var s=function(e){return r[e]||"&"};webix.template=function(r){if(typeof r=="function")return r;if(e[r])return e[r];r=(r||"").toString();if(r.indexOf("->")!=-1){r=r.split("->");switch(r[0]){case"html":r=webix.html.getValue(r[1]);break;case"http":r=(new webix.ajax).sync().get(r[1],{uid:webix.uid()}).responseText;break;default:break}}r=(r||"").toString();r=r.replace(t,"\\n");r=r.replace(n,'\\"');r=r.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');r=r.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"");r=r.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"');r=r.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"');r=r.replace("{obj}",'"+obj+"');r=r.replace(/#([^#'";, ]+)#/gi,function(e,t){if(t.charAt(0)=="!")return'"+webix.template.escape(obj.'+t.substr(1)+')+"';else return'"+(obj.'+t+')+"'});try{e[r]=Function("obj","common",'return "'+r+'";')}catch(i){webix.assert_error("Invalid template:"+r)}return e[r]};webix.template.escape=function(e){return(e.toString()||"").replace(i,s)};webix.template.empty=function(){return""};webix.template.bind=function(e){return webix.bind(webix.template(e),this)};webix.type=function(e,t){if(e._webix_proto_wait){if(!e._webix_type_wait)e._webix_type_wait=[];e._webix_type_wait.push(t);return}if(typeof e=="function")e=e.prototype;if(!e.types){e.types={"default":e.type};e.type.name="default"}var n=t.name;var r=e.type;if(n)r=e.types[n]=webix.clone(t.baseType?e.types[t.baseType]:e.type);for(var i in t){if(i.indexOf("template")===0)r[i]=webix.template(t[i]);else r[i]=t[i]}return n}})();webix.Settings={$init:function(){this._settings=this.config={}},define:function(e,t){if(typeof e=="object")return this._parseSeetingColl(e);return this._define(e,t)},_define:function(e,t){var n=this[e+"_setter"];return this._settings[e]=n?n.call(this,t,e):t},_parseSeetingColl:function(e){if(e){for(var t in e)this._define(t,e[t])}},_parseSettings:function(e,t){var n={};if(t)n=webix.extend(n,t);if(typeof e=="object"&&!e.tagName)webix.extend(n,e,true);this._parseSeetingColl(n)},_mergeSettings:function(e,t){for(var n in t)switch(typeof e[n]){case"object":e[n]=this._mergeSettings(e[n]||{},t[n]);break;case"undefined":e[n]=t[n];break;default:break}return e}};webix.proxy=function(e,t){webix.assert(webix.proxy[e],"Invalid proxy name: "+e);var n=webix.copy(webix.proxy[e]);n.source=t;if(n.init)n.init();return n};webix.proxy.post={$proxy:true,load:function(e,t){webix.ajax().bind(e).post(this.source,this.params||{},t)}};webix.proxy.sync={$proxy:true,load:function(e,t){webix.ajax().sync().bind(e).get(this.source,null,t)}};webix.proxy.connector={$proxy:true,connectorName:"!nativeeditor_status",load:function(e,t){webix.ajax(this.source,t,e)},saveAll:function(e,t,n,r){var i=this.source;var s={};var o=[];for(var u=0;u<t.length;u++){var a=t[u];o.push(a.id);for(var f in a.data)if(f.indexOf("$")!==0)s[a.id+"_"+f]=a.data[f];s[a.id+"_"+this.connectorName]=a.operation}s.ids=o.join(",");s.webix_security=webix.securityKey;i+=i.indexOf("?")==-1?"?":"&";i+="editing=true";webix.ajax().post(i,s,r)},result:function(e,t,n,r,i,s){i=i.xml();if(!i)return n._processError(null,r,i,s);var o=i.data.action;if(!o.length)o=[o];var u=[];for(var a=0;a<o.length;a++){var f=o[a];u.push(f);f.status=f.type;f.id=f.sid;f.newid=f.tid;n.processResult(f,f,{text:r,data:i,loader:s})}return u}};webix.proxy.debug={$proxy:true,save:function(e,t,n,r){webix.delay(function(){window.console.log("[DP] "+t.id+" -> "+t.operation,t.data);var e={id:t.data.id,newid:t.data.id,status:t.data.operation};n.processResult(e,e)})}};webix.proxy.rest={$proxy:true,load:function(e,t){webix.ajax(this.source,t,e)},save:function(e,t,n,r){var i=this.source;i+=i.charAt(i.length-1)=="/"?"":"/";var s=t.operation;var o=t.data;if(s=="insert")delete o.id;if(s=="update"){webix.ajax().put(i+o.id,o,r)}else if(s=="delete"){webix.ajax().del(i+o.id,o,r)}else{webix.ajax().post(i,o,r)}}};webix.proxy.faye={$proxy:true,init:function(){this.clientId=this.clientId||webix.uid()},load:function(e){var t=this.clientId;this.client.subscribe(this.source,function(n){if(n.clientId==t)return;webix.dp(e).ignore(function(){if(n.operation=="delete")e.remove(n.data.id);else if(n.operation=="insert")e.add(n.data);else if(n.operation=="update"){var t=e.getItem(n.data.id);if(t){webix.extend(t,n.data,true);e.refresh(t.id)}}})})},save:function(e,t,n,r){t.clientId=this.clientId;this.client.publish(this.source,t)}};webix.proxy.indexdb={$proxy:true,create:function(e,t,n,r){this.source=e+"/";this._get_db(r,n,function(e){var n=e.target.result;for(var r in t){var i=t[r];var s=n.createObjectStore(r,{keyPath:"id",autoIncrement:true});for(var o=0;o<i.length;o++)s.put(i[o])}})},_get_db:function(e,t,n){if(this.source.indexOf("/")!=-1){var r=this.source.split("/");this.source=r[1];t=t||r[2];var i=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB;var s;if(t)s=i.open(r[0],t);else s=i.open(r[0]);if(n)s.onupgradeneeded=n;s.onerror=function(){};s.onblocked=function(){};s.onsuccess=webix.bind(function(t){this.db=t.target.result;if(e)e.call(this)},this)}else if(this.db)e.call(this);else webix.delay(this._get_db,this,[e],50)},load:function(e,t){this._get_db(function(){var n=this.db.transaction(this.source).objectStore(this.source);var r=[];n.openCursor().onsuccess=function(n){var i=n.target.result;if(i){r.push(i.value);i["continue"]()}else{e.parse(r);webix.ajax.$callback(e,t,"[]",r)}}})},save:function(e,t,n,r){this._get_db(function(){var e=t.operation;var r=t.data;var i=t.id;var s=this.db.transaction([this.source],"readwrite").objectStore(this.source);var o;if(e=="delete")o=s["delete"](i);else if(e=="update")o=s.put(r);else if(e=="insert"){delete r.id;o=s.add(r)}o.onsuccess=function(r){var i={status:e,id:t.id};if(e=="insert")i.newid=r.target.result;n.processResult(i,i)}})}};webix.ajax=function(e,t,n){if(arguments.length!==0){var r=new webix.ajax;if(n)r.master=n;return r.get(e,null,t)}if(!this.getXHR)return new webix.ajax;return this};webix.ajax.count=0;webix.ajax.prototype={master:null,getXHR:function(){if(webix.env.isIE){return new ActiveXObject("Microsoft.xmlHTTP")}else return new XMLHttpRequest},_send:function(e,t,n){var r=webix.promise.defer();var i=this.getXHR();if(!webix.isArray(n))n=[n];n.push({success:function(e,t){r.resolve(t)},error:function(e,t){r.reject(i)}});if(typeof t=="object"){var s=[];for(var o in t){var u=t[o];if(u===null||u===webix.undefined)u="";s.push(o+"="+encodeURIComponent(u))}t=s.join("&")}if(t&&this.request==="GET"){e=e+(e.indexOf("?")!=-1?"&":"?")+t;t=null}if(!webix.callEvent("onBeforeAjax",[this.request,e,t,i]))return;i.open(this.request,e,!this._sync);if(webix.securityKey)i.setRequestHeader("Webix-Token",webix.securityKey);if(this._header){for(var a in this._header)i.setRequestHeader(a,this._header[a])}else if(this.request!=="GET")i.setRequestHeader("Content-type","application/x-www-form-urlencoded");var f=this;i.onreadystatechange=function(){if(!i.readyState||i.readyState==4){if(webix.debug_time)webix.log_full_time("data_loading");var e=i.getResponseHeader("Webix-Token");if(e)webix.securityKey=e;webix.ajax.count++;if(n&&f){var t=f.master||f;var r=i.status>=400;var s=i.responseText||"";var o=f._data(i);webix.ajax.$callback(t,n,s,o,i,r)}if(f)f.master=null;n=f=null}};if(!this._sync)setTimeout(function(){i.send(t||null)},1);else i.send(t||null);if(this.master&&this.master._ajax_queue)this.master._ajax_queue.push(i);return this._sync?i:r},_data:function(x){return{xml:function(){try{return webix.DataDriver.xml.tagToObject(webix.DataDriver.xml.toObject(x.responseText,this))}catch(e){webix.log(x.responseText);webix.log(e.toString());webix.assert_error("Invalid xml data for parsing")}},rawxml:function(){return x.responseXML},text:function(){return x.responseText},json:function(){try{eval("webix.temp = "+x.responseText);var t=webix.temp;webix.temp=null;return t}catch(e){webix.log(x.responseText);webix.log(e.toString());webix.assert_error("Invalid json data for parsing")}}}},get:function(e,t,n){if(arguments.length==2&&(t.success||t.error)){n=t;t=null}this.request="GET";return this._send(e,t,n)},post:function(e,t,n){this.request="POST";return this._send(e,t,n)},put:function(e,t,n){this.request="PUT";return this._send(e,t,n)},del:function(e,t,n){this.request="DELETE";return this._send(e,t,n)},sync:function(){this._sync=true;return this},header:function(e){this._header=e;return this},bind:function(e){this.master=e;return this}};webix.ajax.$callback=function(e,t,n,r,i,s){if(e.$destructed)return;if(s)webix.callEvent("onAjaxError",[i]);if(!webix.isArray(t))t=[t];if(!s)for(var o=0;o<t.length;o++){if(t[o]){var u=t[o].before;if(u)u.call(e,n,r,i)}}for(var o=0;o<t.length;o++)if(t[o]){var a=t[o].success||t[o];if(s)a=t[o].error;if(a&&a.call)a.call(e,n,r,i)}};webix.send=function(e,t,n,r){var i=webix.html.create("FORM",{target:r||"_self",action:e,method:n||"POST"},"");for(var s in t){var o=webix.html.create("INPUT",{type:"hidden",name:s,value:t[s]},"");i.appendChild(o)}i.style.display="none";document.body.appendChild(i);i.submit();document.body.removeChild(i)};webix.AtomDataLoader={$init:function(e){this.data={};if(e){this._settings.datatype=e.datatype||"json";this.$ready.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url)this.url_setter(this._settings.url);if(this._settings.data)this.data_setter(this._settings.data)},url_setter:function(e){if(typeof e=="string"&&e.indexOf("->")!=-1){var t=e.split("->");e=webix.proxy(t[0],t[1])}if(!this._ready_for_data)return e;this.load(e,this._settings.datatype);return e},data_setter:function(e){if(!this._ready_for_data)return e;this.parse(e,this._settings.datatype);return true},load:function(e,t){var n=arguments[2]||null;this.callEvent("onBeforeLoad",[]);if(typeof t=="string"){this.data.driver=webix.DataDriver[t];t=arguments[2]}else if(!this.data.driver)this.data.driver=webix.DataDriver.json;var r=[{success:this._onLoad,error:this._onLoadError}];if(t){if(webix.isArray(t))r.push.apply(r,t);else r.push(t)}if(typeof e=="string"&&e.indexOf("->")!=-1){var i=e.split("->");e=webix.proxy(i[0],i[1])}if(e.$proxy&&e.load)return e.load(this,r,n);if(typeof e==="function"){return e(n).then(webix.bind(function(e){webix.ajax.$callback(this,r,"",e,-1)},this),webix.bind(function(e){webix.ajax.$callback(this,r,"",null,e,true)},this))}return webix.ajax(e,r,this)},parse:function(e,t){if(e&&e.then&&typeof e.then=="function")return e.then(webix.bind(function(e){this.parse(e,t)},this));this.callEvent("onBeforeLoad",[]);this.data.driver=webix.DataDriver[t||"json"];this._onLoad(e,null)},_onLoad:function(e,t,n){var r=this.data.driver;var i;if(n===-1)i=t;else i=r.toObject(e,t);if(i)this.data=i;else this._onLoadError(e,t,n);this.callEvent("onAfterLoad",[])},_onLoadError:function(e,t,n){this.callEvent("onAfterLoad",[]);this.callEvent("onLoadError",arguments);webix.callEvent("onLoadError",[e,t,n,this])},_check_data_feed:function(e){if(!this._settings.dataFeed||this._ignore_feed||!e)return true;var t=this._settings.dataFeed;if(typeof t=="function")return t.call(this,e.id||e,e);t=t+(t.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(e.id||e);this.callEvent("onBeforeLoad",[]);webix.ajax(t,function(e,t,n){this._ignore_feed=true;var r=webix.DataDriver.json;var i=r.toObject(e,t);if(i)this.setValues(r.getDetails(r.getRecords(i)[0]));else this._onLoadError(e,t,n);this._ignore_feed=false;this.callEvent("onAfterLoad",[])},this);return false}};webix.DataDriver={};webix.DataDriver.json={toObject:function(data){if(!data)return null;if(typeof data=="string"){try{eval("webix.temp="+data);data=webix.temp}catch(e){webix.assert_error(e);return null}}if(data.data){var t=data.data.config={};data.data.collections=data.collections;for(var key in data)if(key!="data")t[key]=data[key];data=data.data}return data},getRecords:function(e){if(e&&!webix.isArray(e))return[e];return e},getDetails:function(e){if(typeof e=="string")return{id:webix.uid(),value:e};return e},getOptions:function(e){return e.collections},getInfo:function(e){var t=e.config;if(!t)return{};return{_size:t.total_count||0,_from:t.pos||0,_parent:t.parent||0,_config:t.config,_key:t.webix_security}},child:"data"};webix.DataDriver.html={toObject:function(e){if(typeof e=="string"){var t=null;if(e.indexOf("<")==-1)t=webix.toNode(e);if(!t){t=document.createElement("DIV");t.innerHTML=e}return t.firstChild}return e},getRecords:function(e){return e.getElementsByTagName(this.tag)},getDetails:function(e){return webix.DataDriver.xml.tagToObject(e)},getOptions:function(){return false},getInfo:function(e){return{_size:0,_from:0}},tag:"LI"};webix.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("webix.temp="+data);return webix.temp}return data},getRecords:function(e){return e},getDetails:function(e){var t={};for(var n=0;n<e.length;n++)t["data"+n]=e[n];if(this.idColumn!==null)t.id=e[this.idColumn];return t},getOptions:function(){return false},getInfo:function(e){return{_size:0,_from:0}},idColumn:null};webix.DataDriver.csv={toObject:function(e){return e},getRecords:function(e){return e.split(this.row)},getDetails:function(e){e=this.stringToArray(e);var t={};for(var n=0;n<e.length;n++)t["data"+n]=e[n];if(this.idColumn!==null)t.id=e[this.idColumn];return t},getOptions:function(){return false},getInfo:function(e){return{_size:0,_from:0}},stringToArray:function(e){e=e.split(this.cell);for(var t=0;t<e.length;t++)e[t]=e[t].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return e},idColumn:null,row:"\n",cell:","};webix.DataDriver.xml={_isValidXML:function(e){if(!e||!e.documentElement)return null;if(e.getElementsByTagName("parsererror").length)return null;return e},toObject:function(e,t){var n=t?t.rawxml?t.rawxml():t:null;if(this._isValidXML(n))return n;if(typeof e=="string")n=this.fromString(e.replace(/^[\s]+/,""));else n=e;if(this._isValidXML(n))return n;return null},getRecords:function(e){return this.xpath(e,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(e){return this.tagToObject(e,{})},getOptions:function(){return false},getInfo:function(e){var t=this.xpath(e,this.config);if(t.length)t=this.assignTypes(this.tagToObject(t[0],{}));else t=null;return{_size:e.documentElement.getAttribute("total_count")||0,_from:e.documentElement.getAttribute("pos")||0,_parent:e.documentElement.getAttribute("parent")||0,_config:t,_key:e.documentElement.getAttribute("webix_security")||null}},xpath:function(e,t){if(window.XPathResult){var n=e;if(e.nodeName.indexOf("document")==-1)e=e.ownerDocument;var r=[];var i=e.evaluate(t,n,null,XPathResult.ANY_TYPE,null);var s=i.iterateNext();while(s){r.push(s);s=i.iterateNext()}return r}else{var o=true;try{if(typeof e.selectNodes=="undefined")o=false}catch(u){}if(o)return e.selectNodes(t);else{var a=t.split("/").pop();return e.getElementsByTagName(a)}}},assignTypes:function(e){for(var t in e){var n=e[t];if(typeof n=="object")this.assignTypes(n);else if(typeof n=="string"){if(n==="")continue;if(n=="true")e[t]=true;else if(n=="false")e[t]=false;else if(n==n*1)e[t]=e[t]*1}}return e},tagToObject:function(e,t){var n=e.nodeType==1&&e.getAttribute("stack");var r=0;if(!n){t=t||{};var i=e.attributes;if(i&&i.length)for(var s=0;s<i.length;s++){t[i[s].name]=i[s].value;var r=1}var o=e.childNodes;for(var s=0;s<o.length;s++)if(o[s].nodeType==1){var u=o[s].tagName;if(t[u]){if(typeof t[u].push!="function")t[u]=[t[u]];t[u].push(this.tagToObject(o[s],{}))}else t[u]=this.tagToObject(o[s],{});r=2}if(!r)return this.nodeValue(e);if(r<2)t.value=t.value||this.nodeValue(e)}else{t=[];var o=e.childNodes;for(var s=0;s<o.length;s++)if(o[s].nodeType==1)t.push(this.tagToObject(o[s],{}))}return t},nodeValue:function(e){if(e.firstChild){return e.firstChild.wholeText||e.firstChild.data}return""},fromString:function(e){try{if(window.DOMParser)return(new DOMParser).parseFromString(e,"text/xml");if(window.ActiveXObject){var t=new ActiveXObject("Microsoft.xmlDOM");t.loadXML(e);return t}}catch(n){webix.assert_error(n);return null}webix.assert_error("Load from xml string is not supported")}};webix.debug_code(function(){webix.debug_load_event=webix.attachEvent("onLoadError",function(e,t,n,r){e=e||"[EMPTY DATA]";var i="Data loading error, check console for details";if(e.indexOf("<?php")===0)i="PHP support missed";else if(e.indexOf("WEBIX_ERROR:")===0)i=e.replace("WEBIX_ERROR:","");if(webix.message)webix.message({type:"debug",text:i,expire:-1});if(window.console){var s=window.console;s.log("Data loading error");s.log("Object:",r);s.log("Response:",e);s.log("XHTTP:",n)}});webix.ready(function(){var e=document.location.href;if(e.indexOf("file:")===0){if(webix.message)webix.message({type:"error",text:"Please open sample by http,<br>not as file://",expire:-1});else window.alert("Please open sample by http, not as file://")}})});webix.BaseBind={bind:function(e,t,n){if(!this.attachEvent)webix.extend(this,webix.EventSystem);if(typeof e=="string")e=webix.$$(e);if(e._initBindSource)e._initBindSource();if(this._initBindSource)this._initBindSource();if(!e.getBindData)webix.extend(e,webix.BindSource);this._bind_ready();e.addBind(this._settings.id,t,n);this._bind_source=e._settings.id;if(webix.debug_bind)webix.log("[bind] "+this.name+"@"+this._settings.id+" <= "+e.name+"@"+e._settings.id);var r=this._settings.id;this._bind_refresh_handler=this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return e.getBindData(r)});if(this.refresh&&this.isVisible(this._settings.id))this.refresh()},unbind:function(){if(this._bind_source){var e=webix.$$(this._bind_source);if(e)e.removeBind(this._settings.id);this.detachEvent(this._bind_refresh_handler);this._bind_source=null}},_bind_ready:function(){if(this.filter){var e=this._settings.id;this.data._on_sync=webix.bind(function(){webix.$$(this._bind_source)._bind_updated[e]=false},this)}var t=this.render;this.render=function(){if(this._in_bind_processing)return;this._in_bind_processing=true;var e=this.callEvent("onBindRequest");this._in_bind_processing=false;return t.apply(this,e===false?arguments:[])};if(this.getValue||this.getValues)this.save=function(){if(this.validate&&!this.validate())return false;webix.$$(this._bind_source).setBindData(this.getValue?this.getValue:this.getValues(),this._settings.id);if(this.setDirty)this.setDirty(false)};if(!this._settings.dataFeed&&this.loadNext)this.data.attachEvent("onStoreLoad",webix.bind(function(){if(this._bind_source)webix.$$(this._bind_source)._bind_updated[this._settings.id]=false},this));this._bind_ready=function(){}}};webix.BindSource={$init:function(){this._bind_hash={};this._bind_updated={};this._ignore_binds={};this._bind_specific_rules(this)},saveBatch:function(e){this._do_not_update_binds=true;e.call(this);this._do_not_update_binds=false;this._update_binds()},setBindData:function(e,t){if(t)this._ignore_binds[t]=true;if(webix.debug_bind)webix.log("[bind:save] "+this.name+"@"+this._settings.id+" <= "+"@"+t);if(this.setValue)this.setValue(e);else if(this.setValues)this.setValues(e);else{var n=this.getCursor();if(n)this.updateItem(n,e);else this.add(e)}this.callEvent("onBindUpdate",[e,t]);if(this.save)this.save();if(t)this._ignore_binds[t]=false},getBindData:function(e,t){if(this._bind_updated[e])return false;var n=webix.$$(e);if(n.isVisible(n._settings.id)){this._bind_updated[e]=true;if(webix.debug_bind)webix.log("[bind:request] "+this.name+"@"+this._settings.id+" => "+n.name+"@"+n._settings.id);this._bind_update(n,this._bind_hash[e][0],this._bind_hash[e][1]);if(t&&n.filter)n.refresh()}},addBind:function(e,t,n){this._bind_hash[e]=[t,n]},removeBind:function(e){delete this._bind_hash[e];delete this._bind_updated[e];delete this._ignore_binds[e]},_bind_specific_rules:function(e){if(e.filter)webix.extend(this,webix.CollectionBind);else if(e.setValue)webix.extend(this,webix.ValueBind);else webix.extend(this,webix.RecordBind)},_update_binds:function(){if(!this._do_not_update_binds)for(var e in this._bind_hash){if(this._ignore_binds[e])continue;this._bind_updated[e]=false;this.getBindData(e,true)}},_bind_update_common:function(e,t,n){if(e.setValue)e.setValue(n&&t?n[t]:n);else if(!e.filter){if(!n&&e.clear)e.clear();else{if(e._check_data_feed(n))e.setValues(webix.clone(n))}}else{e.data.silent(function(){this.filter(t,n)})}e.callEvent("onBindApply",[n,t,this])}};webix.DataValue=webix.proto({name:"DataValue",isVisible:function(){return true},$init:function(e){if(!e||webix.isUndefined(e.value))this.data=e||"";var t=e&&e.id?e.id:webix.uid();this._settings={id:t};webix.ui.views[t]=this},setValue:function(e){this.data=e;this.callEvent("onChange",[e])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},webix.EventSystem,webix.BaseBind);webix.DataRecord=webix.proto({name:"DataRecord",isVisible:function(){return true},$init:function(e){this.data=e||{};var t=e&&e.id?e.id:webix.uid();this._settings={id:t};webix.ui.views[t]=this},getValues:function(){return this.data},setValues:function(e){this.data=e;this.callEvent("onChange",[e])},refresh:function(){this.callEvent("onBindRequest")}},webix.EventSystem,webix.BaseBind,webix.AtomDataLoader,webix.Settings);webix.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(e,t,n){var r=this.getValue()||"";if(n)r=n(r);if(e.setValue)e.setValue(r);else if(!e.filter){var i={};i[t]=r;if(e._check_data_feed(r))e.setValues(i)}else{e.data.silent(function(){this.filter(t,r)})}e.callEvent("onBindApply",[r,t,this])}};webix.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(e,t,n){var r=this.getValues()||null;if(n)r=n(r);this._bind_update_common(e,t,r)}};webix.CollectionBind={$init:function(){this._cursor=null;this.attachEvent("onSelectChange",function(e){var t=this.getSelectedId();this.setCursor(t?t.id||t:null)});this.attachEvent("onAfterCursorChange",this._update_binds);this.attachEvent("onAfterDelete",function(e){if(e==this.getCursor())this.setCursor(null)});this.data.attachEvent("onStoreUpdated",webix.bind(function(e,t,n){if(e&&e==this.getCursor()&&n!="paint"&&n!="delete")this._update_binds()},this));this.data.attachEvent("onClearAll",webix.bind(function(){this._cursor=null},this));this.data.attachEvent("onIdChange",webix.bind(function(e,t){if(this._cursor==e)this._cursor=t},this))},setCursor:function(e){if(e==this._cursor||e!==null&&!this.getItem(e))return;this.callEvent("onBeforeCursorChange",[this._cursor]);this._cursor=e;this.callEvent("onAfterCursorChange",[e])},getCursor:function(){return this._cursor},_bind_update:function(e,t,n){var r=this.getItem(this.getCursor())||this._settings.defaultData||null;if(n)r=n(r);this._bind_update_common(e,t,r)}};webix.AtomRender={_toHTML:function(e){if(e.$empty)return"";return this._settings.template(e,this)},render:function(){if(this.isVisible(this._settings.id)){if(webix.debug_render)webix.log("Render: "+this.name+"@"+this._settings.id);if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data&&!this._settings.content)this._dataobj.innerHTML=this._toHTML(this.data);if(this.callEvent)this.callEvent("onAfterRender",[])}return true}return false},sync:function(e){this._backbone_sync=false;if(e.name!="DataStore"){if(e.data&&e.name=="DataStore"){e=e.data}else{this._backbone_sync=true}}if(this._backbone_sync)e.bind("change",webix.bind(function(e){if(e.id==this.data.id){this.data=e.attributes;this.refresh()}},this));else e.attachEvent("onStoreUpdated",webix.bind(function(t){if(!t||t==this.data.id){this.data=e.pull[t];this.refresh()}},this))},template_setter:webix.template};webix.SingleRender=webix.proto({template_setter:function(e){this.type.template=webix.template(e)},_toHTML:function(e){var t=this.type;return(t.templateStart?t.templateStart(e,t):"")+t.template(e,t)+(t.templateEnd?t.templateEnd(e,t):"")},customize:function(e){webix.type(this,e)}},webix.AtomRender);webix.UIManager={_view:null,_hotkeys:{},_focus_time:0,_controls:{enter:13,tab:9,esc:27,escape:27,up:38,down:40,left:37,right:39,pgdown:34,pagedown:34,pgup:33,pageup:33,end:35,home:36,"delete":46,backspace:8,space:32,meta:91,win:91,mac:91},_enable:function(){webix.event(document.body,"click",webix.bind(this._focus_click,this));webix.event(document,"keydown",webix.bind(this._keypress,this));if(document.body.addEventListener)document.body.addEventListener("focus",webix.bind(this._focus_tab,this),true);webix.destructors.push(this)},destructor:function(){webix.UIManager._view=null},getFocus:function(){return this._view},_focus_action:function(e){this._focus_was_there=this._focus_was_there||e._settings.id},setFocus:function(e,t){e=webix.$$(e);if(e&&!e.$view)e=null;this._focus_time=new Date;if(this._view===e)return true;if(this._view&&this._view.callEvent)this._view.callEvent("onBlur",[this._view]);if(e&&e.callEvent)e.callEvent("onFocus",[e,this._view]);webix.callEvent("onFocusChange",[e,this._view]);if(this._view&&this._view.blur&&!t)this._view.blur();this._view=e;if(e&&e.focus&&!t)e.focus();return true},hasFocus:function(e){return e===this._view?true:false},_focus:function(e,t){var n=webix.html.locate(e,"view_id")||this._focus_was_there;n=webix.$$(n);this._focus_was_there=null;if(n==this._view)return;if(!t)this._focus_was_there=null;if(n){n=webix.$$(n);if(this.canFocus(n))this.setFocus(n)}else if(!t)this.setFocus(null);return true},_focus_click:function(e){if(new Date-this._focus_time<100)return false;return this._focus(e)},_focus_tab:function(e){return this._focus(e,true)},canFocus:function(e){return e.isVisible()&&e.isEnabled()},_moveChildFocus:function(e){var t=this.getFocus();if(e&&!this._is_child_of(e,t))return false;if(!this._focus_logic("getPrev",e))this.setFocus(this.getPrev(e));else this._view=null},_is_child_of:function(e,t){if(!e)return false;if(!t)return false;while(t){if(t===e)return true;t=t.getParentView()}return false},_keypress_timed:function(){if(this&&this.callEvent)this.callEvent("onTimedKeyPress",[])},_keypress:function(e){var t=e.which;var n=e.ctrlKey;var r=e.shiftKey;var i=e.altKey;var s=e.metaKey;var o=this._keycode(t,n,r,i,s);var u=this.getFocus();if(u&&u.callEvent){if(u.callEvent("onKeyPress",[t,e])===false)webix.html.preventEvent(e);if(u.hasEvent("onTimedKeyPress")){clearTimeout(u._key_press_timeout);u._key_press_timeout=webix.delay(this._keypress_timed,u,[],u._settings.keyPressTimeout||250)}}if(this.tabControl){if(t===9&&!n&&!i&&!s){this._focus_logic(!r?"getNext":"getPrev");webix.html.preventEvent(e)}}o=this._keycode(String.fromCharCode(t),n,r,i,s);var a=!n&&!i&&!s&&t!=9&&t!=27&&t!=13;if(this._check_keycode(o,a,e)===false){webix.html.preventEvent(e);return false}},_focus_logic:function(e){if(!this.getFocus())return null;e=e||"getNext";var t=this.getFocus();var n=t;var r=webix.uid();while(true){t=this[e](t);if(t&&t._settings.tabFocus&&this.canFocus(t))return this.setFocus(t);if(t===n||t.$fmarker==r)return null;t.$fmarker=r}},getTop:function(e){var t,n=webix.$$(e);while(n&&(t=n.getParentView()))n=t;return n},getNext:function(e,t){var n=e.getChildViews();if(n.length&&!t)return n[0];var r=e.getParentView();if(!r)return e;var i=r.getChildViews();if(i.length){var s=webix.PowerArray.find.call(i,e)+1;while(s<i.length){if(this.canFocus(i[s]))return i[s];s++}}return this.getNext(r,true)},getPrev:function(e,t){var n=e.getChildViews();if(n.length&&t)return this.getPrev(n[n.length-1],true);if(t)return e;var r=e.getParentView();if(!r)return this.getPrev(e,true);var i=r.getChildViews();if(i){var s=webix.PowerArray.find.call(i,e)-1;while(s>=0){if(this.canFocus(i[s]))return this.getPrev(i[s],true);s--}}return r},addHotKey:function(e,t,n){webix.assert(t,"Hot key handler is not defined");e=this._parse_keys(e);webix.assert(e.letter,"Unknown key code");if(!n)n=null;e.handler=t;e.view=n;var r=this._keycode(e.letter,e.ctrl,e.shift,e.alt,e.meta);if(!this._hotkeys[r])this._hotkeys[r]=[];this._hotkeys[r].push(e);return r},removeHotKey:function(e,t,n){if(!t&&!n)delete this._hotkeys[e];else{var r=this._hotkeys[e];if(r){for(var i=r.length-1;i>=0;i--){if(n&&r[i].view!==n)continue;if(t&&r[i].handler!==t)continue;r.splice(i,1)}if(!r.length)delete this._hotkeys[e]}}},_keycode:function(e,t,n,r,i){return e+"_"+[,t?"1":"0",n?"1":"0",r?"1":"0",i?"1":"0"].join("")},_check_keycode:function(e,t,n){var r=this.getFocus();if(this._hotkeys[e])return this._process_calls(this._hotkeys[e],r,n);else if(t&&this._hotkeys["ANY_0000"])return this._process_calls(this._hotkeys["ANY_0000"],r,n);return true},_process_calls:function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];var s=false;if(i.view!==null&&t!==i.view&&(typeof i.view!=="string"||!t||t.name!==i.view))continue;var o=i.handler(t,n);if(!!o===o)return o}return true},_parse_keys:function(e){var t=this._controls;var n=e.toLowerCase().split(/[\+\-_]/);var r,i,s,o;r=i=s=o=0;var u="";for(var a=0;a<n.length;a++){if(n[a]==="ctrl")r=1;else if(n[a]==="shift")i=1;else if(n[a]==="alt")s=1;else if(n[a]==="command")o=1;else{if(t[n[a]]){u=String.fromCharCode(t[n[a]])}else{u=n[a]}}}return{letter:u.toUpperCase(),ctrl:r,shift:i,alt:s,meta:o,debug:e}},getState:function(e,t){t=t||false;e=webix.$$(e);var n={id:e.config.id,width:e.config.width,height:e.config.height,gravity:e.config.gravity};if(!webix.isUndefined(e.config.collapsed))n.collapsed=e.config.collapsed;if(e.name==="tabs"||e.name==="tabbar")n.activeCell=e.getValue();if(t){n=[n];if(e._cells){for(var r=0;r<e._cells.length;r++)n=n.concat(this.getState(e._cells[r],t))}}return n},setState:function(e){if(!webix.isArray(e))e=[e];for(var t=0;t<e.length;t++){var n=e[t];var r=webix.$$(n.id);if(!r)continue;if(!webix.isUndefined(n.collapsed))r.define("collapsed",n.collapsed);if(!webix.isUndefined(n.activeCell))r.setValue(n.activeCell);r.define("width",n.width);r.define("height",n.height);r.define("gravity",n.gravity)}var i=webix.$$(e[0].id);if(i)i.resize()}};webix.ready(function(){webix.UIManager._enable();webix.UIManager.addHotKey("enter",function(e){if(e&&e.editStop&&e._in_edit_mode){e.editStop();return true}});webix.UIManager.addHotKey("esc",function(e){if(e){if(e.editCancel&&e._in_edit_mode){e.editCancel();return true}var t=e.getTopParentView();if(t&&t.setPosition)t._hide()}});webix.UIManager.addHotKey("shift+tab",function(e,t){if(e&&e._custom_tab_handler&&!e._custom_tab_handler(false,t))return false;if(e&&e._in_edit_mode){if(e.editNext)return e.editNext(false);else if(e.editStop){e.editStop();return true}}});webix.UIManager.addHotKey("tab",function(e,t){if(e&&e._custom_tab_handler&&!e._custom_tab_handler(true,t))return false;if(e&&e._in_edit_mode){if(e.editNext)return e.editNext(true);else if(e.editStop){e.editStop();return true}}})});webix.IdSpace={$init:function(){this._elements={};this._translate_ids={};this.getTopParentView=webix.bind(function(){return this},this);this._run_inner_init_logic();this.$ready.push(this._run_after_inner_init_logic)},$$:function(e){return this._elements[e]},innerId:function(e){return this._translate_ids[e]},_run_inner_init_logic:function(e){this._prev_global_col=webix._global_collection;webix._global_collection=this},_run_after_inner_init_logic:function(e){for(var t in this._elements){var n=this._elements[t];if(this.callEvent&&n.mapEvent&&!n._evs_map.onitemclick)n.mapEvent({onitemclick:this});n.getTopParentView=this.getTopParentView}webix._global_collection=this._prev_global_col;this._prev_global_col=0},ui:function(){this._run_inner_init_logic();var e=webix.ui.apply(webix,arguments);this._run_after_inner_init_logic();return e}};(function(){var e=[];var t=webix.ui;if(!webix.ui){t=webix.ui=function(n,r,i){webix._ui_creation=true;var s=n;s=webix.toNode(n.container||r||document.body);var o;var u=s==document.body;if(n._settings||s&&webix.isArray(n)){o=n}else{if(s&&u)n.$topView=true;if(!n._inner)n._inner={};o=t._view(n)}if(u&&!o.setPosition)webix.ui._fixHeight();if(o._settings&&o._settings._hidden){o._settings._container=s}else if(!o.$apiOnly){if(s.appendChild){s.appendChild(o._viewobj);if((!o.setPosition||o._settings.fullscreen)&&s==document.body||o._settings.position)e.push(o);if(!n.skipResize)o.adjust()}else if(s.destructor){if(!i&&i!==0&&!webix.isArray(o)){i=s.config.id;s=s.getParentView()}if(s&&s._replace){if(o.getParentView&&o.getParentView())o.getParentView()._remove(o);s._replace(o,i)}}else webix.assert_error("Not existing parent:"+n.container)}webix._ui_creation=false;return o}}webix.ui._detectScrollSize=function(){var e=webix.html.create("div");e.className="webix_skin_mark";e.style.cssText="position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;";document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;var n={110:"air",120:"aircompact",130:"clouds",140:"web",150:"terrace",160:"metro",170:"light",180:"glamour",190:"touch",200:"flat",210:"compact"}[e.offsetHeight];document.body.removeChild(e);if(n){var r=webix.skin[n];if(r&&r!=webix.skin.$active)webix.skin.set(n)}if(webix.env.$customScroll)return 0;return t};webix.ui.scrollSize=webix.env.touch||webix.env.$customScroll?0:17;webix.ready(function(){var e=webix.ui._detectScrollSize();webix.ui.scrollSize=webix.env.touch?0:e});webix.ui._uid=function(e){return"$"+e+(this._namecount[e]=(this._namecount[e]||0)+1)};webix.ui._namecount={};webix.ui._fixHeight=function(){webix.html.addStyle("html, body{ height:100%; }");document.body.className+=" webix_full_screen";webix.ui._fixHeight=function(){}};webix.ui.resize=function(){if(!webix.ui._freeze)for(var t=e.length-1;t>=0;t--){if(e[t].$destructed)e.splice(t,1);else e[t].adjust()}};webix.ui.each=function(e,t,n){if(e){var r=e.getChildViews();for(var i=0;i<r.length;i++){if(t.call(n||webix,r[i])!==false)webix.ui.each(r[i],t,n)}}};webix.event(window,"resize",webix.ui.resize);t._delays={};t.delay=function(e){webix.ui._delays[e.id]=e};t.hasMethod=function(e,t){var n=webix.ui[e];if(!n)return false;if(n._webix_proto_wait)n=n.call(webix);return!!webix.ui[e].prototype[t]};webix.ui.zIndex=function(){return webix.ui.zIndexBase++};webix.ui.zIndexBase=100;t._view=function(e){webix.assert_config(e);if(e.view){var n=e.view;webix.assert(t[n],"unknown view:"+n);return new t[n](e)}else if(e.rows||e.cols){var r=e.rows||e.cols;var i=false;for(var s=0;s<r.length;s++){if(r[s].body&&!r[s].view)i=true}if(i){return new t.headerlayout(e)}else return new t.layout(e)}else if(e.cells)return new t.multiview(e);else if(e.template||e.content)return new t.template(e);else return new t.spacer(e)};t.views={};webix.$$=function(e){if(!e)return null;if(t.views[e])return t.views[e];if(t._delays[e])return webix.ui(t._delays[e]);var n=e;if(typeof e=="object"){if(e._settings)return e;n=e.target||e.srcElement||e}return t.views[webix.html.locate({target:webix.toNode(n)},"view_id")]};if(webix.isUndefined(window.$$))window.$$=webix.$$;webix.UIExtension=window.webix_view||{};webix.protoUI({name:"baseview",$init:function(e){if(!e.id)e.id=webix.ui._uid(this.name);this._parent_cell=webix._parent_cell;webix._parent_cell=null;this.$scope=e.$scope||(this._parent_cell?this._parent_cell.$scope:null);if(!this._viewobj){this._contentobj=this._viewobj=webix.html.create("DIV",{"class":"webix_view"});this.$view=this._viewobj}},$skin:false,defaults:{width:0,height:0,gravity:1},getNode:function(){return this._viewobj},getParentView:function(){return this._parent_cell||null},getTopParentView:function(){var e=this.getParentView();return e?e.getTopParentView():this},getFormView:function(){var e=this.getParentView();return!e||e.setValues?e:e.getFormView()},getChildViews:function(){return[]},isVisible:function(e,t){if(this._settings.hidden){if(e){if(!this._hidden_render){this._hidden_render=[];this._hidden_hash={}}if(!this._hidden_hash[e]){this._hidden_hash[e]=true;this._hidden_render.push(e)}}return false}var n=this.getParentView();if(n)return n.isVisible(e,this._settings.id);return true},isEnabled:function(){if(this._disable_cover)return false;var e=this.getParentView();if(e)return e.isEnabled();return true},disable:function(){webix.html.remove(this._disable_cover);this._settings.disabled=true;this._disable_cover=webix.html.create("div",{"class":"webix_disabled"});if(window.getComputedStyle)this._disabled_view_pos=window.getComputedStyle(this._viewobj,null).getPropertyValue("position");if(this._disabled_view_pos!="absolute")this._viewobj.style.position="relative";this._viewobj.appendChild(this._disable_cover);webix.UIManager._moveChildFocus(this)},enable:function(){this._settings.disabled=false;if(this._disable_cover){webix.html.remove(this._disable_cover);this._disable_cover=null;if(this._disabled_view_pos)this._viewobj.style.position=this._disabled_view_pos}},disabled_setter:function(e){if(e)this.disable();else this.enable();return e},container_setter:function(e){webix.assert(webix.toNode(e),"Invalid container");return true},css_setter:function(e){if(typeof e=="object")e=webix.html.createCss(e);this._viewobj.className+=" "+e;return e},id_setter:function(e){if(webix._global_collection&&webix._global_collection!=this){var t=e;webix._global_collection._elements[e]=this;e=webix.ui._uid(this.name);webix._global_collection._translate_ids[e]=t}webix.assert(!webix.ui.views[e],"Non unique view id: "+e);webix.ui.views[e]=this;this._viewobj.setAttribute("view_id",e);return e},$setSize:function(e,t){var n=this._last_size;if(n&&n[0]==e&&n[1]==t){webix.debug_size_box(this,[e,t,"not changed"]);return false}webix.debug_size_box(this,[e,t]);this._last_size=[e,t];this.$width=this._content_width=e-(this._scroll_y?webix.ui.scrollSize:0);this.$height=this._content_height=t-(this._scroll_x?webix.ui.scrollSize:0);this._viewobj.style.width=e+"px";this._viewobj.style.height=t+"px";return true},$getSize:function(e,t){var n=this._settings;if(this._scroll_y)e+=webix.ui.scrollSize;if(this._scroll_x)t+=webix.ui.scrollSize;var r=[n.width||n.minWidth||0,n.width||n.maxWidth||1e5,n.height||n.minHeight||0,n.height||n.maxHeight||1e5,n.gravity];r[0]+=e;r[1]+=e;r[2]+=t;r[3]+=t;return r},show:function(e,t){var n=this.getParentView();var r=!arguments[2];if(n){if(!t&&this._settings.animate)if(n._settings.animate)t=webix.extend(n._settings.animate?webix.extend({},n._settings.animate):{},this._settings.animate,true);if(r?n._show:n._hide)(r?n._show:n._hide).call(n,this,t);if(e&&r)n.show(e)}else{if(this._settings.hidden){if(r){var i=webix.toNode(this._settings._container||document.body);i.appendChild(this._viewobj);this._settings.hidden=false;this.adjust();this._render_hidden_views()}}else{if(!r){this._settings.hidden=this._settings._hidden=true;if(this._viewobj){this._settings._container=this._viewobj.parentNode;webix.html.remove(this._viewobj)}}}}},_render_hidden_views:function(){if(this._hidden_render){for(var e=0;e<this._hidden_render.length;e++){var t=webix.$$(this._hidden_render[e]);if(t)t.render()}this._hidden_render=[];this._hidden_hash={}}},hidden_setter:function(e){if(e)this.hide();return this._settings.hidden},hide:function(){this.show(null,null,true);webix.UIManager._moveChildFocus(this)},adjust:function(){var e=this._viewobj;if(!this._parent_cell)e=e.parentNode;if(!this._viewobj.parentNode)return false;var t=this._viewobj.parentNode.offsetWidth||0;var n=this._viewobj.parentNode.offsetHeight||0;var r=this.$getSize(0,0);if(r[0]>t)t=r[0];if(r[2]>n)n=r[2];if(t>r[1])t=r[1];if(n>r[3])n=r[3];this.$setSize(t,n)},resize:function(e){if(webix._child_sizing_active)return;var t=this.getParentView();if(t){if(t.resizeChildren)t.resizeChildren();else t.resize()}else{this.adjust()}}},webix.Settings,webix.Destruction,webix.BaseBind,webix.UIExtension);webix.protoUI({name:"view",$init:function(e){this._set_inner(e)},_set_inner:function(e){var t=webix.isUndefined(e.borderless);if(t&&!this.setPosition&&e.$topView){e.borderless=true;t=false}if(t&&this.defaults.borderless||e.borderless){e._inner={top:true,left:true,bottom:true,right:true}}else{if(!e._inner)e._inner={};this._contentobj.style.borderWidth="1px"}},$getSize:function(e,t){var n=this._settings._inner;if(n){e+=(n.left?0:1)+(n.right?0:1);t+=(n.top?0:1)+(n.bottom?0:1)}var r=webix.ui.baseview.prototype.$getSize.call(this,e,t);webix.debug_size_box(this,r,true);return r},$setSize:function(e,t){webix.debug_size_box(this,[e,t]);var n=this._settings._inner;if(n){e-=(n.left?0:1)+(n.right?0:1);t-=(n.top?0:1)+(n.bottom?0:1)}return webix.ui.baseview.prototype.$setSize.call(this,e,t)}},webix.ui.baseview)})();webix.ui.view.call(webix);webix.debug_size_indent=0;webix.debug_size_step=function(){var e="";for(var t=0;t<webix.debug_size_indent;t++)e+="|  ";return e};webix.debug_size_box_start=function(e,t){if(!webix.debug_size)return;if(!webix.debug_size_indent)webix.log(t?"--- get sizes ---":"--- set sizes ---");webix.log(webix.debug_size_step()+e.name+"@"+e.config.id);webix.debug_size_indent++};webix.debug_size_box_end=function(e,t){if(!webix.debug_size)return;webix.debug_size_indent--;webix.log(webix.debug_size_step()+t.join(","))};webix.debug_size_box=function(e,t,n){if(!webix.debug_size)return;if(!webix.debug_size_indent)webix.log(n?"--- get sizes ---":"--- set sizes ---");webix.log(webix.debug_size_step()+e.name+"@"+e.config.id+" "+t.join(","))};webix.protoUI({name:"spacer",defaults:{borderless:true},$init:function(){this._viewobj.className+=" webix_spacer"}},webix.ui.view);webix.protoUI({name:"baselayout",$init:function(e){this.$ready.push(this._parse_cells);this._dataobj=this._contentobj;this._layout_sizes=[];this._responsive=[];if(e.$topView){e.borderless=true;e._inner={top:true,left:true,bottom:true,right:true}}if(e.isolate)webix.extend(this,webix.IdSpace)},rows_setter:function(e){this._vertical_orientation=1;this._collection=e},cols_setter:function(e){this._vertical_orientation=0;this.$view.style.whiteSpace="nowrap";this._collection=e},_remove:function(e){webix.PowerArray.removeAt.call(this._cells,webix.PowerArray.find.call(this._cells,e));this.resizeChildren(true)},_replace:function(e,t){if(webix.isUndefined(t)){for(var n=0;n<this._cells.length;n++)this._cells[n].destructor();this._collection=e;this._parse_cells()}else{var r;if(typeof t=="number"){if(t<0||t>this._cells.length)t=this._cells.length;var i=(this._cells[t]||{})._viewobj;webix.PowerArray.insertAt.call(this._cells,e,t);webix.html.insertBefore(e._viewobj,i,this._dataobj)}else{r=webix.$$(t);t=webix.PowerArray.find.call(this._cells,r);webix.assert(t!=-1,"Attempt to replace the non-existing view");r._viewobj.parentNode.insertBefore(e._viewobj,r._viewobj);r.destructor();this._cells[t]=e}if(!this._vertical_orientation)this._fix_vertical_layout(e);this._cells[t]._parent_cell=this}this.resizeChildren(true);var s=this.elements?this:this.getFormView();if(s)s._recollect_elements();webix.callEvent("onReconstruct",[this])},_fix_vertical_layout:function(e){e._viewobj.style.display="inline-block";e._viewobj.style.verticalAlign="top"},addView:function(e,t){if(webix.isUndefined(t))t=this._cells.length;return webix.ui(e,this,t)._settings.id},removeView:function(e){var t;if(typeof e!="object")t=webix.$$(e);else t=e;var n=webix.PowerArray.find.call(this._cells,t);if(n>=0){var r=this.elements?this:this.getFormView();this._cells.splice(n,1);if(r&&t.name)delete r.getCleanValues()[t.name];t.destructor();this.resizeChildren(true);if(r)r._recollect_elements()}else webix.assert(false,"Attemp to remove not existing view: "+e);webix.callEvent("onReconstruct",[this])},reconstruct:function(){this._replace(this._collection)},_hide:function(e,t,n){if(e._settings.hidden)return;e._settings.hidden=true;webix.html.remove(e._viewobj);this._hiddencells++;if(!n&&!webix._ui_creation)this.resizeChildren(true)},resizeChildren:function(){if(this._layout_sizes){var e=this.getParentView();if(e){if(e.resizeChildren)return e.resizeChildren();else return e.resize()}var t=this.$getSize(0,0);var n,r,i,s;i=n=this._layout_sizes[0]||0;s=r=this._layout_sizes[1]||0;if(!e){if(t[0]>n)i=t[0];if(t[2]>r)s=t[2];if(n>t[1])i=t[1];if(r>t[3])s=t[3];this.$setSize(i,s)}else this._set_child_size(n,r)}},getChildViews:function(){return this._cells},index:function(e){if(e._settings)e=e._settings.id;for(var t=0;t<this._cells.length;t++)if(this._cells[t]._settings.id==e)return t;return-1},_show:function(e,t,n){if(!e._settings.hidden)return;e._settings.hidden=false;var r=this.index(e)+1;while(this._cells[r]&&this._cells[r]._settings.hidden)r++;var i=this._cells[r]?this._cells[r]._viewobj:null;webix.html.insertBefore(e._viewobj,i,this._dataobj||this._viewobj);this._hiddencells--;if(!n){this.resizeChildren(true);if(e.refresh&&!e.touchable)e.refresh()}},showBatch:function(e){if(this._settings.visibleBatch==e)return;this._settings.visibleBatch=e;var t=[];for(var n=0;n<this._cells.length;n++){if(!this._cells[n]._settings.batch)t.push(this._cells[n]);else if(this._cells[n]._settings.batch==e)t.push(this._cells[n]);else this._hide(this._cells[n],null,true)}for(var n=0;n<t.length;n++)this._show(t[n],null,true);this.resizeChildren(true)},_parse_cells:function(e){this._cells=[];webix.assert(e,this.name+" was incorrectly defined. <br><br> You have missed rows|cols|cells|elements collection");for(var t=0;t<e.length;t++){webix._parent_cell=this;if(!e[t]._inner)e[t].borderless=true;this._cells[t]=webix.ui._view(e[t],this);if(!this._vertical_orientation)this._fix_vertical_layout(this._cells[t]);if(this._settings.visibleBatch&&this._settings.visibleBatch!=this._cells[t]._settings.batch&&this._cells[t]._settings.batch){this._cells[t]._settings.hidden=true;this._hiddencells++}if(!this._cells[t]._settings.hidden){(this._dataobj||this._contentobj).appendChild(this._cells[t]._viewobj);if(this._cells[t].$nospace)this._hiddencells++}}if(this._parse_cells_ext_end)this._parse_cells_ext_end(e)},_bubble_size:function(e,t,n){if(this._vertical_orientation!=n)for(var r=0;r<this._cells.length;r++){this._cells[r]._settings[e]=t;if(this._cells[r]._bubble_size)this._cells[r]._bubble_size(e,t,n)}},$getSize:function(e,t){webix.debug_size_box_start(this,true);var n=0;var r=1e5;var i=1e5;var s=0;if(this._vertical_orientation)i=0;else r=0;var o=0;var u=0;var a=0;this._sizes=[];for(var f=0;f<this._cells.length;f++){if(this._cells[f]._settings.hidden)continue;var l=this._sizes[f]=this._cells[f].$getSize(0,0);if(this._cells[f].$nospace){u++;continue}if(this._vertical_orientation){if(l[0]>n)n=l[0];if(l[1]<r)r=l[1];s+=l[2];i+=l[3];if(l[2]==l[3]&&l[2]!=-1){o+=l[2];u++}else a+=l[4]}else{if(l[2]>s)s=l[2];if(l[3]<i)i=l[3];n+=l[0];r+=l[1];if(l[0]==l[1]&&l[0]!=-1){o+=l[0];u++}else a+=l[4]}}if(s>i)i=s;if(n>r)r=n;this._master_size=[o,this._cells.length-u,a];this._desired_size=[n+e,s+t];var c=webix.ui.baseview.prototype.$getSize.call(this,0,0);if(c[1]>=1e5)c[1]=0;if(c[3]>=1e5)c[3]=0;c[0]=(c[0]||n)+e;c[1]=Math.max(c[0],(c[1]||r)+e);c[2]=(c[2]||s)+t;c[3]=Math.max(c[2],(c[3]||i)+t);webix.debug_size_box_end(this,c);return c},$setSize:function(e,t){this._layout_sizes=[e,t];webix.debug_size_box_start(this);webix.ui.baseview.prototype.$setSize.call(this,e,t);this._set_child_size(e,t);webix.debug_size_box_end(this,[e,t])},_set_child_size_a:function(e,t,n){t=e[t];n=e[n];var r=t;if(t!=n){var i=this._set_size_delta*e[4]/this._set_size_gravity;if(i<t){r=t;this._set_size_gravity-=e[4];this._set_size_delta-=r}else if(i>n){r=n;this._set_size_gravity-=e[4];this._set_size_delta-=r}else{return-1}}return r},_responsive_hide:function(e,t){var n=webix.$$(t);if(n==="hide"||!n){e.hide();webix.delay(this.resize,this);e._responsive_marker="hide"}else{if(!n)n=webix.ui({view:"popup",body:[{}]});e._responsive_width=e._settings.width;e._responsive_height=e._settings.height;e._responsive_marker=n._settings.id;e._settings.width=0;if(!e._settings.height)e._settings.autoheight=true;webix.ui(e,n,this._responsive.length)}this._responsive.push(e)},_responsive_show:function(e){var t=e._responsive_marker;e._responsive_marker=0;if(t==="hide"||!t){e.show();webix.delay(this.resize,this)}else{e._settings.width=e._responsive_width;e._settings.height=e._responsive_height;delete e._settings.autoheight;webix.ui(e,this,0)}this._responsive.pop()},_responsive_cells:function(e,t){if(this._responsive_tinkery)return;this._responsive_tinkery=true;if(e<this._desired_size[0]){for(var n=0;n<this._cells.length-1;n++){var r=this._cells[n];if(!r._responsive_marker){this._responsive_hide(r,this._settings.responsive);break}}}else if(this._responsive.length){var r=this._responsive[this._responsive.length-1];var i=r._responsive_marker=="hide"?0:r._responsive_width;var s=r.$getSize(i,0);if(s[0]+this._desired_size[0]+this._paddingX+20<=e)this._responsive_show(r)}this._responsive_tinkery=false},_set_child_size:function(e,t){webix._child_sizing_active=(webix._child_sizing_active||0)+1;if(this._settings.responsive)this._responsive_cells(e,t);this._set_size_delta=(this._vertical_orientation?t:e)-this._master_size[0];this._set_size_gravity=this._master_size[2];var n=e;var r=t;var i=[];for(var s=0;s<this._cells.length;s++){if(this._cells[s]._settings.hidden)continue;var o=this._sizes[s];if(this._vertical_orientation){var r=this._set_child_size_a(o,2,3);if(r<0){i.push(s);continue}}else{var n=this._set_child_size_a(o,0,1);if(n<0){i.push(s);continue}}this._cells[s].$setSize(n,r)}for(var s=0;s<i.length;s++){var u=i[s];var o=this._sizes[u];var a=Math.round(this._set_size_delta*o[4]/this._set_size_gravity);this._set_size_delta-=a;this._set_size_gravity-=o[4];if(this._vertical_orientation)r=a;else{n=a}this._cells[u].$setSize(n,r)}webix._child_sizing_active-=1},_next:function(e,t){var n=this.index(e);if(n==-1)return null;return this._cells[n+t]},_first:function(){return this._cells[0]}},webix.EventSystem,webix.ui.baseview);webix.protoUI({name:"layout",$init:function(e){this._hiddencells=0},defaults:{type:"line"},_parse_cells:function(){if(this._parse_cells_ext)e=this._parse_cells_ext(e);this._viewobj.className+=" webix_layout_"+(this._settings.type||"");if(this._settings.margin!==webix.undefined)this._margin=this._settings.margin;if(this._settings.padding!=webix.undefined)this._paddingX=this._paddingY=this._settings.padding;if(this._settings.paddingX!==webix.undefined)this._paddingX=this._settings.paddingX;if(this._settings.paddingY!==webix.undefined)this._paddingY=this._settings.paddingY;if(this._paddingY||this._paddingX)this._padding=true;if(this._padding&&this._margin>0&&!this._settings.borderless){this._contentobj.style.borderWidth="1px";this._render_borders=true}var e=this._collection;if(this._settings.borderless)this._settings._inner={top:true,left:true,right:true,bottom:true};this._beforeResetBorders(e);webix.ui.baselayout.prototype._parse_cells.call(this,e);this._afterResetBorders(e)},$getSize:function(e,t){e=e||0;t=t||0;var n=this._margin*(this._cells.length-this._hiddencells-1);if(this._render_borders||this._padding&&this._margin>0){var r=this._settings._inner;if(r){e+=(r.left?0:1)+(r.right?0:1);t+=(r.top?0:1)+(r.bottom?0:1)}}if(this._vertical_orientation)t+=n;else e+=n;return webix.ui.baselayout.prototype.$getSize.call(this,e+(this._paddingX||0)*2,t+(this._paddingY||0)*2)},$setSize:function(e,t){this._layout_sizes=[e,t];webix.debug_size_box_start(this);var n;if(this._padding&&this._margin>0||this._render_borders)n=webix.ui.view.prototype.$setSize.call(this,e,t);else n=webix.ui.baseview.prototype.$setSize.call(this,e,t);t=this._content_height;e=this._content_width;var r=this._settings;if(r.scroll){t=Math.max(t,this._desired_size[1]);e=Math.max(e,this._desired_size[0])}this._set_child_size(e,t);webix.debug_size_box_end(this,[e,t])},_set_child_size:function(e,t){var n=this._margin*(this._cells.length-this._hiddencells-1);if(this._vertical_orientation){t-=n+this._paddingY*2;e-=this._paddingX*2}else{e-=n+this._paddingX*2;t-=this._paddingY*2}return webix.ui.baselayout.prototype._set_child_size.call(this,e,t)},resizeChildren:function(e){if(e){this._last_size=null;var t=[];for(var n=0;n<this._cells.length;n++){var r=this._cells[n];t[n]=r._settings;var i=r._layout_sizes&&!r._render_borders||r._settings.borderless?"0px":"1px";r._viewobj.style.borderTopWidth=r._viewobj.style.borderBottomWidth=r._viewobj.style.borderLeftWidth=r._viewobj.style.borderRightWidth=i}this._beforeResetBorders(t);for(var n=0;n<t.length;n++)if(t[n].borderless&&this._cells[n]._set_inner)this._cells[n]._set_inner(t[n]);this._afterResetBorders(this._cells)}webix.ui.baselayout.prototype.resizeChildren.call(this)},_beforeResetBorders:function(e){if(this._padding&&this._margin){for(var t=0;t<e.length;t++){if(!e[t]._inner||!e[t].borderless)e[t]._inner={top:false,left:false,right:false,bottom:false}}}else{for(var t=0;t<e.length;t++)e[t]._inner=webix.clone(this._settings._inner);var n=false;if(this._settings.type=="clean")n=true;var r=e.length;if(this._vertical_orientation){for(var t=1;t<r-1;t++)e[t]._inner.top=e[t]._inner.bottom=n;if(r>1){if(this._settings.type!="head")e[0]._inner.bottom=n;while(e[r-1].hidden&&r>1)r--;if(r>0)e[r-1]._inner.top=n}}else{for(var t=1;t<r-1;t++)e[t]._inner.left=e[t]._inner.right=n;if(r>1){if(this._settings.type!="head")e[0]._inner.right=n;e[r-1]._inner.left=n;while(r>1&&e[r-1].hidden)r--;if(r>0)e[r-1]._inner.left=n}}}},_fix_container_borders:function(e,t){if(t.top)e.borderTopWidth="0px";if(t.left)e.borderLeftWidth="0px";if(t.right)e.borderRightWidth="0px";if(t.bottom)e.borderBottomWidth="0px"},_afterResetBorders:function(e){var t=0;for(var n=0;n<e.length;n++){var r=this._cells[n];var i=r._settings._inner;if(r._settings.hidden&&this._cells[n+1]){var s=this._cells[n+1]._settings._inner;if(!i.top)s.top=false;if(!i.left)s.left=false;if(n==t)t++}this._fix_container_borders(r._viewobj.style,r._settings._inner)}var o=this._vertical_orientation?"marginLeft":"marginTop";var u=this._vertical_orientation?"marginTop":"marginLeft";var a=this._vertical_orientation?this._paddingX:this._paddingY;var f=this._vertical_orientation?this._paddingY:this._paddingX;for(var n=0;n<e.length;n++)this._cells[n]._viewobj.style[o]=(a||0)+"px";if(this._cells.length)this._cells[t]._viewobj.style[u]=(f||0)+"px";for(var l=t+1;l<e.length;l++)this._cells[l]._viewobj.style[u]=this._margin+"px"},type_setter:function(e){this._margin=typeof this._margin_set[e]!="undefined"?this._margin_set[e]:this._margin_set["line"];this._paddingX=this._paddingY=typeof this._margin_set[e]!="undefined"?this._padding_set[e]:this._padding_set["line"];return e},$skin:function(){var e=webix.skin.$active;this._margin_set=e.layoutMargin;this._padding_set=e.layoutPadding}},webix.ui.baselayout);webix.ui.layout.call(webix);webix.animate=function(e,t){var n=t;if(webix.isArray(e)){for(var r=0;r<e.length;r++){if(webix.isArray(t))n=t[r];if(n.type=="slide"){if(n.subtype=="out"&&r===0){continue}if(n.subtype=="in"&&r==1){continue}}if(n.type=="flip"){var i=webix.clone(n);if(r===0){i.type="flipback"}if(r==1){i.callback=null}webix.animate(e[r],i);continue}webix.animate(e[r],n)}return}var s=webix.toNode(e);if(s._has_animation)webix.animate.end(s,n);else webix.animate.start(s,n)};webix.animate.end=function(e,t){e.style[webix.env.transitionDuration]="1ms";e._has_animation=null;if(webix._wait_animate)window.clearTimeout(webix._wait_animate);webix._wait_animate=webix.delay(webix.animate,webix,[e,t],10)};webix.animate.isSupported=function(){return!webix.$testmode&&!webix.noanimate&&webix.env.transform&&webix.env.transition&&!webix.env.isOpera};webix.animate.formLine=function(e,t,n){var r=n.direction;t.parentNode.style.position="relative";t.style.position="absolute";e.style.position="absolute";var i=webix.env.isFF?r=="top"||r=="left"?-1:1:0;if(r=="top"||r=="bottom"){e.style.left="0px";e.style.top=(n.top||i)+(r=="top"?1:-1)*t.offsetHeight+"px"}else{e.style.top=(n.top||0)+"px";e.style.left=i+(r=="left"?1:-1)*t.offsetWidth+"px"}t.parentNode.appendChild(e);if(n.type=="slide"&&n.subtype=="out"){e.style.left="0px";e.style.top=(n.top||0)+"px";t.parentNode.removeChild(t);e.parentNode.appendChild(t)}return[e,t]};webix.animate.breakLine=function(e){webix.html.remove(e[1]);webix.animate.clear(e[0]);webix.animate.clear(e[1]);e[0].style.position=""};webix.animate.clear=function(e){e.style[webix.env.transform]="";e.style[webix.env.transition]="";e.style.top=e.style.left=""};webix.animate.defaults={type:"slide",delay:"0",duration:"500",timing:"ease-in-out",x:0,y:0};webix.animate.start=function(e,t){if(typeof t=="string")t={type:t};t=webix.Settings._mergeSettings(t,webix.animate.defaults);var n=webix.env.cssPrefix;var r=e._has_animation=t;var i,s;switch(r.type=="slide"&&r.direction){case"right":r.x=e.offsetWidth;break;case"left":r.x=-e.offsetWidth;break;case"top":r.y=-e.offsetHeight;break;case"bottom":default:r.y=r.y||e.offsetHeight;break}if(r.type=="flip"||r.type=="flipback"){i=[0,0];s="scaleX";if(r.subtype=="vertical"){i[0]=20;s="scaleY"}else i[1]=20;if(r.direction=="right"||r.direction=="bottom"){i[0]*=-1;i[1]*=-1}}var o=r.duration+"ms "+r.timing+" "+r.delay+"ms";var u=n+"TransformStyle: preserve-3d;";var a="";var f="";switch(r.type){case"fade":a="opacity "+o;u="opacity: 0;";break;case"show":a="opacity "+o;u="opacity: 1;";break;case"flip":o=r.duration/2+"ms "+r.timing+" "+r.delay+"ms";f="skew("+i[0]+"deg, "+i[1]+"deg) "+s+"(0.00001)";a="all "+o;break;case"flipback":r.delay+=r.duration/2;o=r.duration/2+"ms "+r.timing+" "+r.delay+"ms";e.style[webix.env.transform]="skew("+ -1*i[0]+"deg, "+ -1*i[1]+"deg) "+s+"(0.00001)";e.style.left="0";f="skew(0deg, 0deg) "+s+"(1)";a="all "+o;break;case"slide":var l=r.x+"px";var c=r.y+"px";f=webix.env.translate+"("+l+", "+c+(webix.env.translate=="translate3d"?", 0":"")+")";a=n+"transform "+o;break;default:break}webix.delay(function(){e.style[webix.env.transition]=a;webix.delay(function(){if(u)e.style.cssText+=u;if(f)e.style[webix.env.transform]=f;var t=false;var n=webix.event(e,webix.env.transitionEnd,function(i){e._has_animation=null;if(r.callback)r.callback.call(r.master||window,e,r,i);t=true;webix.eventRemove(n)});window.setTimeout(function(){if(!t){e._has_animation=null;if(r.callback)r.callback.call(r.master||window,e,r);t=true;webix.eventRemove(n)}},(r.duration*1+r.delay*1)*1.3)})})};webix.MouseEvents={$init:function(e){e=e||{};this._clickstamp=0;this._dbl_sensetive=300;this._item_clicked=null;this._mouse_action_extend(e.onClick,"on_click");this._mouse_action_extend(e.onContext,"on_context");this._mouse_action_extend(e.onDblClick,"on_dblclick");this._mouse_action_extend(e.onMouseMove,"on_mouse_move");if(this.on_click){webix.event(this._contentobj,"click",this._onClick,this);if(webix.env.isIE8)webix.event(this._contentobj,"dblclick",this._onDblClick,this)}if(this.on_context)webix.event(this._contentobj,"contextmenu",this._onContext,this);if(this.on_mouse_move)this._enable_mouse_move()},_enable_mouse_move:function(){if(!this._mouse_move_enabled){this.on_mouse_move=this.on_mouse_move||{};webix.event(this._contentobj,"mousemove",this._onMouse,this);webix.event(this._contentobj,webix.env.isIE?"mouseleave":"mouseout",this._onMouse,this);this._mouse_move_enabled=1}},_mouse_action_extend:function(e,t){if(e){var n=this[t];var r=n?webix.extend({},n):{};this[t]=webix.extend(r,e)}},_onClick:function(e){if(!this.isEnabled())return false;webix.UIManager._focus_action(this);if(this.on_dblclick){var t=(new Date).valueOf();if(t-this._clickstamp<=this._dbl_sensetive&&this.locate){var n=this.locate(e);if(""+n==""+this._item_clicked){this._clickstamp=0;return this._onDblClick(e)}}this._clickstamp=t}var r=this._mouseEvent(e,this.on_click,"ItemClick");return r},_onDblClick:function(e){return this._mouseEvent(e,this.on_dblclick,"ItemDblClick")},_onContext:function(e){if(this._mouseEvent(e,this.on_context,"BeforeContextMenu")){this._mouseEvent(e,{},"AfterContextMenu")}},_onMouse:function(e){if(webix.env.isIE)e=document.createEventObject(event);else if(!webix.$testmode&&!webix.isUndefined(e.webkitMovementY)&&!e.webkitMovementY&&!e.webkitMovementX)return;if(this._mouse_move_timer)window.clearTimeout(this._mouse_move_timer);this.callEvent("onMouseMoving",[e]);this._mouse_move_timer=window.setTimeout(webix.bind(function(){if(e.type=="mousemove")this._onMouseMove(e);else this._onMouseOut(e)},this),this._settings.mouseEventDelay||500)},_onMouseMove:function(e){if(!this._mouseEvent(e,this.on_mouse_move,"MouseMove"))this.callEvent("onMouseOut",[e||event])},_onMouseOut:function(e){this.callEvent("onMouseOut",[e||event])},_mouseEvent:function(e,t,n){e=e||event;var r=e.target||e.srcElement;var i="";var s=null;var o=false;while(r&&r.parentNode){if(!o&&r.getAttribute){s=r.getAttribute(this._id);if(s){this._item_clicked=s;if(this.callEvent){if(!this.callEvent("on"+n,[s,e,r]))return}o=true}}i=r.className;if(i){i=i.split(" ");i=i[0]||i[1];if(t[i]){var u=webix.toFunctor(t[i],this.$scope);var a=u.call(this,e,s||webix.html.locate(e,this._id),r);if(typeof a!="undefined"&&a!==true)return}}r=r.parentNode}return o}};webix.protoUI({name:"accordionitem",$init:function(e){this._viewobj.innerHTML="<div webix_ai_id='"+e.id+"'  class='webix_accordionitem_header'><div class='webix_accordionitem_button' ></div><div class='webix_accordionitem_label' ></div></div><div class='webix_accordionitem_body'></div>";this._contentobj=this._viewobj;this._headobj=this._contentobj.childNodes[0];if(!e.header)this._headobj.style.display="none";this._headlabel=this._contentobj.childNodes[0].childNodes[1];this._headbutton=this._contentobj.childNodes[0].childNodes[0];this._bodyobj=this._contentobj.childNodes[1];this._viewobj.className+=" webix_accordionitem";this._head_cell=this._body_cell=null;this._viewobj.className+=" "+(this.getParentView()._vertical_orientation?"vertical":"horizontal");this._cells=true},_remove:function(){this._body_cell={destructor:function(){}}},_replace:function(e){this._body_cell.destructor();this._body_cell=e;this._body_cell._parent_cell=this;this._bodyobj.appendChild(this._body_cell._viewobj);this.resize()},_id:"webix_ai_id",getChildViews:function(){return[this._body_cell]},body_setter:function(e){if(typeof e!="object")e={template:e};e._inner={top:true,left:true,right:true,bottom:true};this._body_cell=webix.ui._view(e);this._body_cell.$view.style.border="0px solid red";this._body_cell._parent_cell=this;this._bodyobj.appendChild(this._body_cell._viewobj);return e},header_setter:function(e){if(e)e=webix.template(e);return e},headerAlt_setter:function(e){if(e)e=webix.template(e);return e},$getSize:function(e,t){var n=this._body_cell.$getSize(0,0);var r=this._settings._inner;if(r){e+=(r.left?0:1)+(r.right?0:1);t+=(r.top?0:1)+(r.bottom?0:1)}var i=0;var s=webix.ui.baseview.prototype.$getSize.call(this,0,0);s[0]=(s[0]||n[0])+e;if(s[1]>=1e5)s[1]=n[1];s[1]+=e;s[2]=(s[2]||n[2])+t;if(s[3]>=1e5)s[3]=n[3];s[3]+=t;if(this.getParentView()._vertical_orientation){if(this._settings.collapsed){s[2]=s[3]=this._getHeaderSize()}else if(this._settings.header)i=this._settings.headerHeight}else{if(this._settings.collapsed)s[0]=s[1]=this._getHeaderSize();if(this._settings.header)i=this._settings.headerHeight}s[2]+=i;s[3]+=i;webix.debug_size_box(this,s,true);return s},on_click:{webix_accordionitem_header:function(e,t){this._toggle(e)},webix_accordionitem_header_v:function(e,t){this._toggle(e)}},_toggle:function(e){this.define("collapsed",!this._settings.collapsed);webix.callEvent("onClick",[this._settings.id]);return webix.html.preventEvent(e)},collapsed_setter:function(e){if(this._settings.header===false)return;var t=this.getParentView();if(!e)this._expand();else if(!t||t._canCollapse(this))this._collapse();else{if(t._cells.length>1)for(var n=0;n<t._cells.length;n++)if(this!=t._cells[n]){t._cells[n].expand();this._collapse()}}this._settings.collapsed=e;if(!e)this.getParentView()._afterOpen(this);this.refresh();if(!webix._ui_creation)this.resize();t.callEvent("onAfter"+(e?"Collapse":"Expand"),[this._settings.id]);this._settings.$noresize=e;return e},collapse:function(){this.define("collapsed",true);webix.UIManager._moveChildFocus(this)},expand:function(){this.define("collapsed",false)},_show:function(){this.show()},_hide:function(){this.hide()},_expand:function(){this._bodyobj.style.display="";webix.html.removeCss(this.$view,"collapsed");webix.html.removeCss(this._headobj,"collapsed")},_collapse:function(){var e=this.getParentView()._vertical_orientation;if(this._settings.headerAlt)this._headlabel.innerHTML=this._settings.headerAlt();this._bodyobj.style.display="none";webix.html.addCss(this.$view,"collapsed");webix.html.addCss(this._headobj,"collapsed")},refresh:function(){var e=this._settings[this._settings.collapsed?"headerAlt":"header"]||this._settings.header;if(e)this._headlabel.innerHTML=e()},_getHeaderSize:function(){return this._settings.collapsed?this._settings.headerAltHeight:this._settings.headerHeight},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){e=this._content_width;t=this._content_height;var n=this._getHeaderSize();if(this._settings.header){this._headobj.style.height=n+"px";this._headobj.style.width="auto";this._headobj.style[webix.env.transform]="";this._headobj.style.borderBottomWidth=(this._settings.collapsed?0:1)+"px";if(this.getParentView()._vertical_orientation||!this._settings.collapsed){t-=this._getHeaderSize()}else if(this._settings.collapsed){if(webix.animate.isSupported()){this._headobj.style.width=t+"px";this._headobj.style.height=e+3+"px";var r=Math.floor(t/2-e/2)+(e-this._settings.headerAltHeight)/2;this._headobj.style[webix.env.transform]="rotate(90deg) translate("+r+"px, "+(r+1)+"px)"}else{this._headobj.style.width=e+"px";this._headobj.style.height=t+3+"px";this._headlabel.innerHTML=""}}}if(!this._settings.collapsed){this._body_cell.$setSize(e,t);this._last_size_y=t}}else if(!this._settings.collapsed){var i=this._body_cell;if(this._last_size_y)i.$setSize(this._content_width,this._last_size_y)}},$skin:function(){var e=this.defaults;e.headerAltHeight=e.headerHeight=webix.skin.$active.barHeight;if(webix.skin.$active.borderlessAccordion)e.borderless=true},defaults:{header:false,headerAlt:false,body:""}},webix.MouseEvents,webix.EventSystem,webix.ui.view);webix.protoUI({name:"accordion",defaults:{panelClass:"accordionitem",multi:false,collapsed:false},_parse_cells:function(){var e=this._settings.panelClass;var t=this._collection;for(var n=0;n<t.length;n++){if((t[n].body||t[n].header)&&!t[n].view)t[n].view=e;if(webix.isUndefined(t[n].collapsed))t[n].collapsed=this._settings.collapsed}this._skin_render_collapse=true;webix.ui.layout.prototype._parse_cells.call(this);this._skin_render_collapse=false;for(var n=0;n<this._cells.length;n++){if(this._cells[n].name==e)this._cells[n].refresh();this._cells[n]._accLastChild=false}var r=false;for(var n=this._cells.length-1;n>=0&&!r;n--){if(!this._cells[n]._settings.hidden){this._cells[n]._accLastChild=true;r=true}}},_afterOpen:function(e){if(this._settings.multi===false&&this._skin_render_collapse!==true){for(var t=0;t<this._cells.length;t++){if(e!=this._cells[t]&&!this._cells[t]._settings.collapsed&&this._cells[t].collapse)this._cells[t].collapse()}}},_canCollapse:function(e){if(this._settings.multi===true||this._skin_render_collapse)return true;for(var t=0;t<this._cells.length;t++)if(e!=this._cells[t]&&!this._cells[t]._settings.collapsed)return true;return false},$skin:function(){var e=this.defaults;if(webix.skin.$active.accordionType)e.type=webix.skin.$active.accordionType}},webix.ui.layout);webix.protoUI({name:"headerlayout",defaults:{type:"accordion",multi:"mixed",collapsed:false}},webix.ui.accordion);webix.DragControl={_drag_masters:webix.toArray(["dummy"]),addDrop:function(e,t,n){e=webix.toNode(e);e.webix_drop=this._getCtrl(t);if(n)e.webix_master=true},_getCtrl:function(e){e=e||webix.DragControl;var t=this._drag_masters.find(e);if(t<0){t=this._drag_masters.length;this._drag_masters.push(e)}return t},addDrag:function(e,t){e=webix.toNode(e);e.webix_drag=this._getCtrl(t);webix.event(e,webix.env.mouse.down,this._preStart,e);webix.event(e,"dragstart",webix.html.preventEvent)},_preStart:function(e){if(webix.DragControl._active){if(webix.DragControl._saved_event==e)return;webix.DragControl._preStartFalse();webix.DragControl.destroyDrag()}webix.DragControl._active=this;var t=webix.env.mouse.context(e);webix.DragControl._start_pos=t;webix.DragControl._saved_event=e;webix.DragControl._webix_drag_mm=webix.event(document.body,webix.env.mouse.move,webix.DragControl._startDrag);webix.DragControl._webix_drag_mu=webix.event(document.body,webix.env.mouse.up,webix.DragControl._preStartFalse);webix.html.addCss(document.body,"webix_noselect")},_preStartFalse:function(e){webix.DragControl._clean_dom_after_drag()},_startDrag:function(e){var t=webix.env.mouse.context(e);if(Math.abs(t.x-webix.DragControl._start_pos.x)<5&&Math.abs(t.y-webix.DragControl._start_pos.y)<5)return;webix.DragControl._clean_dom_after_drag(true);if(!webix.DragControl.createDrag(webix.DragControl._saved_event))return;webix.DragControl.sendSignal("start");webix.DragControl._webix_drag_mm=webix.event(document.body,webix.env.mouse.move,webix.DragControl._moveDrag);webix.DragControl._webix_drag_mu=webix.event(document.body,webix.env.mouse.up,webix.DragControl._stopDrag);webix.DragControl._moveDrag(e);if(webix.env.touch)return webix.html.preventEvent(e)},_stopDrag:function(e){webix.DragControl._clean_dom_after_drag();webix.DragControl._saved_event=null;if(webix.DragControl._last){webix.DragControl.$drop(webix.DragControl._active,webix.DragControl._last,e);webix.DragControl.$dragOut(webix.DragControl._active,webix.DragControl._last,null,e)}webix.DragControl.destroyDrag();webix.DragControl.sendSignal("stop")},_clean_dom_after_drag:function(e){this._webix_drag_mm=webix.eventRemove(this._webix_drag_mm);this._webix_drag_mu=webix.eventRemove(this._webix_drag_mu);if(!e)webix.html.removeCss(document.body,"webix_noselect")},_moveDrag:function(e){var t=webix.html.pos(e);var n=webix.env.mouse.context(e);webix.DragControl.$dragPos(t,e);webix.DragControl._html.style.top=t.y+webix.DragControl.top+"px";webix.DragControl._html.style.left=t.x+webix.DragControl.left+"px";if(webix.DragControl._skip)webix.DragControl._skip=false;else{var r=n.target=webix.env.touch?document.elementFromPoint(n.x,n.y):n.target;var i=webix.env.touch?n:e;webix.DragControl._checkLand(r,i)}return webix.html.preventEvent(e)},_checkLand:function(e,t){while(e&&e.tagName!="BODY"){if(e.webix_drop){if(this._last&&(this._last!=e||e.webix_master))this.$dragOut(this._active,this._last,e,t);if(!this._last||this._last!=e||e.webix_master){this._last=null;this._landing=this.$dragIn(webix.DragControl._active,e,t);if(this._landing)this._last=e;return}return}e=e.parentNode}if(this._last)this._last=this._landing=this.$dragOut(this._active,this._last,null,t)},sendSignal:function(e){webix.DragControl.active=e=="start"},getMaster:function(e){return this._drag_masters[e.webix_drag||e.webix_drop]},getContext:function(){return this._drag_context},getNode:function(){return this._html},createDrag:function(e){var t=webix.DragControl._active;webix.DragControl._drag_context={};var n=this._drag_masters[t.webix_drag];var r;if(n.$dragCreate){r=n.$dragCreate(t,e);if(!r)return false;r.style.position="absolute"}else{var i=webix.DragControl.$drag(t,e);if(!i)return false;r=document.createElement("DIV");r.innerHTML=i;r.className="webix_drag_zone";document.body.appendChild(r)}r.style.zIndex=Math.max(r.style.zIndex,webix.ui.zIndex());webix.DragControl._skipDropH=webix.event(r,webix.env.mouse.move,webix.DragControl._skip_mark);if(!webix.DragControl._drag_context.from)webix.DragControl._drag_context={source:t,from:t};webix.DragControl._html=r;return true},_skip_mark:function(){webix.DragControl._skip=true},destroyDrag:function(){var e=webix.DragControl._active;var t=this._drag_masters[e.webix_drag];if(t&&t.$dragDestroy){webix.DragControl._skipDropH=webix.eventRemove(webix.DragControl._skipDropH);if(webix.DragControl._html)t.$dragDestroy(e,webix.DragControl._html)}else{webix.html.remove(webix.DragControl._html)}webix.DragControl._landing=webix.DragControl._active=webix.DragControl._last=webix.DragControl._html=null},top:5,left:5,$dragPos:function(e,t){var n=this._drag_masters[webix.DragControl._active.webix_drag];if(n.$dragPos&&n!=this)n.$dragPos(e,t,webix.DragControl._html)},$dragIn:function(e,t,n){var r=this._drag_masters[t.webix_drop];if(r.$dragIn&&r!=this)return r.$dragIn(e,t,n);t.className=t.className+" webix_drop_zone";return t},$dragOut:function(e,t,n,r){var i=this._drag_masters[t.webix_drop];if(i.$dragOut&&i!=this)return i.$dragOut(e,t,n,r);t.className=t.className.replace("webix_drop_zone","");return null},$drop:function(e,t,n){var r=this._drag_masters[t.webix_drop];webix.DragControl._drag_context.from=webix.DragControl.getMaster(e);if(r.$drop&&r!=this)return r.$drop(e,t,n);t.appendChild(e)},$drag:function(e,t){var n=this._drag_masters[e.webix_drag];if(n.$drag&&n!=this)return n.$drag(e,t);return"<div style='"+e.style.cssText+"'>"+e.innerHTML+"</div>"}};webix.DataMove={copy:function(e,t,n,r){r=r||{};var i=r.newId||e;n=n||this;var s=this.getItem(e);webix.assert(s,"Incorrect ID in DataMove::copy");if(n)s=n._externalData(s);return n.data.add(n._externalData(s,i),t)},_next_move_index:function(e,t,n){if(t&&e){var r=this.getIndexById(e);return r+(n==this&&n.getIndexById(t)<r?0:1)}},move:function(e,t,n,r){r=r||{};var i=r.newId||e;n=n||this;webix.assert(n.data,"moving attempt to component without datastore");if(!n.data)return;if(webix.isArray(e)){if(e.length>3)this.$blockRender=n.$blockRender=true;for(var s=0;s<e.length;s++){var o=this.move(e[s],t,n,r);t=n._next_move_index(o,e[s+1],this)}this.$blockRender=n.$blockRender=false;if(e.length>3){this.refresh();if(n!=this)n.refresh()}return}var o=e;var u=this.getItem(e);webix.assert(u,"Incorrect ID in DataMove::move");if(!n||n==this){if(t<0)t=this.data.order.length-1;this.data.move(this.getIndexById(e),t);this.data.callEvent("onDataMove",[e,t])}else{o=n.data.add(n._externalData(u,i),t,r.parent||0);this.data.remove(e)}return o},moveUp:function(e,t){return this.move(e,this.getIndexById(e)-(t||1))},moveDown:function(e,t){return this.moveUp(e,(t||1)*-1)},moveTop:function(e){return this.move(e,0)},moveBottom:function(e){return this.move(e,this.data.count()-1)},_externalData:function(e,t){var n=webix.extend({},e);n.id=!t||this.data.pull[t]?webix.uid():t;n.$template=null;if(this._settings.externalData)n=this._settings.externalData.call(this,n,t);return n}};webix.Movable={move_setter:function(e){if(e){this._move_admin=webix.clone(this._move_admin);this._move_admin.master=this;webix.DragControl.addDrag(this._headobj,this._move_admin)}return e},_move_admin:{$dragCreate:function(e,t){var n=webix.html.offset(e);var r=webix.html.pos(t);webix.DragControl.top=n.y-r.y;webix.DragControl.left=n.x-r.x;return webix.toNode(this.master._viewobj)},$dragDestroy:function(e,t){var n=this.master;if(n._settings){n._settings.top=parseInt(t.style.top,10);n._settings.left=parseInt(t.style.left,10)}webix.DragControl.top=webix.DragControl.left=5;return}}};webix.Modality={_modal_set:function(e){if(e){if(!this._modal_cover){this._modal_cover=webix.html.create("div",{"class":"webix_modal"});var t=this._settings.zIndex||webix.ui.zIndex();this._previous_modality=webix._modality;webix._modality=t;this._modal_cover.style.zIndex=t-1;this._viewobj.style.zIndex=t;document.body.appendChild(this._modal_cover)}}else{if(this._modal_cover){webix.html.remove(this._modal_cover);var n=this._previous_modality;setTimeout(function(){webix._modality=n},1);this._modal_cover=null}}return e}};webix.protoUI({name:"window",$init:function(e){this._viewobj.innerHTML="<div class='webix_win_content'><div class='webix_win_head'></div><div class='webix_win_body'></div></div>";this._contentobj=this._viewobj.firstChild;this._headobj=this._contentobj.childNodes[0];this._dataobj=this._bodyobj=this._contentobj.childNodes[1];this._viewobj.className+=" webix_window";this._head_cell=this._body_cell=null;this._settings._inner={top:false,left:false,right:false,bottom:false};if(!e.id)e.id=webix.uid()},getChildViews:function(){if(this._head_cell)return[this._head_cell,this._body_cell];else return[this._body_cell]},zIndex_setter:function(e){this._viewobj.style.zIndex=e;return e},_remove:function(){this._body_cell={destructor:function(){}}},_replace:function(e){this._body_cell.destructor();this._body_cell=e;this._body_cell._parent_cell=this;this._bodyobj.appendChild(this._body_cell._viewobj);var t=this._body_cell._viewobj.style;t.borderTopWidth=t.borderBottomWidth=t.borderLeftWidth=t.borderRightWidth="1px";this._body_cell._settings._inner=webix.clone(this._settings._inner);this.resize(true)},show:function(e,t,n){this._settings.hidden=false;this._viewobj.style.zIndex=this._settings.zIndex||webix.ui.zIndex();if(this._settings.modal)this._modal_set(true);var r,i,s;t=t||{};if(!t.pos)t.pos=this._settings.relative;if(e){if(typeof e=="object"&&!e.tagName){if(e.target||e.srcElement){r=webix.html.pos(e);i=20;s=5}else r=e}else{e=webix.toNode(e);webix.assert(e,"Not existing target for window:show");r=webix.html.offset(e)}var o=Math.max(window.innerWidth||0,document.body.offsetWidth);var u=Math.max(window.innerHeight||0,document.body.offsetHeight);i=i||e.offsetWidth||0;s=s||e.offsetHeight||0;var a=this._last_size;var f=r.x;var l=r.y;var c=0;var h=0;if(this._settings.autofit){var p=6;var d=6;var v=6;n="top";l=0;f=0;if(o-r.x-i<a[0]&&t.pos=="right")t.pos="left";if(t.pos=="right"){f=r.x+p+i;d=-s;n="left";c=Math.round(r.y+s/2);h=f-v}else if(t.pos=="left"){f=r.x-p-a[0]-1;d=-s;n="right";c=Math.round(r.y+s/2);h=f+a[0]+1}else{if(r.x<0){f=0}else if(o-r.x>a[0]){f=r.x}else{f=o-p-a[0]}h=Math.round(r.x+i/2);if(h>f+a[0])h=f+a[0]/2}if((!a[1]||u-s-r.y-d>a[1])&&t.pos!="top"){l=s+r.y+d-4;if(!c){n="top";c=l-v}}else{l=r.y-d-a[1];if(l<0){l=0;if(n=="top")n=false}else if(!c){n="bottom";l--;c=l+a[1]+1}}}var m=t.x||0;var g=t.y||0;this.setPosition(f+m,l+g);if(this._set_point){if(n)this._set_point(n,h+m,c+g);else this._hide_point()}}else if(this._settings.position)this._setPosition();this._show_time=new Date;this._viewobj.style.display="block";this._render_hidden_views();if(this.config.autofocus){this._prev_focus=webix.UIManager.getFocus();webix.UIManager.setFocus(this)}if(-1==webix.ui._popups.find(this))webix.ui._popups.push(this);this.callEvent("onShow",[])},_hide:function(){if(this._settings.hidden||this._settings.modal)return;if(webix._modality&&this._settings.zIndex<=webix._modality)return;if(new Date-(this._show_time||0)>(webix.env.touch?400:100))this.hide()},hidden_setter:function(e){if(e)this.hide();else this.show();return!!e},hide:function(e){if(!e)if(this._settings.hidden)return;if(this._settings.modal)this._modal_set(false);if(this._settings.position=="top"){webix.animate(this._viewobj,{type:"slide",x:0,y:-(this._content_height+20),duration:300,callback:this._hide_callback,master:this})}else this._hide_callback();if(this._settings.autofocus){webix.UIManager.setFocus(this._prev_focus);this._prev_focus=null}webix.ui._popups.remove(this)},destructor:function(){if(this._settings.autofocus){if(!webix._final_destruction)webix.UIManager.setFocus(this._prev_focus);this._prev_focus=null}webix.ui._popups.remove(this);webix.Destruction.destructor.apply(this,[])},_hide_callback:function(){if(!this.$destructed){this._viewobj.style.display="none";this._settings.hidden=true;this.callEvent("onHide",[])}},close:function(){this._modal_set(false);webix.html.remove(this._viewobj);this.destructor()},_inner_body_set:function(e){e.borderless=true},body_setter:function(e){if(typeof e!="object")e={template:e};this._inner_body_set(e);webix._parent_cell=this;this._body_cell=webix.ui._view(e);this._body_cell._parent_cell=this;this._bodyobj.appendChild(this._body_cell._viewobj);return e},head_setter:function(e){if(e===false)return e;if(typeof e!="object")e={template:e,padding:0};e.borderless=true;webix._parent_cell=this;this._head_cell=webix.ui._view(e);this._head_cell._parent_cell=this;this._headobj.appendChild(this._head_cell._viewobj);return e},getBody:function(){return this._body_cell},getHead:function(){return this._head_cell},adjust:function(){return this.resize()},resizeChildren:function(){if(this._body_cell)this.resize()},resize:function(){webix.ui.baseview.prototype.adjust.call(this);this._setPosition(this._settings.left,this._settings.top)},_setPosition:function(e,t){if(this._settings.position){this.$view.style.position="fixed";var n=this._content_width;var r=this._content_height;webix.assert(n&&r,"Attempt to show not rendered window");var i=window.innerWidth||document.documentElement.offsetWidth;var s=window.innerHeight||document.documentElement.offsetHeight;var o=Math.round((i-n)/2);var u=Math.round((s-r)/2);if(typeof this._settings.position=="function"){var a={left:o,top:u,width:n,height:r,maxWidth:i,maxHeight:s};this._settings.position.call(this,a);if(a.width!=n||a.height!=r)this.$setSize(a.width,a.height);this.setPosition(a.left,a.top)}else{if(this._settings.position=="top"){if(webix.animate.isSupported())u=-1*r;else u=10}this.setPosition(o,u)}if(this._settings.position=="top")webix.animate(this._viewobj,{type:"slide",x:0,y:r-(this._settings.padding||0)*2,duration:300,callback:this._topPositionCallback,master:this})}else this.setPosition(e,t)},_topPositionCallback:function(e){webix.animate.clear(e);this._settings.top=-((this._settings.padding||0)*2);this.setPosition(this._settings.left,this._settings.top)},setPosition:function(e,t){this._viewobj.style.top=t+"px";this._viewobj.style.left=e+"px";this._settings.left=e;this._settings.top=t},$getSize:function(e,t){var n=this._settings._inner;if(n){e+=(n.left?0:1)+(n.right?0:1);t+=(n.top?0:1)+(n.bottom?0:1)}if(this._settings.head)t+=1;var r=this._body_cell.$getSize(0,0);if(this._head_cell){var i=this._head_cell.$getSize(0,0);if(i[3]==i[2])this._settings.headHeight=i[3];t+=this._settings.headHeight}if(this._settings.fullscreen){var s=window.innerWidth||document.body.clientWidth;var o=window.innerHeight||document.body.clientHeight;return[s,s,o,o]}var u=webix.ui.view.prototype.$getSize.call(this,0,0);u[1]=Math.min(u[1],(r[1]>=1e5&&u[1]>=1e5?Math.max(r[0],300):r[1])+e);u[3]=Math.min(u[3],(r[3]>=1e5&&u[3]>=1e5?Math.max(r[2],200):r[3])+t);u[0]=Math.min(Math.max(u[0],r[0]+e),u[1]);u[2]=Math.min(Math.max(u[2],r[2]+t),u[3]);return u},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t);e=this._content_width;t=this._content_height;if(this._settings.head===false){this._headobj.style.display="none";this._body_cell.$setSize(e,t)}else{this._head_cell.$setSize(e,this._settings.headHeight);this._body_cell.$setSize(e,t-this._settings.headHeight)}},$skin:function(){this.defaults.headHeight=webix.skin.$active.barHeight},defaults:{top:0,left:0,autofit:true,relative:"bottom",body:"",head:"",hidden:true,autofocus:true}},webix.ui.view,webix.Movable,webix.Modality,webix.EventSystem);webix.protoUI({name:"popup",$init:function(){this._settings.head=false;this.$view.className+=" webix_popup";webix.event(this._contentobj,"click",webix.bind(this._clever_block,this));webix.attachEvent("onClick",webix.bind(this._hide,this));this.attachEvent("onHide",this._hide_point)},_clever_block:function(){var e=webix.ui._popups;var t=e.find(this);if(t==-1)t=e.length-1;for(var n=t;n>=0;n--)e[n]._show_time=new Date},close:function(){webix.html.remove(this._point_element);webix.ui.window.prototype.close.call(this)},$getSize:function(e,t){return webix.ui.window.prototype.$getSize.call(this,e+this._settings.padding*2,t+this._settings.padding*2)},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){e=this._content_width-this._settings.padding*2;t=this._content_height-this._settings.padding*2;this._contentobj.style.padding=this._settings.padding+"px";this._headobj.style.display="none";this._body_cell.$setSize(e,t)}},_inner_body_set:function(){},defaults:{padding:8},head_setter:function(){},_set_point:function(e,t,n){this._hide_point();document.body.appendChild(this._point_element=webix.html.create("DIV",{"class":"webix_point_"+e},""));this._point_element.style.zIndex=webix.ui.zIndex();this._point_element.style.top=n+"px";this._point_element.style.left=t+"px"},_hide_point:function(){this._point_element=webix.html.remove(this._point_element)}},webix.ui.window);webix.ui._popups=webix.toArray();webix.protoUI({name:"suggest",defaults:{autofocus:false,type:"list",keyPressTimeout:1,body:{yCount:10,autoheight:true,body:true,select:true,borderless:true},filter:function(e,t){if(e.value.toString().toLowerCase().indexOf(t.toLowerCase())===0)return true;return false}},template_setter:webix.template,filter_setter:function(e){return webix.toFunctor(e,this.$scope)},$init:function(e){var t={};webix.extend(t,this.defaults.body);t.view=e.type||this.defaults.type;if(e.body)webix.extend(t,e.body,true);if(e.data)t.data=e.data;if(e.url)t.url=e.url;if(e.datatype)t.datatype=e.datatype;if(e.id)t.id=t.id||e.id+"_"+t.view;e.body=t;this.$ready.push(this._set_on_popup_click)},_preselectMasterOption:function(e){var t,n,r;if(this._settings.master){t=webix.$$(this._settings.master);if(t.options_setter&&(n=t.getInputNode())){r=this.getItemText(e.id);if(webix.isUndefined(n.value))n.innerHTML=r;else n.value=r.replace(/<[^>]*>/g,"")}}},setMasterValue:function(e,t){if(this._settings.master){var n=webix.$$(this._settings.master);if(t&&e.id)n.refresh();else if(n.options_setter)n.setValue(e.id);else n.setValue(e.text||e.value)}else if(this._last_input_target){this._last_input_target.value=e.text||e.value}if(!t){this.hide(true);if(this._last_input_target)this._last_input_target.focus()}this.callEvent("onValueSuggest",[e])},getMasterValue:function(){if(this._settings.master)return webix.$$(this._settings.master).getValue();return null},getItemText:function(e){var t=this.getList().getItem(e);if(!t)return e;if(this._settings.template)return this._settings.template.call(this,t,this.type);if(this._settings.textValue)return t[this._settings.textValue];var n=this.getList().type;return n.template.call(n,t,n)},getSuggestion:function(){var e=this.getList();var t;if(e.getSelectedId)t=e.getSelectedId();if(!t&&e.data.order.length)t=e.data.order[0];return t},getList:function(){return this._body_cell},_set_on_popup_click:function(){var e=this.getList();var t=this._settings.type;if(e.count){e.attachEvent("onItemClick",webix.bind(function(t){this.setMasterValue(e.getItem(t))},this));e.data.attachEvent("onstoreupdated",webix.bind(function(e,t,n){if(n=="delete"&&e==this.getMasterValue())this.setMasterValue({id:"",text:""},1);else if(n=="update"&&e==this.getMasterValue()){this.setMasterValue(t,1)}},this));e.data.attachEvent("onAfterFilter",webix.bind(this._suggest_after_filter,this));e.data.attachEvent("onStoreLoad",webix.bind(this._suggest_after_filter,this));if(webix.isUndefined(this._settings.fitMaster))this._settings.fitMaster=true}else if(t=="calendar"){e.attachEvent("onDateSelect",function(e){this.getParentView().setMasterValue({value:e})})}else if(t=="colorboard"){e.attachEvent("onSelect",function(e){this.getParentView().setMasterValue({value:e})})}},input_setter:function(e){this.linkInput(e);return 0},linkInput:function(e){var t;if(e.getInputNode){t=e.getInputNode();t.webix_master_id=e._settings.id}else t=webix.toNode(e);webix.event(t,"keydown",function(e){if(t!=document.body||this.isVisible())this._suggestions(e)},this);this._non_ui_mode=true},_suggestions:function(e){e=e||event;var t=this.getList();var n=e.target||e.srcElement;this._last_input_target=n;this._settings.master=n.webix_master_id;window.clearTimeout(this._key_timer);var r=e.keyCode;if(r==16||r==17)return;if(r==9)return this._tab_key(this,t);if(r==27)return this._escape_key(this,t);if(r==13)return this._enter_key(this,t);if(this._navigate(e)){webix.html.preventEvent(e);return false}if(webix.isUndefined(n.value))return;clearTimeout(this._last_delay);this._last_delay=webix.delay(function(){if(!this._non_ui_mode&&webix.UIManager.getFocus()!=webix.$$(this._settings.master))return;this._resolve_popup=true;var e=n.value;if(t.config.dataFeed)t.filter("value",e);else if(t.filter){t.filter(webix.bind(function(t){return this._settings.filter.call(this,t,e)},this))}},this,[],this._settings.keyPressTimeout)},_suggest_after_filter:function(){if(!this._resolve_popup)return true;this._resolve_popup=false;var e=this.getList();if(e.count()>0){this.adjust();this._dont_unfilter=true;this.show(this._last_input_target,null,true)}else{this.hide(true);this._last_input_target=null}},show:function(e){if(!this.isVisible()){var t=this.getList();if(t.filter&&!this._dont_unfilter){t.filter("");if(t.select)this._show_selection(t)}else this._dont_unfilter=false;if(e.tagName&&this._settings.fitMaster){this._settings.width=e.offsetWidth-2}if(t._zoom_level)t.render();this.adjust()}webix.ui.popup.prototype.show.apply(this,arguments)},_show_selection:function(e){var t=this.getMasterValue();if(t&&e.exists&&e.exists(t))e.select(t)},_enter_key:function(e,t){if(t.count&&t.count()){if(e.isVisible()){var n=t.getSelectedId(false,true);if(n)this.setMasterValue(t.getItem(n));e.hide(true)}else{e.show(this._last_input_target)}}else{if(e.isVisible())e.hide(true)}},_escape_key:function(e,t){return e.hide(true)},_tab_key:function(e,t){return e.hide(true)},_navigate:function(e){var t=this.getList();var n=e.keyCode;if(t.count&&t.moveSelection){if(n===38&&!e.ctrlKey&&!e.shiftKey&&!e.altKey){t.moveSelection("up");this._preselectMasterOption(t.getSelectedItem());return true}if(n===40&&!e.ctrlKey&&!e.shiftKey&&!e.altKey){var r=this.isVisible();if(!r){if(t.count())this.show(this._last_input_target);else return false}var i=t.getSelectedId();if(!i&&t.count)t.select(t.getFirstId());else if(r)t.moveSelection("down");this._preselectMasterOption(t.getSelectedItem());return true}}return false}},webix.ui.popup);webix.attachEvent("onClick",function(e){var t=webix.$$(e);if(t&&t.touchable){t.getNode(e);var n=e.target||e.srcElement;if(n.className=="webix_disabled")return;var r="";var i=null;var s=false;if(n.className&&n.className.indexOf("webix_view")===0)return;while(n&&n.parentNode){if(n.getAttribute){if(n.getAttribute("view_id"))break;r=n.className;if(r){r=r.split(" ");r=r[0]||r[1];if(t.on_click[r]){var o=t.on_click[r].call(t,e,t._settings.id,n);if(o===false)return}}}n=n.parentNode}if(t._settings.click){var u=webix.toFunctor(t._settings.click,t.$scope);if(u&&u.call)u.call(t,t._settings.id,e)}if(t._settings.popup){var a=webix.$$(t._settings.popup);webix.assert(a,"Unknown popup");a._settings.master=t._settings.id;a.show(t.getInputNode()||t.getNode(),null,true)}t.callEvent("onItemClick",[t._settings.id,e])}});webix.protoUI({name:"button",touchable:true,$skin:function(){this.defaults.height=webix.skin.$active.buttonHeight||webix.skin.$active.inputHeight;this._labelTopHeight=webix.skin.$active.labelTopHeight||15},defaults:{template:function(e,t){return"<div class='webix_el_box' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+t._inputTemplate(e,t)+"</div>"},label:"",tabFocus:true,borderless:true},_inputTemplate:function(e){var t="class='webixtype_"+(e.type||"base")+"' ";return"<input type='button' "+t+' value="'+(e.label||e.value)+'">'},$init:function(e){this._viewobj.className+=" webix_control webix_el_"+(this.$cssName||this.name);this.data=this._settings;this._dataobj=this._viewobj},hotkey_setter:function(e){var t=this;this._addElementHotKey(e,function(e,n){var r=t.$view.firstChild;if(r.dispatchEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",true,true);n.preventDefault();r.dispatchEvent(i)}})},_addElementHotKey:function(e,t,n){var r=webix.UIManager.addHotKey(e,t,n);this.attachEvent("onDestruct",function(){webix.UIManager.removeHotKey(r,t,n)})},tooltip_setter:function(e){if(this.$view.firstChild)this.$view.firstChild.title=e;return e},type_setter:function(e){if(this._types[e])this._inputTemplate=webix.template(this._types[e]);if(e=="prev"||e=="next")this._set_inner_size=this._set_inner_size_next;else this._set_inner_size=false;return e},_types:{htmlbutton:"<button class='webix_el_htmlbutton webixtype_base'>#label#</buttom>",prev:"<input type='button' class='webixtype_prev' value='#label#' /><div class='webix_el_arrow webixtype_prev_arrow'></div>",next:"<input type='button' class='webixtype_next' value='#label#' /><div class='webix_el_arrow webixtype_next_arrow'></div>",imageButton:"<button class='webix_img_btn_abs webixtype_base' style='width:100%; line-height:#cheight#px'><div class='webix_image' style='width:#dheight#px;height:#dheight#px;background-image:url(#image#);'> </div> #label#</button>",imageButtonTop:"<button class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base'><div class='webix_image' style='width:100%;height:100%;background-image:url(#image#);'> </div> <div class='webix_img_btn_text'>#label#</div></button>",image:"<button class='webix_img_btn' style='line-height:#cheight#px;'><div class='webix_image' style='width:#cheight#px;height:#cheight#px;background-image:url(#image#);'> </div> #label#</button>",imageTop:"<button class='webix_img_btn_top' style='background-image:url(#image#);'><div class='webix_img_btn_text'>#label#</div></button>",icon:"<button class='webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;'></span>#label#</button>",iconButton:"<button class='webix_img_btn_abs webixtype_base' style='width:100%;'><span class='webix_icon fa-#icon#'></span> #label#</button>",iconTop:"<button class='webix_img_btn_top' style='width:100%;top:4px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>",iconButtonTop:"<button class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base' style='width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</button></div>"},_findAllInputs:function(){var e=[];var t=["input","select","textarea"];for(var n=0;n<t.length;n++){var r=this.$view.getElementsByTagName(t[n]);for(var i=0;i<r.length;i++){e.push(r[i])}}return e},disable:function(){var e,t=this._getBox();webix.ui.baseview.prototype.disable.apply(this,arguments);if(t&&t.className.indexOf(" webix_disabled_box")==-1){t.className+=" webix_disabled_box";var n=this._findAllInputs();for(e=0;e<n.length;e++)n[e].setAttribute("disabled",true)}if(this._settings.labelPosition=="top"){var r=this._dataobj.firstChild;if(r)r.className+=" webix_disabled_top_label"}},enable:function(){webix.ui.baseview.prototype.enable.apply(this,arguments);var e=this._getBox();if(e){e.className=e.className.replace(" webix_disabled_box","");var t=this._findAllInputs();for(var n=0;n<t.length;n++)t[n].removeAttribute("disabled")}if(this._settings.labelPosition=="top"){var r=this._dataobj.firstChild;if(r)r.className=r.className.replace(" webix_disabled_top_label","")}},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){this.render()}},setValue:function(e){var t=this._settings.value;if(t==e)return false;this._settings.value=e;if(this._rendered_input)this.$setValue(e);this.callEvent("onChange",[e,t])},$setValue:function(e){(this.getInputNode()||{}).value=e},getValue:function(){var e=this._rendered_input?this.$getValue():this._settings.value;return typeof e=="undefined"?"":e},$getValue:function(){return this._settings.value||""},focus:function(){var e=this.getInputNode();if(e&&e.focus)e.focus()},blur:function(){var e=this.getInputNode();if(e&&e.blur)e.blur()},getInputNode:function(){return this._dataobj.getElementsByTagName("input")[0]},_getBox:function(){for(var e=0;e<this._dataobj.childNodes.length;e++){if(this._dataobj.childNodes[e].className.indexOf("webix_el_box")>=0)return this._dataobj.childNodes[e]}return null},_sqrt_2:Math.sqrt(2),_set_inner_size_next:function(){var e=this._getBox().childNodes[1];var t=e.previousSibling;var n=this._settings.type=="next"?"right":"left";var r=this._settings.aheight-webix.skin.$active.inputPadding*2-2;var i=r*this._sqrt_2/2;e.style.width=i+"px";e.style.height=i+"px";e.style.top=(r-i)/2+webix.skin.$active.inputPadding+"px";e.style[n]=(r-i)/2+this._sqrt_2/2+"px";t.style.width=this._settings.awidth-r/2-2+"px";t.style.height=r+2+"px";t.style[n]=r/2+2+"px";t.style.top=webix.skin.$active.inputPadding+"px"},_calck_input_size:function(){this._input_width=this._settings.inputWidth||(this._content_width-this._settings.width>2?this._settings.width:0)||this._content_width;this._input_height=this._settings.inputHeight},render:function(){this._calck_input_size();this._settings.awidth=this._input_width||this._content_width;this._settings.aheight=this._input_height||this._content_height;this._settings.bheight=this._settings.aheight+2;this._settings.cheight=this._settings.aheight-2*webix.skin.$active.inputPadding;this._settings.dheight=this._settings.cheight-2;if(webix.AtomRender.render.call(this)){this._rendered_input=true;if(this._set_inner_size)this._set_inner_size();if(this._settings.align){var e=this._dataobj.firstChild;if(this._settings.labelPosition=="top"&&e.nextSibling)e=e.nextSibling;switch(this._settings.align){case"right":e.style.cssFloat="right";break;case"center":e.style.display="inline-block";e.parentNode.style.textAlign="center";break;case"middle":e.style.marginTop=Math.round((this._content_height-this._input_height)/2)+"px";break;case"bottom":e.style.marginTop=this._content_height-this._input_height+"px";break;case"left":e.style.cssFloat="left";break;default:webix.assert(false,"Unknown align mode: "+this._settings.align);break}}if(this.$render)this.$render(this.data);if(this._settings.disabled)this.disable();if(this._settings.tooltip)this.define("tooltip",this._settings.tooltip);if(this._init_once){this._init_once(this.data);this._init_once=0}}},refresh:function(){this.render()},on_click:{_handle_tab_click:function(e,t){var n=webix.html.locate(e,"button_id");if(n&&this.callEvent("onBeforeTabClick",[n,e])){this.setValue(n);this.callEvent("onAfterTabClick",[n,e])}},webix_all_segments:function(e,t){this.on_click._handle_tab_click.call(this,e,t)},webix_all_tabs:function(e,t){this.on_click._handle_tab_click.call(this,e,t)},webix_inp_counter_next:function(e,t,n){this.next()},webix_inp_counter_prev:function(e,t,n){this.prev()},webix_inp_combo:function(e,t,n){n.focus()},webix_inp_checkbox_border:function(e,t,n){if((e.target||e.srcElement).tagName!="DIV"&&!this._settings.readonly)this.toggle()},webix_inp_checkbox_label:function(e,t,n){if(!this._settings.readonly)this.toggle()},webix_inp_radio_border:function(e,t,n){var r=webix.html.locate(e,"radio_id");this.setValue(r)},webix_inp_radio_label:function(e,t,n){n=n.parentNode.getElementsByTagName("input")[0];return this.on_click.webix_inp_radio_border.call(this,n,t,n)},webix_tab_more_icon:function(e,t,n){this.getPopup().resize();this.getPopup().show(n,null,true)}},_check_options:function(e){webix.assert(e,this.name+": options not defined");for(var t=0;t<e.length;t++){webix.assert(!e[t].text,"Please replace .text with .value in control config");webix.assert(!e[t].label,"Please replace .label with .value in control config");if(typeof e[t]=="string"){e[t]={id:e[t],value:e[t]}}else{if(webix.isUndefined(e[t].id))e[t].id=e[t].value;if(webix.isUndefined(e[t].value))e[t].value=e[t].id}}return e}},webix.ui.view,webix.AtomRender,webix.Settings,webix.EventSystem);webix.protoUI({name:"label",defaults:{template:"<div style='height:100%;line-height:#cheight#px'>#label#</div>"},$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},focus:function(){return false},_getBox:function(){return this._dataobj.firstChild},setHTML:function(e){this._settings.template=function(){return e};this.refresh()},setValue:function(e){this._settings.label=e;webix.ui.button.prototype.setValue.apply(this,arguments)},$setValue:function(e){this._dataobj.firstChild.innerHTML=e},_set_inner_size:function(){}},webix.ui.button);webix.protoUI({name:"icon",$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},defaults:{template:"<button style='height:100%;width:100%' class='webix_icon_button'><span class='webix_icon fa-#icon# '></span></button>",width:33},_set_inner_size:function(){}},webix.ui.button);webix.protoUI({name:"text",_allowsClear:true,_init_onchange:function(){if(this._allowsClear){webix.event(this.getInputNode(),"change",function(){var e=this.getValue();if(e!=this._settings.value)this.setValue(this.getValue(),true)},this);if(this._settings.suggest)webix.$$(this._settings.suggest).linkInput(this)}},$skin:function(){this.defaults.height=webix.skin.$active.inputHeight;this.defaults.inputPadding=webix.skin.$active.inputPadding},$init:function(e){if(e.labelPosition=="top")if(webix.isUndefined(e.height))e.height=this.defaults.height+this._labelTopHeight;this._destroy_with_me=[];this._setSubmitEvent();this.attachEvent("onAfterRender",this._init_onchange)},$renderIcon:function(){var e=this._settings;if(e.icon){var t=e.aheight-2*e.inputPadding,n=(t-18)/2-1;return"<span style='height:"+(t-n)+"px;padding-top:"+n+"px;' class='webix_input_icon fa-"+e.icon+"'></span>"}return""},_setSubmitEvent:function(e){if(!this._skipSubmit){var t=this.getFormView();if(t){this._addElementHotKey("enter",function(e,n){t.callEvent("onSubmit",[e,n])},this)}}},relatedView_setter:function(e){this.attachEvent("onChange",function(){var e=this.getValue();var t=this._settings.relatedAction;var n=this._settings.relatedView;var r=webix.$$(n);if(!r){var i=this.getTopParentView();if(i&&i.$$)r=i.$$(n)}webix.assert(r,"Invalid relatedView: "+n);if(t=="enable")if(e)r.enable();else r.disable();else if(e)r.show();else r.hide()});return e},validateEvent_setter:function(e){if(e=="blur")this.attachEvent("onBlur",this.validate);if(e=="key")this.attachEvent("onTimedKeyPress",this.validate);return e},validate:function(){var e=this._settings.validate;if(!e&&this._settings.required)e=webix.rules.isNotEmpty;var t=this.getFormView();var n=this.config.name;var r=this.getValue();var i={};i[n]=r;webix.assert(t,"Validation works only for fields in the form");webix.assert(n,"Validation works only for fields with name");if(e&&!this.getFormView()._validate(e,r,i,n))return false;return true},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){if(!e||!t)return;var n=this._settings;if(n.labelPosition=="top"){n.inputHeight=this._content_height-this._labelTopHeight;n.labelWidth=0}this.render()}},_get_input_width:function(e){var t=(this._input_width||0)-(e.label?this._settings.labelWidth:0)-webix.skin.$active.inputPadding*2-(e.iconWidth||0);return t<0?0:t},_render_div_block:function(e,t){var n=e.id||webix.uid();var r=t._get_input_width(e);var i=e.inputAlign||"left";var s=this.$renderIcon?this.$renderIcon(e):"";var o=this._settings.aheight-2*webix.skin.$active.inputPadding-2;var u=e.text||e.value||(e.placeholder?"<span class='webix_placeholder'>"+e.placeholder+"</span>":"");var a="<div class='webix_inp_static' tabindex='0' onclick='' style='line-height:"+o+"px;width: "+r+"px; text-align: "+i+";' >"+u+"</div>";return t.$renderInput(e,a,n)},_baseInputHTML:function(e){var t="<"+e+(this._settings.placeholder?" placeholder='"+this._settings.placeholder+"' ":" ");if(this._settings.readonly)t+="readonly='true' ";var n=this._settings.attributes;if(n)for(var r in n)t+=r+"='"+n[r]+"' ";return t},$renderInput:function(e,t,n){var r=e.inputAlign||"left";var i=e.labelAlign||"left";var s=this._settings.labelPosition=="top";var o=s?"display:block;":"width: "+this._settings.labelWidth+"px;";n=n||e.name||webix.uid();var u="";var a=s?this._labelTopHeight-2:this._settings.aheight-2*this._settings.inputPadding;if(e.label)u="<label style='"+o+"text-align: "+i+";line-height:"+a+"px' onclick='' for='"+n+"' class='webix_inp_"+(s?"top_":"")+"label "+(e.required?"webix_required":"")+"'>"+(e.label||"")+"</label>";var f="";if(t){f+=t}else{var l=this._get_input_width(e);f+=this._baseInputHTML("input")+"id='"+n+"' type='"+(e.type||this.name)+"' value='"+(e.value||"")+"' style='width: "+l+"px; text-align: "+r+";'";var c=this._settings.attributes;if(c)for(var h in c)f+=" "+h+"='"+c[h]+"'";f+=" />"}var p=this.$renderIcon?this.$renderIcon(e):"";f+=p;f+="</div>";if(s)return u+"<div class='webix_el_box' style='width:"+this._settings.awidth+"px; height:"+this._settings.aheight+"px'>"+f+"</div>";else return"<div class='webix_el_box' style='width:"+this._settings.awidth+"px; height:"+this._settings.aheight+"px'>"+u+f+"</div>"},defaults:{template:function(e,t){return t.$renderInput(e)},label:"",labelWidth:80},type_setter:function(e){return e},_set_inner_size:false,$setValue:function(e){this.getInputNode().value=e},$getValue:function(){return this.getInputNode().value},suggest_setter:function(e){if(e){webix.assert(e!==true,"suggest options can't be set as true, data need to be provided instead");if(typeof e=="string"){var t=webix.$$(e);if(t)return webix.$$(e)._settings.id;e={body:{url:e,dataFeed:e}}}else if(webix.isArray(e))e={body:{data:this._check_options(e)}};else if(!e.body)e.body={};webix.extend(e,{view:"suggest"});var n=webix.ui(e);this._destroy_with_me.push(n);return n._settings.id}return false}},webix.ui.button);webix.protoUI({name:"segmented",_allowsClear:false,$init:function(){this.attachEvent("onChange",function(e){if(this._settings.multiview){var t=this.getTopParentView();var n=null;if(t&&t.$$)n=t.$$(e);if(!n)n=webix.$$(e);if(n&&n.show)n.show()}})},defaults:{template:function(e,t){if(!e.options)webix.assert(false,"segmented: options undefined");var n=e.options;t._check_options(n);var r=t._get_input_width(e);var i=webix.uid();var s="<div style='width:"+r+"px' class='webix_all_segments'>";var o=e.optionWidth||Math.floor(r/n.length);if(!e.value)e.value=n[0].id;for(var u=0;u<n.length;u++){s+="<input type='button' style='width:"+(n[u].width||o)+"px' ";s+="class='"+(e.value==n[u].id?"webix_selected ":"")+"webix_segment_"+(u==n.length-1?"N":u>0?1:0)+"' button_id='"+n[u].id+"' value='"+n[u].value+"'>"}return t.$renderInput(e,s+"</div>",i)}},$setValue:function(e){this.refresh()},getValue:function(){return this._settings.value},getInputNode:function(){return null},optionIndex:function(e){var t=this._settings.options;for(var n=0;n<t.length;n++)if(t[n].id==e)return n;return-1},addOption:function(e,t,n,r){t=t||e;if(this.optionIndex(e)<0)webix.PowerArray.insertAt.call(this._settings.options,{id:e,value:t},r);if(n)this.setValue(e)},removeOption:function(e,t){var n=this.optionIndex(e);var r=this._settings.options;if(n>=0)webix.PowerArray.removeAt.call(r,n);if(this._settings.value==e){var i=Math.min(n,r.length-1);if(i>=0){this.setValue(r[i].id);return r[i].id}else{this._settings.value=-1}}this.refresh()},_set_inner_size:false},webix.ui.text);webix.protoUI({name:"search",$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},on_click:{webix_input_icon:function(e){return this.callEvent("onSearchIconClick",[e])}},defaults:{type:"text",icon:"search"}},webix.ui.text);webix.protoUI({name:"toggle",_allowsClear:true,$init:function(){this.attachEvent("onItemClick",function(){this.toggle()})},$setValue:function(e){this.render()},toggle:function(){this.setValue(!this.getValue())},getValue:function(){var e=this._settings.value;return!e||e=="0"?0:1},defaults:{template:function(e,t){var n=e.value?" webix_pressed":"";e.label=(e.value?e.onLabel:e.offLabel)||e.label;e.icon=(e.value?e.onIcon:e.offIcon)||e.icon;return"<div class='webix_el_box"+n+"' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+t._inputTemplate(e,t)+"</div>"}},_set_inner_size:false},webix.ui.button);webix.protoUI({name:"select",defaults:{template:function(e,t){var n=t._check_options(e.options);var r=e.name||"x"+webix.uid();var i=t._baseInputHTML("select")+"id='"+r+"' style='width:"+t._get_input_width(e)+"px;'>";var s=webix.$$(n);if(s&&s.data&&s.data.each){s.data.each(function(t){i+="<option"+(t.id==e.value?" selected='true'":"")+" value='"+t.id+"'>"+t.value+"</option>"})}else for(var o=0;o<n.length;o++){i+="<option"+(n[o].id==e.value?" selected='true'":"")+" value='"+n[o].id+"'>"+n[o].value+"</option>"}i+="</select>";return t.$renderInput(e,i,r)}},options_setter:function(e){if(e){if(typeof e=="string"){var t=new webix.DataCollection({url:e});t.data.attachEvent("onStoreLoad",webix.bind(this.refresh,this));return t}else return e}},getInputNode:function(){return this._dataobj.getElementsByTagName("select")[0]}},webix.ui.text);webix.protoUI({name:"textarea",$skin:function(){},defaults:{template:function(e,t){var n=e.name||e.id;var r="x"+webix.uid();var i=t._baseInputHTML("textarea")+"style='width:"+t._get_input_width(e)+"px;'";i+=" id='"+r+"' name='"+n+"' class='webix_inp_textarea'>"+(e.value||"")+"</textarea>";return t.$renderInput(e,i,r)},height:0,minHeight:60},_skipSubmit:true,getInputNode:function(){return this._dataobj.getElementsByTagName("textarea")[0]}},webix.ui.text);webix.protoUI({name:"counter",defaults:{template:function(e,t){var n=e.value||0;var r=e.name||"x"+webix.uid();var i="<div class='webix_el_group' style='width:"+t._get_input_width(e)+"px'>";i+="<input type='button' class='webix_inp_counter_prev' value='-' />";i+=t._baseInputHTML("input")+"type='text' class='webix_inp_counter_value' value='"+n+"'></input>";i+="<input id='"+r+"' type='button' class='webix_inp_counter_next' value='+'/><div>";return t.$renderInput(e,i,r)},min:0,max:Infinity,step:1},$setValue:function(e){this.getInputNode().value=e},getInputNode:function(){return this._dataobj.getElementsByTagName("input")[1]},getValue:function(e){return webix.ui.button.prototype.getValue.apply(this,arguments)*1},next:function(e){e=this._settings.step;this.shift(e)},prev:function(e){e=-1*this._settings.step;this.shift(e)},shift:function(e){var t=this._settings.min;var n=this._settings.max;var r=this.getValue()+e;if(r>=t&&r<=n)this.setValue(r)}},webix.ui.text);webix.protoUI({name:"checkbox",defaults:{checkValue:1,uncheckValue:0,template:function(e,t){var n=e.name||"x"+webix.uid();var r="";if(e.labelRight){r="<label class='webix_label_right'>"+e.labelRight+"</label>";if(e.labelWidth)e.label=e.label||"&nbsp;"}var i=e.checkValue==e.value;var s=Math.floor((t._settings.aheight-16)/2);var o=t._baseInputHTML("input")+"style='margin-top:"+s+"px;"+(e.customCheckbox?"display:none":"")+"' id='"+n+"' type='checkbox' "+(i?"checked='1'":"")+"/>";var u="webix_inp_checkbox_border webix_el_group webix_checkbox_"+(i?"1":"0");var a="<div style='line-height:"+t._settings.cheight+"px' class='"+u+"'>"+o+(e.customCheckbox||"")+r+"</div>";return t.$renderInput(e,a,n)}},_init_onchange:function(){},$setValue:function(e){var t=e==this._settings.checkValue;var n=this.getInputNode()?this.getInputNode().parentNode:null;if(n){n.className=n.className.replace(/(webix_checkbox_)\d/,"$1"+(t?1:0))}this.getInputNode().checked=t},toggle:function(){var e=this.getValue()!=this._settings.checkValue?this._settings.checkValue:this._settings.uncheckValue;this.setValue(e)},getValue:function(){var e=this._settings.value;return e==this._settings.checkValue?this._settings.checkValue:this._settings.uncheckValue},$skin:function(){if(webix.skin.$active.customCheckbox)this.defaults.customCheckbox="<a onclick='javascript:void(0)'><label class='webix_custom_checkbox'></label></a>"}},webix.ui.text);webix.protoUI({name:"radio",defaults:{template:function(e,t){var n=t._check_options(e.options);var r=[];var i;for(var s=0;s<n.length;s++){var o="x"+webix.uid();i=i||o;if(s&&(n[s].newline||e.vertical))r.push("<div class='webix_line_break'></div>");var u=n[s].id==e.value;var a=t._baseInputHTML("input")+"name='"+e.name+"' type='radio' "+(u?"checked='1'":"")+" value='"+n[s].id+"' id='"+o+"' style='"+(e.customRadio?"display:none":"")+"' />";var f="<div radio_id='"+n[s].id+"' class='webix_inp_radio_border webix_radio_"+(u?"1":"0")+"'>"+a+(e.customRadio||"")+"</div>";var l=n[s].value||"";if(l)l="<label for='"+o+"' class='webix_label_right'>"+l+"</label>";r.push(f+l)}r="<div class='webix_el_group' style='margin-left:"+(e.label?e.labelWidth:0)+"px;'>"+r.join("")+"</div>";return t.$renderInput(e,r,i)}},$getSize:function(e,t){var n=webix.ui.button.prototype.$getSize.call(this,e,t);if(this._settings.options){var r=1;for(var i=0;i<this._settings.options.length;i++)if(this._settings.vertical||this._settings.options[i].newline)r++;n[3]=n[2]=Math.max(n[2],(this.config.optionHeight||25)*r)}return n},_getInputNode:function(){return this._dataobj.getElementsByTagName("input")},$setValue:function(e){var t=this._getInputNode();for(var n=0;n<t.length;n++){if(t[n].parentNode.getAttribute("radio_id")==e){t[n].className="webix_inp_radio_on";t[n].checked=true}else{t[n].className="webix_inp_radio_on webix_hidden";t[n].checked=false}var r=t[n]?t[n].parentNode:null;if(r){r.className=r.className.replace(/(webix_radio_)\d/,"$1"+(t[n].checked?1:0))}}},getValue:function(e){return this._settings.value},$skin:function(){if(webix.skin.$active.customRadio)this.defaults.customRadio="<a onclick='javascript:void(0)'><label class='webix_custom_radio'></label></a>";if(webix.skin.$active.optionHeight)this.defaults.optionHeight=webix.skin.$active.optionHeight}},webix.ui.text);webix.protoUI({name:"richselect",defaults:{template:function(e,t){return t._render_div_block(e,t)},popupWidth:200,icon:"angle-down"},suggest_setter:function(e){return this.options_setter(e)},options_setter:function(e){var t=this._settings.popup=this._settings.suggest=webix.ui.text.prototype.suggest_setter.call(this,e);var n=webix.$$(t).getList();if(n)n.attachEvent("onAfterLoad",webix.bind(this._reset_value,this));return t},_reset_value:function(){var e=this._settings.value;if(!webix.isUndefined(e)&&!this.getPopup().isVisible())this.$setValue(e)},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},$render:function(e){if(webix.isUndefined(e.value))return;this.$setValue(e.value)},getInputNode:function(){return this._dataobj.getElementsByTagName("DIV")[1]},getPopup:function(){return webix.$$(this._settings.popup)},getText:function(){var e=this.getInputNode();return typeof e.value=="undefined"?e.innerHTML:e.value},$setValue:function(e){if(!this._rendered_input)return;var t=e;var n=this.getPopup();if(n)var t=this.getPopup().getItemText(e);this._settings.value=e;this._settings.text=t;var r=this.getInputNode();if(webix.isUndefined(r.value))r.innerHTML=t;else r.value=t.replace(/<[^>]*>/g,"")},getValue:function(){return this._settings.value||""}},webix.ui.text);webix.protoUI({name:"combo",$init:function(){this.attachEvent("onBlur",webix.bind(function(e){if(this._settings.text==this.getText())return;var t=this.getPopup().getSuggestion();if(t&&!(this.getInputNode().value===""&&webix.$$(this.config.suggest).getList().getItem(t).value!==""))this.$setValue(t);else if(!this.config.editable){var n=this.getValue();this.$setValue(webix.isUndefined(n)?"":n)}},this))},getInputNode:function(){return this._dataobj.getElementsByTagName("input")[0]},$render:function(e){if(webix.isUndefined(e.value))return;this.$setValue(e.value)},defaults:{template:function(e,t){return t.$renderInput(e)},icon:"angle-down"}},webix.ui.richselect);webix.protoUI({name:"datepicker",$init:function(){this.$ready.push(this._init_popup)},defaults:{template:function(e,t){return t._render_div_block(e,t)},stringResult:false,timepicker:false,icon:"calendar"},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},getPopup:function(){return webix.$$(this._settings.popup)},_init_popup:function(){var e=this._settings;if(e.suggest)e.popup=e.suggest;else if(!e.popup){var t=this._settings.timepicker;e.popup=e.suggest=this.suggest_setter({type:"calendar",height:240+(t?30:0),width:250,body:{timepicker:t}})}this._init_once=function(){}},$render:function(e){if(webix.isUndefined(e.value))return;this.$setValue(e.value)},$setValue:function(e){var t=webix.$$(this._settings.popup.toString());var n=t._body_cell;if(typeof e=="string"&&e)e=webix.i18n.parseFormatDate(e);if(e&&isNaN(e.getTime()))e="";n.selectDate(e,true);this._settings.value=e?n.config.date:"";this._settings.text=e?(this._settings.format||webix.i18n.parseFormatStr)(this._settings.value):"";this.getInputNode().innerHTML=this._settings.text||this._settings.placeholder||""},format_setter:function(e){return webix.Date.dateToStr(e)},getInputNode:function(){return this._dataobj.getElementsByTagName("DIV")[1]},getValue:function(){if(this._settings.stringResult&&typeof this._settings.value!="string"){return this._settings.value?webix.i18n.parseFormatStr(this._settings.value):""}return this._settings.value||null}},webix.ui.text);webix.protoUI({name:"colorpicker",$init:function(){this.$ready.push(this._init_popup)},defaults:{template:function(e,t){return t._render_div_block(e,t)},icon:false},_init_popup:function(){var e=this._settings;if(e.suggest)e.popup=e.suggest;else if(!e.popup)e.popup=e.suggest=this.suggest_setter({type:"colorboard",height:200});this._init_once=function(){}},$render:function(e){if(webix.isUndefined(e.value))return;this.$setValue(e.value)},$setValue:function(e){var t=webix.$$(this._settings.popup.toString());var n=t._body_cell;n.setValue(e);this._settings.value=e;var r=this._settings.value;var i=this._settings.icon?"":"<div style='background-color:"+r+";'>&nbsp;</div>"+r;this.getInputNode().innerHTML=i}},webix.ui.datepicker);webix.RenderStack={$init:function(){webix.assert(this.data,"RenderStack :: Component doesn't have DataStore");webix.assert(webix.template,"webix.template :: webix.template is not accessible");this._html=document.createElement("DIV");this.data.attachEvent("onIdChange",webix.bind(this._render_change_id,this));this.attachEvent("onItemClick",this._call_onclick);if(!this.types){this.types={"default":this.type};this.type.name="default"}this.type=webix.clone(this.type)},customize:function(e){webix.type(this,e)},type_setter:function(e){if(!this.types[e])this.customize(e);else{this.type=webix.clone(this.types[e]);if(this.type.css)this._contentobj.className+=" "+this.type.css}if(this.type.on_click)webix.extend(this.on_click,this.type.on_click);return e},template_setter:function(e){this.type.template=webix.template(e)},_toHTML:function(e){var t=this.data._marks[e.id];webix.assert(!e.$template||this.type["template"+e.$template],"RenderStack :: Unknown template: "+e.$template);this.callEvent("onItemRender",[e]);return this.type.templateStart(e,this.type,t)+(e.$template?this.type["template"+e.$template]:this.type.template)(e,this.type,t)+this.type.templateEnd(e,this.type,t)},_toHTMLObject:function(e){this._html.innerHTML=this._toHTML(e);return this._html.firstChild},_render_change_id:function(e,t){var n=this.getItemNode(e);if(n){n.setAttribute(this._id,t);this._htmlmap[t]=this._htmlmap[e];delete this._htmlmap[e]}},_call_onclick:function(){if(this._settings.click){var e=webix.toFunctor(this._settings.click,this.$scope);if(e&&e.call)e.apply(this,arguments)}},getItemNode:function(e){if(this._htmlmap)return this._htmlmap[e];this._htmlmap={};var t=this._dataobj.childNodes;for(var n=0;n<t.length;n++){var r=t[n].getAttribute(this._id);if(r)this._htmlmap[r]=t[n]}return this.getItemNode(e)},locate:function(e){return webix.html.locate(e,this._id)},showItem:function(e){var t=this.getItemNode(e);if(t&&this.scrollTo){var n=t.offsetLeft;var r=n+t.offsetWidth;var i=t.offsetTop;var s=i+t.offsetHeight;var o=this.getScrollState();var u=o.x;if(u>n||u+this._content_width<r)u=n;var a=o.y;if(a>i||a+this._content_height<s)a=i-5;this.scrollTo(u,a);if(this._setItemActive)this._setItemActive(e)}},render:function(e,t,n){if(!this.isVisible(this._settings.id)||this.$blockRender)return;if(webix.debug_render)webix.log("Render: "+this.name+"@"+this._settings.id+", mode:"+(n||"#")+", item:"+(e||"#"));if(e){var r=this.getItemNode(e);switch(n){case"paint":case"update":if(!r)return;var i=this._htmlmap[e]=this._toHTMLObject(t);webix.html.insertBefore(i,r);webix.html.remove(r);break;case"delete":if(!r)return;webix.html.remove(r);delete this._htmlmap[e];break;case"add":var i=this._htmlmap[e]=this._toHTMLObject(t);webix.html.insertBefore(i,this.getItemNode(this.data.getNextId(e)),this._dataobj);break;case"move":webix.html.insertBefore(this.getItemNode(e),this.getItemNode(this.data.getNextId(e)),this._dataobj);break;default:webix.assert_error("Unknown render command: "+n);break}}else{if(this.callEvent("onBeforeRender",[this.data])){(this._renderobj||this._dataobj).innerHTML=this.data.getRange().map(this._toHTML,this).join("");this._htmlmap=null;this.callEvent("onAfterRender",[]);var i=this._dataobj.offsetHeight}}}};webix.ValidateData={$init:function(){if(this._events)this.attachEvent("onChange",this.clearValidation)},clearValidation:function(){if(this.elements){for(var e in this.elements){this._clear_invalid(e)}}},validate:function(e){webix.assert(this.callEvent,"using validate for eventless object");this.callEvent("onBeforeValidate",[]);var t=this._validate_details={};var n=true;var r=this._settings.rules;var i={},s=[];for(var o in this.elements){var u=this.elements[o].config.name;if(this.elements[o].isVisible())i[u]=this.elements[o];else s.push(u)}if(r||i)if(!e&&this.getValues)e=this.getValues();if(r){if(r.$obj)n=this._validate(r.$obj,e,e,"")&&n;var a=r.$all;if(a)for(var f in e){if(s.indexOf(f)!==-1)continue;var l=this._validate(a,e[f],e,f);if(!l)t[f]=true;n=l&&n}for(var f in r){if(s.indexOf(f)!==-1)continue;if(f.indexOf("$")!==0&&!t[f]){webix.assert(r[f],"Invalid rule for:"+f);var l=this._validate(r[f],e[f],e,f);if(!l)t[f]=true;n=l&&n}}}if(i){for(var f in i){if(t[f])continue;var c=i[f];if(c.validate){var l=c.validate();n=l&&n;if(!l)t[f]=true}else{var h=c._settings;if(h){var p=h.validate;if(!p&&h.required)p=webix.rules.isNotEmpty;if(p){var l=this._validate(p,e[f],e,f);if(!l)t[f]=true;n=l&&n}}}}}this.callEvent("onAfterValidation",[n,this._validate_details]);return n},_validate:function(e,t,n,r){if(typeof e=="string")e=webix.rules[e];if(e.call(this,t,n,r)){if(this.callEvent("onValidationSuccess",[r,n])&&this._clear_invalid)this._clear_invalid(r,n);return true}else{if(this.callEvent("onValidationError",[r,n])&&this._mark_invalid)this._mark_invalid(r,n)}return false}};webix.ValidateCollection={_validate_init_once:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(e,t,n){if(e&&(n=="add"||n=="update"))this.validate(e)},this));this.attachEvent("onClearAll",this.clearValidation);this._validate_init_once=function(){}},rules_setter:function(e){if(e){this._validate_init_once()}return e},clearValidation:function(){this.data.clearMark("webix_invalid",true)},validate:function(e){var t=true;if(!e)for(var n in this.data.pull)var t=this.validate(n)&&t;else{this._validate_details={};var r=this.getItem(e);t=webix.ValidateData.validate.call(this,r);if(t){if(this.callEvent("onValidationSuccess",[e,r]))this._clear_invalid(e)}else{if(this.callEvent("onValidationError",[e,r,this._validate_details]))this._mark_invalid(e,this._validate_details)}}return t},_validate:function(e,t,n,r){if(typeof e=="string")e=webix.rules[e];var i=e.call(this,t,n,r);if(!i){this._validate_details[r]=true}return i},_clear_invalid:function(e){this.data.removeMark(e,"webix_invalid",true)},_mark_invalid:function(e,t){this.data.addMark(e,"webix_invalid",true)}};webix.rules={isEmail:function(e){return/^[^@]+@[^@]+\.[^@]+$/.test((e||"").toString())},isNumber:function(e){return parseFloat(e)==e},isNotEmpty:function(e){return e===0||e}};webix.DataLoader=webix.proto({$init:function(e){e=e||"";this._ajax_queue=webix.toArray();this.data=new webix.DataStore;this.data.attachEvent("onClearAll",webix.bind(this._call_onclearall,this));this.data.attachEvent("onServerConfig",webix.bind(this._call_on_config,this));this.data.feed=this._feed},_feed:function(e,t,n){if(this._load_count)return this._load_count=[e,t,n];else this._load_count=true;this._feed_last=[e,t];this._feed_common.call(this,e,t,n)},_feed_common:function(e,t,n){var r=this.data.url;if(e<0)e=0;var i=[this._feed_callback,n];if(r&&typeof r!="string"){var s={from:e,count:t};if(this.getState){var o=this.getState();s.sort=o.sort;s.filter=o.filter}this.load(r,i,s)}else{var u=r+(r.indexOf("?")==-1?"?":"&")+(this.count()?"continue=true":"");if(t!=-1)u+="&count="+t;if(e)u+="&start="+e;if(this.getState){var o=this.getState();if(o.sort)u+="&sort["+o.sort.id+"]="+o.sort.dir;if(o.filter)for(var a in o.filter)u+="&filter["+a+"]="+o.filter[a]}this.load(u,i)}},_feed_callback:function(){var e=this._load_count;var t=this._feed_last;this._load_count=false;if(typeof e=="object"&&(e[0]!=t[0]||e[1]!=t[1]))this.data.feed.apply(this,e)},load:function(e,t){var n=webix.AtomDataLoader.load.apply(this,arguments);if(!this.data.url)this.data.url=e;return n},loadNext:function(e,t,n,r,i){var s=this._settings;if(s.datathrottle&&!i){if(this._throttle_request)window.clearTimeout(this._throttle_request);this._throttle_request=webix.delay(function(){this.loadNext(e,t,n,r)},this,0,s.datathrottle);return}if(!t&&t!==0)t=this.count();if(!e)e=s.datafetch||this.count();this.data.url=this.data.url||r;if(this.callEvent("onDataRequest",[t,e,n,r])&&this.data.url)this.data.feed.call(this,t,e,n)},_maybe_loading_already:function(e,t){var n=this._feed_last;if(this._load_count&&n){if(n[0]<=t&&n[1]+n[0]>=e+t)return true}return false},_onLoad:function(e,t,n){var r;if(n===-1)r=t;else{this._ajax_queue.remove(n);r=this.data.driver.toObject(e,t)}if(r)this.data._parse(r);else return this._onLoadError(e,t,n);this._call_onready();this.callEvent("onAfterLoad",[])},removeMissed_setter:function(e){return this.data._removeMissed=e},_init_dataprocessor:function(){var e=this._settings.save;if(e===true)e=this._settings.save=this._settings.url;var t={master:this};if(e&&e.url)webix.extend(t,e);else t.url=e;webix.dp(t)},save_setter:function(e){if(e)this.$ready.push(this._init_dataprocessor);return e},scheme_setter:function(e){this.data.scheme(e)},dataFeed_setter:function(e){if(typeof e=="string"&&e.indexOf("->")!=-1){var t=e.split("->");e=webix.proxy(t[0],t[1])}this.data.attachEvent("onBeforeFilter",webix.bind(function(e,t){if(typeof e=="function")return true;if(this._settings.dataFeed&&(e||t)){e=e||"id";if(t&&typeof t=="object")t=t.id;this.clearAll();var n=this._settings.dataFeed;if(typeof n=="function"){var r={};r[e]=t;n.call(this,t,r)}else if(n.$proxy){if(n.load){var i={};i[e]=t;n.load(this,null,i)}}else{var s="filter["+e+"]="+encodeURIComponent(t);this.load(n+(n.indexOf("?")<0?"?":"&")+s,this._settings.datatype)}return false}},this));return e},_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var e=webix.toFunctor(this._settings.ready,this.$scope);if(e)webix.delay(e,this,arguments);this._ready_was_used=true}},_call_onclearall:function(){for(var e=0;e<this._ajax_queue.length;e++)this._ajax_queue[e].abort();this._ajax_queue=webix.toArray()},_call_on_config:function(e){this._parseSeetingColl(e)}},webix.AtomDataLoader);webix.DataMarks={addCss:function(e,t,n){if(!this.addRowCss&&!n){if(!this.hasCss(e,t)){var r=this.getItemNode(e);if(r){r.className+=" "+t;n=true}}}return this.data.addMark(e,t,1,1,n)},removeCss:function(e,t,n){if(!this.addRowCss&&!n){if(this.hasCss(e,t)){var r=this.getItemNode(e);if(r){r.className=r.className.replace(t,"").replace("  "," ");n=true}}}return this.data.removeMark(e,t,1,n)},hasCss:function(e,t){return this.data.getMark(e,t)},clearCss:function(e,t){return this.data.clearMark(e,1,t)}};webix.DataStore=function(){this.name="DataStore";webix.extend(this,webix.EventSystem);this.setDriver("json");this.pull={};this.order=webix.toArray();this._marks={}};webix.DataStore.prototype={setDriver:function(e){webix.assert(webix.DataDriver[e],"incorrect DataDriver");this.driver=webix.DataDriver[e]},_parse:function(e,t){this.callEvent("onParse",[this.driver,e]);if(this._filter_order)this.filter();var n=this.driver.getInfo(e);if(n._key)webix.securityKey=n._key;if(n._config)this.callEvent("onServerConfig",[n._config]);var r=this.driver.getOptions(e);if(r)this.callEvent("onServerOptions",[r]);var i=this.driver.getRecords(e);this._inner_parse(n,i);if(this._scheme_group&&this._group_processing&&!this._not_grouped_order)this._group_processing(this._scheme_group);if(this._scheme_sort){this.blockEvent();this.sort(this._scheme_sort);this.unblockEvent()}this.callEvent("onStoreLoad",[this.driver,e]);this.refresh()},_inner_parse:function(e,t){var n=(e._from||0)*1;var r=true;var i=false;if(n===0&&this.order[0]){if(this._removeMissed){i={};for(var s=0;s<this.order.length;s++)i[this.order[s]]=true}r=false;n=this.order.length}var o=0;for(var s=0;s<t.length;s++){var u=this.driver.getDetails(t[s]);var a=this.id(u);if(!this.pull[a]){this.order[o+n]=a;o++}else if(r&&this.order[o+n])o++;if(this.pull[a]){webix.extend(this.pull[a],u,true);if(this._scheme_update)this._scheme_update(this.pull[a]);if(i)delete i[a]}else{this.pull[a]=u;if(this._scheme_init)this._scheme_init(u)}}if(i){this.blockEvent();for(var f in i)this.remove(f);this.unblockEvent()}if(!this.order[e._size-1])this.order[e._size-1]=webix.undefined},id:function(e){return e.id||(e.id=webix.uid())},changeId:function(e,t){if(this.pull[e])this.pull[t]=this.pull[e];this.pull[t].id=t;this.order[this.order.find(e)]=t;if(this._filter_order)this._filter_order[this._filter_order.find(e)]=t;if(this._marks[e]){this._marks[t]=this._marks[e];delete this._marks[e]}this.callEvent("onIdChange",[e,t]);if(this._render_change_id)this._render_change_id(e,t);delete this.pull[e]},getItem:function(e){return this.pull[e]},updateItem:function(e,t){var n=this.getItem(e);webix.assert(n,"Ivalid ID for updateItem");webix.assert(!t||!t.id||t.id==e,"Attempt to change ID in updateItem");if(!webix.isUndefined(t)&&n!==t)webix.extend(n,t,true);if(this._scheme_update)this._scheme_update(n);this.callEvent("onDataUpdate",[e,n]);this.callEvent("onStoreUpdated",[e,n,"update"])},refresh:function(e){if(this._skip_refresh)return;if(e){if(this.exists(e))this.callEvent("onStoreUpdated",[e,this.pull[e],"paint"])}else this.callEvent("onStoreUpdated",[null,null,null])},silent:function(e,t){this._skip_refresh=true;e.call(t||this);this._skip_refresh=false},getRange:function(e,t){if(e)e=this.getIndexById(e);else e=this.$min||this.startOffset||0;if(t)t=this.getIndexById(t);else{t=this.$max===0?0:Math.min(this.$max||this.endOffset||Infinity,this.count()-1);if(t<0)t=0}if(e>t){var n=t;t=e;e=n}return this.getIndexRange(e,t)},getIndexRange:function(e,t){t=Math.min(t===0?0:t||Infinity,this.count()-1);var n=webix.toArray();for(var r=e||0;r<=t;r++)n.push(this.getItem(this.order[r]));return n},count:function(){return this.order.length},exists:function(e){return!!this.pull[e]},move:function(e,t){webix.assert(e>=0&&t>=0,"DataStore::move","Incorrect indexes");if(e==t)return;var n=this.getIdByIndex(e);var r=this.getItem(n);if(this._filter_order)this._move_inner(this._filter_order,0,0,this.getIdByIndex(e),this.getIdByIndex(t));this._move_inner(this.order,e,t);this.callEvent("onStoreUpdated",[n,r,"move"])},_move_inner:function(e,t,n,r,i){if(r||i){t=n=-1;for(var s=0;s<e.length;s++){if(e[s]==r&&t<0)t=s;if(e[s]==i&&n<0)n=s}}var o=e[t];e.removeAt(t);e.insertAt(o,Math.min(e.length,n))},scheme:function(e){this._scheme={};this._scheme_save=e.$save;this._scheme_init=e.$init||e.$change;this._scheme_update=e.$update||e.$change;this._scheme_serialize=e.$serialize;this._scheme_group=e.$group;this._scheme_sort=e.$sort;for(var t in e)if(t.substr(0,1)!="$")this._scheme[t]=e[t]},importData:function(e,t){var n=e.data||e;this._filter_order=null;if(typeof n.serialize=="function"){this.order=webix.toArray([].concat(n.order));this.pull=n.pull}else{this.order=webix.toArray();this.pull={};var r,i;if(webix.isArray(e))for(var s=0;s<e.length;s++){i=r=e[s];if(typeof i=="object")r=i.id;else i={id:r,value:r};this.order.push(i.id);this.pull[i.id]=i}else for(var s in n){this.order.push(s);this.pull[s]={id:s,value:n[s]}}}if(!t)this.callEvent("onStoreUpdated",[])},sync:function(e,t,n){var r=typeof e;if(r=="string")e=webix.$$("source");if(r!="function"&&r!="object"){n=t;t=null}if(webix.debug_bind){this.debug_sync_master=e;webix.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)}if(e.name!="DataStore"){if(e.data&&e.data.name=="DataStore")e=e.data;else return webix.callEvent("onSyncUnknown",[this,e,t])}var i=webix.bind(function(r,i,s){if(this._skip_next_sync)return;this.importData(e,true);if(t)this.silent(t);if(this._on_sync)this._on_sync();if(webix.debug_bind)webix.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id);this.callEvent("onSyncApply",[]);if(!n)this.refresh();else n=false},this);this._sync_events=[e.attachEvent("onStoreUpdated",i),e.attachEvent("onIdChange",webix.bind(function(e,t){this.changeId(e,t);this.refresh(t)},this))];this._sync_source=e;this._back_sync_handler=this.attachEvent("onStoreUpdated",function(t,n,r){if(r=="update"||r=="save"){this._skip_next_sync=1;e.updateItem(t,n);this._skip_next_sync=0}});i()},unsync:function(){if(this._sync_source){var e=this._sync_source;if(e.name!="DataStore"&&(!e.data||e.data.name!="DataStore")){webix.callEvent("onUnSyncUnknown",[this,e])}else{for(var t=0;t<this._sync_events.length;t++)e.detachEvent(this._sync_events[t]);this.detachEvent(this._back_sync_handler)}this._sync_source=null}},destructor:function(){this.unsync();this.pull=this.order=this._marks=null;this._evs_events=this._evs_handlers={}},add:function(e,t){if(this._scheme)for(var n in this._scheme)if(webix.isUndefined(e[n]))e[n]=this._scheme[n];if(this._scheme_init)this._scheme_init(e);var r=this.id(e);var i=arguments[2]||this.order;var s=i.length;if(webix.isUndefined(t)||t<0)t=s;if(t>s){webix.log("Warning","DataStore:add","Index of out of bounds");t=Math.min(i.length,t)}if(this.callEvent("onBeforeAdd",[r,e,t])===false)return false;webix.assert(!this.exists(r),"Not unique ID");this.pull[r]=e;i.insertAt(r,t);if(this._filter_order){var o=this._filter_order.length;if(!t&&this.order.length)o=0;this._filter_order.insertAt(r,o)}this.callEvent("onAfterAdd",[r,t]);this.callEvent("onStoreUpdated",[r,e,"add"]);return r},remove:function(e){if(webix.isArray(e)){for(var t=0;t<e.length;t++)this.remove(e[t]);return}if(this.callEvent("onBeforeDelete",[e])===false)return false;webix.assert(this.exists(e),"Not existing ID in remove command"+e);var n=this.getItem(e);this.order.remove(e);if(this._filter_order)this._filter_order.remove(e);delete this.pull[e];if(this._marks[e])delete this._marks[e];this.callEvent("onAfterDelete",[e]);this.callEvent("onStoreUpdated",[e,n,"delete"])},clearAll:function(){this.pull={};this._marks={};this.order=webix.toArray();this._filter_order=this.url=null;this.callEvent("onClearAll",[]);this.refresh()},getIdByIndex:function(e){webix.assert(e>=0,"DataStore::getIdByIndex Incorrect index");return this.order[e]},getIndexById:function(e){var t=this.order.find(e);if(!this.pull[e])return-1;return t},getNextId:function(e,t){return this.order[this.getIndexById(e)+(t||1)]},getFirstId:function(){return this.order[0]},getLastId:function(){return this.order[this.order.length-1]},getPrevId:function(e,t){return this.order[this.getIndexById(e)-(t||1)]},sort:function(e,t,n){var r=e;if(typeof e=="function")r={as:e,dir:t};else if(typeof e=="string")r={by:e.replace(/#/g,""),dir:t,as:n};var i=[r.by,r.dir,r.as,r];if(!this.callEvent("onBeforeSort",i))return;this._sort_core(r);this.refresh();this.callEvent("onAfterSort",i)},_sort_core:function(e){if(this.order.length){var t=this._sort._create(e);var n=this.getRange(this.getFirstId(),this.getLastId());n.sort(t);this.order=n.map(function(e){webix.assert(e,"Client sorting can't be used with dynamic loading");return this.id(e)},this)}},_filter_reset:function(e){if(this._filter_order&&!e){this.order=this._filter_order;delete this._filter_order}},_filter_core:function(e,t,n){var r=webix.toArray();for(var i=0;i<this.order.length;i++){var s=this.order[i];if(e(this.getItem(s),t))r.push(s)}if(!n||!this._filter_order)this._filter_order=this.order;this.order=r},filter:function(e,t,n){if(!this.callEvent("onBeforeFilter",[e,t]))return;this._filter_reset(n);if(!this.order.length)return;if(e){var r=e;t=t||"";if(typeof e=="string"){e=e.replace(/#/g,"");if(typeof t=="function")r=function(n){return t(n[e])};else{t=t.toString().toLowerCase();r=function(t,n){webix.assert(t,"Client side filtering can't be used with dynamic loading");return(t[e]||"").toString().toLowerCase().indexOf(n)!=-1}}}this._filter_core(r,t,n,this._filterMode)}this.refresh();this.callEvent("onAfterFilter",[])},_obj_array:function(){var e=[];for(var t=this.order.length-1;t>=0;t--)e[t]=this.pull[this.order[t]];return e},each:function(e,t,n){var r=this.order;if(n)r=this._filter_order||r;for(var i=0;i<r.length;i++)e.call(t||this,this.getItem(r[i]),i)},_methodPush:function(e,t){return function(){return e[t].apply(e,arguments)}},provideApi:function(e,t){this.debug_bind_master=e;if(t){this.mapEvent({onbeforesort:e,onaftersort:e,onbeforeadd:e,onafteradd:e,onbeforedelete:e,onafterdelete:e,ondataupdate:e})}var n=["sort","add","remove","exists","getIdByIndex","getIndexById","getItem","updateItem","refresh","count","filter","getNextId","getPrevId","clearAll","getFirstId","getLastId","serialize","sync"];for(var r=0;r<n.length;r++)e[n[r]]=this._methodPush(this,n[r])},addMark:function(e,t,n,r,i){var s=this._marks[e]||{};this._marks[e]=s;if(!s[t]){s[t]=r||true;if(n){var o=s["$css"]||"";s["$css"]=o+" "+t}if(!i)this.refresh(e)}return s[t]},removeMark:function(e,t,n,r){var i=this._marks[e];if(i){if(i[t])delete i[t];if(n){var s=i["$css"];if(s){i["$css"]=s.replace(t,"").replace("  "," ")}}if(!r)this.refresh(e)}},getMark:function(e,t){var n=this._marks[e];return n?n[t]:false},clearMark:function(e,t,n){for(var r in this._marks){var i=this._marks[r];if(i[e]){delete i[e];if(t&&i.$css)i.$css=i.$css.replace(e,"").replace("  "," ");if(!n)this.refresh(r)}}},serialize:function(e){var t=this.order;if(e&&this._filter_order)t=this._filter_order;var n=[];for(var r=0;r<t.length;r++){var i=this.pull[t[r]];if(this._scheme_serialize){i=this._scheme_serialize(i);if(i===false)continue}n.push(i)}return n},_sort:{_create:function(e){return this._dir(e.dir,this._by(e.by,e.as))},_as:{server:function(){return false},date:function(e,t){e=e-0;t=t-0;return e>t?1:e<t?-1:0},"int":function(e,t){e=e*1;t=t*1;return e>t?1:e<t?-1:0},string_strict:function(e,t){e=e.toString();t=t.toString();return e>t?1:e<t?-1:0},string:function(e,t){if(!t)return 1;if(!e)return-1;e=e.toString().toLowerCase();t=t.toString().toLowerCase();return e>t?1:e<t?-1:0}},_by:function(e,t){if(!e)return t;if(typeof t!="function")t=this._as[t||"string"];webix.assert(t,"Invalid sorting method");return function(n,r){return t(n[e],r[e])}},_dir:function(e,t){if(e=="asc"||!e)return t;return function(e,n){return t(e,n)*-1}}}};webix.DataCollection=webix.proto({name:"DataCollection",isVisible:function(){if(!this.data.order.length&&!this.data._filter_order&&!this._settings.dataFeed)return false;return true},$init:function(e){this.data.provideApi(this,true);var t=e&&e.id?e.id:webix.uid();this._settings.id=t;webix.ui.views[t]=this;this.data.attachEvent("onStoreLoad",webix.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},webix.ValidateCollection,webix.DataLoader,webix.EventSystem,webix.BaseBind,webix.Destruction,webix.Settings);webix.Scrollable={$init:function(e){if(e&&!e.scroll&&this._one_time_scroll)return this._dataobj=this._dataobj||this._contentobj;(this._dataobj||this._contentobj).appendChild(webix.html.create("DIV",{"class":"webix_scroll_cont"},""));this._dataobj=(this._dataobj||this._contentobj).firstChild},scroll_setter:function(e){if(!e)return false;e=e=="x"?"x":e=="xy"?"xy":"y";if(webix.Touch&&webix.Touch.$active){this._dataobj.setAttribute("touch_scroll",e);if(this.attachEvent)this.attachEvent("onAfterRender",webix.bind(this._refresh_scroll,this));this._touch_scroll=true}else{if(webix.env.$customScroll){webix.CustomScroll.enable(this,e)}else{var t=this._dataobj.parentNode.style;if(e.indexOf("x")!=-1){this._scroll_x=true;t.overflowX="scroll"}if(e.indexOf("y")!=-1){this._scroll_y=true;t.overflowY="scroll"}}}return e},_onoff_scroll:function(e){if(!!this._settings.scroll==!!e)return;if(!webix.env.$customScroll){var t=this._dataobj.parentNode.style;t.overflowX=t.overflowY=e?"auto":"hidden"}this._scroll_x=this._scroll_y=!!e;this._settings.scroll=!!e},getScrollState:function(){if(webix.Touch&&webix.Touch.$active){var e=webix.Touch._get_matrix(this._dataobj);return{x:-e.e,y:-e.f}}else return{x:this._dataobj.parentNode.scrollLeft,y:this._dataobj.parentNode.scrollTop}},scrollTo:function(e,t){if(webix.Touch&&webix.Touch.$active){t=Math.max(0,Math.min(t,this._dataobj.offsetHeight-this._content_height));e=Math.max(0,Math.min(e,this._dataobj.offsetWidth-this._content_width));webix.Touch._set_matrix(this._dataobj,-e,-t,this._settings.scrollSpeed||"100ms")}else{this._dataobj.parentNode.scrollLeft=e;this._dataobj.parentNode.scrollTop=t}},_refresh_scroll:function(){if(this._settings.scroll.toString().indexOf("x")!=-1){this._dataobj.style.width=this._content_width+"px";this._dataobj.style.width=this._dataobj.scrollWidth+"px"}if(webix.Touch&&webix.Touch.$active&&this._touch_scroll){webix.Touch._clear_artefacts();webix.Touch._scroll_end();webix.Touch._set_matrix(this._dataobj,0,0,0)}}};webix.protoUI({defaults:{size:10,page:0,group:5,template:"{common.pages()}",maxWidth:1e5,height:30,borderless:true},name:"pager",on_click:{webix_pager_item:function(e,t){this.select(t)}},$init:function(e){this.data=this._settings;this._dataobj=this._viewobj;this._viewobj.className+=" webix_pager";if(e.master===false||e.master===0)this.$ready.push(this._remove_master)},_remove_master:function(){this.refresh();this.$master={refresh:function(){},select:function(){}}},select:function(e){if(this.$master&&this.$master.name=="pager")return this.$master.select(e);switch(e){case"next":e=this._settings.page+1;break;case"prev":e=this._settings.page-1;break;case"first":e=0;break;case"last":e=this._settings.limit-1;break;default:break}if(e<0)e=0;if(e>=this.data.limit)e=this.data.limit-1;var t=this.data.page;this.data.page=e*1;if(this.refresh()){if(!this._settings.animate||!this._animate(t,e*1,this._settings.animate))this.$master.refresh()}},_id:"webix_p_id",template_setter:webix.template,type:{template:function(e,t){return e.template.call(this,e,t)},pages:function(e){var t="";if(e.page==-1)return"";e.$min=e.page-Math.round((e.group-1)/2);e.$max=e.$min+e.group*1-1;if(e.$min<0){e.$max+=e.$min*-1;e.$min=0}if(e.$max>=e.limit){e.$min-=Math.min(e.$min,e.$max-e.limit+1);e.$max=e.limit-1}for(var n=e.$min||0;n<=e.$max;n++)t+=this.button({id:n,index:n+1,selected:n==e.page?"_selected":""});return t},page:function(e){return e.page+1},first:function(){return this.button({id:"first",index:webix.locale.pager.first,selected:""})},last:function(){return this.button({id:"last",index:webix.locale.pager.last,selected:""})},prev:function(){return this.button({id:"prev",index:webix.locale.pager.prev,selected:""})},next:function(){return this.button({id:"next",index:webix.locale.pager.next,selected:""})},button:webix.template("<button webix_p_id='{obj.id}' class='webix_pager_item{obj.selected}'>{obj.index}</button>")},clone:function(e){if(!e.$view){e.view="pager";e=webix.ui(e)}this._clone=e;e.$master=this;this._refresh_clone()},refresh:function(){var e=this._settings;if(!e.count)return;e.limit=Math.ceil(e.count/e.size);e.page=Math.min(e.limit-1,e.page);var t=e.page;if(t>=0&&t!=e.old_page||e.limit!=e.old_limit){this.render();this._refresh_clone();e.old_limit=e.limit;e.old_page=e.page;return true}},apiOnly_setter:function(e){return this.$apiOnly=e},_refresh_clone:function(){if(this._clone){this._clone._settings.count=this._settings.count;this._clone._settings.page=this._settings.page;this._clone.refresh()}},_animate:function(e,t,n){if(e==t)return false;if(this._pgInAnimation){if(this._pgAnimateTimeout){window.clearTimeout(this._pgAnimateTimeout)}return this._pgAnimateTimeout=webix.delay(this._animate,this,[e,t,n],100)}var r=t>e?"left":"right";if(n.direction=="top"||n.direction=="bottom")r=t>e?"top":"bottom";if(n.flip)r="";var i=0;var s=0;var o=this.$master._dataobj;if(this.$master._body){o=this.$master._body;s=this.$master._header;s.style.position="relative";s.style.zIndex="10";i=o.offsetTop}var u=o.cloneNode(true);u.style.width=o.style.width="100%";u.style.backgroundColor=o.style.backgroundColor="white";this.$master.refresh();o.parentNode.appendChild(u);var a;var f=n!==true?n:{};var l=webix.extend({direction:r,callback:webix.bind(function(){l.callback=null;webix.animate.breakLine(a);this._pgInAnimation=false;if(s)s.style.position=""},this),top:i},f);a=webix.animate.formLine(o,u,l);webix.animate([o,u],l);this._pgInAnimation=true}},webix.MouseEvents,webix.SingleRender,webix.ui.view,webix.EventSystem);webix.locale.pager={first:" &lt;&lt; ",last:" &gt;&gt; ",next:" &gt; ",prev:" &lt; "};webix.PagingAbility={pager_setter:function(e){function n(t){if(e.config.autosize&&this.getVisibleCount){var r=this.getVisibleCount();if(isNaN(r)){e.config.size=1;webix.delay(n,this,[true])}else if(r!=e.config.size){e.config.size=r;e.refresh();if(t===true)this.refresh()}}var i=this._settings.pager;if(i.page==-1)return false;this.data.$min=i.page*i.size;this.data.$pagesize=i.size;this.data.$max=(i.page+1)*i.size-1;return true}if(typeof e=="string"){var t=webix.$$(e);if(!t){this.$blockRender=true;webix.delay(function(){var t=webix.$$(e);this._settings.pager=this.pager_setter(t);t._settings.count=this.count();t.refresh();this.$blockRender=false;this.render()},this);return null}e=t}this.attachEvent("onBeforeRender",n);if(!e.$view){e.view="pager";e=webix.ui(e)}this._pager=e;e.$master=this;this.data.attachEvent("onStoreUpdated",function(){e._settings.count=this.count();e.refresh()},null,true);return e._settings},setPage:function(e){if(this._pager)this._pager.select(e)},getPage:function(){return this._pager._settings.page},getPager:function(){return this._pager}};webix.protoUI({name:"tooltip",defaults:{dy:0,dx:20},$init:function(e){if(typeof e=="string"){e={template:e}}this.type=webix.extend({},this.type);this._viewobj=this._contentobj=this._dataobj=document.createElement("DIV");this._contentobj.className="webix_tooltip";webix.html.insertBefore(this._contentobj,document.body.firstChild)},adjust:function(){},isVisible:function(){return true},show:function(e,t){if(this._disabled)return;if(this.data!=e){this.data=webix.extend({},e);this.render(e)}if(this._dataobj.firstChild){this._contentobj.style.top=t.y+this._settings.dy+"px";this._contentobj.style.left=t.x+this._settings.dx+"px";this._contentobj.style.display="block"}},hide:function(){this.data=null;this._contentobj.style.display="none"},disable:function(){this._disabled=true},enable:function(){this._disabled=false},type:{template:webix.template("{obj.id}"),templateStart:webix.template.empty,templateEnd:webix.template.empty}},webix.SingleRender,webix.Settings,webix.EventSystem,webix.ui.view);webix.AutoTooltip={tooltip_setter:function(e){if(e){var t,n=[],r=new webix.ui.tooltip(e);this._enable_mouse_move();n[0]=this.attachEvent("onMouseMove",function(e,t){if(this.getColumnConfig){var n=this.getColumnConfig(e.column);if(!n.tooltip&&n.tooltip!=webix.undefined)return;if(n.tooltip)r.type.template=n.tooltip=webix.template(n.tooltip);else{var i=this.getText(e.row,e.column);r.type.template=function(){return i}}}if(!webix.DragControl.active)r.show(this.getItem(e),webix.html.pos(t))});n[1]=this.attachEvent("onMouseOut",function(e,t){r.hide()});n[2]=this.attachEvent("onMouseMoving",function(e,t){r.hide()});this.attachEvent("onDestruct",function(){if(this.config.tooltip)this.config.tooltip.destructor()});r.attachEvent("onDestruct",webix.bind(function(){for(t=0;t<n.length;t++)this.detachEvent(n[t])},this));return r}}};webix.protoUI({name:"proto",$init:function(){this.data.provideApi(this,true);this._dataobj=this._dataobj||this._contentobj;this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.render.apply(this,arguments)},this))},$setSize:function(){if(webix.ui.view.prototype.$setSize.apply(this,arguments))this.render()},_id:"webix_item",on_mouse_move:{},type:{}},webix.PagingAbility,webix.DataMarks,webix.AutoTooltip,webix.ValidateCollection,webix.RenderStack,webix.DataLoader,webix.ui.view,webix.EventSystem,webix.Settings);webix.Values={$init:function(){this.elements={}},focus:function(e){var t;if(e){webix.assert(this.elements[e],"unknown input name: "+e);t=this.elements[e]}else if(this._cells){var n=0;do{t=this._cells[n];n++}while(t&&!t.focus)}if(t&&t.focus)t.focus()},setValues:function(e,t){this._is_form_dirty=t;this._inner_setValues(e,t);this.callEvent("onChange",[])},_inner_setValues:function(e,t){if(t)this._values=webix.extend(this.getValues(),e,true);else this._values=webix.copy(e);if(webix.debug_render)webix.log("Render: "+this.name+"@"+this._settings.id);for(var n in this.elements){var r=this.elements[n];if(r){if(!webix.isUndefined(this._values[n]))r.setValue(e[n]||this._values[n]);else{if(r._allowsClear)r.setValue("");this._values[n]=r.getValue()}}}},isDirty:function(){if(this._is_form_dirty)return true;if(this.getDirtyValues(1)===1)return true;return false},setDirty:function(e){this._is_form_dirty=e;if(!e)this._values=this.getValues()},getDirtyValues:function(){var e={};if(this._values){for(var t in this.elements){var n=this.elements[t].getValue();if(this._values[t]!=n){e[t]=n;if(arguments[0])return 1}}}return e},getCleanValues:function(){return this._values},getValues:function(e){var t,n=null,r=this._values?webix.copy(this._values):{};for(var i in this.elements){n=this.elements[i];t=true;if(e){if(typeof e=="object"){if(e.hidden===false)t=n.isVisible();if(t&&e.disabled===false)t=n.isEnabled()}else t=e.call(this,n)}if(t)r[i]=n.getValue();else delete r[i]}return r},clear:function(){this._is_form_dirty=false;var e={};for(var t in this.elements)if(this.elements[t]._allowsClear)e[t]=this.elements[t]._settings.defaultValue||"";this.setValues(e)},_onLoad:function(e,t,n){var r=this.data.driver;var i;if(n===-1){i=t}else{i=r.toObject(e,t)}if(i){var s=r.getRecords(i)[0];this.setValues(r?r.getDetails(s):e)}else this._onLoadError(e,t,n);this.callEvent("onAfterLoad",[])},_mark_invalid:function(e,t){if(e&&this.elements[e]){this._clear_invalid(e,t);webix.html.addCss(this.elements[e]._viewobj,"webix_invalid")}},_clear_invalid:function(e,t){if(e&&this.elements[e]&&this.elements[e]._dataobj.firstChild)webix.html.removeCss(this.elements[e]._viewobj,"webix_invalid")}};webix.protoUI({name:"toolbar",defaults:{type:"toolbar"},_render_borders:true,_form_classname:"webix_toolbar",_form_vertical:false,$init:function(e){if(!e.borderless)this._contentobj.style.borderWidth="1px";this._contentobj.className+=" "+this._form_classname},_recollect_elements:function(){var e=this;e.elements={};webix.ui.each(this,function(t){if(t._settings.name&&t.getValue&&t.setValue){e.elements[t._settings.name]=t;t.mapEvent({onbeforetabclick:e,onaftertabclick:e,onitemclick:e})}if(t.setValues)return false});this.setDirty(false)},_parse_cells_ext_end:function(){this._recollect_elements()},_parse_cells_ext:function(e){var t=this._settings;if(t.elements&&!e){this._collection=e=t.elements;this._vertical_orientation=this._form_vertical;delete t.elements}if(this._settings.elementsConfig)this._rec_apply_settings(this._collection,t.elementsConfig);return e},_rec_apply_settings:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];webix.extend(r,t);var i=t;if(r.elementsConfig)i=webix.extend(webix.extend({},r.elementsConfig),t);var s;if(r.body)s=[r.body];else s=r.rows||r.cols||r.cells||r.body;if(s)this._rec_apply_settings(s,i)}},$getSize:function(e,t){var n=webix.ui.layout.prototype.$getSize.call(this,e,t);var r=this.getParentView();var i=this._vertical_orientation?3:1;if(r&&this._vertical_orientation!=r._vertical_orientation)n[i]+=1e5;webix.debug_size_box(this,n,true);return n},render:function(){},refresh:function(){this.render()}},webix.Scrollable,webix.AtomDataLoader,webix.Values,webix.ui.layout,webix.ValidateData);webix.protoUI({name:"template",$init:function(e){var t=this._template_types[e.type];if(t){webix.extend(e,t);if(e.borderless){delete e._inner;this._set_inner(e)}}if(this._dataobj==this._viewobj){this._dataobj=webix.html.create("DIV");this._dataobj.className=" webix_template";this._viewobj.appendChild(this._dataobj)}else this._dataobj.className+=" webix_template";this.attachEvent("onAfterLoad",this._render_me);this.attachEvent("onAfterRender",this._correct_width_scroll)},setValues:function(e){this.data=e;this.render()},$skin:function(){this._template_types.header.height=this._template_types.section.height=webix.skin.$active.barHeight},_template_types:{header:{css:"webix_header"},section:{css:"webix_section",borderless:true},clean:{css:"webix_clean",borderless:true}},onClick_setter:function(e){this.on_click=webix.extend(this.on_click||{},e,true);if(!this._onClick)webix.extend(this,webix.MouseEvents);return e},defaults:{template:webix.template.empty},_render_me:function(){this._not_render_me=false;this._probably_render_me();this.resize()},_probably_render_me:function(){if(!this._not_render_me){this._not_render_me=true;this.render()}},src_setter:function(e){this._not_render_me=true;this.callEvent("onBeforeLoad",[]);webix.ajax(e,webix.bind(function(e){this._settings.template=webix.template(e);this._render_me();this.callEvent("onAfterLoad",[])},this));return e},_correct_width_scroll:function(){if(this._settings.autoheight){this._last_size=null;this.resize()}if(this._settings.scroll&&this._settings.scroll.indexOf("x")!=-1)this._dataobj.style.width=this._dataobj.scrollWidth+"px"},content_setter:function(e){if(e){this._not_render_me=true;this.render=function(){};this._dataobj.appendChild(webix.toNode(e))}},refresh:function(){this.render()},setHTML:function(e){this._settings.template=function(){return e};this.refresh()},setContent:function(e){this._dataobj.innerHTML="";this.content_setter(e)},waitMessage_setter:function(e){webix.extend(this,webix.OverlayBox);return e},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){this._probably_render_me();if(this._settings.autoheight){var n=this.getTopParentView();clearTimeout(n._template_resize_timer);n._template_resize_timer=webix.delay(this.resize,this)}}},$getSize:function(e,t){if(this._settings.autoheight&&!this._settings.type)this._settings.height=this._get_auto_height();return webix.ui.view.prototype.$getSize.call(this,e,t)},_get_auto_height:function(){var e;this._probably_render_me();var t=webix.skin.$active.layoutPadding.space;this._dataobj.style.height="1px";if(webix.env.isFF){var n=this._dataobj.style;var r=n.overflow;n.overflow="scroll";e=this._dataobj.scrollHeight+t;n.overflow=r}else e=this._dataobj.scrollHeight+t;this._dataobj.style.height="";return e},_one_time_scroll:true},webix.Scrollable,webix.AtomDataLoader,webix.AtomRender,webix.EventSystem,webix.ui.view);webix.protoUI({name:"iframe",$init:function(e){this._dataobj=this._contentobj;this._contentobj.innerHTML="<iframe style='width:100%; height:100%' frameborder='0' onload='var t= $$(\""+e.id+"\"); if (t) t.callEvent(\"onAfterLoad\",[]);' src='about:blank'></iframe>"},load:function(e){this.src_setter(e)},src_setter:function(e){this.getIframe().src=e;this.callEvent("onBeforeLoad",[]);return e},getIframe:function(){return this._contentobj.getElementsByTagName("iframe")[0]},getWindow:function(){return this.getIframe().contentWindow},waitMessage_setter:function(e){if(e)webix.extend(this,webix.OverlayBox);return e}},webix.ui.view,webix.EventSystem);webix.OverlayBox={$init:function(){if(webix.isUndefined(this._overlay)&&this.attachEvent){this.attachEvent("onBeforeLoad",this.showOverlay);this.attachEvent("onAfterLoad",this.hideOverlay);this._overlay=null}},showOverlay:function(e){if(!this._overlay){this._overlay=webix.html.create("DIV",{"class":"webix_loading_overlay"},e||"");webix.html.insertBefore(this._overlay,this._viewobj.firstChild,this._viewobj);this._viewobj.style.position="relative"}},hideOverlay:function(){if(this._overlay){webix.html.remove(this._overlay);this._overlay=null}}};webix.protoUI({name:"scrollview",defaults:{scroll:"y",scrollSpeed:"0ms"},$init:function(){this._viewobj.className+=" webix_scrollview"},body_setter:function(e){e.borderless=true;this._body_cell=webix.ui._view(e);this._body_cell._parent_cell=this;this._dataobj.appendChild(this._body_cell._viewobj)},getChildViews:function(){return[this._body_cell]},getBody:function(){return this._body_cell},resizeChildren:function(){this._desired_size=this._body_cell.$getSize(0,0);this._resizeChildren()},_resizeChildren:function(){var e=Math.max(this._content_width,this._desired_size[0]);var t=Math.max(this._content_height,this._desired_size[2]);this._body_cell.$setSize(e,t);this._dataobj.style.width=this._body_cell._content_width+"px";this._dataobj.style.height=this._body_cell._content_height+"px";if(webix.env.touch){var n=this.getScrollState();var r=this._body_cell._content_height-this._content_height;if(r<n.y)this.scrollTo(null,r)}},$getSize:function(e,t){var n=this._desired_size=this._body_cell.$getSize(0,0);var r=webix.ui.view.prototype.$getSize.call(this,e,t);var i=webix.ui.scrollSize;if(this._settings.scroll=="x"){r[2]=Math.max(r[2],n[2])+i;r[3]=Math.min(r[3],n[3])+i}else if(this._settings.scroll=="y"){r[0]=Math.max(r[0],n[0])+i;r[1]=Math.min(r[1],n[1])+i}return r},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){this._resizeChildren()}},_replace:function(e){this._body_cell.destructor();this._body_cell=e;this._body_cell._parent_cell=this;this._bodyobj.appendChild(this._body_cell._viewobj);this.resize()},showView:function(e){var t=webix.$$(e).$view.offsetTop-webix.$$(e).$view.parentNode.offsetTop;this.scrollTo(0,t)}},webix.Scrollable,webix.ui.view);webix.TreeRenderStack={$init:function(){webix.assert(this.render,"TreeRenderStack :: Object must use RenderStack first")},_toHTMLItem:function(e){var t=this.data._marks[e.id];this.callEvent("onItemRender",[e]);return this.type.templateStart(e,this.type,t)+(e.$template?this.type["template"+e.$template](e,this.type,t):this.type.template(e,this.type,t))+this.type.templateEnd()},_toHTMLItemObject:function(e){this._html.innerHTML=this._toHTMLItem(e);return this._html.firstChild},_toHTML:function(e){webix.assert(!e.$template||this.type["template"+e.$template],"RenderStack :: Unknown template: "+e.$template);var t="<div class='webix_tree_branch_"+e.$level+"'>"+this._toHTMLItem(e);if(e.open){if(e.$count==-1){this.loadBranch(e.id)}t+=this._toHTMLLevel(e.id)}t+="</div>";return t},_toHTMLLevel:function(e){var t="";var n=this.data.branch[e];if(n){t+="<div class='webix_tree_leaves'>";var r=n.length-1;for(var i=0;i<=r;i++){var s=this.getItem(n[i]);this.type._tree_branch_render_state[s.$level]=i==r;t+=this._toHTML(s)}t+="</div>"}return t},render:function(e,t,n){webix.TreeRenderStack._obj=this;if(!this.isVisible(this._settings.id)||this.$blockRender)return;if(webix.debug_render)webix.log("Render: "+this.name+"@"+this._settings.id);if(e){var r;var i=this.getItem(e);if(n!="add"){r=this.getItemNode(e);if(!r)return}switch(n){case"branch":var s=r.parentNode;var o=this._toHTMLObject(i);webix.html.insertBefore(o,s);webix.html.remove(s);this._htmlmap=null;break;case"paint":case"update":var o=this._htmlmap[e]=this._toHTMLItemObject(i);webix.html.insertBefore(o,r);webix.html.remove(r);break;case"delete":webix.html.remove(r.parentNode);break;case"add":var u;if(i.$parent==0){u=this._dataobj.firstChild}else{u=this.getItemNode(i.$parent);if(u)u=u.nextSibling}if(u){var a=this.data.getNextSiblingId(e);a=this.getItemNode(a);if(a)a=a.parentNode;var o=this._toHTMLObject(i);this._htmlmap[e]=o.firstChild;webix.html.insertBefore(o,a,u)}break;default:return false}this.callEvent("onPartialRender",[e,t,n])}else if(this.callEvent("onBeforeRender",[this.data])){this.type._tree_branch_render_state=[];this._dataobj.innerHTML=this._toHTMLLevel(0);this._htmlmap=null;this.callEvent("onAfterRender",[])}this.type._tree_branch_render_state=0;webix.TreeRenderStack._obj=null;return true},getItemNode:function(e){if(this._htmlmap)return this._htmlmap[e];this._htmlmap={};var t=this._dataobj.getElementsByTagName("DIV");for(var n=0;n<t.length;n++){var r=t[n].getAttribute(this._id);if(r)this._htmlmap[r]=t[n]}return this.getItemNode(e)},_branch_render_supported:1};webix.SelectionModel={$init:function(){this._selected=webix.toArray();webix.assert(this.data,"SelectionModel :: Component doesn't have DataStore");this.data.attachEvent("onStoreUpdated",webix.bind(this._data_updated,this));this.data.attachEvent("onStoreLoad",webix.bind(this._data_loaded,this));this.data.attachEvent("onAfterFilter",webix.bind(this._data_filtered,this));this.data.attachEvent("onIdChange",webix.bind(this._id_changed,this))},_id_changed:function(e,t){for(var n=this._selected.length-1;n>=0;n--)if(this._selected[n]==e)this._selected[n]=t},_data_filtered:function(){for(var e=this._selected.length-1;e>=0;e--){if(this.data.getIndexById(this._selected[e])<0){var t=this._selected[e];this.removeCss(t,"webix_selected",true);this._selected.splice(e,1);this.callEvent("onSelectChange",[t])}}},_data_updated:function(e,t,n){if(n=="delete"){if(this.loadBranch){for(var r=this._selected.length-1;r>=0;r--)if(!this.exists(this._selected[r]))this._selected.splice(r,1)}else this._selected.remove(e)}else if(!e&&!this.data.count()&&!this.data._filter_order){this._selected=webix.toArray()}},_data_loaded:function(){if(this._settings.select)this.data.each(function(e){if(e.$selected)this.select(e.id)},this)},_select_mark:function(e,t,n){if(!n&&!this.callEvent("onBeforeSelect",[e,t]))return false;if(t)this.addCss(e,"webix_selected",true);else this.removeCss(e,"webix_selected",true);if(n)n.push(e);else{if(t)this._selected.push(e);else this._selected.remove(e);this._refresh_selection(e)}return true},select:function(e,t){var n=arguments[2];var r=arguments[3];if(!e)return this.selectAll();if(webix.isArray(e)){for(var i=0;i<e.length;i++)this.select(e[i],i?1:t,n,r);return}webix.assert(this.data.exists(e),"Incorrect id in select command: "+e);if(r&&this._selected.length)return this.selectAll(this._selected[this._selected.length-1],e);if(!n&&!t&&(this._selected.length!=1||this._selected[0]!=e)){this._silent_selection=true;this.unselectAll();this._silent_selection=false}if(this.isSelected(e)){if(n)this.unselect(e);return}if(this._select_mark(e,true)){this.callEvent("onAfterSelect",[e])}},unselect:function(e){if(!e)return this.unselectAll();if(!this.isSelected(e))return;this._select_mark(e,false)},selectAll:function(e,t){var n;var r=[];if(e||t)n=this.data.getRange(e||null,t||null);else n=this.data.getRange();n.each(function(e){if(!this.data.getMark(e.id,"webix_selected")){this._selected.push(e.id);this._select_mark(e.id,true,r)}},this);this._refresh_selection(r)},unselectAll:function(){var e=[];this._selected.each(function(t){this._select_mark(t,false,e)},this);this._selected=webix.toArray();this._refresh_selection(e)},isSelected:function(e){return this._selected.find(e)!=-1},getSelectedId:function(e){switch(this._selected.length){case 0:return e?[]:"";case 1:return e?[this._selected[0]]:this._selected[0];default:return[].concat(this._selected)}},getSelectedItem:function(e){var t=this.getSelectedId(true);if(t.length>1||e){for(var n=t.length-1;n>=0;n--)t[n]=this.getItem(t[n]);return t}else if(t.length)return this.getItem(t[0])},_is_mass_selection:function(e){return e.length>100||e.length>this.data.count/2},_refresh_selection:function(e){if(typeof e!="object")e=[e];if(!e.length)return;if(this._is_mass_selection(e))this.data.refresh();else for(var t=0;t<e.length;t++)this.render(e[t],this.data.getItem(e[t]),"update");if(!this._silent_selection)this.callEvent("onSelectChange",[e])}};webix.TreeDataMove={$init:function(){webix.assert(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(e,t,n,r){r=r||{};r.copy=true;return this.move(e,t,n,r)},_next_move_index:function(e,t,n){if(t&&e){var r=this.getBranchIndex(e);return r+(n==this&&n.getBranchIndex(t)<r?0:1)}},move:function(e,t,n,r){r=r||{};t=t||0;var i=r.newId||e;var s=r.parent||0;n=n||this;webix.assert(n.data,"moving attempt to component without datastore");if(!n.data)return;if(webix.isArray(e)){for(var o=0;o<e.length;o++){var u=this.move(e[o],t,n,r);t=n._next_move_index(u,e[o+1],this)}return}if(this!=n||r.copy){i=n.data.add(n._externalData(this.getItem(e),i),t,s||0);if(this.data.branch[e]&&n.getBranchIndex){var a=this.data._scheme_serialize;this.data._scheme_serialize=function(e){var t=webix.copy(e);delete t.$parent;delete t.$level;delete t.$child;if(n.data.pull[t.id])t.id=webix.uid();return t};var f={data:this.serialize(e),parent:i};this.data._scheme_serialize=a;n.parse(f)}if(!r.copy)this.data.remove(e)}else{if(e==s||this.isBranch(e,s))return;var l=this.getItem(e);var c=this.data.branch[s];if(!c)c=this.data.branch[s]=[];var h=this.data.branch[l.$parent];var p=webix.PowerArray.find.call(h,e);if(t<0)t=Math.max(c.length-1,0);if(h===c&&t===p)return;webix.PowerArray.removeAt.call(h,p);webix.PowerArray.insertAt.call(c,e,Math.min(c.length,t));h=this.data.branch[l.$parent];if(l.$parent&&l.$parent!="0")this.getItem(l.$parent).$count--;if(s&&s!="0"){var d=n.getItem(s);d.$count++;this._set_level_rec(l,d.$level+1)}else this._set_level_rec(l,1);l.$parent=s;n.data.callEvent("onDataMove",[e,t,s])}this.refresh();return i},_set_level_rec:function(e,t){e.$level=t;var n=this.data.branch[e.id];if(n)for(var r=0;r<n.length;r++)this._set_level_rec(this.getItem(n[r]),t+1)},_drag_pause:function(e){if(e&&!e.header)this.open(e)},$dropAllow:function(e){if(e.from!=e.to)return true;for(var t=0;t<e.source.length;t++)if(e.source==e.target||this.isBranch(e.source,e.target))return false;return true},_externalData:function(e,t){var n=webix.DataMove._externalData.call(this,e,t);delete n.open;return n}};webix.TreeDataLoader={$init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(this._sync_hierarchy,this));this._feed_common=this._feed_commonA;this.loadNext=this._loadNextA;this.$ready.unshift(this._sync_hierarchy)},_feed_commonA:function(e,t,n){var r=this.data.url;this.load(r+(r.indexOf("?")==-1?"?":"&")+(this.count()?"continue=true&":"")+"parent="+encodeURIComponent(e),[this._feed_callback,n])},loadBranch:function(e,t,n){e=e||0;this.data.url=this.data.url||n;if(this.callEvent("onDataRequest",[e,t,n])&&this.data.url)this.data.feed.call(this,e,0,t)},_loadNextA:function(e,t,n,r,i){webix.assert(false,"Dynamical loading not implemented")},_sync_hierarchy:function(e,t,n){if(!n||n=="add"||n=="delete"||n=="branch"){this.data._sync_to_order(this)}}};webix.TreeStore={name:"TreeStore",$init:function(){this._filterMode={showSubItems:true};this.branch={0:[]};this.attachEvent("onParse",function(e,t){this._set_child_scheme(e.child);var n=e.getInfo(t)._parent})},filterMode_setter:function(e){return webix.extend(this._filterMode,e,true)},_filter_reset:function(e){if(this._filter_branch&&!e){this.branch=this._filter_branch;this.order=webix.copy(this.branch[0]);for(var t in this.branch)if(t!="0")this.getItem(t).$count=this.branch[t].length;delete this._filter_branch}},_filter_core:function(e,t,n,r){if(!n||!this._filter_branch){this._filter_branch=this.branch;this.branch=webix.clone(this.branch)}this.branch[0]=this._filter_branch_rec(e,t,this.branch[0],1,r||{})},_filter_branch_rec:function(e,t,n,r,i){var s=[];var o=i.level&&i.level!=r;for(var u=0;u<n.length;u++){var a=n[u];var f=this.getItem(a);var l=false;var c=this.branch[a];if(o){l=true}else if(e(this.getItem(a),t)){s.push(a);var h=this.getParentId(a);while(h!=0){this.getItem(h).open=1;h=this.getParentId(h)}if(i.level||i.showSubItems)continue}else{l=true}if(o||!i.level){if(c){var p=this.branch[a]=this._filter_branch_rec(e,t,c,r+1,i);f.$count=p.length;if(l&&p.length)s.push(a)}}}return s},count:function(){if(this.order.length)return this.order.length;var e=0;this.eachOpen(function(){e++});return e},changeId:function(e,t){if(this.branch[e]){var n=this.branch[t]=this.branch[e];for(var r=0;r<n.length;r++)this.getItem(n[r]).$parent=t;delete this.branch[e]}var i=this.getItem(e).$parent;if(i!=="0"){var s=webix.PowerArray.find.call(this.branch[i],e);this.branch[i][s]=t}return webix.DataStore.prototype.changeId.call(this,e,t)},clearAll:function(){this.branch={0:[]};webix.DataStore.prototype.clearAll.call(this)},getPrevSiblingId:function(e){var t=this.branch[this.getItem(e).$parent];var n=webix.PowerArray.find.call(t,e)-1;if(n>=0)return t[n];return null},getNextSiblingId:function(e){var t=this.branch[this.getItem(e).$parent];var n=webix.PowerArray.find.call(t,e)+1;if(n<t.length)return t[n];return null},getParentId:function(e){return this.getItem(e).$parent},getFirstChildId:function(e){var t=this.branch[e];if(t&&t.length)return t[0];return null},isBranch:function(e,t){var n=this.branch[e];if(n&&n.length){for(var r=0;r<n.length;r++){if(n[r]==t)return true;if(this.isBranch(n[r],t))return true}}return false},getBranchIndex:function(e){var t=this.branch[this.pull[e].$parent];return webix.PowerArray.find.call(t,e)},_set_child_scheme:function(e){if(typeof e=="string")this._datadriver_child=function(t){var n=t[e];if(n)delete t[e];return n};else this._datadriver_child=e},_inner_parse:function(e,t){var n=e._parent||0;for(var r=0;r<t.length;r++){var i=this.driver.getDetails(t[r]);var s=this.id(i);this.pull[s]=i;if(this._scheme_init)this._scheme_init(i);this._extraParser(i,n)}if(n&&n!=="0")this.pull[n].$count=t.length},_extraParser:function(e,t,n){e.$parent=t||0;e.$level=n||(t!="0"?this.pull[t].$level+1:1);if(!this.branch[e.$parent])this.branch[e.$parent]=[];this.branch[e.$parent].push(e.id);var r=this._datadriver_child(e);if(e.webix_kids){return e.$count=-1}if(!r)return e.$count=0;if(!webix.isArray(r))r=[r];e.$count=r.length;for(var i=0;i<r.length;i++){var s=webix.DataDriver.json.getDetails(r[i]);this.pull[this.id(s)]=s;if(this._scheme_init)this._scheme_init(s);this._extraParser(s,e.id,e.$level+1)}},_sync_to_order:function(e){this.order=webix.toArray();this._sync_each_child(0,e)},_sync_each_child:function(e,t){var n=this.branch[e];for(var r=0;r<n.length;r++){var i=n[r];this.order.push(i);if(this.pull[i].open){if(this.pull[i].$count==-1)t.loadBranch(i);else if(this.pull[i].$count)this._sync_each_child(i,t)}}},provideApi:function(e,t){var n=["getPrevSiblingId","getNextSiblingId","getParentId","getFirstChildId","isBranch","getBranchIndex","filterMode_setter"];for(var r=0;r<n.length;r++)e[n[r]]=this._methodPush(this,n[r]);webix.DataStore.prototype.provideApi.call(this,e,t)},getTopRange:function(){return webix.toArray([].concat(this.branch[0])).map(function(e){return this.getItem(e)},this)},eachChild:function(e,t,n,r){var i=this.branch;if(r&&this._filter_branch)i=this._filter_branch;var s=i[e];if(s)for(var o=0;o<s.length;o++)t.call(n||this,this.getItem(s[o]))},each:function(e,t,n,r){this.eachChild(r||0,function(r){e.call(t||this,r);if(r.$count)this.each(e,t,n,r.id)},this,n)},eachOpen:function(e,t,n){this.eachChild(n||0,function(n){e.call(t||this,n);if(n.$count&&n.open)this.eachOpen(e,t,n.id)})},eachSubItem:function(e,t){var n=this.branch[e||0];if(n)for(var r=0;r<n.length;r++){var i=n[r];if(this.branch[i]){t.call(this,this.getItem(i),true);this.eachSubItem(i,t)}else t.call(this,this.getItem(i),false)}},_sort_core:function(e){var t=this._sort._create(e);for(var n in this.branch){var r=this.branch[n];var i=[];for(var s=0;s<r.length;s++)i.push(this.pull[r[s]]);i.sort(t);for(var s=0;s<r.length;s++)i[s]=i[s].id;this.branch[n]=i}},add:function(e,t,n){var r=false;this.branch[n||0]=this.order=webix.toArray(this.branch[n||0]);var i=this.getItem(n||0);if(i){if(!i.$count)r=true;i.$count++}e.$count=0;e.$level=i?i.$level+1:1;e.$parent=i?i.id:0;var s=webix.DataStore.prototype.add.call(this,e,t);if(r)this.refresh(n);return s},_rec_remove:function(e,t){var n=this.pull[e];if(n.$count>0){var r=this.branch[e];for(var i=0;i<r.length;i++)this._rec_remove(r[i],true)}delete this.branch[e];delete this.pull[e];if(this._marks[e])delete this._marks[e]},remove:function(e){webix.assert(this.exists(e),"Not existing ID in remove command"+e);var t=this.pull[e];var n=t.$parent||0;if(this.callEvent("onBeforeDelete",[e])===false)return false;this._rec_remove(e);this.callEvent("onAfterDelete",[e]);var r=this.pull[n];var i=this.branch[n];if(i.length==1&&n)delete this.branch[n];else webix.toArray(i).remove(e);if(r){r.$count--;if(!r.$count){r.open=0;this.refresh(r.id)}}this.callEvent("onStoreUpdated",[e,t,"delete"])},serialize:function(e){var t=this.branch[e||0];var n=[];for(var r=0;r<t.length;r++){var i=this.pull[t[r]];var s;if(this._scheme_serialize){s=this._scheme_serialize(i);if(s===false)continue}else s=webix.copy(i);if(i.$count)s.data=this.serialize(i.id);n.push(s)}return n}};webix.TreeType={space:function(e,t){var n="";for(var r=1;r<e.$level;r++)n+="<div class='webix_tree_none'></div>";return n},icon:function(e,t){if(e.$count){if(e.open)return"<div class='webix_tree_open'></div>";else return"<div class='webix_tree_close'></div>"}else return"<div class='webix_tree_none'></div>"},checkbox:function(e,t){if(e.nocheckbox)return"";return"<input type='checkbox' class='webix_tree_checkbox' "+(e.checked?"checked":"")+(e.disabled?" disabled":"")+">"},folder:function(e,t){if(e.icon)return"<div class='webix_tree_file webix_tree_"+e.icon+"'></div>";if(e.$count){if(e.open)return"<div class='webix_tree_folder_open'></div>";else return"<div class='webix_tree_folder'></div>"}return"<div class='webix_tree_file'></div>"}};webix.TreeAPI={open:function(e){if(!e)return;var t=this.getItem(e);if(!t.$count)return;if(this.callEvent("onBeforeOpen",[e])){t.open=true;this.data.callEvent("onStoreUpdated",[e,0,"branch"]);this.callEvent("onAfterOpen",[e])}},close:function(e){if(!e)return;if(this.callEvent("onBeforeClose",[e])){this.getItem(e).open=false;this.data.callEvent("onStoreUpdated",[e,0,"branch"]);this.callEvent("onAfterClose",[e])}},openAll:function(e){this.data.eachSubItem(e||0,function(e,t){if(t)e.open=true});this.data.refresh()},closeAll:function(e){this.data.eachSubItem(e||0,function(e,t){if(t)e.open=false});this.data.refresh()},_tree_check_uncheck:function(e,t){if(this._settings.threeState)return this._tree_check_uncheck_3(e,arguments.length>1?t:"");var n=this.getItem(e);n.checked=arguments.length>1?t:!n.checked;this.callEvent("onItemCheck",[e,n.checked])},isBranchOpen:function(e){if(e=="0")return true;var t=this.getItem(e);if(t.open)return this.isBranchOpen(t.$parent);return false},getOpenItems:function(){var e=[];for(var t in this.data.branch){if(this.exists(t)&&this.getItem(t).open)e.push(t)}return e},getState:function(){return{open:this.getOpenItems(),select:this.getSelectedId(true)}},_repeat_set_state:function(e,t){var n=this.data.attachEvent("onStoreLoad",function(){e.setState.call(e,t);e.data.detachEvent(n);e=null})},setState:function(e){var t=false;var n=false;if(e.open){this.closeAll();var r=e.open;for(var i=0;i<r.length;i++){var s=this.getItem(r[i]);if(s&&s.$count){s.open=true;if(s.$count==-1){this._repeat_set_state(this,e);this.refresh();return 0}}}this.refresh()}if(e.select&&this.select){var o=e.select;this.unselect();for(var i=0;i<o.length;i++)if(this.exists(o[i]))this.select(o[i],true)}return 1}};webix.TreeClick={webix_tree_open:function(e,t){this.close(t);return false},webix_tree_close:function(e,t){this.open(t);return false},webix_tree_checkbox:function(e,t){this._tree_check_uncheck(t);return false}};webix.TreeCollection=webix.proto({name:"TreeCollection",$init:function(){webix.extend(this.data,webix.TreeStore,true)}},webix.TreeDataLoader,webix.DataCollection);webix.DragOrder={_do_not_drag_selection:true,$drag:function(e,t){var n=webix.DragItem.$drag.call(this,e,t);if(n){var r=webix.DragControl.getContext();if(this.getBranchIndex)this._drag_order_stored_left=this._drag_order_complex?this.getItem(r.start).$level*16:0;if(!r.fragile)this.addCss(r.start,"webix_transparent")}return n},$dragPos:function(e,t,n){var r=webix.html.offset(this.$view);var i=r.x+(this._drag_order_complex?+r.width-webix.ui.scrollSize-1:1);n.style.display="none";var s=document.elementFromPoint(i,e.y);if(s!=this._last_sort_dnd_node){var o=webix.$$(s);if(o&&o==this){var u=this.locate(s);if(u&&this._translate_id)u=this._translate_id(u);var a=webix.DragControl.getContext().start;if(u){if(u!=this._last_sort_dnd_node){if(u!=a){var f,l;if(this.getBranchIndex){f={parent:this.getParentId(u)};l=this.getBranchIndex(u)}else{f={};l=this.getIndexById(u)}if(this.callEvent("onBeforeDropOrder",[a,l,t,f])){this.move(a,l,this,f);this._last_sort_dnd_node=u}}webix.DragControl._last=this._contentobj}}else{u="$webix-last";if(this._last_sort_dnd_node!=u){if(!this.callEvent("onBeforeDropOrder",[a,-1,t,{parent:0}]))return;this._last_sort_dnd_node=u}}}}n.style.display="block";r.y+=this._header_height;e.x=this._drag_order_stored_left||r.x;e.y=e.y-18;if(e.y<r.y)e.y=r.y;else{var c=r.y+this.$view.offsetHeight-60;if(e.y>c)e.y=c}webix.DragControl._skip=true},$dragIn:function(){return false},$drop:function(e,t,n){var r=webix.DragControl.getContext();var i=r.start;this.removeCss(i,"webix_transparent");var s=this.getIndexById(i);this.callEvent("onAfterDropOrder",[i,s,n]);if(r.fragile)this.refresh()}};webix.DragItem={_initHandlers:function(e,t,n){if(!t)webix.DragControl.addDrop(e._contentobj,e,true);if(!n)webix.DragControl.addDrag(e._contentobj,e);this.attachEvent("onDragOut",function(e,t){this.$dragMark(e,t)})},drag_setter:function(e){if(e){if(e=="order")webix.extend(this,webix.DragOrder,true);if(e=="inner")this._inner_drag_only=true;this._initHandlers(this,e=="source",e=="target");delete this.drag_setter}return e},$dragIn:function(e,t,n){var r=this.locate(n)||null;var i=webix.DragControl._drag_context;if((this._inner_drag_only||i.from._inner_drag_only)&&i.from!==this)return false;var s=webix.DragControl.getMaster(t);var o=this.getItemNode(r,n)||this._dataobj;if(o==webix.DragControl._landing)return o;i.target=r;i.to=s;if(this._auto_scroll_delay)this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay);this._auto_scroll_delay=webix.delay(this._auto_scroll,this,[webix.html.pos(n),r],250);if(!this.$dropAllow(i,n)||!this.callEvent("onBeforeDragIn",[i,n])){i.to=i.target=null;return null}this.$dragMark(i,n);return o},$dropAllow:function(){return true},_drag_pause:function(e){},_auto_scroll:function(e,t){var n=this._body||this.$view;var r=webix.html.offset(n);var i=r.y;var s=i+n.offsetHeight;var o=this.getScrollState();var u=false;this._drag_pause(t);if(e.y<i+30){this.scrollTo(o.x,o.y-60);u=true}else if(e.y>s-30){this.scrollTo(o.x,o.y+60);u=true}if(u)this._auto_scroll_delay=webix.delay(this._auto_scroll,this,[e],100)},$dragOut:function(e,t,n,r){var i=this.locate(r)||null;var s=webix.DragControl._drag_context;if((s.target||"").toString()==(i||"").toString())return null;if(this._auto_scroll_delay)this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay);s.target=s.to=null;this.callEvent("onDragOut",[s,r]);return null},$drop:function(e,t,n){if(this._auto_scroll_delay)this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay);var r=webix.DragControl._drag_context;r.to=this;var i=this._translate_id?this._translate_id(r.target):r.target;if(this.getBranchIndex){if(i){r.parent=this.getParentId(i);r.index=this.getBranchIndex(i)}}else r.index=i?this.getIndexById(i):this.count();this.$dragMark({},n);if(r.from&&r.from!=r.to&&r.from.callEvent){r.from.callEvent("onBeforeDropOut",[r,n])}if(!this.callEvent("onBeforeDrop",[r,n]))return;this._context_to_move(r,n);this.callEvent("onAfterDrop",[r,n])},_context_to_move:function(e,t){webix.assert(e.from,"Unsopported d-n-d combination");if(e.from){var n={parent:e.parent,mode:e.pos};e.from.move(e.source,e.index,e.to,n)}},$drag:function(e,t){var n=this.locate(t);if(this._translate_id)n=this._translate_id(n,true);if(n){var r=[n];if(this.getSelectedId&&!this._do_not_drag_selection){var i=this.getSelectedId(true,true);if(i&&i.length>1&&webix.PowerArray.find.call(i,n)!=-1){var s={};var r=[];for(var o=0;o<i.length;o++)s[i[o]]=true;for(var o=0;o<this.data.order.length;o++){var u=this.data.order[o];if(s[u])r.push(u)}}}var a=webix.DragControl._drag_context={source:r,start:n};a.fragile=this.addRowCss&&webix.env.touch&&(webix.env.isWebKit||webix.env.isFF);a.from=this;if(this.callEvent("onBeforeDrag",[a,t])){if(webix.Touch)webix.Touch._start_context=null;return a.html||this.$dragHTML(this.getItem(n),t)}}return null},$dragHTML:function(e,t){return this._toHTML(e)},$dragMark:function(e,t){var n=null;if(e.target)n=this._translate_id?this._translate_id(e.target):e.target;if(this._marked&&this._marked!=n){if(!e.fragile)this.removeCss(this._marked,"webix_drag_over");this._marked=null}if(!this._marked&&n){this._marked=n;if(!e.fragile)this.addCss(n,"webix_drag_over");return n}if(e.to){return true}else return false}};webix.Group={$init:function(){webix.extend(this.data,webix.GroupStore);this.data.attachEvent("onClearAll",webix.bind(function(){this.data._not_grouped_order=this.data._not_grouped_pull=null;this._group_level_count=0},this))},group:function(e){this.data.ungroup(true);this.data.group(e)},ungroup:function(e){this.data.ungroup(e)}};webix.GroupMethods={sum:function(e,t){t=t||this;var n=0;for(var r=0;r<t.length;r++)n+=e(t[r])*1;return n},min:function(e,t){t=t||this;var n=Infinity;for(var r=0;r<t.length;r++)if(e(t[r])*1<n)n=e(t[r])*1;return n*1},max:function(e,t){t=t||this;var n=-Infinity;for(var r=0;r<t.length;r++)if(e(t[r])*1>n)n=e(t[r])*1;return n*1},count:function(e,t){return t.length},any:function(e,t){return e(t[0])},string:function(e,t){return e.$name}};webix.GroupStore={ungroup:function(e){if(this.getBranchIndex)return this._ungroup_tree.apply(this,arguments);if(this._not_grouped_order){this.order=this._not_grouped_order;this.pull=this._not_grouped_pull;this._not_grouped_pull=this._not_grouped_order=null}if(!e){this.callEvent("onStoreUpdated",[])}},_group_processing:function(e){this.blockEvent();this.group(e);this.unblockEvent()},_group_prop_accessor:function(e){if(typeof e=="function")return e;var t=function(t){return t[e]};t.$name=e;return t},group:function(e){if(this.getBranchIndex)return this._group_tree.apply(this,arguments);var t=this._group_prop_accessor(e.by);if(!e.map[t])e.map[t]=[t,this._any];var n={};var r=[];this.each(function(i){var s=t(i);if(!n[s]){r.push({id:s,$group:true,$row:e.row});n[s]=webix.toArray()}n[s].push(i)});for(var i in e.map){var s=e.map[i][1]||"any";var o=this._group_prop_accessor(e.map[i][0]);if(typeof s!="function"){webix.assert(webix.GroupMethods[s],"unknown grouping rule: "+s);s=webix.GroupMethods[s]}for(var u=0;u<r.length;u++){r[u][i]=s.call(this,o,n[r[u].id])}}this._not_grouped_order=this.order;this._not_grouped_pull=this.pull;this.order=webix.toArray();this.pull={};for(var u=0;u<r.length;u++){var a=this.id(r[u]);this.pull[a]=r[u];this.order.push(a)}this.callEvent("onStoreUpdated",[])},_group_tree:function(e,t){this._group_level_count=(this._group_level_count||0)+1;var n;if(typeof e=="string"){n={by:this._group_prop_accessor(e),map:{}};n.map[e]=[e]}else if(typeof e=="function"){n={by:e,map:{}}}else n=e;var r;if(t)r=this.getItem(t).$level;else{t=0;r=0}var i=this.branch[t];var s=this._group_prop_accessor(n.by);var o=[];var u=[];for(var a=0;a<i.length;a++){var f=this.getItem(i[a]);var l=s(f);var c=r+"$"+l;var h=this.branch[c];if(!h){var p=this.pull[c]={id:c,value:l,$group:true,$row:n.row};u.push(p);h=this.branch[c]=[];h._formath=[];o.push(c)}h.push(f.id);h._formath.push(f)}this.branch[t]=o;for(var d in n.map){var v=n.map[d][1]||"any";var m=this._group_prop_accessor(n.map[d][0]);if(typeof v!="function"){webix.assert(webix.GroupMethods[v],"unknown grouping rule: "+v);v=webix.GroupMethods[v]}for(var a=0;a<u.length;a++)u[a][d]=v.call(this,m,this.branch[u[a].id]._formath)}for(var a=0;a<u.length;a++){var g=u[a];if(this.hasEvent("onGroupCreated"))this.callEvent("onGroupCreated",[g.id,g.value,this.branch[g.id]._formath]);if(n.footer){var y="footer$"+g.id;var b=this.pull[y]={id:y,$footer:true,value:g.value,$level:r,$count:0,$parent:g.id,$row:n.footer.row};for(var d in n.footer){var v=n.footer[d][1]||"any";var m=this._group_prop_accessor(n.footer[d][0]);if(typeof v!="function"){webix.assert(webix.GroupMethods[v],"unknown grouping rule: "+v);v=webix.GroupMethods[v]}b[d]=v.call(this,m,this.branch[u[a].id]._formath)}this.branch[g.id].push(b.id);this.callEvent("onGroupFooter",[b.id,b.value,this.branch[g.id]._formath])}delete this.branch[g.id]._formath}this._fix_group_levels(o,t,r+1);this.callEvent("onStoreUpdated",[])},_ungroup_tree:function(e,t){if(!t&&!this._group_level_count)return;this._group_level_count=Math.max(0,this._group_level_count-1);e=e||0;var n=[];var r=this.branch[e];for(var i=0;i<r.length;i++){var s=r[i];var o=this.branch[s];if(o)n=n.concat(o);delete this.pull[s];delete this.branch[s]}this.branch[e]=n;for(var i=n.length-1;i>=0;i--){if(this.pull[n[i]].$footer)n.splice(i,1)}this._fix_group_levels(n,0,1);this.callEvent("onStoreUpdated",[])},_fix_group_levels:function(e,t,n){if(t)this.getItem(t).$count=e.length;for(var r=0;r<e.length;r++){var i=this.pull[e[r]];i.$level=n;i.$parent=t;var s=this.branch[i.id];if(s)this._fix_group_levels(s,i.id,n+1)}}};webix.clipbuffer={_area:null,_blur_id:null,_ctrl:0,init:function(){if(this._area!==null)return this._area;webix.destructors.push(this);this._area=document.createElement("textarea");this._area.style.width="1px";this._area.style.height="1px";this._area.style.left="3px";this._area.style.top="3px";this._area.style.position="fixed";this._area.style.opacity="0";document.body.appendChild(this._area);webix.event(document.body,"keydown",webix.bind(function(e){var t=e.keyCode;var n=!!(e.ctrlKey||e.metaKey);if(t===86&&n)webix.delay(this._paste,this,[],100)},this));return this._area},destructor:function(){this._area=null},set:function(e){this.init();this._area.value=e;this.focus()},focus:function(){this.init();this._area.focus();this._area.select()},_paste:function(){var e=this._area.value;var t=webix.UIManager.getFocus();if(t){t.callEvent("onPaste",[e]);this._area.select()}}};webix.CopyPaste={clipboard_setter:function(e){if(e===true||e===1)e="modify";this.attachEvent("onAfterSelect",function(e){var t=this.getItem(e);var n=this.type.templateCopy(t);webix.clipbuffer.set(n,this);webix.clipbuffer.focus()});this.attachEvent("onPaste",function(e){if(!webix.isUndefined(this._paste[this._settings.clipboard]))this._paste[this._settings.clipboard].call(this,e)});this.attachEvent("onFocus",function(){webix.clipbuffer.focus()});return e},_paste:{insert:function(e){this.add({value:e})},modify:function(e){var t=this.getSelectedId(true);for(var n=0;n<t.length;n++){this.getItem(t[n]).value=e;this.refresh(t[n])}},custom:function(e){}},templateCopy_setter:function(e){this.type.templateCopy=webix.template(e)},type:{templateCopy:function(e){return this.template(e)}}};webix.KeysNavigation={_navigation_helper:function(e){return function(t){if(t&&t.moveSelection&&t.config.navigation&&!t._in_edit_mode)return t.moveSelection(e);return true}},moveSelection:function(e){var t=this.getSelectedId();if(t){if(e=="top"){t=this.getFirstId()}else if(e=="bottom"){t=this.getLastId()}else if(e=="up"||e=="left"||e=="pgup"){var n=this.getIndexById(t);var r=e=="pgup"?10:1;t=this.getIdByIndex(Math.max(0,n-r))}else if(e=="down"||e=="right"||e=="pgdown"){var n=this.getIndexById(t);var r=e=="pgdown"?10:1;t=this.getIdByIndex(Math.min(this.count()-1,n+r))}else{webix.assert(false,"Not supported selection moving mode");return}this.showItem(t);this.select(t)}return false},navigation_setter:function(e){if(e&&!webix.UIManager._global_nav_grid_hotkeys){webix.UIManager._global_nav_grid_hotkeys=true;webix.UIManager.addHotKey("up",this._navigation_helper("up"));webix.UIManager.addHotKey("down",this._navigation_helper("down"));webix.UIManager.addHotKey("pageup",this._navigation_helper("pgup"));webix.UIManager.addHotKey("pagedown",this._navigation_helper("pgdown"));webix.UIManager.addHotKey("home",this._navigation_helper("top"));webix.UIManager.addHotKey("end",this._navigation_helper("bottom"));webix.UIManager.addHotKey("right",this._navigation_helper("right"));webix.UIManager.addHotKey("left",this._navigation_helper("left"))}return e}};webix.protoUI({name:"tree",$init:function(){this._viewobj.className+=" webix_tree";webix.extend(this.data,webix.TreeStore,true);webix.extend(this.on_click,webix.TreeClick);this.data.provideApi(this,true)},_id:"webix_tm_id",on_context:{},on_dblclick:{},on_click:{webix_tree_item:function(e,t){if(this._settings.activeTitle){var n=this.getItem(t);if(n.open)this.close(t);else this.open(t)}if(this._settings.select){if(this._settings.select=="multiselect"||this._settings.multiselect){if(this._settings.multiselect=="level"){var r=this.getSelectedId(true)[0];if(r&&this.getParentId(t)!=this.getParentId(r))return}this.select(t,false,e.ctrlKey||this._settings.multiselect=="touch",e.shiftKey)}else this.select(t)}}},_paste:{insert:function(e){var t=this.getSelectedId()||"0";this.add({value:e},null,t)},modify:function(e){var t=this.getSelectedId(true);for(var n=0;n<t.length;n++){this.getItem(t[n]).value=e;this.refresh(t[n])}},custom:function(e){}},_drag_order_complex:true,$dragHTML:function(e){return"<div class='borderless'>"+this.type.template(e,this.type)+"</div>"},type:webix.extend({template:function(e,t){var n=t["template"+e.level]||t.templateCommon;return n.apply(this,arguments)},classname:function(e,t,n){var r="webix_tree_item";if(e.$css)r+=" "+e.$css;if(n&&n.$css)r+=" "+n.$css;return r},templateCommon:webix.template("{common.icon()} {common.folder()} <span>#value#</span>"),templateStart:webix.template('<div webix_tm_id="#id#" class="{common.classname()}">'),templateEnd:webix.template("</div>"),templateCopy:webix.template("#value#")},webix.TreeType),moveSelection:function(e){var t=this.getSelectedId(true);if(t.length==1){t=t[0];if(e=="top"){t=this.getFirstId()}else if(e=="bottom"){t=this.getLastId()}else if(e=="up"||e=="left"||e=="pgup"){var n=this.getIndexById(t);var r=e=="pgup"?10:1;t=this.getIdByIndex(Math.max(0,n-r))}else if(e=="down"||e=="right"||e=="pgdown"){var n=this.getIndexById(t);var r=e=="pgdown"?10:1;t=this.getIdByIndex(Math.min(this.count()-1,n+r))}else{webix.assert(false,"Not supported selection moving mode");return}this.showItem(t);this.select(t)}return false}},webix.AutoTooltip,webix.Group,webix.TreeAPI,webix.DragItem,webix.TreeDataMove,webix.SelectionModel,webix.KeysNavigation,webix.MouseEvents,webix.Scrollable,webix.TreeDataLoader,webix.ui.proto,webix.TreeRenderStack,webix.CopyPaste,webix.EventSystem);webix.TreeStateCheckbox={_init_render_tree_state:function(){if(this._branch_render_supported){var e=this.render;this.render=function(t,n,r){var i=e.apply(this,arguments);if(this._settings.threeState&&i&&n!="checkbox")this._setThirdState.apply(this,arguments)};this._init_render_tree_state=function(){}}},threeState_setter:function(e){if(e)this._init_render_tree_state();return e},_setThirdState:function(e){var t,n,r,i,s;r=[];s=this;if(e&&!s.data.pull[e]){e=0}if(!e||s.data.pull[e].$count){n=this._getAllLeaves(e);n.sort(function(e,t){return s.data.pull[t].$level-s.data.pull[e].$level});for(t=0;t<n.length;t++){if(!t||s.data.pull[n[t]].$parent!=s.data.pull[n[t-1]].$parent)r=r.concat(s._setParentThirdState(n[t]))}}else{r=r.concat(s._setParentThirdState(e))}i={};for(t=0;t<r.length;t++){if(!i[r[t]]){i[r[t]]=1;this._setCheckboxIndeterminate(r[t])}}s=null},_setCheckboxIndeterminate:function(e){var t,n;n=this.getItemNode(e);if(n){this.render(e,"checkbox","update");if(this.getItem(e).indeterminate){n=this.getItemNode(e);t=n.getElementsByTagName("input")[0];if(t)t.indeterminate=this.getItem(e).indeterminate}}},_setParentThirdState:function(e){var t,n,r,i,s,o,u,a;i=this.getParentId(e);o=this;s=[];while(i&&i!="0"){u=0;n=0;this.data.eachChild(i,function(e){if(e.indeterminate){u++}else if(e.checked){n++}});t=r=a=false;var f=this.getItem(i);if(n==f.$count){t=true}else if(n>0||u>0){r=true}if(r||r!=f.indeterminate)a=true;f.indeterminate=r;if(f.checked!=t)a=true;f.checked=t;if(a){s.push(i);i=this.getParentId(i)}else i=0}return s},getChecked:function(){var e=[];var t=this;this.data.eachSubItem(0,function(n){if(t.isChecked(n.id))e.push(n.id)});return e},_tree_check_uncheck_3:function(e,t){var n=this.getItem(e);if(n){if(t==="")t=!n.checked;if(n.checked!=t){n.checked=t;this._correctThreeState(e);var r=this._setParentThirdState(e);if(this._branch_render_supported&&r.length<5){for(var i=0;i<r.length;i++)this._setCheckboxIndeterminate(r[i])}else this.refresh();this.callEvent("onItemCheck",[e,t])}}},checkItem:function(e){this._tree_check_uncheck(e,true);this.updateItem(e)},uncheckItem:function(e){this._tree_check_uncheck(e,false);this.updateItem(e)},_checkUncheckAll:function(e,t){var n=t?"checkItem":"uncheckItem";if(!e)e=0;else this[n](e);if(this._settings.threeState){if(!e)this.data.eachChild(0,function(e){this[n](e.id)},this)}else this.data.each(function(e){this[n](e.id)},this,e)},checkAll:function(e){this._checkUncheckAll(e,true)},uncheckAll:function(e){this._checkUncheckAll(e,false)},_correctThreeState:function(e){var t,n,r;var i=this.getItem(e);i.indeterminate=false;r=i.checked;this.data.eachSubItem(e,function(e){e.indeterminate=false;e.checked=r});if(this._branch_render_supported&&this.isBranchOpen(i.$parent)){this.render(e,0,"branch")}},isChecked:function(e){return this.getItem(e).checked},_getAllLeaves:function(e){var t=[];this.data.eachSubItem(e,function(e,n){if(!n)t.push(e.id)});return t}};if(webix.ui.tree)webix.extend(webix.ui.tree,webix.TreeStateCheckbox,true);webix.type(webix.ui.tree,{name:"lineTree",css:"webixLineTree",icon:function(e,t){var n="";var r="";for(var i=1;i<=e.$level;i++){if(i==e.$level)var r=e.$count?e.open?"webix_tree_open ":"webix_tree_close ":"webix_tree_none ";var s=this._icon_src(e,t,i);if(s)n+="<div class='"+r+" webix_tree_img webix_tree_"+s+"'></div>"}return n},_icon_src:function(e,t,n){var r=t._tree_branch_render_state;var i=webix.TreeRenderStack._obj;if(r===0&&i){var s=e.$level;var o=e.id;r=[];while(s){var u=i.getParentId(o);var a=i.data.branch[u];if(a[a.length-1]==o)r[s]=true;o=u;s--}t._tree_branch_render_state=r}if(!r)return 0;if(n==e.$level){var f=3;if(!e.$parent){if(e.$index===0)f=4}if(r[e.$level])f=2;if(e.$count){if(e.open)return"minus"+f;else return"plus"+f}else return"line"+f}else{if(!r[n])return"line1";return"blank"}}});webix.NavigationButtons={_renderPanel:function(){webix.html.remove(this._navPanel);this._navPanel=webix.html.create("DIV",{"class":"webix_nav_panel "+"webix_nav_panel_"+this._settings.navigation.type,style:"z-index:"+webix.ui.zIndex()+";"},"");this._viewobj.appendChild(this._navPanel);this._renderNavItems();this._renderNavButtons();this._setLinkEventHandler()},_setLinkEventHandler:function(){var e=[];if(this._navPanel)e[0]=webix.event(this._navPanel,"click",webix.bind(function(e){var t=e.srcElement||e.target;var n=false;while(t!=this._navPanel&&!n){var r=t.getAttribute(this._linkAttr);if(r){n=true;this._showPanelBind(r)}t=t.parentNode}},this));if(this._prevNavButton)e[1]=webix.event(this._prevNavButton,"click",webix.bind(function(e){this._showNavItem(-1)},this));if(this._nextNavButton)e[1]=webix.event(this._nextNavButton,"click",webix.bind(function(e){this._showNavItem(1)},this));this.attachEvent("onDestruct",function(){for(var t=0;t<e.length;t++){this.detachEvent(e[t])}e=null})},_showNavItem:function(e){if(this._cells){var t=this._active_cell+e;if(t>=this._cells.length||t<0){t=t<0?this._cells.length-1:0}this.setActiveIndex(t)}},_showPanelBind:function(e){if(this._cells)webix.$$(e).show()},_renderNavItems:function(){var e,t;t=this._settings.navigation;if(t.items){this._linkAttr=t.linkAttr||"bind_id";if(!this._navPanel)this._renderPanel();else this._clearPanel();var n=this._cells?this._cells:this.data.order;if(n.length>1){for(var r=0;r<n.length;r++){e=webix.html.create("DIV",{"class":"webix_nav_item webix_nav_"+(r==this._active_cell?"active":"inactive")},"<div></div>");var i=this._cells?this._cells[r]._settings.id:n[r];if(i)e.setAttribute(this._linkAttr,i);this._navPanel.appendChild(e)}}}},_clearPanel:function(){if(this._navPanel){var e=this._navPanel.childNodes;for(var t=e.length-1;t>=0;t--)webix.html.remove(e[t])}},_renderNavButtons:function(){var e,t;t=this._settings.navigation;if(t.buttons){if(this._prevNavButton)webix.html.remove(this._prevNavButton);if(this._prevNavButton)webix.html.remove(this._nextNavButton);var n=webix.ui.zIndex();this._prevNavButton=webix.html.create("DIV",{"class":"webix_nav_button_"+t.type+" webix_nav_button_prev ",style:"z-index:"+n+";"},'<div class="webix_nav_button_inner"></div>');this._viewobj.appendChild(this._prevNavButton);this._nextNavButton=webix.html.create("DIV",{"class":"webix_nav_button_"+t.type+" webix_nav_button_next ",style:"z-index:"+n+";"},'<div class="webix_nav_button_inner"></div>');this._viewobj.appendChild(this._nextNavButton)}}};webix.protoUI({name:"list",_listClassName:"webix_list",$init:function(e){webix.html.addCss(this._viewobj,this._listClassName+((e.layout||this.defaults.layout)=="x"?"-x":""));this.data.provideApi(this,true);this._auto_resize=webix.bind(this._auto_resize,this);this.data.attachEvent("onStoreLoad",this._auto_resize);this.data.attachEvent("onStoreUpdated",this._auto_resize);this.data.attachEvent("onSyncApply",this._auto_resize);this.attachEvent("onAfterRender",this._correct_width_scroll)},$dragHTML:function(e,t){if(this._settings.layout=="y"&&this.type.width=="auto"){this.type.width=this._content_width;var n=this._toHTML(e);this.type.width="auto";return n}return this._toHTML(e)},defaults:{select:false,scroll:true,layout:"y"},_id:"webix_l_id",on_click:{webix_list_item:function(e,t){if(this._settings.select){this._no_animation=true;if(this._settings.select=="multiselect"||this._settings.multiselect)this.select(t,false,e.ctrlKey||this._settings.multiselect=="touch",e.shiftKey);else this.select(t);this._no_animation=false}}},getVisibleCount:function(){return Math.floor(this._content_height/this.type.height)},_auto_resize:function(){if(this._settings.autoheight||this._settings.autowidth)this.resize()},_auto_height_calc:function(e){var t=this.data.$pagesize||this.count();this._onoff_scroll(e&&e<t);if(this._settings.autoheight&&t<(e||Infinity))e=t;return Math.max(this.type.height*e,this._settings.minHeight||0)},_auto_width_calc:function(e){var t=this.data.$pagesize||this.count();this._onoff_scroll(e&&e<t);if(this._settings.autowidth&&t<(e||Infinity))e=t;return this.type.width*e},_correct_width_scroll:function(){if(this._settings.layout=="x"&&this.type.width!="auto")this._dataobj.style.width=this.type.width*this.count()+"px"},$getSize:function(e,t){if(this._settings.layout=="y"){if(this.type.width!="auto")this._settings.width=this.type.width;if(this._settings.yCount||this._settings.autoheight)this._settings.height=this._auto_height_calc(this._settings.yCount)||1}else{if(this.type.height!="auto")this._settings.height=this.type.height;if(this._settings.xCount||this._settings.autowidth)this._settings.width=this._auto_width_calc(this._settings.xCount)||1}return webix.ui.view.prototype.$getSize.call(this,e,t)},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)},type:{css:"",widthSize:function(e,t){return t.width+(t.width>-1?"px":"")},heightSize:function(e,t){return t.height+(t.height>-1?"px":"")},classname:function(e,t,n){var r="webix_list_item";if(e.$css)r+=" "+e.$css;if(n&&n.$css)r+=" "+n.$css;return r},template:webix.template("#value#"),width:"auto",templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;">'),templateEnd:webix.template("</div>")},$skin:function(){this.type.height=webix.skin.$active.listItemHeight}},webix.KeysNavigation,webix.DataMove,webix.DragItem,webix.MouseEvents,webix.SelectionModel,webix.Scrollable,webix.ui.proto,webix.CopyPaste);webix.protoUI({name:"grouplist",defaults:{animate:{}},_listClassName:"webix_grouplist",$init:function(){webix.extend(this.data,webix.TreeStore,true);this.data.count=function(){return this.order.length};this.data.provideApi(this,true);this.data.attachEvent("onClearAll",webix.bind(this._onClear,this));this._onClear()},_onClear:function(){this._nested_cursor=[];this._nested_chain=[]},$setSize:function(){if(webix.ui.view.prototype.$setSize.apply(this,arguments)){this._dataobj.style.width=this._content_width}},on_click:{webix_list_item:function(e,t){if(this._in_animation){return false}for(var n=0;n<this._nested_chain.length;n++){if(this._nested_chain[n]==t){for(var r=n;r<this._nested_chain.length;r++){this.data.getItem(this._nested_chain[r]).$template=""}if(!n){this._nested_cursor=this.data.branch[0];this._nested_chain=[]}else{this._nested_cursor=this.data.branch[this._nested_chain[n-1]];this._nested_chain.splice(n)}this._is_level_down=false;return this.render()}}var i=this.getItem(t);if(i.$count){this._is_level_down=true;this._nested_chain.push(t);i.$template="Back";this._nested_cursor=this.data.branch[i.id];return this.render()}else{if(this._settings.select){this._no_animation=true;if(this._settings.select=="multiselect"||this._settings.multiselect)this.select(t,false,this._settings.multiselect=="touch"||e.ctrlKey,e.shiftKey);else this.select(t);this._no_animation=false}}}},getOpenState:function(){return{parents:this._nested_chain,branch:this._nested_cursor}},render:function(e,t,n,r){var i,s;this._nested_chain=webix.copy(this._nested_chain);this._nested_cursor=webix.copy(this._nested_cursor);if(this._nested_chain.length){for(i=0;i<this._nested_chain.length;i++){if(!this.data.branch[this._nested_chain[i]]){this._nested_chain.splice(i,1);i--}}}s=this._nested_chain.length?this._nested_chain[this._nested_chain.length-1]:0;this._nested_cursor=webix.copy(this.data.branch[s]);if(!this._nested_cursor.length&&this._nested_chain.length){this._nested_cursor=[s];this._nested_chain.pop()}if(this._in_animation){return webix.delay(this.render,this,arguments,100)}for(i=0;i<this._nested_cursor.length;i++)this.data.getItem(this._nested_cursor[i]).$template="";if(!this._nested_cursor.length)this._nested_cursor=this.data.branch[0];this.data.order=webix.toArray([].concat(this._nested_chain).concat(this._nested_cursor));if(this.callEvent("onBeforeRender",[this.data])){if(this._no_animation||!this._dataobj.innerHTML||!(webix.animate.isSupported()&&this._settings.animate)||this._prev_nested_chain_length==this._nested_chain.length){webix.RenderStack.render.apply(this,arguments)}else{if(this.callEvent("onBeforeRender",[this.data])){if(!this._back_scroll_states)this._back_scroll_states=[];var o=this._dataobj.cloneNode(false);o.innerHTML=this.data.getRange().map(this._toHTML,this).join("");var u=webix.extend({},this._settings.animate);u.direction=this._is_level_down?"left":"right";var a=[webix.clone(u),webix.clone(u)];if(this._is_level_down){this._back_scroll_states.push(this.getScrollState());if(webix.Touch&&webix.Touch.$active){a[0].y=0;a[1].y=-this.getScrollState().y}}else{var f=this._back_scroll_states.pop();if(webix.Touch&&webix.Touch.$active){a[0].y=-f.y;a[1].y=-this.getScrollState().y}}var l=webix.animate.formLine(o,this._dataobj,u);if(webix.Touch&&webix.Touch.$active)webix.Touch._set_matrix(o,0,this._is_level_down?0:a[0].y,"0ms");u.master=this;u.callback=function(){this._dataobj=o;if(!this._is_level_down){if(webix.Touch&&webix.Touch.$active){webix.delay(function(){webix.Touch._set_matrix(o,0,a[0].y,"0ms")},this)}else if(f)this.scrollTo(0,f.y)}else if(!(webix.Touch&&webix.Touch.$active)){this.scrollTo(0,0)}webix.animate.breakLine(l);u.master=u.callback=null;this._htmlmap=null;this._in_animation=false;this.callEvent("onAfterRender",[])};this._in_animation=true;webix.animate(l,a)}}this._prev_nested_chain_length=this._nested_chain.length}},templateBack_setter:function(e){this.type.templateBack=webix.template(e)},templateItem_setter:function(e){this.type.templateItem=webix.template(e)},templateGroup_setter:function(e){this.type.templateGroup=webix.template(e)},type:{template:function(e,t){if(e.$count)return t.templateGroup(e,t);return t.templateItem(e,t)},css:"group",classname:function(e,t,n){return"webix_list_item webix_"+(e.$count?"group":"item")+(e.$template?"_back":"")+(n&&n.webix_selected?" webix_selected ":"")+(e.$css?e.$css:"")},templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.width}px; height:{common.height}px; padding:{common.padding}px; margin:{common.margin}px; overflow:hidden;">'),templateBack:webix.template("#value#"),templateItem:webix.template("#value#"),templateGroup:webix.template("#value#"),templateEnd:function(e,t){var n="";if(e.$count)n+="<div class='webix_arrow_icon'></div>";n+="</div>";return n}},showItem:function(e){var t,n;if(e){t=this.getItem(e);n=t.$parent;if(t.$count)n=t.id}this._nested_cursor=this.data.branch[n||0];this._nested_chain=[];while(n){this.getItem(n).$template="Back";this._nested_chain.unshift(n);n=this.getItem(n).$parent}this._no_animation=true;this.render();this._no_animation=false;webix.RenderStack.showItem.call(this,e)}},webix.Group,webix.ui.list);webix.type(webix.ui.grouplist,{});webix.protoUI({name:"unitlist",_id:"webix_item_id",uniteBy_setter:webix.template,sort_setter:function(e){if(typeof e!="object")e={};this._mergeSettings(e,{dir:"asc",as:"string"});return e},render:function(e,t,n,r){var i=this._settings;if(!this.isVisible(i.id))return;if(webix.debug_render)webix.log("Render: "+this.name+"@"+i.id);if(!i.uniteBy){if(webix.debug_render){webix.log("uniteBy is undefined")}return false}if(e){var s=this.getItemNode(e);if(s&&n=="update"&&this._settings.uniteBy.call(this,t)==this.getItem(e).$unitValue){var o=this._htmlmap[e]=this._toHTMLObject(t);webix.html.insertBefore(o,s);webix.html.remove(s);return}}if(this.callEvent("onBeforeRender",[this.data])){this.units=null;this._setUnits();if(this.units){this._dataobj.innerHTML=this._getUnitRange().map(this._toHTML,this).join("");this._htmlmap=null}this.callEvent("onAfterRender",[])}},getUnits:function(){var e=[];if(this.units){for(var t in this.units){e.push(t)}}return e},getUnitList:function(e){return this.units?this.units[e]:null},_toHTML:function(e){var t=this.data._marks[e.id];webix.assert(!e.$template||this.type["template"+e.$template],"RenderStack :: Unknown template: "+e.$template);this.callEvent("onItemRender",[e]);if(e.$unit){return this.type.templateStartHeader(e,this.type)+this.type.templateHeader.call(this,e.$unit)+this.type.templateEnd(e,this.type)}return this.type.templateStart(e,this.type,t)+(e.$template?this.type["template"+e.$template]:this.type.template)(e,this.type)+this.type.templateEnd(e,this.type)},_getUnitRange:function(){var e,t,n,r;e=[];var i=this.data.$min||0;var s=this.data.$max||Infinity;var o=0;for(n in this.units){e.push({$unit:n});r=this.units[n];for(t=0;t<r.length;t++){if(o==i)e=[{$unit:n}];e.push(this.getItem(r[t]));if(o==s)return webix.toArray(e);o++}}return webix.toArray(e)},_setUnits:function(){var e=this;this.units={};this.data.each(function(t){var n=e._settings.uniteBy.call(this,t);t.$unitValue=n;if(!e.units[n])e.units[n]=[];e.units[n].push(t.id)})},type:{headerHeight:20,templateHeader:function(e){return"<span class='webix_unit_header_inner'>"+e+"</span>"},templateStart:function(e,t,n){if(e.$unit)return t.templateStartHeader.apply(this,arguments);var r="webix_list_item webix_list_"+t.css+"_item"+(n&&n.webix_selected?" webix_selected":"");var i="width:"+t.width+"px; height:"+t.height+"px; padding:"+t.padding+"px; margin:"+t.margin+"px; overflow:hidden;"+(t.layout&&t.layout=="x"?"float:left;":"");return'<div webix_item_id="'+e.id+'" class="'+r+'" style="'+i+'">'},templateStartHeader:function(e,t){var n="webix_unit_header webix_unit_"+t.css+"_header"+(e.$selected?"_selected":"");var r="width:"+t.width+"px; height:"+t.headerHeight+"px; overflow:hidden;";return'<div webix_unit_id="'+e.$unit+'" class="'+n+'" style="'+r+'">'}},$skin:function(){this.type.headerHeight=webix.skin.$active.unitHeaderHeight||20}},webix.ui.list);webix.EditAbility={defaults:{editaction:"click"},$init:function(e){this._editors={};this._in_edit_mode=0;this._edit_open_time=0;this._contentobj.style.position="relative";if(e)e.onDblClick=e.onDblClick||{};this.attachEvent("onAfterRender",this._refocus_inline_editor);if(this._settings.editable)this._init_edit_events_once()},_refocus_inline_editor:function(){var e=this.getEditor();if(e&&e.$inline&&!e.getPopup){var t=this._locateInput(e);if(t&&t!=e.node){var n=e.node.value;e.node=t;t.value=n;t.focus();if(typeof t.selectionStart=="number"){t.selectionStart=t.selectionEnd=t.value.length}else if(typeof t.createTextRange!="undefined"){var r=t.createTextRange();r.collapse(false);r.select()}}else this.editStop()}},editable_setter:function(e){if(e)this._init_edit_events_once();return e},_init_edit_events_once:function(){webix.attachEvent("onEditEnd",webix.bind(function(){if(this._in_edit_mode)this.editStop()},this));webix.attachEvent("onClick",webix.bind(function(e){if(this._in_edit_mode&&new Date-this._edit_open_time>200){if(!this._last_editor||this._last_editor.popupType||!e||this._last_editor.node!=e.target)this.editStop()}},this));if(this.data.attachEvent)this.data.attachEvent("onIdChange",webix.bind(function(e,t){this._changeEditorId(e,t)},this));this.attachEvent("onItemClick",function(e){if(this._settings.editable&&this._settings.editaction=="click")this.edit(e)});this.attachEvent("onItemDblClick",function(e){if(this._settings.editable&&this._settings.editaction=="dblclick")this.edit(e)});this._reset_active_editor=webix.bind(function(){this._edit_open_time=new Date},this);this._init_edit_events_once=function(){};if(this._component_specific_edit_init)this._component_specific_edit_init()},_handle_live_edits:function(){webix.delay(function(){var e=this.getEditor();if(e&&e.config.liveEdit){var t={value:e.getValue(),old:e.value};if(t.value==t.old)return;e.value=t.value;this._set_new_value(e,t.value);this.callEvent("onLiveEdit",[t,e])}},this)},_show_editor_form:function(e){var t=this._settings.form;if(typeof t!="string")this._settings.form=t=webix.ui(t).config.id;var t=webix.$$(t);var n=t.setValues?t:t.getChildViews()[0];n.setValues(this.getItem(e.row||e));t.config.master=this.config.id;t.show(this.getItemNode(e));var r=n.getChildViews()[0];if(r.focus())r.focus()},edit:function(e,t,n){if(!this.callEvent("onBeforeEditStart",[e]))return;if(this._settings.form)return this._show_editor_form(e);var r=this._get_editor_type(e);if(r){if(this.getEditor(e))return;if(!t)this.editStop();this._edit_open_time=new Date;webix.assert(webix.editors[r],"Invalid editor type: "+r);var i=webix.extend({},webix.editors[r]);var s=this._init_editor(e,i,n);if(i.config.liveEdit)this._live_edits_handler=this.attachEvent("onKeyPress",this._handle_live_edits);var o=i.getPopup?i.getPopup(s)._viewobj:s;if(o)webix.event(o,"click",this._reset_active_editor);if(s)webix.event(s,"change",this._on_editor_change,{view:this,id:e});if(n!==false)i.focus();webix.UIManager.setFocus(this,true);this.callEvent("onAfterEditStart",[e]);return i}return null},getEditor:function(e){if(!e)return this._last_editor;return this._editors[e]},_changeEditorId:function(e,t){var n=this._editors[e];if(n){this._editors[t]=n;n.id=t;delete this._editors[e]}},_on_editor_change:function(e){if(this.view.hasEvent("onEditorChange"))this.view.callEvent("onEditorChange",[this.id,this.view.getEditorValue(this.id)])},_get_edit_config:function(e){return this._settings},_init_editor:function(e,t,n){var r=t.config=this._get_edit_config(e);var i=t.render();if(t.$inline)i=this._locateInput(e);t.node=i;var s=this.getItem(e);var o=s[this._settings.editValue||"value"];if(webix.isUndefined(o))o="";t.setValue(o);t.value=o;this._addEditor(e,t);if(n!==false)this.showItem(e);if(!t.$inline)this._sizeToCell(e,i,true);if(t.afterRender)t.afterRender();return i},_locate_cell:function(e){return this.getItemNode(e)},_locateInput:function(e){var t=this._locate_cell(e);if(t)t=t.getElementsByTagName("input")[0]||t;return t},_get_editor_type:function(e){return this._settings.editor},_addEditor:function(e,t){t.id=e;this._editors[e]=this._last_editor=t;this._in_edit_mode++},_removeEditor:function(e){if(this._last_editor==e)this._last_editor=0;if(e.destroy)e.destroy();delete e.popup;delete e.node;delete this._editors[e.id];this._in_edit_mode--},focusEditor:function(e){var t=this.getEditor.apply(this,arguments);if(t&&t.focus)t.focus()},editCancel:function(){this.editStop(null,null,true)},editStop:function(e){var t=arguments[2];var n=1;if(!e){this._for_each_editor(function(e){n=n*this._editStop(e,t)})}else n=this._editStop(this._editors[e],t);return n},_cellPosition:function(e){var t=this.getItemNode(e);return{left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight,width:t.offsetWidth,parent:this._contentobj}},_sizeToCell:function(e,t,n){if(!t.style)return;var r=this._cellPosition(e);t.style.top=r.top+"px";t.style.left=r.left+"px";t.style.width=r.width-1+"px";t.style.height=r.height-1+"px";t.top=r.top;if(n)r.parent.appendChild(t)},_for_each_editor:function(e){for(var t in this._editors)e.call(this,this._editors[t])},_editStop:function(e,t){if(!e)return;var n={value:e.getValue(),old:e.value};if(this.callEvent("onBeforeEditStop",[n,e,t])){if(!t){if(n.value!=n.old)this.updateItem(this._set_new_value(e,n.value))}if(e.$inline)e.node=null;else webix.html.remove(e.node);this._removeEditor(e);if(this._live_edits_handler)this.detachEvent(this._live_edits_handler);this.callEvent("onAfterEditStop",[n,e,t]);return 1}return 0},validateEditor:function(e){var t=true;if(this._settings.rules){var n=this.getEditor(e);var r=n.column||this._settings.editValue||"value";var i=this._settings.rules[r];var s=this._settings.rules.$all;if(i||s){var o=this.data.getItem(n.row||n.id);var u=n.getValue();var a=n.getInputNode();if(i)t=i.call(this,u,o,r);if(s)t=s.call(this,u,o,r)&&t;if(t)webix.html.removeCss(a,"webix_invalid");else webix.html.addCss(a,"webix_invalid");webix.callEvent("onLiveValidation",[n,t,o,u])}}return t},getEditorValue:function(e){var t;if(arguments.length===0)t=this._last_editor;else t=this.getEditor(e);if(t)return t.getValue()},getEditState:function(){return this._last_editor||false},editNext:function(e,t){e=e!==false;if(this._in_edit_mode==1||t){var n=this._find_cell_next(this._last_editor||t,function(e){if(this._get_editor_type(e))return true;return false},e);if(this.editStop()){if(n){this.edit(n);this._after_edit_next(n)}return false}}},_after_edit_next:function(){},_find_cell_next:function(e,t,n){var r=this.getIndexById(e.id);var i=this.data.order;if(n){for(var s=r+1;s<i.length;s++){if(t.call(this,i[s]))return i[s]}}else{for(var s=r-1;s>=0;s--){if(t.call(this,i[s]))return i[s]}}return null},_set_new_value:function(e,t){this.getItem(e.id)[this._settings.editValue||"value"]=t;return e.id}};webix.editors={text:{focus:function(){this.getInputNode(this.node).focus();this.getInputNode(this.node).select()},getValue:function(){return this.getInputNode(this.node).value},setValue:function(e){this.getInputNode(this.node).value=e},getInputNode:function(){return this.node.firstChild},render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<input type='text'>")}},"inline-checkbox":{render:function(){return{}},getValue:function(){return this.node.checked},setValue:function(){},focus:function(){this.node.focus()},getInputNode:function(){},$inline:true},"inline-text":{render:function(){return{}},getValue:function(){return this.node.value},setValue:function(){},focus:function(){this.node.select();this.node.focus()},getInputNode:function(){},$inline:true},checkbox:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().checked},setValue:function(e){this.getInputNode().checked=!!e},getInputNode:function(){return this.node.firstChild.firstChild},render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<div><input type='checkbox'></div>")}},select:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().value},setValue:function(e){this.getInputNode().value=e},getInputNode:function(){return this.node.firstChild},render:function(){var e="";var t=this.config.options||this.config.collection;webix.assert(t,"options not defined for select editor");if(t.data&&t.data.each)t.data.each(function(t){e+="<option value='"+t.id+"'>"+t.value+"</option>"});else{if(webix.isArray(t)){for(var n=0;n<t.length;n++)e+="<option value='"+t[n]+"'>"+t[n]+"</option>"}else for(var r in t){e+="<option value='"+r+"'>"+t[r]+"</option>"}}return webix.html.create("div",{"class":"webix_dt_editor"},"<select>"+e+"</select>")}},popup:{focus:function(){this.getInputNode().focus()},destroy:function(){this.getPopup().hide()},getValue:function(){return this.getInputNode().getValue()||""},setValue:function(e){this.getPopup().show(this.node);this.getInputNode().setValue(e)},getInputNode:function(){return this.getPopup().getChildViews()[0]},getPopup:function(){if(!this.config.popup)this.config.popup=this.createPopup();return webix.$$(this.config.popup)},createPopup:function(){if(this.config.popup)return webix.$$(this.config.popup);var e=webix.editors.$popup[this.popupType];if(typeof e!="string"){e=webix.editors.$popup[this.popupType]=webix.ui(e);this.popupInit(e)}return e._settings.id},popupInit:function(e){},popupType:"text",render:function(){return{}},$inline:true}};webix.editors.color=webix.extend({focus:function(){},popupType:"color",popupInit:function(e){e.getChildViews()[0].attachEvent("onSelect",function(e){webix.callEvent("onEditEnd",[e])})}},webix.editors.popup);webix.editors.date=webix.extend({focus:function(){},popupType:"date",setValue:function(e){this._is_string=typeof e=="string";webix.editors.popup.setValue.call(this,e)},getValue:function(){return this.getInputNode().getValue(this._is_string?webix.i18n.parseFormatStr:"")||""},popupInit:function(e){e.getChildViews()[0].attachEvent("onDateSelect",function(e){webix.callEvent("onEditEnd",[e])})}},webix.editors.popup);webix.editors.combo=webix.extend({_create_suggest:function(e){if(this.config.popup){return this.config.popup.config.id}else if(e){if(typeof e=="string")return e;if(e.linkInput)return e._settings.id;var t={view:"suggest",type:"list"};if(typeof e=="object")webix.extend(t,e,true);var n=webix.ui(t);return n.config.id}else return this._shared_suggest(e)},_shared_suggest:function(){var e=webix.editors.combo;return e._suggest=e._suggest||this._create_suggest(true)},render:function(){var e=webix.html.create("div",{"class":"webix_dt_editor"},"<input type='text'>");var t=this.config.suggest=this._create_suggest(this.config.suggest);if(t){webix.$$(t).linkInput(e.firstChild,true);webix.event(e.firstChild,"click",webix.bind(this.showPopup,this))}return e},showPopup:function(){var e=webix.$$(this.config.suggest);var t=e.getList();var n=this.getInputNode();var r=this.getValue();e.show(n);if(r){webix.assert(t.exists(r),"Option with ID "+r+" doesn't exist");if(t.exists(r)){t.select(r);t.showItem(r)}}else{t.unselect();t.showItem(t.getFirstId())}e._last_input_target=n},afterRender:function(){this.showPopup()},setValue:function(e){this._initial_value=e;if(this.config.suggest){var t=webix.$$(this.config.suggest);var n=this.config.collection||this.config.options;if(n)t.getList().data.importData(n);this._initial_text=this.getInputNode(this.node).value=t.getItemText(e)}},getValue:function(){var e=this.getInputNode().value;if(this.config.suggest){if(e==this._initial_text)return this._initial_value;return webix.$$(this.config.suggest).getSuggestion()}else return e}},webix.editors.text);webix.editors.richselect=webix.extend({focus:function(){},getValue:function(){return this.getInputNode().getSelectedId().id||this.getInputNode().getSelectedId()||""},setValue:function(e){var t=this.config.collection||this.config.options;var n=this.getInputNode();if(t)this.getPopup().getList().data.importData(t);this.getPopup().show(this.node);if(e){webix.assert(n.exists(e),"Option with ID "+e+" doesn't exist");if(n.exists(e)){n.select(e);n.showItem(e)}}else{n.unselect();n.showItem(n.getFirstId())}},getInputNode:function(){return this.getPopup().getList()},popupInit:function(e){e.attachEvent("onValueSuggest",function(e){webix.delay(function(){webix.callEvent("onEditEnd",[e.id])})});e.linkInput(document.body)},popupType:"richselect"},webix.editors.popup);webix.editors.$popup={text:{view:"popup",width:250,height:150,body:{view:"textarea"}},color:{view:"popup",body:{view:"colorboard"}},date:{view:"popup",width:250,height:250,body:{view:"calendar",borderless:true}},richselect:{view:"suggest",body:{view:"list",select:true}}};webix.VirtualRenderStack={$init:function(){webix.assert(this.render,"VirtualRenderStack :: Object must use RenderStack first");this._htmlmap={};webix.event(this._viewobj,"scroll",webix.bind(this._render_visible_rows,this));if(webix.env.touch){this.attachEvent("onAfterScroll",webix.bind(this._render_visible_rows,this))}this._unrendered_area=[]},getItemNode:function(e){return this._htmlmap[e]},showItem:function(e){var t=this._getVisibleRange();var n=this.data.getIndexById(e);var r=Math.floor(n/t._dx)*t._y;var i=this.getScrollState();if(r<i.y||r+this._settings.height>=i.y+this._content_height)this.scrollTo(0,r)},render:function(e,t,n){if(!this.isVisible(this._settings.id)||this.$blockRender)return;if(webix.debug_render)webix.log("Render: "+this.name+"@"+this._settings.id);if(e){var r=this.getItemNode(e);switch(n){case"update":if(!r)return;var i=this._htmlmap[e]=this._toHTMLObject(t);webix.html.insertBefore(i,r);webix.html.remove(r);break;default:this._render_delayed();break}}else{if(this.callEvent("onBeforeRender",[this.data])){this._htmlmap={};this._render_visible_rows(null,true);this._wait_for_render=false;this.callEvent("onAfterRender",[])}}},_render_delayed:function(){if(this._wait_for_render)return;this._wait_for_render=true;window.setTimeout(webix.bind(function(){this.render()},this),1)},_create_placeholder:function(e){var t=document.createElement("DIV");t.style.cssText="height:"+e+"px; width:100%; overflow:hidden;";return t},_render_visible_rows:function(e,t){this._unrendered_area=[];var n=this._getVisibleRange();if(!this._dataobj.firstChild||t){this._dataobj.innerHTML="";this._dataobj.appendChild(this._create_placeholder(n._max));this._htmlrows=[this._dataobj.firstChild]}var r=n._from;while(r<=n._height){while(this._htmlrows[r]&&this._htmlrows[r]._filled&&r<=n._height){r++}if(r>n._height)break;var i=r;while(!this._htmlrows[i])i--;var s=this._htmlrows[i];var o=r*n._dx+(this.data.$min||0);if(o>(this.data.$max||Infinity))break;var u=Math.min(o+n._dx-1,this.data.$max||Infinity);var a=this._create_placeholder(n._y);var f=this.data.getIndexRange(o,u);if(!f.length)break;var l={$template:"Loading"};for(var c=0;c<f.length;c++){if(!f[c])this._unrendered_area.push(o+c);f[c]=this._toHTML(f[c]||l)}a.innerHTML=f.join("");for(var c=0;c<f.length;c++)this._htmlmap[this.data.getIdByIndex(o+c)]=a.childNodes[c];var h=parseInt(s.style.height,10);var p=(r-i)*n._y;var d=h-p-n._y;webix.html.insertBefore(a,p?s.nextSibling:s,this._dataobj);this._htmlrows[r]=a;a._filled=true;if(p<=0&&d>0){s.style.height=d+"px";this._htmlrows[r+1]=s}else{if(p<0)webix.html.remove(s);else s.style.height=p+"px";if(d>0){var v=this._htmlrows[r+1]=this._create_placeholder(d);webix.html.insertBefore(v,a.nextSibling,this._dataobj)}}r++}if(this._unrendered_area.length){var m=this._unrendered_area[0];var g=this._unrendered_area.pop()+1;if(g>m){var y=g-m;if(this._maybe_loading_already(y,m))return;y=Math.max(y,this._settings.datafetch||this._settings.loadahead||0);this.loadNext(y,m)}}},_getVisibleRange:function(){var e=this.getScrollState();var t=e.y;var n=this._content_width;var r=this._content_height;var i=this.type;var s=Math.floor(n/i.width)||1;var o=Math.floor(t/i.height);var u=Math.ceil((r+t)/i.height)-1;var a=this.data.$max?this.data.$max-this.data.$min:this.data.count();var f=Math.ceil(a/s)*i.height;return{_from:o,_height:u,_top:t,_max:f,_y:i.height,_dx:s}},_cellPosition:function(e){var t=this.getItemNode(e);if(!t){this.showItem(e);this._render_visible_rows();t=this.getItemNode(e)}return{left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight,width:t.offsetWidth,parent:this._contentobj}}};webix.protoUI({name:"dataview",$init:function(e){if(e.sizeToContent)this.$ready.unshift(this._after_init_call);if(e.prerender===false||e.prerender!==true&&e.height!=="auto"&&!e.autoheight)webix.extend(this,webix.VirtualRenderStack,true);if(e.autoheight)e.scroll=false;this._contentobj.className+=" webix_dataview"},_after_init_call:function(){var e=webix.html.create("DIV",0,this.type.template({}));e.style.position="absolute";document.body.appendChild(e);this.type.width=e.offsetWidth;this.type.height=e.offsetHeight;webix.html.remove(e)},defaults:{scroll:true,datafetch:50},_id:"webix_f_id",on_click:{webix_dataview_item:function(e,t){if(this._settings.select){if(this._settings.select=="multiselect"||this._settings.multiselect)this.select(t,false,this._settings.multiselect=="touch"||e.ctrlKey,e.shiftKey);else this.select(t)}}},on_dblclick:{},on_mouse_move:{},type:{template:webix.template("#value#"),templateLoading:webix.template("Loading..."),width:160,height:50,classname:function(e,t,n){var r="webix_dataview_item ";if(t.css)r+=t.css+" ";if(e.$css)r+=e.$css+" ";if(n&&n.$css)r+=n.$css+" ";return r},templateStart:webix.template('<div webix_f_id="#id#" class="{common.classname()}" style="width:{common.width}px; height:{common.height}px; float:left; overflow:hidden;">'),templateEnd:webix.template("</div>")},_calck_autoheight:function(e){return this._settings.height=this.type.height*Math.ceil(this.data.count()/Math.floor(e/this.type.width))},autoheight_setter:function(e){if(e){this.data.attachEvent("onStoreLoad",webix.bind(this.resize,this));this._contentobj.style.overflowY="hidden"}return e},$getSize:function(e,t){if(this._settings.xCount&&this.type.width!="auto")this._settings.width=this.type.width*this._settings.xCount;if(this._settings.yCount&&this.type.height!="auto")this._settings.height=this.type.height*this._settings.yCount;var n=this._settings.width||this._content_width;if(this._settings.autoheight&&n){this._calck_autoheight(n);this.scroll_setter(false)}return webix.ui.view.prototype.$getSize.call(this,e,t)},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){if(this._settings.autoheight&&this._calck_autoheight()!=this._content_height)return webix.delay(this.resize,this);var n=false;if(this._settings.yCount&&this.type.height=="auto"){this.type.height=Math.floor(this._content_height/this._settings.yCount);n=true}if(this._settings.xCount&&this.type.width=="auto"){this.type.width=Math.floor(this._content_width/this._settings.xCount);n=true}if(n||this._render_visible_rows)this.render()}}},webix.DataMove,webix.DragItem,webix.MouseEvents,webix.KeysNavigation,webix.SelectionModel,webix.Scrollable,webix.ui.proto);webix.DataDriver.htmltable={toObject:function(e){e=webix.toNode(e);webix.assert(e,"table is not found");webix.assert(e.tagName.toLowerCase()==="table","Incorrect table object");var t=e.rows;webix.html.remove(e);return t},getRecords:function(e){var t=[];var n=e[0]&&e[0]._webix_skip?1:0;for(;n<e.length;n++)t.push(e[n]);return t},getDetails:function(e){var t=e.getElementsByTagName("td");e={};for(var n=0;n<t.length;n++){e["data"+n]=t[n].innerHTML}return e},getInfo:function(e){return{_size:0,_from:0}},getOptions:function(){},getConfig:function(e){var t=[];var n=e[0].getElementsByTagName("th");if(n.length)e[0]._webix_skip=true;for(var r=0;r<n.length;r++){var i={id:"data"+r,header:this._de_json(n[r].innerHTML)};var s=this._get_attrs(n[r]);i=webix.extend(i,s);t.push(i)}return t},_de_json:function(e){var t=e.indexOf("json://");if(t!=-1)e=JSON.parse(e.substr(t+7));return e},_get_attrs:function(e){var t=e.attributes;var n={};for(var r=0;r<t.length;r++){n[t[r].nodeName]=this._de_json(t[r].nodeValue)}n.width=parseInt(n.width,10);return n}};webix.protoUI({name:"vscroll",defaults:{scroll:"x",scrollStep:40,scrollPos:0,scrollSize:18,scrollVisible:1,zoom:1},$init:function(e){var t=e.scroll||"x";var n=this._viewobj=webix.toNode(e.container);n.className+=" webix_vscroll_"+t;n.innerHTML="<div class='webix_vscroll_body'></div>";webix.event(n,"scroll",this._onscroll,this);this._last_set_size=0},_check_quantum:function(e){if(e>15e5){this._settings.zoom=Math.floor(e/15e5)+1;this._zoom_limit=e-this._last_set_size;e=Math.floor(e/this._settings.zoom)+this._last_set_size}else{this._settings.zoom=1;this._zoom_limit=Infinity}return e},scrollWidth_setter:function(e){e=this._check_quantum(e);this._viewobj.firstChild.style.width=e+"px";return e},scrollHeight_setter:function(e){e=this._check_quantum(e);this._viewobj.firstChild.style.height=e+"px";return e},sizeTo:function(e,t,n){e=e-(t||0)-(n||0);var r=this._settings.scrollSize;if(webix.env.isIE&&r)r+=1;if(!r&&this._settings.scrollVisible&&!webix.env.$customScroll){this._viewobj.style.pointerEvents="none";r=14}if(!r){this._viewobj.style.display="none"}else{if(t)this._viewobj.style.marginTop=t+"px";this._viewobj.style[this._settings.scroll=="x"?"width":"height"]=e+"px";this._viewobj.style[this._settings.scroll=="x"?"height":"width"]=r+"px"}this._last_set_size=e},getScroll:function(){return this._settings.scrollPos*this._settings.zoom},getSize:function(){return(this._settings.scrollWidth||this._settings.scrollHeight)*this._settings.zoom},scrollTo:function(e){if(e<0)e=0;var t=this._settings;e=Math.min(((t.scrollWidth||t.scrollHeight)-this._last_set_size)*t.zoom,e);var n=e/t.zoom;if(n<0)n=0;if(t.scrollPos!=e){this._viewobj[t.scroll=="x"?"scrollLeft":"scrollTop"]=n;t.scrollPos=e;this._onscroll_inner(n);return true}},_onscroll:function(){var e=this._viewobj[this._settings.scroll=="x"?"scrollLeft":"scrollTop"];if(e!=this._last_scroll_pos)this._onscroll_inner(e)},_onscroll_inner:function(e){this._last_scroll_pos=e;this._settings.scrollPos=Math.min(this._zoom_limit,e*this._settings.zoom);this.callEvent("onScroll",[this._settings.scrollPos])},activeArea:function(e,t){this._x_scroll_mode=t;webix.event(e,"mousewheel",this._on_wheel,this);webix.event(e,"DOMMouseScroll",this._on_wheel,this)},_on_wheel:function(e){var t=0;if(e.wheelDeltaX&&Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)){if(this._x_scroll_mode)t=e.wheelDeltaX/-40}else{if(!this._x_scroll_mode)if(webix.isUndefined(e.wheelDelta))t=e.detail;else t=e.wheelDelta/-40}if(t)if(this.scrollTo(this._settings.scrollPos+t*this._settings.scrollStep))return webix.html.preventEvent(e)}},webix.EventSystem,webix.Settings);webix.Number={format:function(e,t){if(e===""||typeof e==="undefined")return e;t=t||webix.i18n;e=parseFloat(e);var n=e<0?"-":"";e=Math.abs(e);var r=e.toFixed(t.decimalSize).toString();r=r.split(".");var i="";if(t.groupSize){var s=t.groupSize;var o=r[0].length;do{o-=s;var u=o>0?r[0].substr(o,s):r[0].substr(0,s+o);i=u+(i?t.groupDelimiter+i:"")}while(o>0)}else i=r[0];if(t.decimalSize)return n+i+t.decimalDelimeter+r[1];else return n+i},numToStr:function(e){return function(t){return webix.Number.format(t,e)}}};webix.Date={startOnMonday:false,toFixed:function(e){if(e<10)return"0"+e;return e},weekStart:function(e){e=this.copy(e);var t=e.getDay();if(this.startOnMonday){if(t===0)t=6;else t--}return this.datePart(this.add(e,-1*t,"day"))},monthStart:function(e){e=this.copy(e);e.setDate(1);return this.datePart(e)},yearStart:function(e){e=this.copy(e);e.setMonth(0);return this.monthStart(e)},dayStart:function(e){return this.datePart(e,true)},dateToStr:function(e,t){if(typeof e=="function")return e;e=e.replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return'"+webix.Date.toFixed(date.getDate())+"';case"%m":return'"+webix.Date.toFixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+webix.Date.toFixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+webix.i18n.calendar.dayShort[date.getDay()]+"';case"%l":return'"+webix.i18n.calendar.dayFull[date.getDay()]+"';case"%M":return'"+webix.i18n.calendar.monthShort[date.getMonth()]+"';case"%F":return'"+webix.i18n.calendar.monthFull[date.getMonth()]+"';case"%h":return'"+webix.Date.toFixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+webix.Date.toFixed(date.getHours())+"';case"%i":return'"+webix.Date.toFixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+webix.Date.toFixed(date.getSeconds())+"';case"%W":return'"+webix.Date.toFixed(webix.Date.getISOWeek(date))+"';default:return e}});if(t===true)e=e.replace(/date\.get/g,"date.getUTC");return new Function("date","if (!date) return ''; if (!date.getMonth) date=webix.i18n.parseFormatDate(date);  return \""+e+'";')},strToDate:function(e,t){if(typeof e=="function")return e;var n="var temp=date.split(/[^0-9a-zA-Z]+/g);";var r=e.match(/%[a-zA-Z]/g);var i,s,o;if(!webix.i18n.calendar.monthShort_hash){o=webix.i18n.calendar.monthShort;s=webix.i18n.calendar.monthShort_hash={};for(i=0;i<o.length;i++)s[o[i]]=i;o=webix.i18n.calendar.monthFull;s=webix.i18n.calendar.monthFull_hash={};for(i=0;i<o.length;i++)s[o[i]]=i}for(i=0;i<r.length;i++){switch(r[i]){case"%j":case"%d":n+="set[2]=temp["+i+"]||1;";break;case"%n":case"%m":n+="set[1]=(temp["+i+"]||1)-1;";break;case"%y":n+="set[0]=temp["+i+"]*1+(temp["+i+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":n+="set[3]=temp["+i+"]||0;";break;case"%i":n+="set[4]=temp["+i+"]||0;";break;case"%Y":n+="set[0]=temp["+i+"]||0;";break;case"%a":case"%A":n+="set[3]=set[3]%12+((temp["+i+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":n+="set[5]=temp["+i+"]||0;";break;case"%M":n+="set[1]=webix.i18n.calendar.monthShort_hash[temp["+i+"]]||0;";break;case"%F":n+="set[1]=webix.i18n.calendar.month_full_hash[temp["+i+"]]||0;";break;default:break}}var u="set[0],set[1],set[2],set[3],set[4],set[5]";if(t)u=" Date.UTC("+u+")";return new Function("date","if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0]; "+n+" return new Date("+u+");")},getISOWeek:function(e){if(!e)return false;var t=e.getDay();if(t===0){t=7}var n=new Date(e.valueOf());n.setDate(e.getDate()+(4-t));var r=n.getFullYear();var i=Math.floor((n.getTime()-(new Date(r,0,1)).getTime())/864e5);var s=1+Math.floor(i/7);return s},getUTCISOWeek:function(e){return this.getISOWeek(e)},add:function(e,t,n,r){if(r)e=this.copy(e);switch(n){case"day":e.setDate(e.getDate()+t);break;case"week":e.setDate(e.getDate()+7*t);break;case"month":e.setMonth(e.getMonth()+t);break;case"year":e.setYear(e.getFullYear()+t);break;case"hour":e.setHours(e.getHours()+t);break;case"minute":e.setMinutes(e.getMinutes()+t);break;default:webix.Date.add[n](e,t,n);break}return e},datePart:function(e,t){if(t)e=this.copy(e);e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);return e},timePart:function(e,t){if(t)e=this.copy(e);return(e.valueOf()/1e3-e.getTimezoneOffset()*60)%86400},copy:function(e){return new Date(e.valueOf())},equal:function(e,t){if(!e||!t)return false;return e.valueOf()===t.valueOf()},isHoliday:function(e){e=e.getDay();if(e===0||e==6)return"webix_cal_event"}};webix.i18n={_dateMethods:["fullDateFormat","timeFormat","dateFormat","longDateFormat","parseFormat"],parseFormat:"%Y-%m-%d",numberFormat:webix.Number.format,priceFormat:function(e){return webix.i18n._price_format(webix.i18n.numberFormat(e,webix.i18n._price_settings))},setLocale:function(e){if(typeof e=="string")e=this.locales[e];if(e)webix.extend(this,e,true);var t=webix.i18n._dateMethods;for(var n=0;n<t.length;n++){var r=t[n];var i=webix.i18n[r+"UTC"];webix.i18n[r+"Str"]=webix.Date.dateToStr(webix.i18n[r],i);webix.i18n[r+"Date"]=webix.Date.strToDate(webix.i18n[r],i)}this._price_format=webix.template(this.price);this._price_settings=this.priceSettings||this;this.intFormat=webix.Number.numToStr({groupSize:this.groupSize,groupDelimiter:this.groupDelimiter,decimalSize:0})}};webix.i18n.locales={};webix.i18n.locales["en-US"]={groupDelimiter:",",groupSize:3,decimalDelimeter:".",decimalSize:2,dateFormat:"%m/%d/%Y",timeFormat:"%h:%i %A",longDateFormat:"%d %F %Y",fullDateFormat:"%m/%d/%Y %h:%i %A",price:"${obj}",priceSettings:{groupDelimiter:",",groupSize:3,decimalDelimeter:".",decimalSize:2},fileSize:["b","Kb","Mb","Gb","Tb","Pb","Eb"],calendar:{monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done"}};webix.i18n.setLocale("en-US");webix.MapCollection={_build_data_map:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n].map;var i=e[n].id;if(!i){i=e[n].id="i"+webix.uid();if(!e[n].header)e[n].header=""}if(r){var s="";var o="";if(r.indexOf("(date)")===0){s="webix.i18n.parseFormatDate(";o=")";if(!e[n].format)e[n].format=webix.i18n.dateFormatStr;r=r.replace("(date)","")}else if(r.indexOf("(number)")===0){s="(";o=")*1";r=r.replace("(number)","")}if(r!==""){r=r.replace(/\{obj\.([^}]*)\}/g,"\"+(obj.$1||'')+\"");r=r.replace(/#([^#'";, ]+)#/gi,"\"+(obj.$1||'')+\"")}else r='"+(obj.'+i+"||'')+\"";t.push("obj."+i+" = "+s+'"'+r+'"'+o+";")}this._map_options(e[n])}if(t.length){try{this.data._scheme_init=Function("obj",t.join("\n"))}catch(u){webix.assert_error("Invalid data map:"+t.join("\n"))}}},_map_options:function(e){var t=e.options||e.collection;if(t){if(typeof t==="string"){var n=webix.$$(t);if(!n){n=new webix.DataCollection({url:t});this._destroy_with_me.push(n)}if(n.getBody)n=n.getBody();this._bind_collection(n,e)}else if(!t.loadNext){if(t[0]&&typeof t[0]=="object"){t=new webix.DataCollection({data:t});this._bind_collection(t,e);this._destroy_with_me.push(t)}else{if(webix.isArray(t)){var r={};for(var i=0;i<t.length;i++)r[t[i]]=t[i];e.options=t=r}e.template=e.template||this._collection_accesser(t,e.id)}}else{this._bind_collection(t,e)}}},_bind_collection:function(e,t){if(t){delete t.options;t.collection=e;t.template=t.template||this._bind_accesser(e,t.id);e.data.attachEvent("onStoreUpdated",webix.bind(this.refresh,this))}},_collection_accesser:function(e,t){return function(n,r){return e[n[t]]||n.value||""}},_bind_accesser:function(e,t){return function(n,r){var i=n[t]||n.value,s=e.data.pull[i];return s?s.value||"":""}}};webix.protoUI({name:"datatable",defaults:{leftSplit:0,rightSplit:0,columnWidth:100,minColumnWidth:20,minColumnHeight:26,prerender:false,autoheight:false,autowidth:false,header:true,fixedRowHeight:true,scrollAlignY:true,datafetch:50},$skin:function(){var e=webix.skin.$active.rowHeight;var t=this.defaults;t.rowHeight=e;t.headerRowHeight=webix.skin.$active.barHeight},on_click:{webix_table_checkbox:function(e,t){t=this.locate(e);var n=this.getItem(t.row);var r=this.getColumnConfig(t.column);var i=n[t.column]!=r.checkValue?r.checkValue:r.uncheckValue;n[t.column]=i;this.callEvent("onCheck",[t.row,t.column,i]);this.data.callEvent("onStoreUpdated",[t.row,n,this._settings.checkboxRefresh?"update":"save"]);return false},webix_table_radio:function(e){var t=this.locate(e);var n=this.getItem(t.row);var r=this.getColumnConfig(t.column);if(this._last_checked_radio[t.column]){var i=this.getItem(this._last_checked_radio[t.column]);if(i)i[t.column]=r.uncheckValue}n[t.column]=r.checkValue;this._last_checked_radio[t.column]=t.row;this.callEvent("onCheck",[t.row,t.column,true]);this.refresh();return false}},on_dblclick:{},on_context:{},$init:function(e){this.on_click=webix.extend({},this.on_click);var t="<div class='webix_ss_header'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_body'><div class='webix_ss_left'><div class='webix_ss_center_scroll'></div></div>";t+="<div class='webix_ss_center'><div class='webix_ss_center_scroll'></div></div>";t+="<div class='webix_ss_right' ><div class='webix_ss_center_scroll'></div></div></div>";t+="<div class='webix_ss_hscroll'></div><div class='webix_ss_footer'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_vscroll_header'></div><div class='webix_ss_vscroll'></div><div class='webix_ss_vscroll_footer'></div>";this._contentobj.innerHTML=t;this._top_id=this._contentobj.id=this.name+webix.uid();this._contentobj.className+=" webix_dtable";this._dataobj=this._contentobj;this._header=this._contentobj.firstChild;this._body=this._header.nextSibling;this._footer=this._body.nextSibling.nextSibling;this.data.provideApi(this,true);this.data.attachEvent("onParse",webix.bind(this._call_onparse,this));this.$ready.push(this._first_render);this._columns=[];this._rows_cache=[];this._active_headers={};this._filter_elements={};this._header_height=this._footer_height=0;this._last_checked_radio={};this._destroy_with_me=[];this.data.attachEvent("onServerConfig",webix.bind(this._config_table_from_file,this));this.data.attachEvent("onServerOptions",webix.bind(this._config_options_from_file,this));webix.callEvent("onDataTable",[this,e])},_render_initial:function(){this._scrollSizeX=this._scrollSizeY=webix.ui.scrollSize;webix.html.addStyle("#"+this._top_id+" .webix_cell { height:"+this._settings.rowHeight+"px; line-height:"+(this._settings.rowLineHeight||this._settings.rowHeight)+"px;"+(this._settings.fixedRowHeight?"":"white-space:normal;")+" }");webix.html.addStyle("#"+this._top_id+" .webix_hcell { max-height:"+this._settings.headerRowHeight+"px; line-height:"+this._settings.headerRowHeight+"px;}");this._render_initial=function(){}},_first_render:function(){this.data.attachEvent("onStoreLoad",webix.bind(this.refreshHeaderContent,this));this.data.attachEvent("onSyncApply",webix.bind(this.refreshHeaderContent,this));this.data.attachEvent("onStoreUpdated",webix.bind(this.render,this));this.data.attachEvent("onStoreUpdated",webix.bind(this._refresh_tracking_header_content,this));this.render()},refresh:function(){this.render()},render:function(e,t,n){if(n=="save")return;if(n=="move"){var r=webix.DragControl.getContext();if(r&&r.fragile)return}if(!this._columns.length){if(!this._settings.columns){if(this._settings.autoConfig&&this.data.order.length)this._autoDetectConfig();else return}this._define_structure()}if(!this.isVisible(this._settings.id)||this.$blockRender)return this._render_initial();if(e&&t!=-1&&(n=="paint"||n=="update")){if(this._render_timer)clearTimeout(this._render_timer);if(!this._render_timer)this._render_timer=webix.delay(function(){this.render(e,-1,n)},this);else this._render_timer=webix.delay(function(){this.render()},this);return}else if(this._render_timer)clearTimeout(this._render_timer);if(this.callEvent("onBeforeRender",[this.data])){this._render_initial();if(!this._dtable_fully_ready)this._apply_headers();if(this._content_width)this._check_rendered_cols(true,true);if(!e||n!="update"){this._dtable_height=this._get_total_height();this._set_split_sizes_y()}this.callEvent("onAfterRender",[this.data]);return true}},columns_setter:function(e){this._build_data_map(e);return e},getColumnConfig:function(e){return this._columns_pull[e]||this._hidden_column_hash[e]},_config_options_from_file:function(e){for(var t in e){var n=this.getColumnConfig(t);webix.assert(n,"Orphan collection: "+t);var r=new webix.DataCollection({data:e[t]});this._destroy_with_me.push(r);this._bind_collection(r,n)}},_config_table_from_file:function(){var e=this._settings.columns;if(e&&e.column)this._settings.columns=e.column},_define_structure:function(){if(this._settings.columns){this._columns=this._settings.columns;this._columns_pull={};for(var e=0;e<this._columns.length;e++){var t=this._columns[e];this._columns_pull[t.id]=t;var n=t.cssFormat;if(n)t.cssFormat=webix.toFunctor(n,this.$scope);t.width=t.width||this._settings.columnWidth;if(typeof t.format=="string")t.format=webix.i18n[t.format]||window[t.format];if(webix.isUndefined(t.checkValue))t.checkValue=1;if(webix.isUndefined(t.uncheckValue))t.uncheckValue=0;if(t.css&&typeof t.css=="object")t.css=webix.html.createCss(t.css)}this._normalize_headers("header");this._normalize_headers("footer")}this.callEvent("onStructureLoad",[])},_define_structure_and_render:function(){this._apply_headers()},_apply_headers:function(){this._rightSplit=this._columns.length-this._settings.rightSplit;this._dtable_width=0;for(var e=0;e<this._columns.length;e++){if(!this._columns[e].node){var t=webix.html.create("DIV");t.style.width=this._columns[e].width+"px";this._columns[e].node=t}if(e>=this._settings.leftSplit&&e<this._rightSplit)this._dtable_width+=this._columns[e].width;var n=this._columns[e].template;if(n){if(typeof n=="string")n=n.replace(/#value#/g,"#"+this._columns[e].id+"#");this._columns[e].template=webix.template(n)}}var r=[];if(this._settings.rightSplit){var i=this._columns.length-this._settings.rightSplit;r[i]=" webix_first";r[i-1]=" webix_last"}if(this._settings.leftSplit){var s=this._settings.leftSplit;r[s]=" webix_first";r[s-1]=" webix_last"}r[0]=(r[0]||"")+" webix_first";var o=this._columns.length-1;r[o]=(r[o]||"")+" webix_last";for(var e=0;e<this._columns.length;e++){var u=this._columns[e].node;u.setAttribute("column",e);u.className="webix_column "+(this._columns[e].css||"")+(r[e]||"")}this._create_scrolls();this._set_columns_positions();this._set_split_sizes_x();this._render_header_and_footer();this._dtable_fully_ready=true},_set_columns_positions:function(){var e=0;for(var t=0;t<this._columns.length;t++){var n=this._columns[t];if(t==this._settings.leftSplit||t==this._rightSplit)e=0;if(n.node){n.node.style.left=e+"px";if(this._settings.leftSplit||this._settings.rightSplit){webix.html.remove(n.node);n.attached=false}}e+=n.width}},_render_header_and_footer:function(){if(!this._header_fix_width)this._header_fix_width=0;if(this._settings.header){this._refreshHeaderContent(this._header,0,1);this._header_height=(this._settings.headerRowHeight+1)*this._normalize_headers("header");this._render_header_section(this._header,"header")}if(this._settings.footer){this._refreshHeaderContent(this._footer,0,1);this._footer_height=(this._settings.headerRowHeight+1)*this._normalize_headers("footer");this._render_header_section(this._footer,"footer")}this.refreshHeaderContent();this._size_header_footer_fix()},_normalize_headers:function(e){var t=0;for(var n=0;n<this._columns.length;n++){var r=this._columns[n][e];if(!r||typeof r!="object"||!r.length){if(webix.isUndefined(r)){if(e=="header")r=this._columns[n].id;else r=""}r=[r]}for(var i=0;i<r.length;i++){if(typeof r[i]!="object")r[i]={text:r[i]}}t=Math.max(t,r.length);this._columns[n][e]=r}for(var n=0;n<this._columns.length;n++){var s=this._columns[n][e];for(var i=0;i<s.length;i++){if(s[i]&&s[i].rowspan)for(var o=1;o<s[i].rowspan;o++)s[i+o]=null;if(s[i]&&s[i].colspan)for(var o=1;o<s[i].colspan;o++)this._columns[n+o][e][i]=null}}for(var n=0;n<this._columns.length;n++){var r=this._columns[n][e];if(r.length<t){var u=r.length-1;r[u].rowspan=t-r.length+1;for(var i=u+1;i<t;i++)r[i]=null}}return t},_find_header_content:function(e,t){var n=e.getElementsByTagName("TD");for(var r=0;r<n.length;r++)if(n[r].getAttribute("active_id")==t)return n[r]},getHeaderContent:function(e){var t=this._find_header_content(this._header,e);if(!t)t=this._find_header_content(this._footer,e);if(t){var n=this._active_headers[e];var r=webix.ui.datafilter[n.content];if(r.getHelper)return r.getHelper(t,n);return{getValue:function(){return r.getValue(t)},setValue:function(e){return r.setValue(t,e)}}}},_render_subheader:function(e,t,n,r){if(e==t)return"";var i="<table style='width:"+n+"px' cellspacing='0' cellpadding='0'>";for(var s=e;s<t;s++){i+="<tr>";for(var s=e;s<t;s++)i+="<th  style='width:"+this._columns[s].width+"px'></th>";i+="</tr>"}var o=this._columns[0][r].length;var u=[];for(var a=0;a<o;a++){i+="<tr section='"+r+"'>";for(var s=e;s<t;s++){var f=this._columns[s][r][a];if(f===null)continue;if(f.content){f.contentId=f.contentId||webix.uid();f.columnId=this._columns[s].id;f.format=this._columns[s].format;webix.assert(webix.ui.datafilter,"Filtering extension was not included");webix.assert(webix.ui.datafilter[f.content],"Unknown content type: "+f.content);f.text=webix.ui.datafilter[f.content].render(this,f);this._active_headers[f.contentId]=f;this._has_active_headers=true}i+="<td column='"+(f.colspan?f.colspan-1+s:s)+"'";var l="";if(s==e)l+="webix_first";var c=s+(f.colspan?f.colspan-1:0);if(c>=t-1)l+=" webix_last";if(l)i+=' class="'+l+'"';var h="";if(f.contentId)i+=" active_id='"+f.contentId+"'";if(f.colspan)i+=" colspan='"+f.colspan+"'";if(f.rowspan){i+=" rowspan='"+f.rowspan+"'";var p=(this._settings.headerRowHeight+1)*f.rowspan;h=" style='max-height:"+(p-1)+"px;'";i+=" style='height:"+p+"px;'"}var d="webix_hcell";var v=f.css;if(v){if(typeof v=="object")f.css=v=webix.html.createCss(v);d+=" "+v}if(this._columns[s].$selected)d+=" webix_sel_hcell";i+="><div class='"+d+"'"+h+">";i+=(f.text===""?"&nbsp;":f.text)+"</div></td>"}i+="</tr>"}i+="</tr></table>";return i},showItemByIndex:function(e,t){var n=this._settings.pager;if(n){var r=Math.floor(e/n.size);if(r!=n.page)webix.$$(n.id).select(r)}if(e!=-1){var i=this._get_y_range();if(e<i[0]+1||e>=i[1]-1){var s=this._getHeightByIndexSumm(0,e);if(e<i[0]+1){s=Math.max(0,s-1)}else{s+=this._getHeightByIndex(e)-this._dtable_offset_height;if(e>0)s+=this._getHeightByIndex(e-1)-1}this._y_scroll.scrollTo(s)}}if(t!=-1){if(t<this._settings.leftSplit)return;if(t>=this._rightSplit)return;var i=this._get_x_range();if(t<i[0]+1||t>=i[1]-1){var s=0;for(var o=this._settings.leftSplit;o<t;o++)s+=this._columns[o].width;if(t<i[0]+1){}else{s+=this._columns[t].width-this._center_width}this._x_scroll.scrollTo(s)}}},showCell:function(e,t){if(!t||!e){var n=this.getSelectedId(true);if(n.length==1){t=t||n[0].column;e=e||n[0].row}}t=t?this.getColumnIndex(t):-1;e=e?this.getIndexById(e):-1;this.showItemByIndex(e,t)},scrollTo:function(e,t){if(!this._x_scroll)return;if(this._scrollTo_touch)return this._scrollTo_touch(e,t);if(e!==null)this._x_scroll.scrollTo(e);if(t!==null)this._y_scroll.scrollTo(t)},getScrollState:function(){if(this._getScrollState_touch)return this._getScrollState_touch();var e=this._getHeightByIndexSumm(0,this._render_scroll_top||0);return{x:this._scrollLeft,y:e-(this._render_scroll_shift||0)}},showItem:function(e){this.showItemByIndex(this.getIndexById(e),-1)},_render_header_section:function(e,t){e.childNodes[0].innerHTML=this._render_subheader(0,this._settings.leftSplit,this._left_width,t);e.childNodes[1].innerHTML=this._render_subheader(this._settings.leftSplit,this._rightSplit,this._dtable_width,t);e.childNodes[1].onscroll=webix.bind(this._scroll_with_header,this);e.childNodes[2].innerHTML=this._render_subheader(this._rightSplit,this._columns.length,this._right_width,t)},_scroll_with_header:function(){var e=this.getScrollState().x;var t=this._header.childNodes[1].scrollLeft;if(t!=e)this.scrollTo(t,null)},_refresh_tracking_header_content:function(){this.refreshHeaderContent(true)},refreshHeaderContent:function(e){e=e===true;if(this._settings.header)this._refreshHeaderContent(this._header,e);if(this._settings.footer)this._refreshHeaderContent(this._footer,e)},refreshFilter:function(e){this._refreshHeaderContent(this._header,0,1,e);this._refreshHeaderContent(this._header,0,0,e);this._refreshHeaderContent(this._footer,0,1,e);this._refreshHeaderContent(this._footer,0,0,e)},_refreshHeaderContent:function(e,t,n,r){if(this._has_active_headers&&e){var i=e.getElementsByTagName("TD");for(var s=0;s<i.length;s++){if(i[s].getAttribute("active_id")){var o=this._active_headers[i[s].getAttribute("active_id")];if(r&&r!=o.columnId)continue;var u=webix.ui.datafilter[o.content];if(n)o.value=u.getValue(i[s]);else if(!t||u.trackCells){u.refresh(this,i[s],o)}}}}},headerContent:[],_set_size_scroll_area:function(e,t,n){if(this._scrollSizeY){e.style.height=Math.max(t,1)-1+"px";e.style.width=n+this._scrollSizeY-1+"px"}else e.style.display="none"},_size_header_footer_fix:function(){if(this._settings.header)this._set_size_scroll_area(this._header_scroll,this._header_height,this._header_fix_width);if(this._settings.footer)this._set_size_scroll_area(this._footer_scroll,this._footer_height,this._header_fix_width)},_create_scrolls:function(){this._scrollTop=0;this._scrollLeft=0;var e,t;e=t=1;if(this._settings.autoheight||this._settings.scrollY===false)t=this._scrollSizeY=0;if(this._settings.autowidth||this._settings.scrollX===false)e=this._scrollSizeX=0;if(webix.env.touch)e=t=0;if(!this._x_scroll){this._x_scroll=new webix.ui.vscroll({container:this._footer.previousSibling,scrollWidth:this._dtable_width,scrollSize:this._scrollSizeX,scrollVisible:e});if(e&&!this._scrollSizeX&&!webix.env.$customScroll)this._x_scroll._viewobj.style.position="absolute";this._x_scroll.attachEvent("onScroll",webix.bind(this._onscroll_x,this))}if(!this._y_scroll){this._header_scroll=this._footer.nextSibling;var n=this._header_scroll.nextSibling;this._footer_scroll=n.nextSibling;this._y_scroll=new webix.ui.vscroll({container:n,scrollHeight:100,scroll:"y",scrollSize:this._scrollSizeY,scrollVisible:t});this._y_scroll.activeArea(this._body);this._x_scroll.activeArea(this._body,true);this._y_scroll.attachEvent("onScroll",webix.bind(this._onscroll_y,this))}if(this._content_width)this.callEvent("onResize",[this._content_width,this._content_height]);if(webix.env.$customScroll)webix.CustomScroll._enable_datatable(this);this._create_scrolls=function(){}},columnId:function(e){return this._columns[e].id},getColumnIndex:function(e){for(var t=0;t<this._columns.length;t++)if(this._columns[t].id==e)return t;return-1},_getNodeBox:function(e,t){var n=0,r=0,i=0,s=0;var o;var u=0;for(o=0;o<this._columns.length;o++){if(this._rightSplit==o||this._settings.leftSplit==o){n=0;u++}if(this._columns[o].id==t)break;n+=this._columns[o].width}r+=this._columns[o].width;for(o=0;o<this.data.order.length;o++){if(this.data.order[o]==e)break;s+=this._getHeightByIndex(o)}i+=this._getHeightByIndex(o);return[n,r,s-this._scrollTop,i,this._body.childNodes[u]]},_id_to_string:function(){return this.row},locate:function(e){e=e.target||e.srcElement||e;while(e&&e.getAttribute){if(e.getAttribute("view_id"))break;var t=e.className;var n=null;if(t.indexOf("webix_cell")!=-1){n=this._locate(e);if(n)n.row=this.data.order[n.rind]}if(t.indexOf("webix_hcell")!=-1){n=this._locate(e);if(n)n.header=true}if(n){n.column=this._columns[n.cind].id;n.toString=this._id_to_string;return n}e=e.parentNode}return null},_locate:function(e){var t=e.parentNode;if(!t)return null;var n=t.getAttribute("column")*1;var r=0;for(var i=0;i<t.childNodes.length;i++){if(t.childNodes[i]==e)r=i+this._columns[n]._yr0}return{rind:r,cind:n}},_updateColsSizeSettings:function(e){if(!this._dtable_fully_ready)return;this._set_columns_positions();this._set_split_sizes_x();this._render_header_and_footer();if(!e)this._check_rendered_cols(false,false)},setColumnWidth:function(e,t,n){return this._setColumnWidth(this.getColumnConfig(e),t,n)},_setColumnWidth:function(e,t,n){if(isNaN(t))return;var r=this._columns[e]||e;if(r.minWidth&&t<r.minWidth)t=r.minWidth;else if(t<this._settings.minColumnWidth)t=this._settings.minColumnWidth;var i=r.width;if(i!=t){if(e>=this._settings.leftSplit&&e<this._rightSplit)this._dtable_width+=t-i;r.width=t;if(r.node)r.node.style.width=t+"px";else return false;if(!n)this._updateColsSizeSettings();this.callEvent("onColumnResize",[r.id]);return true}return false},_getHeightByIndex:function(e){var t=this.data.order[e];if(!t)return this._settings.rowHeight;return this.data.pull[t].$height||this._settings.rowHeight},_getHeightByIndexSumm:function(e,t){if(this._settings.fixedRowHeight)return(t-e)*this._settings.rowHeight;else{var n=0;for(;e<t;e++)n+=this._getHeightByIndex(e);return n}},_cellPosition:function(e,t){if(arguments.length==1){t=e.column;e=e.row}var n=this.getItem(e);var r=this.getColumnConfig(t);var i=0;var s=0;for(var o=0;o<this._columns.length;o++){if(o==this._settings.leftSplit||o==this._rightSplit)i=0;var u=this._columns[o];if(u.id==t){var a=o<this._settings.leftSplit?0:o>=this._rightSplit?2:1;s=this._body.childNodes[a].firstChild;break}i+=u.width}var f=this.data.order.length;var l=this._getHeightByIndexSumm(this._render_scroll_top||0,this.getIndexById(e));return{parent:s,top:l+(this._render_scroll_shift||0),left:i,width:r.width,height:n.$height||this._settings.rowHeight}},_get_total_height:function(){var e=this._settings.pager;var t=0;var n=this.data.order.length;if(e){t=e.size*e.page;n=Math.min(n,t+e.size)}return this._getHeightByIndexSumm(t,n)},setRowHeight:function(e,t){if(isNaN(t))return;if(t<this._settings.minColumnHeight)t=this._settings.minColumnHeight;var n=this.getItem(e);var r=n.$height||this._settings.rowHeight;if(r!=t){n.$height=t;this.render();this.callEvent("onRowResize",[e])}},_onscroll_y:function(e){this._body.childNodes[1].scrollTop=this._scrollTop=e;if(!this._settings.prerender){this._check_rendered_cols()}else{var t=this._body.childNodes;for(var n=0;n<t.length;n++){t[n].scrollTop=e}}if(webix.env.$customScroll)webix.CustomScroll._update_scroll(this._body);this.callEvent("onScrollY",[])},_onscroll_x:function(e){this._body.childNodes[1].scrollLeft=this._scrollLeft=e;if(this._settings.header)this._header.childNodes[1].scrollLeft=e;if(this._settings.footer)this._footer.childNodes[1].scrollLeft=e;if(this._settings.prerender===false)this._check_rendered_cols(this._minimize_dom_changes?false:true);if(webix.env.$customScroll)webix.CustomScroll._update_scroll(this._body);this.callEvent("onScrollX",[])},_get_x_range:function(e){if(e)return[0,this._columns.length];var t=this._scrollLeft;var n=this._settings.leftSplit;while(t>0){t-=this._columns[n].width;n++}var r=n;if(t)n--;t+=this._center_width;while(t>0&&r<this._rightSplit){t-=this._columns[r].width;r++}return[n,r]},getVisibleCount:function(){return Math.floor(this._dtable_offset_height/this.config.rowHeight)},_get_y_range:function(e){var t=this._scrollTop;var n=0;var r=this.count();var i=this._settings.pager;if(i){var n=i.page*i.size;var r=Math.min(r,n+i.size)}if(this._settings.autoheight)return[n,r,0];if(e)return[n,r];var s=n;var o=this._settings.fixedRowHeight?this._settings.rowHeight:0;if(o){var u=Math.ceil(t/o);t-=u*o;s+=u}else while(t>0){t-=this._getHeightByIndex(s);s++}var a=s>0?-(this._getHeightByIndex(s-1)+t):0;var f=s;if(t)s--;t+=this._dtable_offset_height||this._content_height;if(o){var u=Math.ceil(t/o);t-=u*o;f+=u;if(f>r)f=r}else while(t>0&&f<r){t-=this._getHeightByIndex(f);f++}return[s,f,a]},_check_rendered_cols:function(e,t){if(!this._columns.length)return;if(t)this._clearColumnCache();if(webix.debug_render)webix.log("Render: "+this.name+"@"+this._settings.id);var n=this._get_x_range(this._settings.prerender);var r=this._get_y_range(this._settings.prerender===true);if(e){for(var i=this._settings.leftSplit;i<n[0];i++)this._hideColumn(i,t);for(var i=n[1];i<this._rightSplit;i++)this._hideColumn(i,t)}this._render_full_rows=[];var s=0;for(var i=0;i<this._settings.leftSplit;i++)s+=this._renderColumn(i,r,t);for(var i=n[0];i<n[1];i++)s+=this._renderColumn(i,r,t,i==n[0]);for(var i=this._rightSplit;i<this._columns.length;i++)s+=this._renderColumn(i,r,t);this._check_and_render_full_rows(r[0],r[1],t);this._check_load_next(r)},_delete_full_rows:function(e,t){this._rows_cache_start=e;this._rows_cache_end=t;webix.html.remove(this._rows_cache);this._rows_cache=[]},_check_and_render_full_rows:function(e,t,n){if(!n&&e==this._rows_cache_start&&t==this._rows_cache_end)return;this._delete_full_rows(e,t);if(this._render_full_row_some)this._render_full_row_some=false;else return;for(var r=0;r<this._render_full_rows.length;r++){var i=this._render_full_rows[r];var s=this.getItem(i.id);var o;if(typeof s.$row=="function"){o=s.$row.call(this,s,this.type)}else{o=this._getValue(s,this.getColumnConfig(s.$row),r)}var u=this._rows_cache[r]=webix.html.create("DIV",null,o);u.className="webix_cell webix_dtable_colrow";u.setAttribute("column",0);u.setAttribute("row",i.index);if(s.$height)u.style.height=s.$height+"px";u.style.top=i.top+"px";this._body.appendChild(u)}},_check_load_next:function(e){var t=this._settings.pager;var n=this._settings.datafetch;var r=!this._last_valid_render_pos||e[0]>=this._last_valid_render_pos;this._last_valid_render_pos=e[0];if(this._data_request_flag){if(t&&(!n||n>=t.size))if(this._check_rows([0,t.size*t.page],Math.max(n,t.size),true))return this._data_request_flag=null;this._run_load_next(this._data_request_flag,r);this._data_request_flag=null}else{if(this._settings.loadahead)var i=this._check_rows(e,this._settings.loadahead,r)}},_check_rows:function(e,t,n){var r=e[1];var i=r+t;if(!n){r=e[0]-t;i=e[0]}if(r<0)r=0;i=Math.min(i,this.data.order.length-1);var s=false;for(var o=r;o<i;o++)if(!this.data.order[o]){if(!s)s={start:o,count:i-r};else{s.last=o;s.count=o-r}}if(s){this._run_load_next(s,n);return true}},_run_load_next:function(e,t){var n=Math.max(e.count,this._settings.datafetch||this._settings.loadahead||0);var r=t?e.start:e.last-n+1;if(this._maybe_loading_already(e.count,e.start))return;this.loadNext(n,r)},_hideColumn:function(e){var t=this._columns[e];webix.html.remove(t.node);t.attached=false},_clearColumnCache:function(){for(var e=0;e<this._columns.length;e++)this._columns[e]._yr0=-1;if(this._rows_cache.length){webix.html.remove(this._rows_cache);this._rows_cache=[]}},getText:function(e,t){return this._getValue(this.getItem(e),this.getColumnConfig(t),0)},_getValue:function(e,t,n){if(!e)return null;var r;r=e[t.id];if(r===webix.undefined)r="";else if(t.format)r=t.format(r);if(t.template)r=t.template(e,this.type,r,t,n);return r},type:{checkbox:function(e,t,n,r){var i=n==r.checkValue?'checked="true"':"";return"<input class='webix_table_checkbox' type='checkbox' "+i+">"},radio:function(e,t,n,r){var i=n==r.checkValue?'checked="true"':"";return"<input class='webix_table_radio' type='radio' "+i+">"},editIcon:function(){return"<span class='webix_icon fa-pencil'></span>"},trashIcon:function(){return"<span class='webix_icon fa-trash'></span>"}},type_setter:function(e){if(!this.types||!this.types[e])webix.type(this,e);else{this.type=webix.clone(this.types[e]);if(this.type.css)this._contentobj.className+=" "+this.type.css}if(this.type.on_click)webix.extend(this.on_click,this.type.on_click);return e},_renderColumn:function(e,t,n,r){var i=this._columns[e];if(!i.attached){var s=e<this._settings.leftSplit?0:e>=this._rightSplit?2:1;this._body.childNodes[s].firstChild.appendChild(i.node);i.attached=true;i.split=s}this._render_scroll_top=t[0];this._render_scroll_shift=0;var o=0;if(this._settings.scrollAlignY){if(t[1]==(this.data.$pagesize||this.data.order.length)){o=this._render_scroll_shift=t[2];i.node.style.top=o+"px"}else if(i._yr2)i.node.style.top="0px"}else if(t[2]!=i._yr2){o=t[2];i.node.style.top=o+"px"}if(!n&&i._yr0==t[0]&&i._yr1==t[1])return 0;var u="";var a=this._settings.columns[e];var f=a.$selected;var l=this._settings.rowHeight;for(var c=t[0];c<t[1];c++){var h=this.data.order[c];var p=this.data.getItem(h);var d;if(p){if(r&&p.$row){this._render_full_row_some=true;this._render_full_rows.push({top:o,id:p.id,index:c});u+="<div class='webix_cell'></div>";o+=l;continue}var d=this._getValue(p,a,c);var v="webix_cell";if(a.cssFormat){var m=a.cssFormat(d,p,h,a.id);if(m){if(typeof m=="object")v+=" "+webix.html.createCss(m);else v+=" "+m}}var g=p.$css;if(g){if(typeof g=="object")p.$css=g=webix.html.createCss(g);v+=" "+g}var y=this.data._marks[h];if(y){if(y.$css)v+=" "+y.$css;if(y.$cellCss){var b=y.$cellCss[a.id];if(b)v+=" "+b}}if(p.$cellCss){var w=p.$cellCss[a.id];if(w){if(typeof w=="object")w=webix.html.createCss(w);v+=" "+w}}var E=this.data.getMark(p.id,"webix_selected");if(E&&(E.$row||E[a.id])||f)v+=this._select_css;if(p.$height){u+="<div class='"+v+"' style='height:"+p.$height+"px'>"+d+"</div>";o+=p.$height-l}else{u+="<div class='"+v+"'>"+d+"</div>"}}else{u+="<div class='webix_cell'></div>";if(!this._data_request_flag)this._data_request_flag={start:c,count:t[1]-c};else this._data_request_flag.last=c}o+=l}i.node.innerHTML=u;i._yr0=t[0];i._yr1=t[1];i._yr2=t[2];return 1},_set_split_sizes_y:function(){if(!this._columns.length||isNaN(this._content_height*1))return;webix.debug_size_box(this,["y-sizing"],true);var e=this._dtable_height+(this._scrollSizeX?this._scrollSizeX:0);if((this._settings.autoheight||this._settings.yCount)&&this.resize())return;this._y_scroll.sizeTo(this._content_height,this._header_height,this._footer_height);this._y_scroll.define("scrollHeight",e);this._dtable_offset_height=this._content_height-this._scrollSizeX-this._header_height-this._footer_height;for(var t=0;t<3;t++){this._body.childNodes[t].style.height=this._dtable_offset_height+"px";if(this._settings.prerender)this._body.childNodes[t].firstChild.style.height=this._dtable_height+"px";else this._body.childNodes[t].firstChild.style.height=this._dtable_offset_height+"px"}},_set_split_sizes_x:function(){if(!this._columns.length)return;if(webix.debug_size)webix.log("  - "+this.name+"@"+this._settings.id+" X sizing");var e=0;this._left_width=0;this._right_width=0;this._center_width=0;while(e<this._settings.leftSplit){this._left_width+=this._columns[e].width;e++}e=this._columns.length-1;while(e>=this._rightSplit){this._right_width+=this._columns[e].width;e--}if(!this._content_width)return;if(this._settings.autowidth&&this.resize())return;this._center_width=this._content_width-this._right_width-this._left_width-this._scrollSizeY;this._body.childNodes[1].firstChild.style.width=this._dtable_width+"px";this._body.childNodes[0].style.width=this._left_width+"px";this._body.childNodes[1].style.width=this._center_width+"px";this._body.childNodes[2].style.width=this._right_width+"px";this._header.childNodes[0].style.width=this._left_width+"px";this._header.childNodes[1].style.width=this._center_width+"px";this._header.childNodes[2].style.width=this._right_width+"px";this._footer.childNodes[0].style.width=this._left_width+"px";this._footer.childNodes[1].style.width=this._center_width+"px";this._footer.childNodes[2].style.width=this._right_width+"px";var t=this._center_width-this._dtable_width;if(t<0)t=0;if(t!=this._header_fix_width){this._header_fix_width=t;this._size_header_footer_fix()}this._x_scroll.sizeTo(this._content_width-this._scrollSizeY);this._x_scroll.define("scrollWidth",this._dtable_width+this._left_width+this._right_width)},$getSize:function(e,t){if((this._settings.autoheight||this._settings.yCount)&&this._settings.columns){var n=(this._settings.yCount||0)*this._settings.rowHeight;if(!n)n=this.isVisible()?this._dtable_height:this.count()*this._settings.rowHeight;this._settings.height=Math.max(n+(this._scrollSizeX?this._scrollSizeX:0)-1,this._settings.minHeight||0)+this._header_height+this._footer_height}if(this._settings.autowidth&&this._settings.columns)this._settings.width=Math.max(this._dtable_width+this._left_width+this._right_width+this._scrollSizeY,this._settings.minWidth||0);var r=this._left_width+this._right_width+this._scrollSizeY;var i=webix.ui.view.prototype.$getSize.call(this,e,t);i[0]=Math.max(i[0]||r);return i},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.apply(this,arguments)){if(this._dtable_fully_ready){this.callEvent("onResize",[this._content_width,this._content_height]);this._set_split_sizes_x();this._set_split_sizes_y()}this.render()}},_on_header_click:function(e){var t=this.getColumnConfig(e);if(!t.sort)return;var n="asc";if(t.id==this._last_sorted)n=this._last_order=="asc"?"desc":"asc";this._sort(t.id,n,t.sort)},markSorting:function(e,t){if(!this._sort_sign)this._sort_sign=webix.html.create("DIV");webix.html.remove(this._sort_sign);if(t){var n=this._get_header_cell(this.getColumnIndex(e));this._sort_sign.className="webix_ss_sort_"+t;n.style.position="relative";n.appendChild(this._sort_sign)}},scroll_setter:function(e){return this._settings.scrollX=this._settings.scrollY=e},_get_header_cell:function(e){var t=this._header.getElementsByTagName("TD");for(var n=t.length-1;n>=0;n--)if(t[n].getAttribute("column")==e&&!t[n].getAttribute("active_id"))return t[n].firstChild;return null},_sort:function(e,t,n){this._last_sorted=e;this._last_order=t;this.markSorting(e,t);if(n=="server"){this.loadNext(-1,0,{before:function(){var e=this.data.url;this.clearAll();this.data.url=e}},0,1)}else{if(n=="text"){this.data.each(function(t){t.$text=this.getText(t.id,e)},this);n="string";e="$text"}if(typeof n=="function")this.data.sort(n,t||"asc");else this.data.sort(e,t||"asc",n||"string")}},_mouseEvent:function(e,t,n){e=e||event;var r=e.target||e.srcElement;var i=[];var s="";var o=null;var u=false;while(r&&r.parentNode){if(s=r.className){s=s.split(" ");for(var a=s.length-1;a>=0;a--)if(t[s[a]])i.push(t[s[a]])}if(r.parentNode.getAttribute){var f=r.parentNode.getAttribute("column")||r.getAttribute("column");if(f){var l=r.parentNode.tagName=="DIV";u=true;if(l){var c=r.parentNode.getAttribute("row")||webix.html.index(r)+this._columns[f]._yr0;this._item_clicked=o={row:this.data.order[c],column:this._columns[f].id};o.toString=this._id_to_string}else this._item_clicked=o={column:this._columns[f].id};if(i.length){for(var a=0;a<i.length;a++){var h=webix.toFunctor(i[a],this.$scope);var p=h.call(this,e,o,r);if(p===false)return}}if(l)this.callEvent("on"+n,[o,e,r]);else if(n=="ItemClick"){var d=r.parentNode.parentNode.getAttribute("section")=="header";if(d&&this.callEvent("onHeaderClick",[o,e,r]))this._on_header_click(o.column)}break}}r=r.parentNode}return u},showOverlay:function(e){if(!this._datatable_overlay){var t=webix.html.create("DIV",{"class":"webix_datatable_overlay"},"");this._body.appendChild(t);this._datatable_overlay=t}this._datatable_overlay.innerHTML=e},hideOverlay:function(){if(this._datatable_overlay){webix.html.remove(this._datatable_overlay);this._datatable_overlay=null}},mapCells:function(e,t,n,r,i){if(e===null&&this.data.order.length>0)e=this.data.order[0];if(t===null)t=this.columnId(0);if(n===null)n=this.data.order.length;if(r===null)r=this._settings.columns.length;if(!this.exists(e))return;e=this.getIndexById(e);t=this.getColumnIndex(t);if(t===null)return;for(var s=0;s<n&&e+s<this.data.order.length;s++){var o=e+s;var u=this.data.order[o];var a=this.getItem(u);for(var f=0;f<r&&t+f<this._settings.columns.length;f++){var l=t+f;var c=this.columnId(l);a[c]=i(a[c],u,c,s,f)}}},_call_onparse:function(e,t){if(!this._settings.columns&&e.getConfig)this.define("columns",e.getConfig(t))},_autoDetectConfig:function(){var e=this.getItem(this.getFirstId());var t=this._settings.columns=[];for(var n in e)if(n!="id")t.push({id:n,header:n[0].toUpperCase()+n.substr(1),sort:"string",editor:"text"});if(t.length)t[0].fillspace=true;if(typeof this._settings.select=="undefined")this.define("select","row")}},webix.AutoTooltip,webix.Group,webix.DataMarks,webix.DataLoader,webix.MouseEvents,webix.MapCollection,webix.ui.view,webix.EventSystem,webix.Settings);webix.ui.datafilter={textWaitDelay:500,summColumn:{getValue:function(){},setValue:function(){},refresh:function(e,t,n){var r=0;e.mapCells(null,n.columnId,null,1,function(e){e=e*1;if(!isNaN(e))r+=e;return e});if(n.format)r=n.format(r);if(n.template)r=n.template({value:r});t.firstChild.innerHTML=r},trackCells:true,render:function(e,t){if(t.template)t.template=webix.template(t.template);return""}},masterCheckbox:{getValue:function(){},setValue:function(){},getHelper:function(e,t){return{check:function(){t.checked=false;e.onclick()},uncheck:function(){t.checked=true;e.onclick()},isChecked:function(){return t.checked}}},refresh:function(e,t,n){t.onclick=function(){this.getElementsByTagName("input")[0].checked=n.checked=!n.checked;var t=e.getColumnConfig(n.columnId);var r=n.checked?t.checkValue:t.uncheckValue;e.data.each(function(t){t[n.columnId]=r;e.callEvent("onCheck",[t.id,n.columnId,r]);this.callEvent("onStoreUpdated",[t.id,t,"save"])});e.refresh()}},render:function(e,t){return"<input type='checkbox' "+(t.checked?"checked='1'":"")+">"}},textFilter:{getInputNode:function(e){return e.firstChild.firstChild},getValue:function(e){return this.getInputNode(e).value},setValue:function(e,t){this.getInputNode(e).value=t},refresh:function(e,t,n){t.component=e._settings.id;e.registerFilter(t,n,this);t._comp_id=e._settings.id;if(n.value)this.setValue(t,n.value);t.onclick=webix.html.preventEvent;webix.event(t,"keydown",this._on_key_down)},render:function(e,t){if(this.init)this.init(t);t.css="webix_ss_filter";return"<input "+(t.placeholder?'placeholder="'+t.placeholder+'" ':"")+"type='text'>"},_on_key_down:function(e,t,n){var r=this._comp_id;if((e.which||e.keyCode)==9)return;if(this._filter_timer)window.clearTimeout(this._filter_timer);this._filter_timer=window.setTimeout(function(){webix.$$(r).filterByAll()},webix.ui.datafilter.textWaitDelay)}},selectFilter:{getInputNode:function(e){return e.firstChild.firstChild},getValue:function(e){return this.getInputNode(e).value},setValue:function(e,t){this.getInputNode(e).value=t},refresh:function(e,t,n){n.compare=n.compare||function(e,t){return e==t};t.component=e._settings.id;e.registerFilter(t,n,this);var r;if(n.options)r=n.options;else r=e.collectValues(n.columnId);var i="";for(var s=0;s<r.length;s++)i+="<option value='"+r[s].id+"'>"+r[s].value+"</option>";t.firstChild.innerHTML="<select>"+i+"</select>";if(n.value)this.setValue(t,n.value);t.onclick=webix.html.preventEvent;var o=t.firstChild.firstChild;o._comp_id=e._settings.id;webix.event(o,"change",this._on_change)},render:function(e,t){if(this.init)this.$init(t);t.css="webix_ss_filter";return""},_on_change:function(e,t,n){webix.$$(this._comp_id).filterByAll()}}};webix.ui.datafilter.serverFilter=webix.extend({_on_key_down:function(e,t,n){var r=this._comp_id;if((e.which||e.keyCode)==9)return;if(this._filter_timer)window.clearTimeout(this._filter_timer);this._filter_timer=window.setTimeout(function(){webix.$$(r).loadNext(-1,0,{before:function(){var e=this.data.url;this.clearAll();this.data.url=e}},0,1)},webix.ui.datafilter.textWaitDelay)}},webix.ui.datafilter.textFilter);webix.ui.datafilter.numberFilter=webix.extend({init:function(e){e.prepare=function(t,n){var r=t.indexOf("=")!=-1?1:0;var i=this.format(t);if(i==="")return"";if(t.indexOf(">")!=-1)e.compare=this._greater;else if(t.indexOf("<")!=-1){e.compare=this._lesser;r*=-1}else{e.compare=this._equal;r=0}return i-r}},format:function(e){return e.replace(/[^0-9]/g,"")},_greater:function(e,t){return e*1>t},_lesser:function(e,t){return e*1<t},_equal:function(e,t){return e*1==t}},webix.ui.datafilter.textFilter);webix.ui.datafilter.dateFilter=webix.extend({format:function(e){if(e==="")return"";var t=new Date;if(e.indexOf("today")!=-1){t=webix.Date.dayStart(t)}else if(e.indexOf("now")==-1){var n=e.match(/[0-9]+/g);if(!n||!n.length)return"";if(n.length<3){n.reverse();t=new Date(n[0],(n[1]||1)-1,1)}else t=webix.i18n.dateFormatDate(e.replace(/^[>< =]+/,""))}return t.valueOf()}},webix.ui.datafilter.numberFilter);webix.extend(webix.ui.datatable,{filterByAll:function(){this.data.silent(function(){this.filter();var e=false;for(var t in this._filter_elements){webix.assert(t,"empty column id for column with filtering");var n=this._filter_elements[t];var r=n[2].getValue(n[0]);if(n[1].prepare)r=n[1].prepare.call(n[2],r,n[1],this);n.value=r;var i=n[1].compare;if(!this.callEvent("onBeforeFilter",[t,r,n[1]]))continue;if(r==="")continue;if(i)this.filter(function(e,n){if(!e)return false;var r=e[t];return i(r,n,e)},r,e);else this.filter(t,r,e);e=true}},this);this.refresh();this.callEvent("onAfterFilter",[])},filterMode_setter:function(e){return webix.extend(this.data._filterMode,e,true)},getFilter:function(e){var t=this._filter_elements[e];webix.assert(t,"Filter doesn't exists for column in question");return t[2].getInputNode(t[0])},registerFilter:function(e,t,n){this._filter_elements[t.columnId]=[e,t,n]},collectValues:function(e){var t=[{id:"",value:""}];var n={"":true};var r=this.getColumnConfig(e);var i=r.options||r.collection;if(i){if(typeof i=="object"&&!i.loadNext){if(webix.isArray(i))for(var s=0;s<i.length;s++)t.push({id:i[s],value:i[s]});else for(var o in i)t.push({id:o,value:i[o]});return t}else{if(typeof i==="string")i=webix.$$(i);if(i.getBody)i=i.getBody();this._collectValues.call(i,"id","value",t,n)}}else this._collectValues(r.id,r.id,t,n);return t},_collectValues:function(e,t,n,r){this.data.each(function(i){var s=i?i[t]:"";if(!r[s]){r[s]=true;n.push({id:i[e],value:s})}},this,true);n.sort(function(e,t){return e.value>t.value?1:-1})}});webix.extend(webix.ui.datatable,{select_setter:function(e){if(!this.select&&e){webix.extend(this,this._selections._commonselect,true);if(e===true)e="row";else if(e=="multiselect"){e="row";this._settings.multiselect=true}webix.assert(this._selections[e],"Unknown selection mode: "+e);webix.extend(this,this._selections[e],true)}return e},getSelectedId:function(e){return e?[]:""},_selections:{_commonselect:{_select_css:" webix_cell_select",$init:function(){this._reinit_selection();this.on_click.webix_cell=webix.bind(this._click_before_select,this);this._data_cleared=this._data_filtered=function(){this.unselect()};this.data.attachEvent("onStoreUpdated",webix.bind(this._data_updated,this));this.data.attachEvent("onClearAll",webix.bind(this._data_cleared,this));this.data.attachEvent("onAfterFilter",webix.bind(this._data_filtered,this));this.data.attachEvent("onIdChange",webix.bind(this._id_changed,this))},_id_changed:function(e,t){for(var n=0;n<this._selected_rows.length;n++)if(this._selected_rows[n]==e)this._selected_rows[n]=t;for(var n=0;n<this._selected_areas.length;n++){var r=this._selected_areas[n];if(r.row==e){e=this._select_key(r);r.row=t;t=this._select_key(r);r.id=t;delete this._selected_pull[e];this._selected_pull[t]=true}}},_data_updated:function(e,t,n){if(n=="delete")this.unselect(e)},_reinit_selection:function(){this._selected_areas=[];this._selected_pull={};this._selected_rows=[]},getSelectedId:function(e,t){var n;if(this._selected_areas.length>1||e){n=[].concat(this._selected_areas);if(t)for(var r=0;r<n.length;r++)n[r]=n[r].id}else{n=this._selected_areas[0];if(t&&n)return n.id}return n},_id_to_string:function(){return this.row},_select:function(e,t){var n=this._select_key(e);if(n===null)return;e.id=n;e.toString=this._id_to_string;if(!this.callEvent("onBeforeSelect",[e,t]))return false;if(this._selected_pull[n]&&(t||this._selected_areas.length==1))return;if(!t)this._clear_selection();this._selected_areas.push(e);this._selected_pull[n]=true;this.callEvent("onAfterSelect",[e,t]);this._finalize_select(this._post_select(e));return true},_clear_selection:function(){if(!this._selected_areas.length)return false;for(var e=0;e<this._selected_rows.length;e++){var t=this.getItem(this._selected_rows[e]);if(t)this.data.removeMark(t.id,"webix_selected",0,1)}var n=this._settings.columns;if(n)for(var e=0;e<n.length;e++){n[e].$selected=null}this._reinit_selection();return true},clearSelection:function(){if(this._clear_selection()){this.callEvent("onSelectChange",[]);this.render()}},_unselect:function(e){var t=this._select_key(e);if(!t&&this._selected_areas.length){this.clearSelection();this.callEvent("onSelectChange",[])}if(!this._selected_pull[t])return;if(!this.callEvent("onBeforeUnSelect",[e]))return false;for(var n=0;n<this._selected_areas.length;n++){if(this._selected_areas[n].id==t){this._selected_areas.splice(n,1);break}}delete this._selected_pull[t];this.callEvent("onAfterUnselect",[e]);this._finalize_select(0,this._post_unselect(e))},_add_item_select:function(e){var t=this.getItem(e);return this.data.addMark(t.id,"webix_selected",0,{$count:0},true)},_finalize_select:function(e){if(e)this._selected_rows.push(e);if(!this._silent_selection){this.render();this.callEvent("onSelectChange",[])}},_click_before_select:function(e,t){var n=e.ctrlKey||this._settings.multiselect=="touch";var r=e.shiftKey;if(!this._settings.multiselect&&this._settings.select!="multiselect")n=r=false;if(r&&this._selected_areas.length){var i=this._selected_areas[this._selected_areas.length-1];this._selectRange(t,i)}else{if(n&&this._selected_pull[this._select_key(t)])this._unselect(t);else this._select({row:t.row,column:t.column},n)}},_mapSelection:function(e,t,n){var r=this._settings.columns;if(t){var i=[];for(var s=0;s<r.length;s++)if(r[s].$selected)i.push(r[s]);r=i}var o=this.data.order;var u=0;for(var s=0;s<o.length;s++){var a=this.getItem(o[s]);if(!a)continue;var f=this.data.getMark(a.id,"webix_selected");if(f||t){var l=0;for(var c=0;c<r.length;c++){var h=r[c].id;if(n||t||f[h]){if(e)a[h]=e(a[h],o[s],h,u,l);else return{row:o[s],column:h};l++}}u++}}}},row:{_select_css:" webix_row_select",_select_key:function(e){return e.row},select:function(e,t){webix.assert(this.data.exists(e),"Incorrect id in select command: "+e);this._select({row:e},t)},_post_select:function(e){this._add_item_select(e.row).$row=true;return e.row},unselect:function(e){this._unselect({row:e})},_post_unselect:function(e){this.data.removeMark(e.row,"webix_selected",0,1);return e.row},mapSelection:function(e){return this._mapSelection(e,false,true)},_selectRange:function(e,t){return this.selectRange(e.row,t.row)},selectRange:function(e,t){var n=this.getIndexById(e);var r=this.getIndexById(t);if(n>r){var i=n;n=r;r=i}this._silent_selection=true;for(var s=n;s<=r;s++)this.select(this.getIdByIndex(s),true);this._silent_selection=false;this._finalize_select()}},cell:{_select_key:function(e){if(!e.column)return null;return e.row+"_"+e.column},select:function(e,t,n){webix.assert(this.data.exists(e),"Incorrect id in select command: "+e);this._select({row:e,column:t},n)},_post_select:function(e){var t=this._add_item_select(e.row);t.$count++;t[e.column]=true;return e.row},unselect:function(e,t){this._unselect({row:e,column:t})},_post_unselect:function(e){var t=this._add_item_select(e.row);t.$count--;t[e.column]=false;if(t.$count<=0)this.data.removeMark(e.row,"webix_selected");return e.row},mapSelection:function(e){return this._mapSelection(e,false,false)},_selectRange:function(e,t){return this.selectRange(e.row,e.column,t.row,t.column)},selectRange:function(e,t,n,r){var i=this.getIndexById(e);var s=this.getIndexById(n);var o=this.getColumnIndex(t);var u=this.getColumnIndex(r);if(i>s){var a=i;i=s;s=a}if(o>u){var a=o;o=u;u=a}this._silent_selection=true;for(var f=i;f<=s;f++)for(var l=o;l<=u;l++)this.select(this.getIdByIndex(f),this.columnId(l),true);this._silent_selection=false;this._finalize_select()}},column:{_select_css:" webix_column_select",_select_key:function(e){return e.column},_id_to_string:function(){return this.column},select:function(e,t){this._select({column:e},t)},_post_select:function(e){this._settings.columns[this.getColumnIndex(e.column)].$selected=true;if(!this._silent_selection)this._render_header_and_footer()},unselect:function(e){this._unselect({column:e})},_post_unselect:function(e){this._settings.columns[this.getColumnIndex(e.column)].$selected=null;this._render_header_and_footer()},mapSelection:function(e){return this._mapSelection(e,true,false)},_selectRange:function(e,t){return this.selectRange(e.column,t.column)},selectRange:function(e,t){var n=this.getColumnIndex(e);var r=this.getColumnIndex(t);if(n>r){var i=n;n=r;r=i}this._silent_selection=true;for(var s=n;s<=r;s++)this.select(this.columnId(s),true);this._silent_selection=false;this._render_header_and_footer();this._finalize_select()}}}});webix.extend(webix.ui.datatable,{blockselect_setter:function(e){if(e&&this._block_sel_flag){webix.event(this._viewobj,"mousemove",this._bs_move,this);webix.event(this._viewobj,"mousedown",this._bs_down,this);webix.event(document.body,"mouseup",this._bs_up,this);this._block_sel_flag=this._bs_ready=this._bs_progress=false}return e},_block_sel_flag:true,_childOf:function(e,t){var n=e.target||e.srcElement;while(n){if(n==t)return true;n=n.parentNode}return false},_bs_down:function(e){if(this._childOf(e,this._body)){this._bs_position=webix.html.offset(this._body);var t=webix.html.pos(e);this._bs_ready=[t.x-this._bs_position.x,t.y-this._bs_position.y]}},_bs_up:function(){if(this._block_panel){var e=this._locate_cell_xy.apply(this,this._bs_ready);var t=this._locate_cell_xy.apply(this,this._bs_progress);this._selectRange(e,t);this._block_panel=webix.html.remove(this._block_panel)}this._bs_ready=this._bs_progress=false},_bs_start:function(){this.clearSelection();this._block_panel=webix.html.create("div",{"class":"webix_block_selection"},"");this._body.appendChild(this._block_panel)},_bs_move:function(e){if(this._bs_ready!==false){if(this._bs_progress===false)this._bs_start(e);var t=webix.html.pos(e);this._bs_progress=[t.x-this._bs_position.x,t.y-this._bs_position.y];this._setBlockPosition(this._bs_ready[0],this._bs_ready[1],this._bs_progress[0],this._bs_progress[1])}},_setBlockPosition:function(e,t,n,r){var i=this._block_panel.style;var s=Math.min(e,n);var o=Math.max(e,n);var u=Math.min(t,r);var a=Math.max(t,r);i.left=s+"px";i.top=u+"px";i.width=o-s+"px";i.height=a-u+"px"},_locate_cell_xy:function(e,t){if(this._right_width&&e>this._left_width+this._center_width)e+=this._x_scroll.getSize()-this._center_width-this._left_width-this._right_width;else if(!this._left_width||e>this._left_width)e+=this._x_scroll.getScroll();t+=this._y_scroll.getScroll();var n=null;var r=null;if(e<0)e=0;if(t<0)t=0;var i=this._settings.columns;var s=this.data.order;var o=0;for(var u=0;u<i.length;u++){o+=i[u].width;if(o>=e){r=i[u].id;break}}if(!r)r=i[i.length-1].id;if(this._settings.fixedRowHeight){n=s[Math.floor(t/this._settings.rowHeight)]}else for(var u=0;u<s.length;u++){o+=this._getHeightByIndex(u);if(o>=t){n=s[u];break}}if(!n)n=s[s.length-1];return{row:n,column:r}}});webix.protoUI({name:"resizearea",defaults:{dir:"x"},$init:function(e){var t=e.dir||"x";var n=webix.toNode(e.container);var r=t=="x"?"width":"height";var i=e.margin?e.margin+"px":0;this._key_property=t=="x"?"left":"top";this._viewobj=webix.html.create("DIV",{"class":"webix_resize_area webix_dir_"+t});webix.event(this._viewobj,webix.env.mouse.down,webix.html.stopEvent);if(i){if(t=="x")i=i+" 0 "+i;else i="0 "+i+" 0 "+i}this._dragobj=webix.html.create("DIV",{"class":"webix_resize_handle_"+t,style:i?"padding:"+i:""},"<div class='webix_handle_content'></div>");this._originobj=webix.html.create("DIV",{"class":"webix_resize_origin_"+t});if(e[r]){this._originobj.style[r]=e[r]+(e.border?1:0)+"px";this._dragobj.style[r]=e[r]+"px"}if(e.cursor)this._dragobj.style.cursor=this._originobj.style.cursor=this._viewobj.style.cursor=e.cursor;this._moveev=webix.event(n,webix.env.mouse.move,this._onmove,this);this._upev=webix.event(document.body,webix.env.mouse.up,this._onup,this);this._dragobj.style[this._key_property]=this._originobj.style[this._key_property]=e.start+"px";n.appendChild(this._viewobj);n.appendChild(this._dragobj);n.appendChild(this._originobj)},_onup:function(){this.callEvent("onResizeEnd",[this._last_result]);webix.eventRemove(this._moveev);webix.eventRemove(this._upev);webix.html.remove(this._viewobj);webix.html.remove(this._dragobj);webix.html.remove(this._originobj);this._viewobj=this._dragobj=this._originobj=null},_onmove:function(e){var t=webix.html.pos(e);this._last_result=(this._settings.dir=="x"?t.x:t.y)+this._settings.start-this._settings.eventPos;this._dragobj.style[this._key_property]=this._last_result+"px";this.callEvent("onResize",[this._last_result])}},webix.EventSystem,webix.Settings);webix.extend(webix.ui.datatable,{resizeRow_setter:function(e){this._settings.scrollAlignY=false;this._settings.fixedRowHeight=false;return this.resizeColumn_setter(e)},resizeColumn_setter:function(e){if(e&&this._rs_init_flag){webix.event(this._viewobj,"mousemove",this._rs_move,this);webix.event(this._viewobj,"mousedown",this._rs_down,this);webix.event(this._viewobj,"mouseup",this._rs_up,this);this._rs_init_flag=false}return e},_rs_init_flag:true,_rs_down:function(e){if(!this._rs_ready)return;this._rs_process=[webix.html.pos(e),this._rs_ready[2]];webix.html.denySelect()},_rs_up:function(){this._rs_process=false;webix.html.allowSelect()},_rs_start:function(e){e=e||event;if(this._rs_progress)return;var t=this._rs_ready[0];var n=this._rs_process[1];var r=this._locate(n);var i=this._rs_process[0];var s;if(t=="x"){s=webix.html.offset(n).x+this._rs_ready[1]-webix.html.offset(this._body).x;i=i.x;if(!this._rs_ready[1])r.cind-=n.parentNode.colSpan||1}else{s=webix.html.offset(n).y+this._rs_ready[1]-webix.html.offset(this._body).y+this._header_height;i=i.y;if(!this._rs_ready[1])r.rind--}if(r.cind>=0&&r.rind>=0){this._rs_progress=[t,r,s];var o=new webix.ui.resizearea({container:this._viewobj,dir:t,eventPos:i,start:s,cursor:(t=="x"?"e":"n")+"-resize"});o.attachEvent("onResizeEnd",webix.bind(this._rs_end,this))}this._rs_down=this._rs_ready=false},_rs_end:function(e){if(this._rs_progress){var t=this._rs_progress[0];var n=this._rs_progress[1];var r=e-this._rs_progress[2];if(t=="x"){if(this._settings.rightSplit&&n.cind+1>=this._rightSplit){n.cind++;r*=-1}var i=this._columns[n.cind].width;this._setColumnWidth(n.cind,i+r)}else{var s=this.getIdByIndex(n.rind);var o=this.getItem(s).$height||this._settings.rowHeight;this.setRowHeight(s,o+r)}this._rs_up()}this._rs_progress=null},_rs_move:function(e){if(this._rs_ready&&this._rs_process)return this._rs_start(e);e=e||event;var t=e.target||e.srcElement;var n=false;if(t.tagName=="TD"||t.tagName=="TABLE")return;var r=t.className||"";var i=r.indexOf("webix_cell")!=-1;if(i&&this.config.drag)return;var s=r.indexOf("webix_hcell")!=-1;this._rs_ready=false;if(i||s){var o=t.offsetWidth;var u=t.offsetHeight;var a=webix.html.posRelative(e);if(i&&this._settings.resizeRow){if(a.y<3){this._rs_ready=["y",0,t];n="n-resize"}else if(u-a.y<4){this._rs_ready=["y",u,t];n="n-resize"}}if(this._settings.resizeColumn){if(a.x<3){this._rs_ready=["x",0,t];n="e-resize"}else if(o-a.x<4){this._rs_ready=["x",o,t];n="e-resize"}}}if(this._cursor_timer)window.clearTimeout(this._cursor_timer);this._cursor_timer=webix.delay(this._mark_resize_ready,this,[n],n?100:0)},_mark_resize_ready:function(e){if(this._last_cursor_mode!=e){this._last_cursor_mode=e;this._viewobj.style.cursor=e||"default"}}});webix.extend(webix.ui.datatable,webix.PagingAbility);webix.csv={escape:true,delimeter:{rows:"\n",cols:"	"},parse:function(e,t){t=t||this.delimeter;if(!this.escape)return this._split_clip_data(e,t);var n=e.split(t.rows);var r=0;while(r<n.length-1){if(this._substr_count(n[r],'"')%2===1){n[r]+=t.rows+n[r+1];delete n[r+1];r++}r++}var i=[];for(r=0;r<n.length;r++){if(typeof n[r]!=="undefined"){var s=n[r].split(t.cols);for(var o=0;o<s.length;o++){if(s[o].indexOf('"')===0)s[o]=s[o].substr(1,s[o].length-2);s[o]=s[o].replace('""','"')}i.push(s)}}return i},_split_clip_data:function(e,t){var n=e.split(t.rows);for(var r=0;r<n.length;r++){n[r]=n[r].split(t.cols)}return n},_substr_count:function(e,t){var n=e.split(t);return n.length-1},stringify:function(e,t){t=t||this.delimeter;if(!this.escape){for(var n=0;n<e.length;n++)e[n]=e[n].join(t.cols);return e.join(t.rows)}var r=/\n|\"|;|,/;for(var n=0;n<e.length;n++){for(var i=0;i<e[n].length;i++){if(r.test(e[n][i])){e[n][i]=e[n][i].replace(/"/g,'""');e[n][i]='"'+e[n][i]+'"'}}e[n]=e[n].join(t.cols)}e=e.join(t.rows);return e}};webix.TablePaste={clipboard_setter:function(e){if(e===true||e===1)this._settings.clipboard="block";webix.clipbuffer.init();this.attachEvent("onSelectChange",this._sel_to_clip);this.attachEvent("onPaste",this._clip_to_sel);return e},_sel_to_clip:function(){var e=this._get_sel_text();webix.clipbuffer.set(e);webix.UIManager.setFocus(this)},_get_sel_text:function(){var e=[];this.mapSelection(function(t,n,r,i,s){if(!e[i])e[i]=[];e[i].push(t);return t});return webix.csv.stringify(e,this._settings.delimiter)},_clip_to_sel:function(e){if(!webix.isUndefined(this._paste[this._settings.clipboard])){var t=webix.csv.parse(e,this._settings.delimiter);this._paste[this._settings.clipboard].call(this,t)}},_paste:{block:function(e){var t=this.mapSelection(null);if(!t)return;this.mapCells(t.row,t.column,e.length,null,function(t,n,r,i,s){if(e[i]&&e[i].length>s){return e[i][s]}return t});this.render()},selection:function(e){this.mapSelection(function(t,n,r,i,s){if(e[i]&&e[i].length>s)return e[i][s];return t});this.render()},repeat:function(e){this.mapSelection(function(t,n,r,i,s){n=e[i%e.length];t=n[s%n.length];return t});this.render()},custom:function(e){}}};webix.extend(webix.ui.datatable,webix.TablePaste);(function(){function e(e,i){var s=n(e,i);var o='<rows profile="color">';o+=t("header","head",e,s);if(e.config.footer)o+=t("footer","foot",e,s);o+=r(e,s,i);o+="</rows>";return o}function t(e,t,n,r){var i="<"+t+">";var s=1;for(var o=0;o<r.length;o++)if(r[o][e]&&r[o][e].length>s)s=r[o][e].length;for(var o=0;o<s;o++){i+="<columns>";for(var u=0;u<r.length;u++){var a=r[u];i+="<column";i+=a.width?' width="'+a.width+'"':"";var f=a[e][o];i+=f&&f.colspan?' colspan="'+f.colspan+'"':"";i+=f&&f.rowspan?' rowspan="'+f.rowspan+'"':"";i+=a.exportAsTree?' type="tree"':"";i+=' align="left"';i+="><![CDATA[";i+=(a[e][o]?a[e][o].text:"").replace(/<[^>]*>/g," ");i+="]]></column>"}i+="</columns>"}i+="</"+t+">";return i}function n(e,t){function i(e,t){var r=e?webix.clone(e):{};if(typeof t=="object")webix.extend(r,t,true);n.push(r)}var n=[];var r=t.columns;if(t.id)n.push({id:"id",width:50,header:[{text:"ID"}],footer:[""]});if(r){for(var s in r)i(e.getColumnConfig(s),r[s])}else{var o=e._settings.columns;for(var u=0;u<o.length;u++)i(o[u])}return n}function r(e,t,n){var r="";var i=e.data;for(var s=0;s<i.order.length;s++){var o=i.order[s];var u=i.pull[o];if(n.level&&n.level!=u.$level)continue;var a=u.$level?' level="'+(u.$level-1)+'"':"";r+='<row id="'+o+'"'+a+">";for(var f=0;f<t.length;f++)r+="<cell><![CDATA["+e._getValue(u,t[f],s).toString().replace(/<[^>]*>/g,"")+"]]></cell>";r+="</row>"}return r}function i(e,t){webix.send(e,{grid_xml:t},null,"_blank")}webix.extend(webix.ui.datatable,{exportToPDF:function(t,n){var r=e(this,n||{});t=t||"http://webix-export.appspot.com/export/pdf";i(t,r)},exportToExcel:function(t,n){var r=e(this,n||{});t=t||"http://webix-export.appspot.com/export/excel";i(t,r)}})})();if(!window.webix)webix={};if(!webix.storage)webix.storage={};webix.storage.local={put:function(e,t){if(e&&window.JSON&&window.localStorage){window.localStorage.setItem(e,window.JSON.stringify(t))}},get:function(e){if(e&&window.JSON&&window.localStorage){var t=window.localStorage.getItem(e);if(!t)return null;return webix.DataDriver.json.toObject(t)}else return null},remove:function(e){if(e&&window.JSON&&window.localStorage){window.localStorage.removeItem(e)}}};webix.storage.session={put:function(e,t){if(e&&window.JSON&&window.sessionStorage){window.sessionStorage.setItem(e,window.JSON.stringify(t))}},get:function(e){if(e&&window.JSON&&window.sessionStorage){var t=window.sessionStorage.getItem(e);if(!t)return null;return webix.DataDriver.json.toObject(t)}else return null},remove:function(e){if(e&&window.JSON&&window.sessionStorage){window.sessionStorage.removeItem(e)}}};webix.storage.cookie={put:function(e,t,n,r){if(e&&window.JSON){document.cookie=e+"="+window.JSON.stringify(t)+(r&&r instanceof Date?";expires="+r.toUTCString():"")+(n?";domain="+n:"")}},_get_cookie:function(e){var t=document.cookie.split(";");var n="";var r="";var i="";var s=false;for(var o=0;o<t.length;o++){n=t[o].split("=");r=n[0].replace(/^\s+|\s+$/g,"");if(r==e){s=true;if(n.length>1){i=unescape(n[1].replace(/^\s+|\s+$/g,""))}return i}n=null;r=""}if(!s){return null}return null},get:function(e){if(e&&window.JSON){var t=this._get_cookie(e);if(!t)return null;return webix.DataDriver.json.toObject(t)}else return null},remove:function(e,t){if(e&&this._get_cookie(e))document.cookie=e+"="+(t?";domain="+t:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}};webix.DataState={getState:function(){var e=this.config.columns.length;var t=this.config.columns;var n={ids:[],size:[],select:this.getSelectedId(true),scroll:this.getScrollState()};for(var r=0;r<e;r++){n.ids.push(t[r].id);n.size.push(t[r].width)}if(this._last_sorted){n.sort={id:this._last_sorted,dir:this._last_order}}if(this._filter_elements){var i={};var s=0;for(var o in this._filter_elements){var u=this._filter_elements[o];i[o]=u[2].getValue(u[0]);s=1}if(s)n.filter=i}n.hidden=[];for(var o in this._hidden_column_hash)n.hidden.push(o);return n},setState:function(e){var t=this.config.columns;if(!e)return;if(e.hidden){var n={};for(var r=0;r<e.hidden.length;r++){n[e.hidden[r]]=true;if(!this._hidden_column_order.length)this.hideColumn(e.hidden[r])}if(this._hidden_column_order.length){for(var r=0;r<this._hidden_column_order.length;r++){var i=this._hidden_column_order[r];if(!!n[i]==!this._hidden_column_hash[i])this.hideColumn(i,!!n[i])}}}if(e.filter){for(var s in e.filter){var o=e.filter[s];if(!this._filter_elements[s])continue;var u=this._filter_elements[s];u[2].setValue(u[0],o);var a=u[1].contentId;if(a)this._active_headers[a].value=o}this.filterByAll()}if(e.size&&e.ids){var f=e.ids.length;for(var r=0;r<f;r++){if(t[r]&&t[r].width!=e.size[r])this._setColumnWidth(r,e.size[r],true)}this._updateColsSizeSettings();if(e.sort){this._sort(e.sort.id,e.sort.dir,t[this.getColumnIndex(e.sort.id)].sort)}var l=false;var c=this.config.columns;for(var r=0;r<c.length;r++)if(c[r].id!=e.ids[r])l=true;if(l){for(var r=0;r<e.ids.length;r++)c[r]=this.getColumnConfig(e.ids[r]);this.refreshColumns()}}if(e.select&&this.select){var h=e.select;this.unselect();for(var r=0;r<h.length;r++)if(!h[r].row||this.exists(h[r].row))this._select(h[r],true)}if(e.scroll)this.scrollTo(e.scroll.x,e.scroll.y)}};webix.extend(webix.ui.datatable,webix.DataState);(function(){var e=webix.Touch={config:{longTouchDelay:1e3,scrollDelay:150,gravity:500,deltaStep:30,speed:"0ms",finish:1500,ellastic:true},limit:function(t){e._limited=t!==false},disable:function(){e._disabled=true},enable:function(){e._disabled=false},$init:function(){e.$init=function(){};webix.event(document.body,t.down,e._touchstart);webix.event(document.body,t.move,e._touchmove);webix.event(document.body,t.up,e._touchend);webix.event(document.body,"dragstart",function(e){return webix.html.preventEvent(e)});webix.event(document.body,"touchstart",function(t){if(e._disabled||e._limited)return;if(webix.env.isSafari){var n=t.srcElement.tagName.toLowerCase();if(n=="input"||n=="textarea"||n=="select"||n=="label")return true;e._fire_fast_event=true;return webix.html.preventEvent(t)}});e._clear_artefacts();e._scroll=[null,null];e.$active=true},_clear_artefacts:function(){e._start_context=e._current_context=e._prev_context=null;e._scroll_mode=e._scroll_node=e._scroll_stat=this._long_touched=null;e._delta={_x_moment:0,_y_moment:0,_time:0};if(e._css_button_remove){webix.html.removeCss(e._css_button_remove,"webix_touch");e._css_button_remove=null}window.clearTimeout(e._long_touch_timer);e._was_not_moved=true;e._axis_x=true;e._axis_y=true;if(!e._active_transion)e._scroll_end()},_touchend:function(t){if(e._start_context){if(!e._scroll_mode){if(!this._long_touched){if(e._axis_y&&!e._axis_x){e._translate_event("onSwipeX")}else if(e._axis_x&&!e._axis_y){e._translate_event("onSwipeY")}else{if(webix.env.isSafari&&e._fire_fast_event){e._fire_fast_event=false;var n=e._start_context.target;webix.delay(function(){var e=document.createEvent("MouseEvents");e.initEvent("click",true,true);n.dispatchEvent(e)})}}}}else{var r=e._get_matrix(e._scroll_node);var i=r.e;var s=r.f;var o=e.config.finish;var u=e._get_delta(t,true);if(u._time){var a=i+e.config.gravity*u._x_moment/u._time;var f=s+e.config.gravity*u._y_moment/u._time;var l=e._scroll[0]?e._correct_minmax(a,false,false,e._scroll_stat.dx,e._scroll_stat.px):i;var c=e._scroll[1]?e._correct_minmax(f,false,false,e._scroll_stat.dy,e._scroll_stat.py):s;var h=Math.max(Math.abs(l-i),Math.abs(c-s));if(h<150)o=o*h/150;if(l!=i||c!=s)o=Math.round(o*Math.max((l-i)/(a-i),(c-s)/(f-s)));var p={e:l,f:c};var d=webix.$$(e._scroll_node);if(d&&d.adjustScroll)d.adjustScroll(p);o=Math.max(100,o);if(i!=p.e||s!=p.f){e._set_matrix(e._scroll_node,p.e,p.f,o+"ms");if(e._scroll_master)e._scroll_master._sync_scroll(p.e,p.f,o+"ms");e._set_scroll(p.e,p.f,o+"ms")}else{e._scroll_end()}}else e._scroll_end()}e._translate_event("onTouchEnd");e._clear_artefacts()}},_touchmove:function(t){if(!e._start_context)return;var n=e._get_delta(t);e._translate_event("onTouchMove");if(e._scroll_mode){e._set_scroll_pos(n)}else{e._axis_x=e._axis_check(n._x,"x",e._axis_x);e._axis_y=e._axis_check(n._y,"y",e._axis_y);if(e._scroll_mode){var r=e._get_event_view("onBeforeScroll");if(r){var i={};r.callEvent("onBeforeScroll",[i]);if(i.update){e.config.speed=i.speed;e.config.scale=i.scale}}e._init_scroller(n)}}return webix.html.preventEvent(t)},_set_scroll_pos:function(){if(!e._scroll_node)return;var t=e._get_matrix(e._scroll_node);var n=t.e,r=t.f;var i=e._prev_context||e._start_context;if(e._scroll[0])t.e=e._correct_minmax(t.e-i.x+e._current_context.x,e.config.ellastic,t.e,e._scroll_stat.dx,e._scroll_stat.px);if(e._scroll[1])t.f=e._correct_minmax(t.f-i.y+e._current_context.y,e.config.ellastic,t.f,e._scroll_stat.dy,e._scroll_stat.py);e._set_matrix(e._scroll_node,t.e,t.f,"0ms");if(e._scroll_master)e._scroll_master._sync_scroll(t.e,t.f,"0ms");e._set_scroll(t.e,t.f,"0ms")},_set_scroll:function(t,n,r){var i=e._scroll_stat.px/e._scroll_stat.dx*-t;var s=e._scroll_stat.py/e._scroll_stat.dy*-n;if(e._scroll[0])e._set_matrix(e._scroll[0],i,0,r);if(e._scroll[1])e._set_matrix(e._scroll[1],0,s,r)},scrollTo:function(t,n,r,i){e._set_matrix(t,n,r,i)},_set_matrix:function(t,n,r,i){if(!e._in_anim_frame&&window.setAnimationFrame){window.setAnimationFrame(function(){e._in_anim_frame=true;return e._set_matrix(t,n,r,i)})}e._in_anim_frame=null;e._active_transion=true;if(t){var s=e.config.translate||webix.env.translate;t.style[webix.env.transform]=s+"("+Math.round(n)+"px, "+Math.round(r)+"px"+(s=="translate3d"?", 0":"")+")";t.style[webix.env.transitionDuration]=i}},_get_matrix:function(t){var n=window.getComputedStyle(t)[webix.env.transform];var r;if(n=="none")r={e:0,f:0};else{if(window.WebKitCSSMatrix)r=new WebKitCSSMatrix(n);else if(window.MSCSSMatrix)r=new MSCSSMatrix(n);else{var i=n.replace(/(matrix\()(.*)(\))/gi,"$2");i=i.replace(/\s/gi,"");i=i.split(",");var r={};var s=["a","b","c","d","e","f"];for(var o=0;o<s.length;o++){r[s[o]]=parseInt(i[o],10)}}}if(e._scroll_master)e._scroll_master._sync_pos(r);return r},_correct_minmax:function(e,t,n,r,i){if(e===n)return e;var s=Math.abs(e-n);var o=s/(e-n);if(e>0)return t?n+o*Math.sqrt(s):0;var u=r-i;if(u+e<0)return t?n-Math.sqrt(-(e-n)):-u;return e},_init_scroll_node:function(t){if(!t.scroll_enabled){t.scroll_enabled=true;t.parentNode.style.position="relative";var n=webix.env.cssPrefix;t.style.cssText+=n+"transition: "+n+"transform; "+n+"user-select:none; "+n+"transform-style:flat;";t.addEventListener(webix.env.transitionEnd,e._scroll_end,false)}},_init_scroller:function(t){if(e._scroll_mode.indexOf("x")!=-1)e._scroll[0]=e._create_scroll("x",e._scroll_stat.dx,e._scroll_stat.px,"width");if(e._scroll_mode.indexOf("y")!=-1)e._scroll[1]=e._create_scroll("y",e._scroll_stat.dy,e._scroll_stat.py,"height");e._init_scroll_node(e._scroll_node);window.setTimeout(e._set_scroll_pos,1)},_create_scroll:function(t,n,r,i){if(n-r<2){var s=e._get_matrix(e._scroll_node);var o=t=="y"?s.e:0;var u=t=="y"?0:s.f;if(!e._scroll_master)e._set_matrix(e._scroll_node,o,u,"0ms");e._scroll_mode=e._scroll_mode.replace(t,"");return""}var a=webix.html.create("DIV",{"class":"webix_scroll_"+t},"");a.style[i]=Math.max(r*r/n-7,10)+"px";e._scroll_node.parentNode.appendChild(a);return a},_axis_check:function(t,n,r){if(t>e.config.deltaStep){if(e._was_not_moved){e._long_move(n);e._locate(n);if((e._scroll_mode||"").indexOf(n)==-1)e._scroll_mode=""}return false}return r},_scroll_end:function(){var t,n,r;r=webix.$$(e._scroll_node||this);if(r){if(e._scroll_node)t=e._get_matrix(e._scroll_node);else if(r.getScrollState){n=r.getScrollState();t={e:n.x,f:n.y}}webix.callEvent("onAfterScroll",[t]);if(r.callEvent)r.callEvent("onAfterScroll",[t])}if(!e._scroll_mode){webix.html.remove(e._scroll);e._scroll=[null,null]}e._active_transion=false},_long_move:function(t){window.clearTimeout(e._long_touch_timer);e._was_not_moved=false},_stop_old_scroll:function(t){if(e._scroll[0]||e._scroll[1]){e._stop_scroll(t,e._scroll[0]?"x":"y")}else return true},_touchstart:function(n){var r=n.target||event.srcElement;if(e._disabled||r.tagName&&r.tagName.toLowerCase()=="textarea")return;e._start_context=t.context(n);if(e._limited&&!e._is_scroll()){e._stop_old_scroll(n);e._start_context=null;return}e._translate_event("onTouchStart");if(e._stop_old_scroll(n))e._long_touch_timer=window.setTimeout(e._long_touch,e.config.longTouchDelay);var i=webix.$$(n);if(i&&i.touchable&&(!r.className||r.className.indexOf("webix_view")!==0)){e._css_button_remove=i.getNode(n);webix.html.addCss(e._css_button_remove,"webix_touch")}},_long_touch:function(t){if(e._start_context){e._translate_event("onLongTouch");webix.callEvent("onClick",[e._start_context]);e._long_touched=true}},_stop_scroll:function(n,r){e._locate(r);var i=e._scroll[0]||e._scroll[1];if(i){var s=e._get_event_view("onBeforeScroll");if(s)s.callEvent("onBeforeScroll",[e._start_context,e._current_context])}if(i&&(!e._scroll_node||i.parentNode!=e._scroll_node.parentNode)){e._clear_artefacts();e._scroll_end();e._start_context=t.context(n)}e._touchmove(n)},_get_delta:function(n,r){e._prev_context=e._current_context;e._current_context=t.context(n);e._delta._x=Math.abs(e._start_context.x-e._current_context.x);e._delta._y=Math.abs(e._start_context.y-e._current_context.y);if(e._prev_context){if(e._current_context.time-e._prev_context.time<e.config.scrollDelay){e._delta._x_moment=e._delta._x_moment/1.3+e._current_context.x-e._prev_context.x;e._delta._y_moment=e._delta._y_moment/1.3+e._current_context.y-e._prev_context.y}else{e._delta._y_moment=e._delta._x_moment=0}e._delta._time=e._delta._time/1.3+(e._current_context.time-e._prev_context.time)}return e._delta},_get_sizes:function(t){e._scroll_stat={dx:t.offsetWidth,dy:t.offsetHeight,px:t.parentNode.offsetWidth,py:t.parentNode.offsetHeight}},_is_scroll:function(t){var n=e._start_context.target;if(!webix.env.touch&&!webix.env.transition&&!webix.env.transform)return null;while(n&&n.tagName!="BODY"){if(n.getAttribute){var r=n.getAttribute("touch_scroll");if(r&&(!t||r.indexOf(t)!=-1))return[n,r]}n=n.parentNode}return null},_locate:function(t){var n=this._is_scroll(t);if(n){e._scroll_mode=n[1];e._scroll_node=n[0];e._get_sizes(n[0])}return n},_translate_event:function(t){webix.callEvent(t,[e._start_context,e._current_context]);var n=e._get_event_view(t);if(n)n.callEvent(t,[e._start_context,e._current_context])},_get_event_view:function(t){var n=webix.$$(e._start_context);if(!n)return null;while(n){if(n.hasEvent&&n.hasEvent(t))return n;n=n.getParentView()}return null},_get_context:function(t){if(!t.touches[0]){var n=e._current_context;n.time=new Date;return n}return{target:t.target,x:t.touches[0].pageX,y:t.touches[0].pageY,time:new Date}},_get_context_m:function(e){return{target:e.target||e.srcElement,x:e.pageX,y:e.pageY,time:new Date}}};webix.ready(function(){if(webix.env.touch){e.$init();if(window.MSCSSMatrix)webix.html.addStyle(".webix_view{ -ms-touch-action: none; }")}});var t=webix.env.mouse={down:"mousedown",up:"mouseup",move:"mousemove",context:e._get_context_m};if(window.navigator.pointerEnabled){t.down="pointerdown";t.move="pointermove";t.up="pointerup"}else if(window.navigator.msPointerEnabled){t.down="MSPointerDown";t.move="MSPointerMove";t.up="MSPointerUp"}else if(webix.env.touch){t.down="touchstart";t.move="touchmove";t.up="touchend";t.context=e._get_context}})();webix.attachEvent("onDataTable",function(e,t){if(webix.env.touch){webix.Touch.$init();t.scrollSize=0;webix.extend(e,t.prerender===true?e._touchNative:e._touch)}});webix.extend(webix.ui.datatable,{_touchNative:{_scrollTo_touch:function(e,t){webix.Touch._set_matrix(this._body.childNodes[1].firstChild,0,0,"0ms");this._sync_scroll(e,t,"0ms")},_getScrollState_touch:function(){var e=webix.Touch._get_matrix(this._body.childNodes[1].firstChild);return{x:-e.e,y:-e.f}},$init:function(){webix.Touch.limit();this.defaults.scrollAlignY=false;this._body.setAttribute("touch_scroll","xy");this.attachEvent("onBeforeScroll",function(){webix.Touch._scroll_node=this._body.childNodes[1].firstChild;webix.Touch._get_sizes(webix.Touch._scroll_node);webix.Touch._scroll_master=this});this.attachEvent("onTouchEnd",function(){webix.Touch._scroll_master=null});webix.Touch._init_scroll_node(this._body.childNodes[1].firstChild);webix.Touch._set_matrix(this._body.childNodes[1].firstChild,0,0,"0ms");this._sync_scroll(0,0,"0ms")},_sync_scroll:function(e,t,n){if(this._settings.leftSplit)webix.Touch._set_matrix(this._body.childNodes[0].firstChild,0,t,n);if(this._settings.rightSplit)webix.Touch._set_matrix(this._body.childNodes[2].firstChild,0,t,n);if(this._settings.header)webix.Touch._set_matrix(this._header.childNodes[1].firstChild,e,0,n);if(this._settings.footer)webix.Touch._set_matrix(this._footer.childNodes[1].firstChild,e,0,n);this.callEvent("onSyncScroll",[e,t,n])},_sync_pos:function(){}},_touch:{_scrollTo_touch:function(e,t){webix.delay(function(){this.callEvent("onAfterScroll",[{e:-e,f:-t}])},this)},$init:function(){webix.Touch.limit();this.defaults.scrollAlignY=false;this._body.setAttribute("touch_scroll","xy");this.attachEvent("onBeforeScroll",function(){var e=webix.Touch;e._scroll_node=this._body.childNodes[1].firstChild;e._get_sizes(e._scroll_node);e._scroll_stat.dy=this._dtable_height;e._scroll_master=this;this._touch_ellastic=e.config.ellastic;this._touch_gravity=e.config.gravity;this._touch_saved=1;e.config.ellastic=false;e.config.gravity=0});this.attachEvent("onAfterScroll",function(e){webix.Touch._scroll_master=null;webix.Touch._fix_f=null;if(this._touch_saved){webix.Touch.config.ellastic=this._touch_ellastic;webix.Touch.config.gravity=this._touch_gravity;this._touch_saved=0}this._scrollTop=0;var t=webix.Touch.config.translate;webix.Touch.config.translate="translate";this._sync_scroll(e.e,0,"0ms");webix.Touch.config.translate=t;this._scrollLeft=-e.e;this._scrollTop=-e.f;this.render();return false});webix.Touch._init_scroll_node(this._body.childNodes[1].firstChild);webix.Touch._set_matrix(this._body.childNodes[1].firstChild,0,0,"0ms");this._sync_scroll(0,0,"0ms")},_sync_scroll:function(e,t,n){t+=this._scrollTop;webix.Touch._set_matrix(this._body.childNodes[1].firstChild,e,t,n);if(this._settings.leftSplit)webix.Touch._set_matrix(this._body.childNodes[0].firstChild,0,t,n);if(this._settings.rightSplit)webix.Touch._set_matrix(this._body.childNodes[2].firstChild,0,t,n);if(this._settings.header)webix.Touch._set_matrix(this._header.childNodes[1].firstChild,e,0,n);if(this._settings.footer)webix.Touch._set_matrix(this._footer.childNodes[1].firstChild,e,0,n);this.callEvent("onSyncScroll",[e,t,n])},_sync_pos:function(e){e.f-=this._scrollTop}}});webix.extend(webix.ui.datatable,{$init:function(){this.data.attachEvent("onStoreLoad",webix.bind(this._adjustColumns,this));this.attachEvent("onStructureLoad",this._adjustColumns);this.attachEvent("onStructureUpdate",this._resizeColumns);this.attachEvent("onResize",this._resizeColumns)},_adjustColumns:function(){if(!this.count())return;var e=false;var t=this._columns;for(var n=0;n<t.length;n++)if(t[n].adjust)e=this._adjustColumn(n,t[n].adjust,true)||e;if(e)this._updateColsSizeSettings()},_resizeColumns:function(){var e=this._settings.columns;var t=[];var n=0;if(e&&!this._settings.autowidth)for(var r=0;r<e.length;r++){var i=e[r].fillspace;if(i){t[r]=i;n+=i*1||1}}if(n)this._fillColumnSize(t,n)},_fillColumnSize:function(e,t){var n=this._settings.columns;if(!n)return;var r=this._content_width-this._scrollSizeY;var i=false;for(var s=0;s<n.length;s++)if(!e[s])r-=n[s].width||this.config.columnWidth;if(r>0){for(var s=0;s<e.length;s++)if(e[s]){var o=Math.min(r,Math.round(r*e[s]/t));i=this._setColumnWidth(s,o,true)||i;r=r-n[s].width;t=t-e[s]}}if(i)this._updateColsSizeSettings(true)},_getColumnConfigSize:function(e,t){var n=webix.html.create("DIV",{"class":"webix_view webix_table_cell webix_measure_size webix_cell"},"");n.style.cssText="width:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;";document.body.appendChild(n);var r=this._settings.columns[e];var i=-Infinity;if(t!="header")for(var s=0;s<this.data.order.length;s++){var o=this.getItem(this.data.order[s]);var u=this._getValue(o,r,s);n.innerHTML=u;i=Math.max(n.scrollWidth,i)}if(t&&t!="data"){for(var s=0;s<r.header.length;s++){var a=r.header[s];if(a){n.innerHTML=a.text;i=Math.max(n.scrollWidth,i)}}}n=webix.html.remove(n);return i-1+(webix.env.isIE?webix.skin.$active.layoutPadding.space:0)},_adjustColumn:function(e,t,n){var r=this._getColumnConfigSize(e,t);return this._setColumnWidth(e,r,n)},adjustColumn:function(e,t){this._adjustColumn(this.getColumnIndex(e),t)},adjustRowHeight:function(e,t){var n=this.getColumnConfig(e);var r=this.data.count();var i=webix.html.create("DIV",{"class":"webix_table_cell webix_measure_size webix_cell"},"");i.style.cssText="width:"+n.width+"px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;";this.$view.appendChild(i);this.data.each(function(e){i.innerHTML=this._getValue(e,n,0);e.$height=Math.max(i.scrollHeight,this._settings.rowHeight)},this);i=webix.html.remove(i);if(!t)this.refresh()}});webix.extend(webix.ui.datatable,{math_setter:function(e){if(e)this._math_init();return e},_math_pref:"$",_math_init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(this._parse_row_math,this));this.data.attachEvent("onStoreLoad",webix.bind(this._parse_math,this));this.attachEvent("onStructureLoad",this._parse_math)},_parse_row_math:function(e,t,n){if(!e||n=="delete"||n=="paint")return;for(var r=0;r<this._columns.length;r++)this._parse_cell_math(e,this._columns[r].id,true)},_parse_cell_math:function(e,t,n){var r=this.getItem(e);var i;if(n===true)i=r[this._math_pref+t]||r[t];else{i=r[t];this._math_recalc={}}if(typeof i==="undefined"||i===null)return;if(i.length>0&&i.substr(0,1)==="="){if(typeof r[this._math_pref+t]==="undefined"||n!==true)r[this._math_pref+t]=r[t];r[t]=this._calculate(i,e,t)}else{if(typeof r[this._math_pref+t]!=="undefined")delete r[this._math_pref+t];this._remove_old_triggers(e,t)}if(typeof r.depends!=="undefined"&&typeof r.depends[t]!=="undefined"){for(var s in r.depends[t]){var o=r.depends[t][s][0]+"__"+r.depends[t][s][1];if(typeof this._math_recalc[o]==="undefined"){this._math_recalc[o]=true;this._parse_cell_math(r.depends[t][s][0],r.depends[t][s][1],true)}}}},_set_original_value:function(e,t){var n=this.getItem(e);if(typeof n[this._math_pref+t]!=="undefined")n[t]=n[this._math_pref+t]},_parse_math:function(){if(!this._columns||!this.count())return;this._exprs_by_columns();for(var e=0;e<this._columns.length;e++){var t=this.columnId(e);this.data.each(function(e){this._parse_cell_math(e.id,t)},this)}},_exprs_by_columns:function(){for(var e=0;e<this._columns.length;e++){if(this._columns[e].math){var t=this.columnId(e);var n="="+this._columns[e].math;n=n.replace(/\$r/g,"#$r#");n=n.replace(/\$c/g,"#$c#");this.data.each(function(e){e[t]=this._parse_relative_expr(n,e.id,t)},this)}}},_parse_relative_expr:function(e,t,n){return webix.template(e)({$r:t,$c:n})},_get_calc_value:function(e,t){var n;if(this.exists(e))n=this.getItem(e);else return"#out_of_range";var r=n[this._math_pref+t]||n[t]||0;r=r.toString();if(r.substring(0,1)!=="=")return r;else{if(typeof n[this._math_pref+t]==="undefined")n[this._math_pref+t]=n[t];n[t]=this._calculate(r,e,t,true);return n[t]}},_calculate:function(e,t,n,r){if(r===true){if(this._in_math_trace(t,n))return"#selfreference"}else this._start_math_trace();this._to_math_trace(t,n);var i=this.getItem(t);e=e.substring(1);var s=this._get_operations(e);var o=this._get_refs(e);if(s){e=this._replace_refs(e,o);e=this._parse_args(e,s)}else{e=this._replace_refs(e,o,true);var o=[]}var u=this._math_exception(e);if(u!==false)return u;this._from_math_trace(t,n);this._remove_old_triggers(t,n);for(var a=0;a<o.length;a++){this._add_trigger([t,n],o[a])}var u=this._math_exception(e);if(u!==false)return u;if(s===null)return e;e=this._compute(e);var u=this._math_exception(e);if(u!==false)return u;return e},_get_operations:function(e){var t=/(\+|\-|\*|\/)/g;var n=e.replace(/\[[^)]*?\]/g,"").match(t);return n},_get_refs:function(e){var t=/\[([^\]]+),([^\]]+)\]/g;var n=e.match(t);if(n===null)n=[];for(var r=0;r<n.length;r++){var i=n[r];var s=i;i=i.substr(1,i.length-2);i=i.split(",");i[0]=this._trim(i[0]);i[1]=this._trim(i[1]);if(i[0].substr(0,1)===":")i[0]=this.getIdByIndex(i[0].substr(1));if(i[1].substr(0,1)===":")i[1]=this.columnId(i[1].substr(1));i[2]=s;n[r]=i}return n},_replace_refs:function(e,t,n){var r="(",i=")";if(n)r=i="";for(var s=0;s<t.length;s++){var o=t[s];var u=this._get_calc_value(o[0],o[1]);e=e.replace(o[2],r+u+i)}return e},_parse_args:function(e,t){var n=[];for(var r=0;r<t.length;r++){var i=t[r];var s=this._split_by(e,i);n.push(s[0]);e=s[1]}n.push(e);var o=/^(-?\d|\.|\(|\))+$/;for(var r=0;r<n.length;r++){var u=this._trim(n[r]);if(o.test(u)===false)return"#error";n[r]=u}var a="";for(var r=0;r<n.length-1;r++){a+=n[r]+t[r]}a+=n[n.length-1];return a},_compute:function(expr){try{webix.temp_value="";expr="webix.temp_value = "+expr;eval(expr)}catch(ex){webix.assert(false,"Math error in datatable<br>"+expr);webix.temp_value=""}var result=webix.temp_value;webix.temp_value=null;return result.toString()},_split_by:function(e,t){var n=e.indexOf(t);var r=e.substr(0,n);var i=e.substr(n+1);return[r,i]},_trim:function(e){e=e.replace(/^ */g,"");e=e.replace(/ *$/g,"");return e},_start_math_trace:function(){this._math_trace=[]},_to_math_trace:function(e,t){this._math_trace[e+"__"+t]=true},_from_math_trace:function(e,t){if(typeof this._math_trace[e+"__"+t]!=="undefined")delete this._math_trace[e+"__"+t]},_in_math_trace:function(e,t){if(typeof this._math_trace[e+"__"+t]!=="undefined")return true;else return false},_add_trigger:function(e,t){var n=this.getItem(t[0]);if(typeof n.depends==="undefined")n.depends={};if(typeof n.depends[t[1]]==="undefined")n.depends[t[1]]={};n.depends[t[1]][e[0]+"__"+e[1]]=e;n=this.getItem(e[0]);if(typeof n.triggers==="undefined")n.triggers={};if(typeof n.triggers[e[1]]==="undefined")n.triggers[e[1]]={};n.triggers[e[1]][t[0]+"__"+t[1]]=t},_remove_old_triggers:function(e,t){if(!this.exists(e,t))return;var n=this.getItem(e,t);if(typeof n.triggers==="undefined")return;for(var r in n.triggers[t]){var i=n.triggers[t][r];delete this.getItem(i[0]).depends[i[1]][e+"__"+t]}},_math_exception:function(e){var t=/#\w+/;var n=e.match(t);if(n!==null&&n.length>0)return n[0];return false}});webix.extend(webix.ui.datatable,{_get_editor_type:function(e){return this.getColumnConfig(e.column).editor},getEditor:function(e,t){if(!e)return this._last_editor;if(arguments.length==1){t=e.column;e=e.row}return(this._editors[e]||{})[t]},_for_each_editor:function(e){for(var t in this._editors){var n=this._editors[t];for(var r in n)if(r!="$count")e.call(this,n[r])}},_init_editor:function(e,t,n){var r=e.row;var i=e.column;var s=t.config=this.getColumnConfig(i);if(n!==false)this.showCell(r,i);var o=t.render();if(t.$inline)o=this._locateInput(e);t.node=o;var u=this.getItem(r);var a=s.editFormat;var f;if(this._settings.editMath)f=u["$"+i];f=f||u[i];if(webix.isUndefined(f))f="";t.setValue(a?a(f):f);t.value=u[i];this._addEditor(e,t);if(!t.$inline)this._sizeToCell(e,o,true);if(t.afterRender)t.afterRender();if(this._settings.liveValidation){webix.event(t.node,"keyup",this._bind_live_validation(e,this));this.validateEditor(e)}return o},_bind_live_validation:function(e,t){return function(){t.validateEditor(e)}},_set_new_value:function(e,t){var n=this.getColumnConfig(e.column).editParse;var r=this.getItem(e.row);r[e.column]=n?n(t):t;if(this._settings.editMath)delete r["$"+e.column];return e.row},_addEditor:function(e,t,n){var r=this._editors[e.row]=this._editors[e.row]||{};r.$count=(r.$count||0)+1;t.row=e.row;t.column=e.column;this._last_editor=r[e.column]=t;this._in_edit_mode++;this._last_editor_scroll=this.getScrollState()},_removeEditor:function(e){if(this._last_editor==e)this._last_editor=0;if(e.destroy)e.destroy();var t=this._editors[e.row];delete t[e.column];t.$count--;if(!t.$count)delete this._editors[e.row];this._in_edit_mode--},_changeEditorId:function(e,t){var n=this._editors[e];if(n){this._editors[t]=n;delete this._editors[e];for(var r in n)n[r].row=t}},_locate_cell:function(e){var t=this.getColumnConfig(e.column);if(t&&t.node&&t.attached){var n=this.getIndexById(e.row);if(n>=t._yr0&&n<t._yr1)return t.node.childNodes[n-t._yr0]}return 0},editCell:function(e,t,n,r){t=t||this._settings.columns[0].id;return webix.EditAbility.edit.call(this,{row:e,column:t},n,r)},editRow:function(e,t){if(e&&e.row)e=e.row;var n=false;this.eachColumn(function(t){this.edit({row:e,column:t},n,!n);n=true})},editColumn:function(e,t){if(e&&e.column)e=e.column;var n=false;this.eachRow(function(t){this.edit({row:t,column:e},n,!n);n=true})},eachRow:function(e,t){var n=this.data.order;if(t)n=this.data._filter_order||n;for(var r=0;r<n.length;r++)e.call(this,n[r])},eachColumn:function(e,t){for(var n in this._columns_pull){var r=this._columns_pull[n];if(!this._hidden_column_hash[r.id]||t)e.call(this,r.id,n,r)}},_after_edit_next:function(e){if(this.getSelectedId){var t=this.getSelectedId(true);if(t.length==1){this._select(e);return false}}},_custom_tab_handler:function(e,t){if(this._settings.editable&&!this._in_edit_mode){if(t.target&&t.target.tagName=="INPUT")return true;var n=this.getSelectedId(true);if(n.length==1){this.editNext(e,n[0]);return false}}return true},_find_cell_next:function(e,t,n){var r=this.getIndexById(e.row);var i=this.getColumnIndex(e.column);var s=this.data.order;var o=this._columns;if(n){for(var u=r;u<s.length;u++){for(var a=i+1;a<o.length;a++){var f={row:s[u],column:o[a].id};if(t.call(this,f))return f}i=-1}}else{for(var u=r;u>=0;u--){for(var a=i-1;a>=0;a--){var f={row:s[u],column:o[a].id};if(t.call(this,f))return f}i=o.length}}return null},_correct_after_focus_y:function(){if(this._in_edit_mode){if(this._ignore_after_focus_scroll)this._ignore_after_focus_scroll=false;else{this._y_scroll.scrollTo(this.getScrollState().y+this._body.childNodes[1].firstChild.scrollTop);this._body.childNodes[1].firstChild.scrollTop=0;this._ignore_after_focus_scroll=true}}},_correct_after_focus_x:function(){if(this._in_edit_mode){this._x_scroll.scrollTo(this._body.childNodes[1].scrollLeft)}},_component_specific_edit_init:function(){this.attachEvent("onScrollY",this._update_editor_y_pos);this.attachEvent("onScrollX",this._update_editor_y_pos);this.attachEvent("onScrollY",this._refocus_inline_editor);this.attachEvent("onColumnResize",function(){this.editStop()});this.attachEvent("onAfterFilter",function(){this.editStop()});this.attachEvent("onRowResize",function(){this.editStop()});this._body.childNodes[1].firstChild.onscroll=webix.bind(this._correct_after_focus_y,this);this._body.childNodes[1].onscroll=webix.bind(this._correct_after_focus_x,this)},_update_editor_y_pos:function(){if(this._in_edit_mode){var e=this._last_editor_scroll;this._last_editor_scroll=this.getScrollState();var t=this._last_editor_scroll.y-e.y;this._for_each_editor(function(e){if(e.getPopup){var n=this.getItemNode(e);if(n)e.getPopup().show(n);else e.getPopup().show({x:-1e4,y:-1e4})}else if(!e.$inline){e.node.top-=t;e.node.style.top=e.node.top+"px"}})}}});webix.extend(webix.ui.datatable,webix.EditAbility);webix.extend(webix.ui.datatable,{$init:function(){this._hidden_column_hash={};this._hidden_column_order=[];this._hidden_split=[0,0];this.attachEvent("onStructureLoad",this._hideInitialColumns)},_hideInitialColumns:function(){var e=this._columns;for(var t=e.length-1;t>=0;t--){if(e[t].hidden)this.hideColumn(e[t].id,true,true);else if(e[t].batch&&this.config.visibleBatch&&e[t].batch!=this.config.visibleBatch){this.hideColumn(e[t].id,true,true)}}},moveColumn:function(e,t){var n=this.getColumnIndex(e);if(n==t)return;var r=this._settings.columns;var i=r.splice(n,1);var s=t-(t>n?1:0);webix.PowerArray.insertAt.call(r,i[0],s);this._refresh_columns()},isColumnVisible:function(e){return!this._hidden_column_hash[e]},hideColumn:function(e,t,n){var r=this._settings.columns;var i=this._hidden_column_order;var s=this._hidden_column_hash;if(t!==false){var o=this.getColumnIndex(e);webix.assert(o!=-1,"hideColumn: invalid ID or already hidden");if(o==-1)return;if(!i.length){for(var u=0;u<r.length;u++)i[u]=r[u].id;this._hidden_split=[this._settings.leftSplit,this._rightSplit]}if(o<this._settings.leftSplit)this._settings.leftSplit--;if(o>=this._rightSplit)this._settings.rightSplit--;this._fixColspansHidden(o,r[o],0);this._hideColumn(o);var a=s[e]=r.splice(o,1)[0];a._yr0=-1}else{var a=s[e];webix.assert(a,"showColumn: invalid ID or already visible");if(!a)return;var f=null;var u=0;for(;u<i.length;u++){if(i[u]==e)break;if(!s[i[u]])f=i[u]}var o=f?this.getColumnIndex(f)+1:0;webix.PowerArray.insertAt.call(r,a,o);this._fixColspansHidden(o,a,1);delete a.hidden;if(u<this._hidden_split[0])this._settings.leftSplit++;if(u>=this._hidden_split[1])this._settings.rightSplit++;delete s[e]}if(!n)this._refresh_columns()},_fixColspansHidden:function(e,t,n){for(var r=t.header.length-1;r>=0;r--){if(t.header[r]===null){for(var i=e;i>=0;i--){var s=this._columns[i];if(s.header[r]!==null){if(s.header[r].colspan+n>e-i)s.header[r].colspan-=n?-1:1;break}}}}},refreshColumns:function(e){for(var t=0;t<this._columns.length;t++){var n=this._columns[t];n.attached=n.node=null}for(var t=0;t<3;t++)this._body.childNodes[t].firstChild.innerHTML="";this._columns=this.config.columns=e||this.config.columns;this._dtable_fully_ready=0;this.callEvent("onStructureUpdate");this._define_structure();this.render()},_refresh_columns:function(){this._dtable_fully_ready=0;this.callEvent("onStructureUpdate");this._apply_headers();this.render()},showColumn:function(e){return this.hideColumn(e,false)},showColumnBatch:function(e){for(var t in this._columns_pull){var n=this._columns_pull[t];if(n.batch){if(n.batch==e&&this._hidden_column_hash[n.id])this.showColumn(n.id);else if(n.batch!=e&&!this._hidden_column_hash[n.id])this.hideColumn(n.id,true)}}}});webix.extend(webix.ui.datatable,{moveSelection:function(e){var t=this.getSelectedId(true);if(t.length==1){var n=t[0].row;var r=t[0].column;if(e=="top"||e=="bottom"){if(n){if(e=="top")n=this.data.getFirstId();else if(e=="bottom")n=this.data.getLastId()}if(r){var i=0;if(e=="bottom")i=this.config.columns.length-1;r=this.columnId(i)}}else if(n&&(e=="up"||e=="down"||e=="pgup"||e=="pgdown")){var i=this.getIndexById(n);var s=e=="pgup"||e=="pgdown"?Math.round(this._dtable_offset_height/this._settings.rowHeight):1;if(e=="up"||e=="pgup")i-=s;else if(e=="down"||e=="pgdown")i+=s;if(i<0)i=0;if(i>=this.data.order.length)i=this.data.order.length-1;n=this.getIdByIndex(i)}else if(r&&(e=="right"||e=="left")){var i=this.getColumnIndex(r);if(e=="right")i++;else if(e=="left")i--;if(i<0||i>=this.config.columns.length)return;r=this.columnId(i)}else{webix.assert(false,"Not supported selection moving mode");return}this.showCell(n,r);this._select({row:n,column:r})}return false}});webix.extend(webix.ui.datatable,webix.KeysNavigation);webix.extend(webix.ui.datatable,webix.DataMove);webix.extend(webix.ui.datatable,{$dragHTML:function(e,t){var n=this._content_width-this._scrollSizeY;var r="<div class='webix_dd_drag' style='width:"+(n-2)+"px;'>";var i=this._settings.columns;for(var s=0;s<i.length;s++){var o=this._getValue(e,i[s]);r+="<div style='width:"+i[s].width+"px;'>"+o+"</div>"}return r+"</div>"},getHeaderNode:function(e,t){var n=this.getColumnIndex(e);t=t||0;var r=this._header.childNodes[1].getElementsByTagName("TR")[t+1].childNodes;for(var i=0;i<r.length;i++)if(r[i].getAttribute("column")==n)return r[i].firstChild;return null},getItemNode:function(e,t){if(e&&!e.header){var n=e.row||e;var r=this.getIndexById(n);var i=this._get_y_range();if(r<i[0]&&r>i[1])return;var s=this._get_x_range();var o=this._settings.leftSplit?0:s[0];if(e.column){o=this.getColumnIndex(e.column);if(o<this._rightSplit&&o>=this._settings.leftSplit&&(o<s[0]||o>s[1]))return}var u=this._settings.columns[o];if(u.attached&&u.node)return u.node.childNodes[r-i[0]]}},_translate_id:function(e,t){if(e&&(!e.header||!t))return this.data.order[e.rind];return 0},dragColumn_setter:function(e){var t;if(e=="order"){t={$drag:webix.bind(function(e,n){var r=this.locate(n);if(!r||!this.callEvent("onBeforeColumnDrag",[r.column,n]))return false;webix.DragControl._drag_context={from:t,start:r,custom:"column_dnd"};var i=this.getColumnConfig(r.column);this._relative_column_drag=webix.html.posRelative(n);this._limit_column_drag=i.width;return"<div class='webix_dd_drag_column' style='width:"+i.width+"px'>"+(i.header[0].text||"&nbsp;")+"</div>"},this),$dragPos:webix.bind(function(e,t,n){var r=webix.DragControl.getContext();var i=webix.html.offset(this.$view);n.style.display="none";var s=document.elementFromPoint(e.x,i.y+1);var o=this.locate(s);var u=webix.DragControl.getContext().start.column;if(o&&o.column!=u&&(!this._column_dnd_temp_block||o.column!=this._last_sort_dnd_node)){if(r.custom=="column_dnd"&&webix.$$(s)==this){if(!this.callEvent("onBeforeColumnDropOrder",[u,o.column,t]))return;var a=this.getColumnIndex(u);var f=this.getColumnIndex(o.column);this.moveColumn(u,f+(a<f?1:0));this._last_sort_dnd_node=o.column;this._column_dnd_temp_block=true}}if(o&&o.column==u){this._column_dnd_temp_block=false}n.style.display="block";e.x=e.x-this._relative_column_drag.x;e.y=i.y;if(e.x<i.x)e.x=i.x;else{var l=i.x+this.$view.offsetWidth-this._scrollSizeY-this._limit_column_drag;if(e.x>l)e.x=l}webix.DragControl._skip=true},this),$dragDestroy:webix.bind(function(e,t){webix.html.remove(t);var n=webix.DragControl.getContext().start;this.callEvent("onAfterColumnDropOrder",[n.column,this._last_sort_dnd_node,e])},this)}}else if(e){t={_inner_drag_only:true,$drag:webix.bind(function(e,n){var r=this.locate(n);if(!r||!this.callEvent("onBeforeColumnDrag",[r.column,n]))return false;webix.DragControl._drag_context={from:t,start:r,custom:"column_dnd"};return"<div class='webix_dd_drag_column'>"+(this.getColumnConfig(r.column).header[0].text||"&nbsp;")+"</div>"},this),$drop:webix.bind(function(e,t,n){var r=this.locate(n);if(!r)return false;var i=webix.DragControl.getContext().start.column;if(i!=r.column){if(!this.callEvent("onBeforeColumnDrop",[i,r.column,n]))return;var s=this.getColumnIndex(i);var o=this.getColumnIndex(r.column);this.moveColumn(i,o+(s<o?1:0));this.callEvent("onAfterColumnDrop",[i,r.column,n])}},this),$dragIn:webix.bind(function(e,n,r){var i=webix.DragControl.getContext();if(i.custom!="column_dnd"||i.from!=t)return false;var s=r.target||r.srcElement;if(s!=this._drag_column_last){if(this._drag_column_last)webix.html.removeCss(this._drag_column_last,"webix_dd_over_column");webix.html.addCss(s,"webix_dd_over_column")}return this._drag_column_last=s},this),$dragDestroy:webix.bind(function(e,t){if(this._drag_column_last)webix.html.removeCss(this._drag_column_last,"webix_dd_over_column");webix.html.remove(t)},this)}}if(e){webix.DragControl.addDrag(this._header,t);webix.DragControl.addDrop(this._header,t,true)}}});webix.extend(webix.ui.datatable,webix.DragItem);webix.extend(webix.ui.datatable,{_mark_invalid:function(e,t){this._clear_invalid_css(e);for(var n in t)this.addCellCss(e,n,"webix_invalid_cell");this.addCss(e,"webix_invalid")},_clear_invalid:function(e){this._clear_invalid_css(e);this.removeCss(e,"webix_invalid")},_clear_invalid_css:function(e){var t=this.getItem(e);var n=this.data.getMark(e,"$cellCss");if(n){for(var r in n)n[r]=n[r].replace("webix_invalid_cell","").replace("  "," ")}},addRowCss:function(e,t,n){this.addCss(e,t,n)},removeRowCss:function(e,t,n){this.removeCss(e,t,n)},addCellCss:function(e,t,n,r){var i=this.data.getMark(e,"$cellCss");var s=i||{};var o=s[t]||"";s[t]=o.replace(n,"").replace("  "," ")+" "+n;if(!i)this.data.addMark(e,"$cellCss",false,s,true);if(!r)this.refresh(e)},removeCellCss:function(e,t,n,r){var i=this.data.getMark(e,"$cellCss");if(i){var s=i[t]||"";if(s)i[t]=s.replace(n,"").replace("  "," ");if(!r)this.refresh(e)}}});webix.extend(webix.ui.datatable,webix.ValidateCollection);webix.TreeTableClick={};webix.TreeTablePaste={insert:function(e){var t=this.getSelectedId(true,true);for(var n=0;n<e.length;n++){var r={};for(var i=0;i<this._settings.columns.length;i++){r[this._settings.columns[i].id]=e[n][i]||""}if(!webix.isUndefined(r.id)&&this.exists(r.id))r.id=webix.uid();this.add(r,null,t[0])}}};webix.protoUI({name:"treetable",$init:function(){webix.extend(this.data,webix.TreeStore,true);webix.extend(this.type,webix.TreeType);webix.extend(this,webix.TreeDataMove,true);for(var e in webix.TreeClick)if(!this.on_click[e])this.on_click[e]=this._unwrap_id(webix.TreeClick[e]);this.type.treetable=webix.template("{common.space()}{common.icon()} {common.folder()}");this.type.treecheckbox=function(e,t){if(e.indeterminate&&!e.nocheckbox)return"<div class='webix_tree_checkbox webix_indeterminate'></div>";else return webix.TreeType.checkbox.apply(this,arguments)};this.data.provideApi(this,true)},_drag_order_complex:false,_unwrap_id:function(e){return function(t,n){n=n.row;return e.call(this,t,n)}},getState:function(){var e=webix.DataState.getState.call(this);webix.extend(e,webix.TreeAPI.getState.call(this));return e},setState:function(e){if(webix.TreeAPI.setState.call(this,e)){webix.DataState.setState.call(this,e)}},clipboard_setter:function(e){webix.extend(this._paste,webix.TreeTablePaste);return webix.TablePaste.clipboard_setter.call(this,e)}},webix.TreeAPI,webix.TreeStateCheckbox,webix.TreeDataLoader,webix.ui.datatable);webix.Canvas=webix.proto({$init:function(e){this._canvas_labels=[];this._canvas_name=e.name;this._obj=webix.toNode(e.container||e);var t=e.width*(window.devicePixelRatio||1);var n=e.height*(window.devicePixelRatio||1);var r=e.style||"";r+=";width:"+e.width+"px;height:"+e.height+"px;";this._prepareCanvas(e.name,r,t,n)},_prepareCanvas:function(e,t,n,r){this._canvas=webix.html.create("canvas",{width:n,height:r,canvas_id:e,style:t||""});this._obj.appendChild(this._canvas);if(!this._canvas.getContext){if(webix.env.isIE){webix.require("legacy/excanvas/excanvas.js");G_vmlCanvasManager.init_(document);G_vmlCanvasManager.initElement(this._canvas)}else webix.assert(this._canvas.getContext,"Canvas is not supported in the browser")}return this._canvas},getCanvas:function(e){var t=(this._canvas||this._prepareCanvas(this._contentobj)).getContext(e||"2d");if(!this._webixDevicePixelRatio){this._webixDevicePixelRatio=true;t.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)}return t},_resizeCanvas:function(e,t){if(this._canvas){this._canvas.setAttribute("width",e*(window.devicePixelRatio||1));this._canvas.setAttribute("height",t*(window.devicePixelRatio||1));this._canvas.style.width=e+"px";this._canvas.style.height=t+"px";this._webixDevicePixelRatio=false}},renderText:function(e,t,n,r,i){if(!n)return;if(i)i=Math.max(i,0);if(t)t=Math.max(t,0);var s=webix.html.create("DIV",{"class":"webix_canvas_text"+(r?" "+r:""),style:"left:"+e+"px; top:"+t+"px;"},n);this._obj.appendChild(s);this._canvas_labels.push(s);if(i)s.style.width=i+"px";return s},renderTextAt:function(e,t,n,r,i,s,o){var u=this.renderText.call(this,n,r,i,s,o);if(u){if(e){if(e=="middle")u.style.top=parseInt(r-u.offsetHeight/2,10)+"px";else u.style.top=r-u.offsetHeight+"px"}if(t){if(t=="left")u.style.left=n-u.offsetWidth+"px";else u.style.left=parseInt(n-u.offsetWidth/2,10)+"px"}}return u},clearCanvas:function(e){var t=[],n;for(n=0;n<this._canvas_labels.length;n++)this._obj.removeChild(this._canvas_labels[n]);this._canvas_labels=[];if(!e&&this._obj._htmlmap){t=this._getMapAreas();while(t.length){t[0].parentNode.removeChild(t[0]);t.splice(0,1)}t=null;if(!this._obj._htmlmap.getElementsByTagName("AREA").length){this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap);this._obj._htmlmap=null}}this.getCanvas().clearRect(0,0,this._canvas.offsetWidth,this._canvas.offsetHeight)},toggleCanvas:function(){this._toggleCanvas(this._canvas.style.display=="none")},showCanvas:function(){this._toggleCanvas(true)},hideCanvas:function(){this._toggleCanvas(false)},_toggleCanvas:function(e){var t,n;for(n=0;n<this._canvas_labels.length;n++)this._canvas_labels[n].style.display=e?"":"none";if(this._obj._htmlmap){t=this._getMapAreas();for(n=0;n<t.length;n++){if(e)t[n].removeAttribute("disabled");else t[n].setAttribute("disabled","true")}}this._canvas.style.display=e?"":"none"},_getMapAreas:function(){var e=[],t,n;t=this._obj._htmlmap.getElementsByTagName("AREA");for(n=0;n<t.length;n++){if(t[n].getAttribute("userdata")==this._canvas_name){e.push(t[n])}}return e}});webix.color={_toHex:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],toHex:function(e,t){e=parseInt(e,10);var n="";while(e>0){n=this._toHex[e%16]+n;e=Math.floor(e/16)}while(n.length<t)n="0"+n;return n},hexToDec:function(e){return parseInt(e,16)},toRgb:function(e){var t,n,r,i;if(typeof e!="string"){t=e[0];n=e[1];r=e[2]}else if(e.indexOf("rgb")!=-1){i=e.substr(e.indexOf("(")+1,e.lastIndexOf(")")-e.indexOf("(")-1).split(",");t=i[0];n=i[1];r=i[2]}else{if(e.substr(0,1)=="#"){e=e.substr(1)}t=this.hexToDec(e.substr(0,2));n=this.hexToDec(e.substr(2,2));r=this.hexToDec(e.substr(4,2))}t=parseInt(t,10)||0;n=parseInt(n,10)||0;r=parseInt(r,10)||0;if(t<0||t>255)t=0;if(n<0||n>255)n=0;if(r<0||r>255)r=0;return[t,n,r]},hsvToRgb:function(e,t,n){var r,i,s,o,u,a,f,l;r=Math.floor(e/60)%6;i=e/60-r;s=n*(1-t);o=n*(1-i*t);u=n*(1-(1-i)*t);a=0;f=0;l=0;switch(r){case 0:a=n;f=u;l=s;break;case 1:a=o;f=n;l=s;break;case 2:a=s;f=n;l=u;break;case 3:a=s;f=o;l=n;break;case 4:a=u;f=s;l=n;break;case 5:a=n;f=s;l=o;break;default:break}a=Math.floor(a*255);f=Math.floor(f*255);l=Math.floor(l*255);return[a,f,l]},rgbToHsv:function(e,t,n){var r,i,s,o,u,a,f,l;r=e/255;i=t/255;s=n/255;o=Math.min(r,i,s);u=Math.max(r,i,s);f=0;a=u===0?0:1-o/u;l=u;if(u==o){f=0}else if(u==r&&i>=s){f=60*(i-s)/(u-o)+0}else if(u==r&&i<s){f=60*(i-s)/(u-o)+360}else if(u==i){f=60*(s-r)/(u-o)+120}else if(u==s){f=60*(r-i)/(u-o)+240}return[f,a,l]}};webix.HtmlMap=webix.proto({$init:function(e){this._id="map_"+webix.uid();this._key=e;this._map=[]},addRect:function(e,t,n){this._createMapArea(e,"RECT",t,n)},addPoly:function(e,t){this._createMapArea(e,"POLY",t)},_createMapArea:function(e,t,n,r){var i="";if(arguments.length==4)i="userdata='"+r+"'";this._map.push("<area "+this._key+"='"+e+"' shape='"+t+"' coords='"+n.join()+"' "+i+"></area>")},addSector:function(e,t,n,r,i,s,o){var u=[];u.push(r);u.push(Math.floor(i*o));for(var a=t;a<n;a+=Math.PI/18){u.push(Math.floor(r+s*Math.cos(a)));u.push(Math.floor((i+s*Math.sin(a))*o))}u.push(Math.floor(r+s*Math.cos(n)));u.push(Math.floor((i+s*Math.sin(n))*o));u.push(r);u.push(Math.floor(i*o));return this.addPoly(e,u)},render:function(e){var t=webix.html.create("DIV");t.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;";e.appendChild(t);var n=webix.env.isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";t.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+"</map><img "+n+" class='webix_map_img' usemap='#"+this._id+"'>";e._htmlmap=t;this._map=[]}});webix.protoUI({name:"chart",$init:function(e){this._series=[this._settings];this._legend_labels=[];this._contentobj.className+=" webix_chart";this.$ready.push(this._after_init_call);if(e.preset){this._definePreset(e)}this.attachEvent("onMouseMove",this._switchSerie);this.data.provideApi(this,true)},_after_init_call:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.render()},this))},defaults:{color:"RAINBOW",alpha:"1",label:false,value:"{obj.value}",padding:{},type:"pie",lineColor:"#ffffff",cant:.5,barWidth:30,line:{width:2,color:"#1293f8"},item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:false},shadow:true,gradient:false,border:true,labelOffset:20,origin:"auto",scale:"linear"},_id:"webix_area_id",on_click:{webix_chart_legend_item:function(e,t,n){var r=n.getAttribute("series_id");if(this.callEvent("onLegendClick",[e,r,n])){var i=this._settings;var s=i.legend.values;var o=s&&s[r].toggle||i.legend.toggle;if(typeof r!="undefined"&&this._series.length>1){if(o){if(n.className.indexOf("hidden")!=-1){this.showSeries(r)}else{this.hideSeries(r)}}}}}},on_dblclick:{},on_mouse_move:{},locate:function(e){return webix.html.locate(e,this._id)},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){for(var n in this.canvases){this.canvases[n]._resizeCanvas(this._content_width,this._content_height)}this.render()}},type_setter:function(e){webix.assert(this["$render_"+e],"Chart type is not supported, or extension is not loaded: "+e);if(typeof this._settings.offset=="undefined"){this._settings.offset=!(e=="area"||e=="stackedArea")}if(e=="radar"&&!this._settings.yAxis)this.define("yAxis",{});if(e=="scatter"){if(!this._settings.yAxis)this.define("yAxis",{});if(!this._settings.xAxis)this.define("xAxis",{})}return e},removeAllSeries:function(){this.clearCanvas();if(this._legendObj){this._legendObj.innerHTML="";this._legendObj.parentNode.removeChild(this._legendObj);this._legendObj=null}if(this.canvases){this.canvases={}}this._contentobj.innerHTML="";for(var e=0;e<this._series.length;e++){if(this._series[e].tooltip)this._series[e].tooltip.destructor()}this._series=[]},clearCanvas:function(){if(this.canvases&&typeof this.canvases=="object")for(var e in this.canvases){this.canvases[e].clearCanvas()}},render:function(){var e,t,n,r,i;if(!this.isVisible(this._settings.id))return;if(!this.callEvent("onBeforeRender",[this.data]))return;if(this.canvases&&typeof this.canvases=="object"){for(t in this.canvases){this.canvases[t].clearCanvas()}}else this.canvases={};if(this._settings.legend){if(!this.canvases["legend"])this.canvases["legend"]=this._createCanvas("legend");this._drawLegend(this.data.getRange(),this._content_width,this._content_height)}e=this._getChartBounds(this._content_width,this._content_height);r=new webix.HtmlMap(this._id);i=this._settings;if(this._series){n=this._getChartData();for(t=0;t<this._series.length;t++){this._settings=this._series[t];if(!this.canvases[t])this.canvases[t]=this._createCanvas(t,"z-index:"+(2+t));this["$render_"+this._settings.type](this.canvases[t].getCanvas(),n,e.start,e.end,t,r)}}r.render(this._contentobj);this._contentobj.lastChild.style.zIndex=100;this._applyBounds(this._contentobj.lastChild,e);this.callEvent("onAfterRender",[]);this._settings=i},_applyBounds:function(e,t){var n={};n.left=t.start.x;n.top=t.start.y;n.width=t.end.x-t.start.x;n.height=t.end.y-t.start.y;for(var r in n){e.style[r]=n[r]+"px"}},_getChartData:function(){var e,t,n,r,i,s,o,u,a,f;r=this.data.getRange();e=this._settings.type.toLowerCase().indexOf("barh")!=-1?"yAxis":"xAxis";t=this._settings[e];if(t&&t.units&&typeof t.units=="object"){n=t.units;u=[];if(typeof n.start!="undefined"&&typeof n.end!="undefined"&&typeof n.next!="undefined"){o=n.start;while(o<=n.end){u.push(o);o=n.next.call(this,o)}}else if(Object.prototype.toString.call(n)==="[object Array]"){u=n}s=[];if(u.length){a=t.value;f={};for(i=0;i<r.length;i++){f[a(r[i])]=i}for(i=0;i<u.length;i++){if(typeof f[u[i]]!="undefined"){r[f[u[i]]].$unit=u[i];s.push(r[f[u[i]]])}else{s.push({$unit:u[i]})}}}return s}return r},series_setter:function(e){if(typeof e!="object"){webix.assert(e,"Chart :: Series must be an array or object")}else{this._parseSettings(!e.length?e:e[0]);this._series=[this._settings];for(var t=1;t<e.length;t++)this.addSeries(e[t])}return e},value_setter:webix.template,xValue_setter:webix.template,yValue_setter:function(e){this.define("value",e)},alpha_setter:webix.template,label_setter:webix.template,lineColor_setter:webix.template,borderColor_setter:webix.template,pieInnerText_setter:webix.template,gradient_setter:function(e){if(typeof e!="function"&&e&&e===true)e="light";return e},colormap:{RAINBOW:function(e){var t=Math.floor(this.getIndexById(e.id)/this.count()*1536);if(t==1536)t-=1;return this._rainbow[Math.floor(t/256)](t%256)}},color_setter:function(e){return this.colormap[e]||webix.template(e)},fill_setter:function(e){return!e||e=="0"?false:webix.template(e)},_definePreset:function(e){this.define("preset",e.preset);delete e.preset},preset_setter:function(e){var t,n,r;this.defaults=webix.extend({},this.defaults);r=this.presets[e];if(typeof r=="object"){for(t in r){if(typeof r[t]=="object"){if(!this.defaults[t]||typeof this.defaults[t]!="object"){this.defaults[t]=webix.extend({},r[t])}else{this.defaults[t]=webix.extend({},this.defaults[t]);for(n in r[t]){this.defaults[t][n]=r[t][n]}}}else{this.defaults[t]=r[t]}}return e}return false},legend_setter:function(e){if(!e){if(this.legendObj){this.legendObj.innerHTML="";this.legendObj=null}return false}if(typeof e!="object")e={template:e};this._mergeSettings(e,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:this._settings.type.toLowerCase().indexOf("stacked")!=-1?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3});e.template=webix.template(e.template);return e},item_setter:function(e){if(typeof e!="object")e={color:e,borderColor:e};this._mergeSettings(e,webix.extend({},this.defaults.item));var t=["alpha","borderColor","color","radius"];this._converToTemplate(t,e);return e},line_setter:function(e){if(typeof e!="object")e={color:e};webix.extend(this.defaults.line,e,true);e=webix.extend({},this.defaults.line);e.color=webix.template(e.color);return e},padding_setter:function(e){if(typeof e!="object")e={left:e,right:e,top:e,bottom:e};this._mergeSettings(e,{left:50,right:20,top:35,bottom:40});return e},xAxis_setter:function(e){if(!e)return false;if(typeof e!="object")e={template:e};this._mergeSettings(e,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:true});var t=["lineColor","template","lines"];this._converToTemplate(t,e);this._configXAxis=webix.extend({},e);return e},yAxis_setter:function(e){this._mergeSettings(e,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:true,bg:"#ffffff"});var t=["lineColor","template","lines","bg"];this._converToTemplate(t,e);this._configYAxis=webix.extend({},e);return e},_converToTemplate:function(e,t){for(var n=0;n<e.length;n++){t[e[n]]=webix.template(t[e[n]])}},_createCanvas:function(e,t,n){return new webix.Canvas({container:n||this._contentobj,name:e,style:t||"",width:this._content_width,height:this._content_height})},_drawScales:function(e,t,n,r,i,s){var o=0;if(this._settings.yAxis){if(!this.canvases["y"])this.canvases["y"]=this._createCanvas("axis_y");o=this._drawYAxis(this.canvases["y"].getCanvas(),e,t,n,r,i)}if(this._settings.xAxis){if(!this.canvases["x"])this.canvases["x"]=this._createCanvas("axis_x");this._drawXAxis(this.canvases["x"].getCanvas(),e,t,n,s,o)}return o},_drawXAxis:function(e,t,n,r,i,s){var o=n.x-.5;var u=parseInt(s?s:r.y,10)+.5;var a=r.x;var f;var l=true;for(var c=0;c<t.length;c++){if(this._settings.offset===true)f=o+i/2+c*i;else{f=c==t.length-1?r.x:o+c*i;l=!!c}f=Math.ceil(f)-.5;var h=this._settings.origin!="auto"&&this._settings.type=="bar"&&parseFloat(this._settings.value(t[c]))<this._settings.origin;this._drawXAxisLabel(f,u,t[c],l,h);if((this._settings.offset||c)&&this._settings.xAxis.lines.call(this,t[c]))this._drawXAxisLine(e,f,r.y,n.y,t[c])}this.canvases["x"].renderTextAt(true,false,o,r.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"webix_axis_title_x",r.x-n.x);this._drawLine(e,o,u,a,u,this._settings.xAxis.color,1);if(!this._settings.xAxis.lines.call(this,{})||!this._settings.offset)return;this._drawLine(e,a+.5,r.y,a+.5,n.y+.5,this._settings.xAxis.color,.2)},_drawYAxis:function(e,t,n,r,i,s){var o;var u={};if(!this._settings.yAxis)return;var a=n.x-.5;var f=r.y;var l=n.y;var c=r.y;if(this._settings.yAxis.step)o=parseFloat(this._settings.yAxis.step);if(typeof this._configYAxis.step=="undefined"||typeof this._configYAxis.start=="undefined"||typeof this._configYAxis.end=="undefined"){u=this._calculateScale(i,s);i=u.start;s=u.end;o=u.step;this._settings.yAxis.end=s;this._settings.yAxis.start=i}else if(this.config.scale=="logarithmic")this._logScaleCalc=true;this._setYAxisTitle(n,r);if(o===0)return;if(s==i){return f}var h=(f-l)*o/(s-i);var p=0;for(var d=i;d<=s;d+=o){var v=this._logScaleCalc?Math.pow(10,d):d;if(u.fixNum)v=parseFloat(v).toFixed(u.fixNum);var m=Math.floor(f-p*h)+.5;if(!(d==i&&this._settings.origin=="auto")&&this._settings.yAxis.lines.call(this,d))this._drawLine(e,a,m,r.x,m,this._settings.yAxis.lineColor.call(this,d),1);if(d==this._settings.origin)c=m;if(o<1&&!this._logScaleCalc){var g=Math.min(Math.floor(this._log10(o)),i<=0?0:Math.floor(this._log10(i)));var y=Math.pow(10,-g);v=Math.round(v*y)/y;d=v}this.canvases["y"].renderText(0,m-5,this._settings.yAxis.template(v.toString()),"webix_axis_item_y",n.x-5);p++}this._drawLine(e,a,f+1,a,l,this._settings.yAxis.color,1);return c},_setYAxisTitle:function(e,t){var n="webix_axis_title_y"+(webix._isIE&&webix._isIE!=9?" webix_ie_filter":"");var r=this.canvases["y"].renderTextAt("middle",false,0,parseInt((t.y-e.y)/2+e.y,10),this._settings.yAxis.title,n);if(r)r.style.left=(webix.env.transform?(r.offsetHeight-r.offsetWidth)/2:0)+"px"},_calculateLogScale:function(e,t){var n=Math.floor(this._log10(e));var r=Math.ceil(this._log10(t));return{start:n,step:1,end:r}},_calculateScale:function(e,t){this._logScaleCalc=false;if(this._settings.scale=="logarithmic"){var n=Math.floor(this._log10(e));var r=Math.ceil(this._log10(t));if(e>0&&t>0&&r-n>1){this._logScaleCalc=true;return this._calculateLogScale(e,t)}}if(this._settings.origin!="auto"&&this._settings.origin<e)e=this._settings.origin;var i,s,o;i=(t-e)/8||1;var u=Math.floor(this._log10(i));var a=Math.pow(10,u);var f=i/a;f=f>5?10:5;i=parseInt(f,10)*a;if(i>Math.abs(e))s=e<0?-i:0;else{var l=Math.abs(e);var c=Math.floor(this._log10(l));var h=l/Math.pow(10,c);s=Math.ceil(h*10)/10*Math.pow(10,c)-i;if(l>1&&i>.1){s=Math.ceil(s)}while(e<0?s<=e:s>=e)s-=i;if(e<0)s=-s-2*i}o=s;while(o<t){o+=i;o=parseFloat((o*1).toFixed(Math.abs(u)))}return{start:s,end:o,step:i,fixNum:Math.abs(u)}},_getLimits:function(e,t){var n=this.data._obj_array();var r,i;var s=arguments.length&&e=="h"?this._configXAxis:this._configYAxis;t=t||"value";if(s&&typeof s.end!="undefined"&&typeof s.start!="undefined"&&s.step){r=parseFloat(s.end);i=parseFloat(s.start)}else{r=webix.GroupMethods.max(this._series[0][t],n);i=s&&typeof s.start!="undefined"?parseFloat(s.start):webix.GroupMethods.min(this._series[0][t],n);if(this._series.length>1)for(var o=1;o<this._series.length;o++){var u=webix.GroupMethods.max(this._series[o][t],n);var a=webix.GroupMethods.min(this._series[o][t],n);if(u>r)r=u;if(a<i)i=a}}return{max:r,min:i}},_log10:function(e){var t="log";return Math[t](e)/Math.LN10},_drawXAxisLabel:function(e,t,n,r,i){if(!this._settings.xAxis)return;var s=this.canvases["x"].renderTextAt(i,r,e,t-(i?2:0),this._settings.xAxis.template(n));if(s)s.className+=" webix_axis_item_x"},_drawXAxisLine:function(e,t,n,r,i){if(!this._settings.xAxis||!this._settings.xAxis.lines)return;this._drawLine(e,t,n,t,r,this._settings.xAxis.lineColor.call(this,i),1)},_drawLine:function(e,t,n,r,i,s,o){e.strokeStyle=s;e.lineWidth=o;e.beginPath();e.moveTo(t,n);e.lineTo(r,i);e.stroke();e.lineWidth=1},_getRelativeValue:function(e,t){var n,r;var i=1;if(t!=e){n=t-e}else n=e;return[n,i]},_rainbow:[function(e){return"#FF"+webix.color.toHex(e/2,2)+"00"},function(e){return"#FF"+webix.color.toHex(e/2+128,2)+"00"},function(e){return"#"+webix.color.toHex(255-e,2)+"FF00"},function(e){return"#00FF"+webix.color.toHex(e,2)},function(e){return"#00"+webix.color.toHex(255-e,2)+"FF"},function(e){return"#"+webix.color.toHex(e,2)+"00FF"}],addSeries:function(e){var t=webix.extend({},this._settings);this._settings=webix.extend({},t);this._parseSettings(e,{});this._series.push(this._settings);this._settings=t},_switchSerie:function(e,t,n){var r;if(!n.getAttribute("userdata"))return;this._active_serie=n.getAttribute("userdata");if(!this._series[this._active_serie])return;for(var i=0;i<this._series.length;i++){r=this._series[i].tooltip;if(r)r.disable()}if(!n.getAttribute("disabled")){r=this._series[this._active_serie].tooltip;if(r)r.enable()}},hideSeries:function(e){this.canvases[e].hideCanvas();if(this._settings.legend.values&&this._settings.legend.values[e])this._settings.legend.values[e].$hidden=true;this._drawLegend()},showSeries:function(e){this.canvases[e].showCanvas();if(this._settings.legend.values&&this._settings.legend.values[e])delete this._settings.legend.values[e].$hidden;this._drawLegend()},_drawLegend:function(e,t){var n,r,i,s,o,u,a,f=0,l=0,c,h,p,d;e=e||[];t=t||this._content_width;c=this.canvases["legend"].getCanvas();r=this._settings.legend;a=this._settings.legend.layout!="x"?"width:"+r.width+"px":"";if(this._legendObj){this._legendObj.innerHTML="";this._legendObj.parentNode.removeChild(this._legendObj)}this.canvases["legend"].clearCanvas(true);i=webix.html.create("DIV",{"class":"webix_chart_legend",style:"left:"+f+"px; top:"+l+"px;"+a},"");if(r.padding){i.style.padding=r.padding+"px"}this._legendObj=i;this._contentobj.appendChild(i);o=[];if(!r.values)for(n=0;n<e.length;n++){o.push(this._drawLegendText(i,r.template(e[n])))}else for(n=0;n<r.values.length;n++){o.push(this._drawLegendText(i,r.values[n].text,typeof r.values[n].id!="undefined"?typeof r.values[n].id:n,r.values[n].$hidden))}if(i.offsetWidth===0)i.style.width="auto";u=i.offsetWidth;s=i.offsetHeight;if(u<t){if(r.layout=="x"&&r.align=="center"){f=(t-u)/2}if(r.align=="right"){f=t-u}if(r.margin&&r.align!="center"){f+=(r.align=="left"?1:-1)*r.margin}}if(s<this._content_height){if(r.valign=="middle"&&r.align!="center"&&r.layout!="x")l=(this._content_height-s)/2;else if(r.valign=="bottom")l=this._content_height-s;if(r.margin&&r.valign!="middle"){l+=(r.valign=="top"?1:-1)*r.margin}}i.style.left=f+"px";i.style.top=l+"px";c.save();for(n=0;n<o.length;n++){d=o[n];if(r.values&&r.values[n].$hidden){p=true;h=r.values[n].disableColor?r.values[n].disableColor:"#d9d9d9"}else{p=false;h=r.values?r.values[n].color:this._settings.color.call(this,e[n])}this._drawLegendMarker(c,d.offsetLeft+f,d.offsetTop+l,h,d.offsetHeight,p,n)}c.restore();o=null},_drawLegendText:function(e,t,n,r){var i="";if(this._settings.legend.layout=="x")i="float:left;";var s=webix.html.create("DIV",{style:i+"padding-left:"+(10+this._settings.legend.marker.width)+"px","class":"webix_chart_legend_item"+(r?" hidden":"")},t);if(arguments.length>2)s.setAttribute("series_id",n);e.appendChild(s);return s},_drawLegendMarker:function(e,t,n,r,i,s,o){var u=[];var a=this._settings.legend.marker;var f=this._settings.legend.values;var l=f&&f[o].markerType?f[o].markerType:a.type;if(r){e.strokeStyle=e.fillStyle=r}if(l=="round"||!a.radius){e.beginPath();e.lineWidth=a.height;e.lineCap=a.type;t+=e.lineWidth/2+5;n+=i/2;e.moveTo(t,n);var c=t+a.width-a.height+1;e.lineTo(c,n);e.stroke();e.fill()}else if(l=="item"){if(this._settings.line&&this._settings.type!="scatter"&&!this._settings.disableLines){e.beginPath();e.lineWidth=this._series[o].line.width;e.strokeStyle=s?r:this._series[o].line.color.call(this,{});var h=t+5;var p=n+i/2;e.moveTo(h,p);var c=h+a.width;e.lineTo(c,p);e.stroke()}var d=this._series[o].item;var v=parseInt(d.radius.call(this,{}),10)||0;if(v){e.beginPath();if(s){e.lineWidth=d.borderWidth;e.strokeStyle=r;e.fillStyle=r}else{e.lineWidth=d.borderWidth;e.fillStyle=d.color.call(this,{});e.strokeStyle=d.borderColor.call(this,{});e.globalAlpha=d.alpha.call(this,{})}e.beginPath();t+=a.width/2+5;n+=i/2;this._strokeChartItem(e,t,n,v+1,d.type);e.fill();e.stroke()}e.globalAlpha=1}else{e.beginPath();e.lineWidth=1;t+=5;n+=i/2-a.height/2;u=[[t+a.radius,n+a.radius,a.radius,Math.PI,3*Math.PI/2,false],[t+a.width-a.radius,n],[t+a.width-a.radius,n+a.radius,a.radius,-Math.PI/2,0,false],[t+a.width,n+a.height-a.radius],[t+a.width-a.radius,n+a.height-a.radius,a.radius,0,Math.PI/2,false],[t+a.radius,n+a.height],[t+a.radius,n+a.height-a.radius,a.radius,Math.PI/2,Math.PI,false],[t,n+a.radius]];this._path(e,u);e.stroke();e.fill()}},_getChartBounds:function(e,t){var n,r,i,s;n=this._settings.padding.left;r=this._settings.padding.top;i=e-this._settings.padding.right;s=t-this._settings.padding.bottom;if(this._settings.legend){var o=this._settings.legend;var u=this._settings.legend.width;var a=this._settings.legend.height;if(o.layout=="x"){if(o.valign=="center"){if(o.align=="right")i-=u;else if(o.align=="left")n+=u}else if(o.valign=="bottom"){s-=a}else{r+=a}}else{if(o.align=="right")i-=u;else if(o.align=="left")n+=u}}return{start:{x:n,y:r},end:{x:i,y:s}}},_getStackedLimits:function(e){var t,n,r,i,s;if(this._settings.yAxis&&typeof this._settings.yAxis.end!="undefined"&&typeof this._settings.yAxis.start!="undefined"&&this._settings.yAxis.step){r=parseFloat(this._settings.yAxis.end);i=parseFloat(this._settings.yAxis.start)}else{for(t=0;t<e.length;t++){e[t].$sum=0;e[t].$min=Infinity;for(n=0;n<this._series.length;n++){s=parseFloat(this._series[n].value(e[t])||0);if(isNaN(s))continue;if(this._series[n].type.toLowerCase().indexOf("stacked")!=-1)e[t].$sum+=s;if(s<e[t].$min)e[t].$min=s}}r=-Infinity;i=Infinity;for(t=0;t<e.length;t++){if(e[t].$sum>r)r=e[t].$sum;if(e[t].$min<i)i=e[t].$min}if(i>0)i=0}return{max:r,min:i}},_setBarGradient:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p;if(s=="light"){if(u=="x")a=e.createLinearGradient(t,n,r,n);else a=e.createLinearGradient(t,n,t,i);p=[[0,"#FFFFFF"],[.9,o],[1,o]];f=2}else if(s=="falling"||s=="rising"){if(u=="x")a=e.createLinearGradient(t,n,r,n);else a=e.createLinearGradient(t,n,t,i);l=webix.color.toRgb(o);c=webix.color.rgbToHsv(l[0],l[1],l[2]);c[1]*=1/2;h="rgb("+webix.color.hsvToRgb(c[0],c[1],c[2])+")";if(s=="falling"){p=[[0,h],[.7,o],[1,o]]}else if(s=="rising"){p=[[0,o],[.3,o],[1,h]]}f=0}else{e.globalAlpha=.37;f=0;if(u=="x")a=e.createLinearGradient(t,i,t,n);else a=e.createLinearGradient(t,n,r,n);p=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]}this._gradient(a,p);return{gradient:a,offset:f}},_getPositionByAngle:function(e,t,n,r){e*=-1;t=t+Math.cos(e)*r;n=n-Math.sin(e)*r;return{x:t,y:n}},_gradient:function(e,t){for(var n=0;n<t.length;n++){e.addColorStop(t[n][0],t[n][1])}},_path:function(e,t){var n,r;for(n=0;n<t.length;n++){r=n?"lineTo":"moveTo";if(t[n].length>2)r="arc";e[r].apply(e,t[n])}},_addMapRect:function(e,t,n,r,i){e.addRect(t,[n[0].x-r.x,n[0].y-r.y,n[1].x-r.x,n[1].y-r.y],i)}},webix.Group,webix.AutoTooltip,webix.DataLoader,webix.MouseEvents,webix.EventSystem,webix.ui.view);webix.extend(webix.ui.chart,{$render_pie:function(e,t,n,r,i,s){this._renderPie(e,t,n,r,1,s,i)},_renderPie:function(e,t,n,r,i,s,o){if(!t.length)return;var u=this._getPieParameters(n,r);var a=this._settings.radius?this._settings.radius:u.radius;if(a<0)return;var f=this._getValues(t);var l=this._getTotalValue(f);var c=this._getRatios(f,l);var h=this._settings.x?this._settings.x:u.x;var p=this._settings.y?this._settings.y:u.y;if(i==1&&this._settings.shadow)this._addShadow(e,h,p,a);p=p/i;var d=-Math.PI/2;var v=[];e.scale(1,i);if(this._settings.gradient){var m=i!=1?h+a/3:h;var g=i!=1?p+a/3:p;this._showRadialGradient(e,h,p,a,m,g)}for(var y=0;y<t.length;y++){if(!f[y])continue;e.strokeStyle=this._settings.lineColor.call(this,t[y]);e.beginPath();e.moveTo(h,p);v.push(d);var b=-Math.PI/2+c[y]-1e-4;e.arc(h,p,a,d,b,false);e.lineTo(h,p);var w=this._settings.color.call(this,t[y]);e.fillStyle=w;e.fill();if(this._settings.pieInnerText)this._drawSectorLabel(h,p,5*a/6,d,b,i,this._settings.pieInnerText(t[y],l),true);if(this._settings.label)this._drawSectorLabel(h,p,a+this._settings.labelOffset,d,b,i,this._settings.label(t[y]));if(i!=1){this._createLowerSector(e,h,p,d,b,a,true);e.fillStyle="#000000";e.globalAlpha=.2;this._createLowerSector(e,h,p,d,b,a,false);e.globalAlpha=1;e.fillStyle=w}s.addSector(t[y].id,d,b,h-n.x,p-n.y/i,a,i,o);d=b}e.globalAlpha=.8;var E;for(y=0;y<v.length;y++){E=this._getPositionByAngle(v[y],h,p,a);this._drawLine(e,h,p,E.x,E.y,this._settings.lineColor.call(this,t[y]),2)}if(i==1){e.lineWidth=2;e.strokeStyle="#ffffff";e.beginPath();e.arc(h,p,a+1,0,2*Math.PI,false);e.stroke()}e.globalAlpha=1;e.scale(1,1/i)},_getValues:function(e){var t=[];for(var n=0;n<e.length;n++)t.push(parseFloat(this._settings.value(e[n])||0));return t},_getTotalValue:function(e){var t=0;for(var n=0;n<e.length;n++)t+=e[n];return t},_getRatios:function(e,t){var n;var r=[];var i=0;t=t||this._getTotalValue(e);for(var s=0;s<e.length;s++){n=e[s];r[s]=Math.PI*2*(t?(n+i)/t:1/e.length);i+=n}return r},_getPieParameters:function(e,t){var n=t.x-e.x;var r=t.y-e.y;var i=e.x+n/2;var s=e.y+r/2;var o=Math.min(n/2,r/2);return{x:i,y:s,radius:o}},_createLowerSector:function(e,t,n,r,i,s,o){e.lineWidth=1;if(!(r<=0&&i>=0||r>=0&&i<=Math.PI||Math.abs(r-Math.PI)>.003&&r<=Math.PI&&i>=Math.PI))return;if(r<=0&&i>=0){r=0;o=false;this._drawSectorLine(e,t,n,s,r,i)}if(r<=Math.PI&&i>=Math.PI){i=Math.PI;o=false;this._drawSectorLine(e,t,n,s,r,i)}var u=(this._settings.pieHeight||Math.floor(s/4))/this._settings.cant;e.beginPath();e.arc(t,n,s,r,i,false);e.lineTo(t+s*Math.cos(i),n+s*Math.sin(i)+u);e.arc(t,n+u,s,i,r,true);e.lineTo(t+s*Math.cos(r),n+s*Math.sin(r));e.fill();if(o)e.stroke()},_drawSectorLine:function(e,t,n,r,i,s){e.beginPath();e.arc(t,n,r,i,s,false);e.stroke()},_addShadow:function(e,t,n,r){e.globalAlpha=.5;var i=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"];for(var s=i.length-1;s>-1;s--){e.beginPath();e.fillStyle=i[s];e.arc(t+1,n+1,r+s,0,Math.PI*2,true);e.fill()}e.globalAlpha=1},_getGrayGradient:function(e){e.addColorStop(0,"#ffffff");e.addColorStop(.7,"#7a7a7a");e.addColorStop(1,"#000000");return e},_showRadialGradient:function(e,t,n,r,i,s){e.beginPath();var o;if(typeof this._settings.gradient!="function"){o=e.createRadialGradient(i,s,r/4,t,n,r);o=this._getGrayGradient(o)}else o=this._settings.gradient(o);e.fillStyle=o;e.arc(t,n,r,0,Math.PI*2,true);e.fill();e.globalAlpha=.7},_drawSectorLabel:function(e,t,n,r,i,s,o,u){var a=this.canvases[0].renderText(0,0,o,0,1);if(!a)return;var f=a.scrollWidth;a.style.width=f+"px";if(f>e)f=e;var l=i-r<.2?4:8;if(u)l=f/1.8;var c=r+(i-r)/2;n=n-(l-8)/2;var h=-l;var p=-8;var d="right";if(c>=Math.PI/2&&c<Math.PI||c<=3*Math.PI/2&&c>=Math.PI){h=-f-h+1;d="left"}var v=0;if(!u&&s<1&&c>0&&c<Math.PI)v=(this._settings.height||Math.floor(n/4))/s;var m=(t+Math.floor((n+v)*Math.sin(c)))*s+p;var g=e+Math.floor((n+l/2)*Math.cos(c))+h;var y=i<Math.PI/2+.01;var b=r<Math.PI/2;if(b&&y){g=Math.max(g,e+3)}else if(!b&&!y)g=Math.min(g,e-f);else if(!u&&(c>=Math.PI/2&&c<Math.PI||c<=3*Math.PI/2&&c>=Math.PI)){g+=f/3}a.style.top=m+"px";a.style.left=g+"px";a.style.width=f+"px";a.style.textAlign=d;a.style.whiteSpace="nowrap"},$render_pie3D:function(e,t,n,r,i,s){this._renderPie(e,t,n,r,this._settings.cant,s)},$render_donut:function(e,t,n,r,i,s){if(!t.length)return;this._renderPie(e,t,n,r,1,s);var o=this._settings;var u=this._getPieParameters(n,r);var a=o.radius?o.radius:u.radius;var f=o.innerRadius&&o.innerRadius<a?o.innerRadius:a/3;var l=o.x?o.x:u.x;var c=o.y?o.y:u.y;e.fillStyle="#ffffff";e.beginPath();e.arc(l,c,f,0,Math.PI*2,true);e.fill()}});webix.extend(webix.ui.chart,{$render_bar:function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g,y,b=r.y-n.y;y=!!this._settings.yAxis;g=!!this._settings.xAxis;f=this._getLimits();l=f.max;c=f.min;u=(r.x-n.x)/t.length;if(!i&&!(this._settings.origin!="auto"&&!y)){this._drawScales(t,n,r,c,l,u)}if(y){l=parseFloat(this._settings.yAxis.end);c=parseFloat(this._settings.yAxis.start)}d=this._getRelativeValue(c,l);h=d[0];p=d[1];m=h?b/h:h;if(!y&&!(this._settings.origin!="auto"&&g)){v=10;m=h?(b-v)/h:v}if(!i&&this._settings.origin!="auto"&&!y&&this._settings.origin>c){this._drawXAxis(e,t,n,r,u,r.y-m*(this._settings.origin-c))}o=parseInt(this._settings.barWidth,10);var w=0;var E=0;for(a=0;a<this._series.length;a++){if(a==i){E=w}if(this._series[a].type=="bar")w++}if(this._series&&o*w+4>u)o=parseInt(u/w-4,10);var S=(u-o*w)/2;var x=typeof this._settings.radius!="undefined"?parseInt(this._settings.radius,10):Math.round(o/5);var T=false;var N=this._settings.gradient;if(N&&typeof N!="function"){T=N;N=false}else if(N){N=e.createLinearGradient(0,r.y,0,n.y);this._settings.gradient(N)}if(!g){this._drawLine(e,n.x,r.y+.5,r.x,r.y+.5,"#000000",1)}for(a=0;a<t.length;a++){var C=parseFloat(this._settings.value(t[a])||0);if(this._logScaleCalc)C=this._log10(C);if(isNaN(C))continue;if(C>l)C=l;C-=c;C*=p;var k=n.x+S+a*u+(o+1)*E;var L=r.y;if(C<0||this._settings.yAxis&&C===0&&!(this._settings.origin!="auto"&&this._settings.origin>c)){this.canvases[i].renderTextAt(true,true,k+Math.floor(o/2),L,this._settings.label(t[a]));continue}if(!y&&!(this._settings.origin!="auto"&&g))C+=v/m;var A=N||this._settings.color.call(this,t[a]);e.globalAlpha=this._settings.alpha.call(this,t[a]);var O=this._drawBar(e,n,k,L,o,c,x,m,C,A,N,T);if(T){this._drawBarGradient(e,k,L,o,c,x,m,C,A,T)}if(this._settings.border)this._drawBarBorder(e,k,L,o,c,x,m,C,A);e.globalAlpha=1;if(O[0]!=k)this.canvases[i].renderTextAt(false,true,k+Math.floor(o/2),O[1],this._settings.label(t[a]));else this.canvases[i].renderTextAt(true,true,k+Math.floor(o/2),O[3],this._settings.label(t[a]));s.addRect(t[a].id,[k-n.x,O[3]-n.y,O[2]-n.x,O[1]-n.y],i)}},_correctBarParams:function(e,t,n,r,i,s,o){var u=this._settings.xAxis;var a=n;if(!!u&&this._settings.origin!="auto"&&this._settings.origin>o){n-=(this._settings.origin-o)*i;a=n;r=r-(this._settings.origin-o);if(r<0){r*=-1;e.translate(t+s,n);e.rotate(Math.PI);t=0;n=0}n-=.5}return{value:r,x0:t,y0:n,start:a}},_drawBar:function(e,t,n,r,i,s,o,u,a,f,l,c){e.save();e.fillStyle=f;var h=this._correctBarParams(e,n,r,a,u,i,s);var p=this._setBarPoints(e,h.x0,h.y0,i,o,u,h.value,this._settings.border?1:0);if(l&&!c)e.lineTo(h.x0+(this._settings.border?1:0),t.y);e.fill();e.restore();var d=h.x0;var v=h.x0!=n?n+p[0]:p[0];var m=h.x0!=n?h.start-p[1]-h.y0:h.y0;var g=h.x0!=n?h.start-h.y0:p[1];return[d,m,v,g]},_setBorderStyles:function(e,t){var n,r;r=webix.color.toRgb(t);n=webix.color.rgbToHsv(r[0],r[1],r[2]);n[2]/=1.4;t="rgb("+webix.color.hsvToRgb(n[0],n[1],n[2])+")";e.strokeStyle=t;if(e.globalAlpha==1)e.globalAlpha=.9},_drawBarBorder:function(e,t,n,r,i,s,o,u,a){var f;e.save();f=this._correctBarParams(e,t,n,u,o,r,i);this._setBorderStyles(e,a);this._setBarPoints(e,f.x0,f.y0,r,s,o,f.value,e.lineWidth/2,1);e.stroke();e.restore()},_drawBarGradient:function(e,t,n,r,i,s,o,u,a,f){e.save();var l=this._correctBarParams(e,t,n,u,o,r,i);var c=this._setBarGradient(e,l.x0,l.y0,l.x0+r,l.y0-o*l.value+2,f,a,"y");var h=this._settings.border?1:0;e.fillStyle=c.gradient;this._setBarPoints(e,l.x0+c.offset,l.y0,r-c.offset*2,s,o,l.value,c.offset+h);e.fill();e.restore()},_setBarPoints:function(e,t,n,r,i,s,o,u,a){e.beginPath();var f=0;if(i>s*o){var l=(i-s*o)/i;if(l<=1&&l>=-1)f=-Math.acos(l)+Math.PI/2}e.moveTo(t+u,n);var c=n-Math.floor(s*o)+i+(i?0:u);if(i<s*o)e.lineTo(t+u,c);var h=t+i;if(i&&i>0)e.arc(h,c,i-u,-Math.PI+f,-Math.PI/2,false);var p=t+r-i-u;var d=c-i+(i?u:0);e.lineTo(p,d);if(i&&i>0)e.arc(p,c,i-u,-Math.PI/2,0-f,false);var v=t+r-u;e.lineTo(v,n);if(!a){e.lineTo(t+u,n)}return[v,d]}});webix.extend(webix.ui.chart,{$render_line:function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g;f=this._calculateLineParams(e,t,n,r,i);o=this._settings;if(t.length){l=o.offset?n.x+f.cellWidth*.5:n.x;a=[];for(u=0;u<t.length;u++){g=this._getPointY(t[u],n,r,f);if(g){h=!u?l:f.cellWidth*u-.5+l;d=typeof g=="object"?g.y0:g;if(u&&this._settings.fixOverflow){m=this._getPointY(t[u-1],n,r,f);if(m.out&&m.out==g.out){continue}c=f.cellWidth*(u-1)-.5+l;p=typeof m=="object"?m.y0:m;if(m.out){v=m.out=="min"?r.y:n.y;a.push({x:this._calcOverflowX(c,h,p,d,v),y:v})}if(g.out){v=g.out=="min"?r.y:n.y;a.push({x:this._calcOverflowX(c,h,p,d,v),y:v})}}if(!g.out)a.push({x:h,y:g,index:u})}}this._mapStart=n;for(u=1;u<=a.length;u++){c=a[u-1].x;p=a[u-1].y;if(u<a.length){h=a[u].x;d=a[u].y;this._drawLine(e,c,p,h,d,o.line.color.call(this,t[u-1]),o.line.width);if(o.line&&o.line.shadow){e.globalAlpha=.3;this._drawLine(e,c+2,p+o.line.width+8,h+2,d+o.line.width+8,"#eeeeee",o.line.width+3);e.globalAlpha=1}}if(typeof a[u-1].index!="undefined")this._drawItem(e,c,p,t[a[u-1].index],o.label(t[a[u-1].index]),i,s,n)}}},_calcOverflowX:function(e,t,n,r,i){return e+(i-n)*(t-e)/(r-n)},_drawItem:function(e,t,n,r,i,s,o){var u=this._settings.item;var a=parseInt(u.radius.call(this,r),10)||0;var f=this._mapStart;if(a){e.save();if(u.shadow){e.lineWidth=1;e.strokeStyle="#bdbdbd";e.fillStyle="#bdbdbd";var l=[.1,.2,.3];for(var c=l.length-1;c>=0;c--){e.globalAlpha=l[c];e.strokeStyle="#d0d0d0";e.beginPath();this._strokeChartItem(e,t,n+2*a/3,a+c+1,u.type);e.stroke()}e.beginPath();e.globalAlpha=.3;e.fillStyle="#bdbdbd";this._strokeChartItem(e,t,n+2*a/3,a+1,u.type);e.fill()}e.restore();e.lineWidth=u.borderWidth;e.fillStyle=u.color.call(this,r);e.strokeStyle=u.borderColor.call(this,r);e.globalAlpha=u.alpha.call(this,r);e.beginPath();this._strokeChartItem(e,t,n,a+1,u.type);e.fill();e.stroke();e.globalAlpha=1}if(i){this.canvases[s].renderTextAt(false,true,t,n-a-this._settings.labelOffset,this._settings.label.call(this,r))}if(o){var h=this._settings.eventRadius||a+1;o.addRect(r.id,[t-h-f.x,n-h-f.y,t+h-f.x,n+h-f.y],s)}},_strokeChartItem:function(e,t,n,r,i){var s=[];if(i&&(i=="square"||i=="s")){r*=Math.sqrt(2)/2;s=[[t-r-e.lineWidth/2,n-r],[t+r,n-r],[t+r,n+r],[t-r,n+r],[t-r,n-r]]}else if(i&&(i=="diamond"||i=="d")){var o=e.lineWidth>1?e.lineWidth*Math.sqrt(2)/4:0;s=[[t,n-r],[t+r,n],[t,n+r],[t-r,n],[t+o,n-r-o]]}else if(i&&(i=="triangle"||i=="t")){s=[[t,n-r],[t+Math.sqrt(3)*r/2,n+r/2],[t-Math.sqrt(3)*r/2,n+r/2],[t,n-r]]}else s=[[t,n,r,0,Math.PI*2,true]];this._path(e,s)},_getPointY:function(e,t,n,r){var i=r.minValue;var s=r.maxValue;var o=r.unit;var u=r.valueFactor;var a=this._settings.value(e);if(this._logScaleCalc){a=this._log10(a)}var f=(parseFloat(a||0)-i)*u;if(!this._settings.yAxis)f+=r.startValue/o;var l=n.y-o*f;if(this._settings.fixOverflow&&(this._settings.type=="line"||this._settings.type=="area")){if(a>s)l={y:t.y,y0:l,out:"max"};else if(f<0||a<i)l={y:n.y,y0:l,out:"min"}}else{if(a>s)l=t.y;if(f<0||a<i)l=n.y}return l},_calculateLineParams:function(e,t,n,r,i){var s={};var o;s.totalHeight=r.y-n.y;s.cellWidth=(r.x-n.x)/(!this._settings.offset?t.length-1:t.length);var u=!!this._settings.yAxis;var a=this._settings.type.indexOf("stacked")!=-1?this._getStackedLimits(t):this._getLimits();s.maxValue=a.max;s.minValue=a.min;if(!i)this._drawScales(t,n,r,s.minValue,s.maxValue,s.cellWidth);if(u){s.maxValue=parseFloat(this._settings.yAxis.end);s.minValue=parseFloat(this._settings.yAxis.start)}var f=this._getRelativeValue(s.minValue,s.maxValue);o=f[0];s.valueFactor=f[1];s.unit=o?s.totalHeight/o:10;s.startValue=0;if(!u){s.startValue=10;if(s.unit!=s.totalHeight)s.unit=o?(s.totalHeight-s.startValue)/o:10}return s}});webix.extend(webix.ui.chart,{$render_barH:function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C;a=(r.y-n.y)/t.length;h=this._getLimits("h");p=h.max;d=h.min;E=r.x-n.x;C=!!this._settings.yAxis;if(!i)this._drawHScales(e,t,n,r,d,p,a);if(C){p=parseFloat(this._settings.xAxis.end);d=parseFloat(this._settings.xAxis.start)}b=this._getRelativeValue(d,p);g=b[0];m=b[1];x=g?E/g:10;if(!C){w=10;x=g?(E-w)/g:10}u=parseInt(this._settings.barWidth,10);if(u*this._series.length+4>a)u=a/this._series.length-4;o=Math.floor((a-u*this._series.length)/2);y=typeof this._settings.radius!="undefined"?parseInt(this._settings.radius,10):Math.round(u/5);v=false;l=this._settings.gradient;if(l&&typeof l!="function"){v=l;l=false}else if(l){l=e.createLinearGradient(n.x,n.y,r.x,n.y);this._settings.gradient(l)}if(!C){this._drawLine(e,n.x-.5,n.y,n.x-.5,r.y,"#000000",1)}for(c=0;c<t.length;c++){S=parseFloat(this._settings.value(t[c]||0));if(this._logScaleCalc)S=this._log10(S);if(S>p)S=p;S-=d;S*=m;T=n.x;N=n.y+o+c*a+(u+1)*i;if(S<0&&this._settings.origin=="auto"||this._settings.xAxis&&S===0&&!(this._settings.origin!="auto"&&this._settings.origin>d)){this.canvases[i].renderTextAt("middle","right",T+10,N+u/2+o,this._settings.label(t[c]));continue}if(S<0&&this._settings.origin!="auto"&&this._settings.origin>d){S=0}if(!C)S+=w/x;f=l||this._settings.color.call(this,t[c]);if(this._settings.border){this._drawBarHBorder(e,T,N,u,d,y,x,S,f)}e.globalAlpha=this._settings.alpha.call(this,t[c]);var k=this._drawBarH(e,r,T,N,u,d,y,x,S,f,l,v);if(v){this._drawBarHGradient(e,T,N,u,d,y,x,S,f,v)}e.globalAlpha=1;if(k[3]==N){this.canvases[i].renderTextAt("middle","left",k[0]-5,k[3]+Math.floor(u/2),this._settings.label(t[c]));s.addRect(t[c].id,[k[0]-n.x,k[3]-n.y,k[2]-n.x,k[3]+u-n.y],i)}else{this.canvases[i].renderTextAt("middle",false,k[2]+5,k[1]+Math.floor(u/2),this._settings.label(t[c]));s.addRect(t[c].id,[k[0]-n.x,N-n.y,k[2]-n.x,k[3]-n.y],i)}}},_setBarHPoints:function(e,t,n,r,i,s,o,u,a){var f=0;if(i>s*o){var l=(i-s*o)/i;f=-Math.asin(l)+Math.PI/2}e.moveTo(t,n+u);var c=t+s*o-i-(i?0:u);if(i<s*o)e.lineTo(c,n+u);var h=n+i;if(i&&i>0)e.arc(c,h,i-u,-Math.PI/2+f,0,false);var p=n+r-i-(i?0:u);var d=c+i-(i?u:0);e.lineTo(d,p);if(i&&i>0)e.arc(c,p,i-u,0,Math.PI/2-f,false);var v=n+r-u;e.lineTo(t,v);if(!a){e.lineTo(t,n+u)}return[d,v]},_drawHScales:function(e,t,n,r,i,s,o){var u=0;if(this._settings.xAxis){if(!this.canvases["x"])this.canvases["x"]=this._createCanvas("axis_x");u=this._drawHXAxis(this.canvases["x"].getCanvas(),t,n,r,i,s)}if(this._settings.yAxis){if(!this.canvases["y"])this.canvases["y"]=this._createCanvas("axis_y");this._drawHYAxis(this.canvases["y"].getCanvas(),t,n,r,o,u)}},_drawHYAxis:function(e,t,n,r,i,s){if(!this._settings.yAxis)return;var o;var u=parseInt(s?s:n.x,10)-.5;var a=r.y+.5;var f=n.y;this._drawLine(e,u,a,u,f,this._settings.yAxis.color,1);for(var l=0;l<t.length;l++){var c=this._settings.origin!="auto"&&this._settings.type=="barH"&&parseFloat(this._settings.value(t[l]))<this._settings.origin;o=f+i/2+l*i;this.canvases["y"].renderTextAt("middle",c?false:"left",c?u+5:u-5,o,this._settings.yAxis.template(t[l]),"webix_axis_item_y",c?0:u-10);if(this._settings.yAxis.lines.call(this,t[l]))this._drawLine(e,n.x,o,r.x,o,this._settings.yAxis.lineColor.call(this,t[l]),1)}this._drawLine(e,n.x+.5,f+.5,r.x,f+.5,this._settings.yAxis.lineColor.call(this,{}),1);this._setYAxisTitle(n,r)},_drawHXAxis:function(e,t,n,r,i,s){var o;var u={};var a=this._settings.xAxis;if(!a)return;var f=r.y+.5;var l=n.x-.5;var c=r.x-.5;var h=n.x;this._drawLine(e,l,f,c,f,a.color,1);if(a.step)o=parseFloat(a.step);if(typeof this._configXAxis.step=="undefined"||typeof this._configXAxis.start=="undefined"||typeof this._configXAxis.end=="undefined"){u=this._calculateScale(i,s);i=u.start;s=u.end;o=u.step;this._settings.xAxis.end=s;this._settings.xAxis.start=i;this._settings.xAxis.step=o}if(o===0)return;var p=(c-l)*o/(s-i);var d=0;for(var v=i;v<=s;v+=o){var m=this._logScaleCalc?Math.pow(10,v):v;if(u.fixNum)m=parseFloat(m).toFixed(u.fixNum);var g=Math.floor(l+d*p)+.5;if(!(v==i&&this._settings.origin=="auto")&&a.lines.call(this,v))this._drawLine(e,g,f,g,n.y,this._settings.xAxis.lineColor.call(this,v),1);if(v==this._settings.origin)h=g+1;if(o<1&&!this._logScaleCalc){var y=Math.min(Math.floor(this._log10(o)),i<=0?0:Math.floor(this._log10(i)));var b=Math.pow(10,-y);m=Math.round(m*b)/b;v=m}this.canvases["x"].renderTextAt(false,true,g,f+2,a.template(m.toString()),"webix_axis_item_x");d++}this.canvases["x"].renderTextAt(true,false,l,r.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"webix_axis_title_x",r.x-n.x);if(!a.lines.call(this,{})){this._drawLine(e,l,n.y-.5,c,n.y-.5,this._settings.xAxis.color,.2)}return h},_correctBarHParams:function(e,t,n,r,i,s,o){var u=this._settings.yAxis;var a=t;if(!!u&&this._settings.origin!="auto"&&this._settings.origin>o){t+=(this._settings.origin-o)*i;a=t;r=r-(this._settings.origin-o);if(r<0){r*=-1;e.translate(t,n+s);e.rotate(Math.PI);t=.5;n=0}t+=.5}return{value:r,x0:t,y0:n,start:a}},_drawBarH:function(e,t,n,r,i,s,o,u,a,f,l,c){e.save();var h=this._correctBarHParams(e,n,r,a,u,i,s);e.fillStyle=f;e.beginPath();var p=this._setBarHPoints(e,h.x0,h.y0,i,o,u,h.value,this._settings.border?1:0);if(l&&!c)e.lineTo(t.x,h.y0+(this._settings.border?1:0));e.fill();e.restore();var d=h.y0;var v=h.y0!=r?r:p[1];var m=h.y0!=r?h.start-p[0]:h.start;var g=h.y0!=r?h.start:p[0];return[m,d,g,v]},_drawBarHBorder:function(e,t,n,r,i,s,o,u,a){e.save();var f=this._correctBarHParams(e,t,n,u,o,r,i);e.beginPath();this._setBorderStyles(e,a);e.globalAlpha=.9;this._setBarHPoints(e,f.x0,f.y0,r,s,o,f.value,e.lineWidth/2,1);e.stroke();e.restore()},_drawBarHGradient:function(e,t,n,r,i,s,o,u,a,f){e.save();var l=this._correctBarHParams(e,t,n,u,o,r,i);var c=this._setBarGradient(e,l.x0,l.y0+r,l.x0+o*l.value,l.y0,f,a,"x");e.fillStyle=c.gradient;e.beginPath();this._setBarHPoints(e,l.x0,l.y0+c.offset,r-c.offset*2,s,o,l.value,c.offset);e.fill();e.globalAlpha=1;e.restore()}});webix.extend(webix.ui.chart,{$render_stackedBar:function(e,t,n,r,i,s){var o,u;var a;var f;var l=r.y-n.y;var c=!!this._settings.yAxis;var h=!!this._settings.xAxis;var p=this._getStackedLimits(t);o=p.max;u=p.min;var d=Math.floor((r.x-n.x)/t.length);if(!i)this._drawScales(t,n,r,u,o,d);if(c){o=parseFloat(this._settings.yAxis.end);u=parseFloat(this._settings.yAxis.start)}var v=this._getRelativeValue(u,o);f=v[0];a=v[1];var m=f?l/f:10;var g=parseInt(this._settings.barWidth,10);if(g+4>d)g=d-4;var y=Math.floor((d-g)/2);var b=this._settings.gradient?this._settings.gradient:false;if(!h){this._drawLine(e,n.x,r.y+.5,r.x,r.y+.5,"#000000",1)}for(var w=0;w<t.length;w++){var E=parseFloat(this._settings.value(t[w]||0));if(this._logScaleCalc)E=this._log10(E);if(!E){if(!i||!t[w].$startY)t[w].$startY=r.y;continue}if(!i)E-=u;E*=a;var S=n.x+y+w*d;var x=r.y;if(!i)t[w].$startY=x;else x=t[w].$startY;if(x<n.y+1)continue;if(E<0||this._settings.yAxis&&E===0){this.canvases["y"].renderTextAt(true,true,S+Math.floor(g/2),x,this._settings.label(t[w]));continue}var T=this._settings.color.call(this,t[w]);e.globalAlpha=this._settings.alpha.call(this,t[w]);e.fillStyle=this._settings.color.call(this,t[w]);e.beginPath();var N=this._setStakedBarPoints(e,S-(this._settings.border?.5:0),x,g+(this._settings.border?.5:0),m,E,0,n.y);e.fill();if(b){e.save();var C=this._setBarGradient(e,S,x,S+g,N[1],b,T,"y");e.fillStyle=C.gradient;e.beginPath();N=this._setStakedBarPoints(e,S+C.offset,x,g-C.offset*2,m,E,this._settings.border?1:0,n.y);e.fill();e.restore()}if(this._settings.border){e.save();this._setBorderStyles(e,T);e.beginPath();this._setStakedBarPoints(e,S-.5,x,g+1,m,E,0,n.y,1);e.stroke();e.restore()}e.globalAlpha=1;this.canvases[i].renderTextAt(false,true,S+Math.floor(g/2),N[1]+(x-N[1])/2-7,this._settings.label(t[w]));s.addRect(t[w].id,[S-n.x,N[1]-n.y,N[0]-n.x,(t[w].$startY||x)-n.y],i);t[w].$startY=this._settings.border?N[1]+1:N[1]}},_setStakedBarPoints:function(e,t,n,r,i,s,o,u,a){e.moveTo(t,n);var f=n-i*s+o;if(f<u)f=u;e.lineTo(t,f);var l=t+r;var c=f;e.lineTo(l,c);var h=t+r;e.lineTo(h,n);if(!a){e.lineTo(t,n)}return[h,c-2*o]}});webix.extend(webix.ui.chart,{$render_stackedBarH:function(e,t,n,r,i,s){var o,u;var a;var f;var l=r.x-n.x;var c=!!this._settings.yAxis;var h=this._getStackedLimits(t);o=h.max;u=h.min;var p=Math.floor((r.y-n.y)/t.length);if(!i)this._drawHScales(e,t,n,r,u,o,p);if(c){o=parseFloat(this._settings.xAxis.end);u=parseFloat(this._settings.xAxis.start)}var d=this._getRelativeValue(u,o);f=d[0];a=d[1];var v=f?l/f:10;var m=0;if(!c){m=10;v=f?(l-m)/f:10}var g=parseInt(this._settings.barWidth,10);if(g+4>p)g=p-4;var y=(p-g)/2;var b=0;var w=false;var E=this._settings.gradient;if(E){w=true}if(!c){this._drawLine(e,n.x-.5,n.y,n.x-.5,r.y,"#000000",1)}var S=0;var x=0;for(T=0;T<this._series.length;T++){if(T==i){x=S}if(this._series[T].type=="stackedBarH")S++}for(var T=0;T<t.length;T++){if(!x)t[T].$startX=n.x;var N=parseFloat(this._settings.value(t[T]||0));if(N>o)N=o;N-=u;N*=a;var C=n.x;var k=n.y+y+T*p;if(!x)t[T].$startX=C;else C=t[T].$startX;if(N<0||this._settings.yAxis&&N===0){this.canvases["y"].renderTextAt("middle",true,C+10,k+g/2,this._settings.label(t[T]));continue}if(!c)N+=m/v;var L=this._settings.color.call(this,t[T]);e.globalAlpha=this._settings.alpha.call(this,t[T]);e.fillStyle=this._settings.color.call(this,t[T]);e.beginPath();var A=this._setBarHPoints(e,C,k,g,b,v,N,this._settings.border?1:0);if(E&&!w)e.lineTo(n.x+l,k+(this._settings.border?1:0));e.fill();if(w){var O=this._setBarGradient(e,C,k+g,C,k,w,L,"x");e.fillStyle=O.gradient;e.beginPath();A=this._setBarHPoints(e,C,k,g,b,v,N,0);e.fill()}if(this._settings.border){this._drawBarHBorder(e,C,k,g,u,b,v,N,L)}e.globalAlpha=1;this.canvases[i].renderTextAt("middle",true,t[T].$startX+(A[0]-t[T].$startX)/2-1,k+(A[1]-k)/2,this._settings.label(t[T]));s.addRect(t[T].id,[t[T].$startX-n.x,k-n.y,A[0]-n.x,A[1]-n.y],i);t[T].$startX=A[0]}}});webix.extend(webix.ui.chart,{$render_spline:function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g,y;l=this._calculateLineParams(e,t,n,r,i);o=this._settings;this._mapStart=n;a=[];if(t.length){p=o.offset?n.x+l.cellWidth*.5:n.x;for(u=0;u<t.length;u++){m=this._getPointY(t[u],n,r,l);if(m){h=!u?p:l.cellWidth*u-.5+p;a.push({x:h,y:m,index:u})}}c=this._getSplineParameters(a);for(u=0;u<a.length;u++){d=a[u].x;g=a[u].y;if(u<a.length-1){v=a[u+1].x;y=a[u+1].y;for(f=d;f<v;f++){var b=this._getSplineYPoint(f,d,u,c.a,c.b,c.c,c.d);if(b<n.y)b=n.y;if(b>r.y)b=r.y;var w=this._getSplineYPoint(f+1,d,u,c.a,c.b,c.c,c.d);if(w<n.y)w=n.y;if(w>r.y)w=r.y;this._drawLine(e,f,b,f+1,w,o.line.color(t[u]),o.line.width)}this._drawLine(e,v-1,this._getSplineYPoint(f,d,u,c.a,c.b,c.c,c.d),v,y,o.line.color(t[u]),o.line.width)}this._drawItem(e,d,g,t[a[u].index],o.label(t[a[u].index]),i,s)}}},_getSplineParameters:function(e){var t,n,r,i,s,o,u,a,f=[],l=[],c=e.length;for(s=0;s<c-1;s++){f[s]=e[s+1].x-e[s].x;l[s]=(e[s+1].y-e[s].y)/f[s]}u=[];a=[];u[0]=0;u[1]=2*(f[0]+f[1]);a[0]=0;a[1]=6*(l[1]-l[0]);for(s=2;s<c-1;s++){u[s]=2*(f[s-1]+f[s])-f[s-1]*f[s-1]/u[s-1];a[s]=6*(l[s]-l[s-1])-f[s-1]*a[s-1]/u[s-1]}o=[];o[c-1]=o[0]=0;for(s=c-2;s>=1;s--)o[s]=(a[s]-f[s]*o[s+1])/u[s];t=[];n=[];r=[];i=[];for(s=0;s<c-1;s++){t[s]=e[s].y;n[s]=-f[s]*o[s+1]/6-f[s]*o[s]/3+(e[s+1].y-e[s].y)/f[s];r[s]=o[s]/2;i[s]=(o[s+1]-o[s])/(6*f[s])}return{a:t,b:n,c:r,d:i}},_getSplineYPoint:function(e,t,n,r,i,s,o){return r[n]+(e-t)*(i[n]+(e-t)*(s[n]+(e-t)*o[n]))}});webix.extend(webix.ui.chart,{$render_area:function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;c=this._calculateLineParams(e,t,n,r,i);u=this._settings;f=u.eventRadius||Math.floor(c.cellWidth/2);if(t.length){h=[];v=!u.offset?n.x:n.x+c.cellWidth*.5;for(a=0;a<t.length;a++){l=t[a];d=this._getPointY(l,n,r,c);y=v+c.cellWidth*a;if(d){b=typeof d=="object"?d.y0:d;if(a&&this._settings.fixOverflow){p=this._getPointY(t[a-1],n,r,c);if(p.out&&p.out==d.out){continue}m=c.cellWidth*(a-1)-.5+v;g=typeof p=="object"?p.y0:p;if(p.out){w=p.out=="min"?r.y:n.y;h.push([this._calcOverflowX(m,y,g,b,w),w])}if(d.out){w=d.out=="min"?r.y:n.y;h.push([this._calcOverflowX(m,y,g,b,w),w]);if(a==t.length-1&&w==n.y)h.push([y,n.y])}}if(!d.out){h.push([y,b]);s.addRect(l.id,[y-f-n.x,b-f-n.y,y+f-n.x,b+f-n.y],i)}if(!u.yAxis){o=!u.offset&&a==t.length-1?"left":"center";this.canvases[i].renderTextAt(false,o,y,b-u.labelOffset,u.label(l))}}}if(h.length){h.push([y,r.y]);h.push([h[0][0],r.y])}e.globalAlpha=this._settings.alpha.call(this,t[0]);e.fillStyle=this._settings.color.call(this,t[0]);e.beginPath();this._path(e,h);e.fill();if(u.border){e.lineWidth=u.borderWidth||1;if(u.borderColor)e.strokeStyle=u.borderColor.call(this,t[0]);else this._setBorderStyles(e,e.fillStyle);e.beginPath();this._path(e,h);e.stroke()}e.lineWidth=1;e.globalAlpha=1}},$render_stackedArea:function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g,y,b;v=this._calculateLineParams(e,t,n,r,i);f=this._settings;p=f.eventRadius||Math.floor(v.cellWidth/2);if(t.length){m=[];b=[];g=!f.offset?n.x:n.x+v.cellWidth*.5;var w=function(e,n){return i?t[e].$startY?n-r.y+t[e].$startY:0:n};var E=function(e,t,n){var r=(n.y-t.y)/(n.x-t.x);return r*e+t.y-r*t.x};for(l=0;l<t.length;l++){d=t[l];if(!l){y=w(l,r.y);m.push([g,y])}else{g+=v.cellWidth}y=w(l,this._getPointY(d,n,r,v));b.push(isNaN(y)&&!l?t[l].$startY||r.y:y);if(y){m.push([g,y]);s.addRect(d.id,[g-p-n.x,y-p-n.y,g+p-n.x,y+p-n.y],i);if(!f.yAxis){a=!f.offset&&h?"left":"center";this.canvases[i].renderTextAt(false,a,g,y-f.labelOffset,f.label(d))}}}m.push([g,w(l-1,r.y)]);if(i){for(l=t.length-2;l>0;l--){g-=v.cellWidth;y=t[l].$startY;if(y)m.push([g,y])}}m.push([m[0][0],m[0][1]]);e.globalAlpha=this._settings.alpha.call(this,t[0]);e.fillStyle=this._settings.color.call(this,t[0]);e.beginPath();this._path(e,m);e.fill();for(l=0;l<t.length;l++){y=b[l];if(!y){if(l==t.length-1){y=t[l].$startY}for(c=l+1;c<t.length;c++){if(b[c]){o={x:n.x,y:b[0]};u={x:n.x+v.cellWidth*c,y:b[c]};y=E(n.x+v.cellWidth*l,o,u);break}}}t[l].$startY=y}}}});webix.extend(webix.ui.chart,{$render_radar:function(e,t,n,r,i,s){this._renderRadarChart(e,t,n,r,i,s)},_renderRadarChart:function(e,t,n,r,i,s){if(!t.length)return;var o=this._getPieParameters(n,r);var u=this._settings.radius?this._settings.radius:o.radius;var a=this._settings.x?this._settings.x:o.x;var f=this._settings.y?this._settings.y:o.y;var l=[];for(var c=0;c<t.length;c++)l.push(1);var h=this._getRatios(l,t.length);this._mapStart=n;if(!i)this._drawRadarAxises(h,a,f,u,t);this._drawRadarData(e,h,a,f,u,t,i,s)},_drawRadarData:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C;l=this._settings;h=l.yAxis.start;p=l.yAxis.end;C=this._getRelativeValue(h,p);b=C[0];N=b?i/b:i/2;T=C[1];w=-Math.PI/2;a=f=w;m=[];v=0;for(c=0;c<s.length;c++){if(!x){E=l.value(s[c]);if(this._logScaleCalc)E=this._log10(E);S=(parseFloat(E||0)-h)*T}else S=x;g=Math.floor(N*S);E=l.value(c!=s.length-1?s[c+1]:s[0]);if(this._logScaleCalc)E=this._log10(E);x=(parseFloat(E||0)-h)*T;y=Math.floor(N*x);a=f;f=c!=s.length-1?w+t[c]-1e-4:w;d=v||this._getPositionByAngle(a,n,r,g);v=this._getPositionByAngle(f,n,r,y);m.push(d)}if(l.fill)this._fillRadarChart(e,m,s);if(!l.disableLines&&s.length>2)this._strokeRadarChart(e,m,s);if(!l.disableItems||s.length<3)this._drawRadarItemMarkers(e,m,s,o,u);m=null},_drawRadarItemMarkers:function(e,t,n,r,i){for(var s=0;s<t.length;s++){this._drawItem(e,t[s].x,t[s].y,n[s],this._settings.label.call(this,n),r,i)}},_fillRadarChart:function(e,t,n){var r,i;e.globalAlpha=this._settings.alpha.call(this,{});e.beginPath();for(var s=0;s<t.length;s++){e.fillStyle=this._settings.fill.call(this,n[s]);r=t[s];i=t[s+1]||t[0];if(!s){e.moveTo(r.x,r.y)}e.lineTo(i.x,i.y)}e.fill();e.globalAlpha=1},_strokeRadarChart:function(e,t,n){var r,i;for(var s=0;s<t.length;s++){r=t[s];i=t[s+1]||t[0];this._drawLine(e,r.x,r.y,i.x,i.y,this._settings.line.color.call(this,n[s]),this._settings.line.width)}},_drawRadarAxises:function(e,t,n,r,i){var s=this._settings.yAxis;var o=this._settings.xAxis;var u=s.start;var a=s.end;var f=s.step;var l={};var c=this._configYAxis;if(typeof c.step=="undefined"||typeof c.start=="undefined"||typeof c.end=="undefined"){var h=this._getLimits();l=this._calculateScale(h.min,h.max);u=l.start;a=l.end;f=l.step;s.end=a;s.start=u}var p=[];var d,v,m;var g=0;var y=r*f/(a-u);var b,w;if(f<1){b=Math.min(this._log10(f),u<=0?0:this._log10(u));w=Math.pow(10,-b)}var E=[];if(!this.canvases["scale"])this.canvases["scale"]=this._createCanvas("radar_scale");var S=this.canvases["scale"].getCanvas();for(d=a;d>=u;d-=f){var x=this._logScaleCalc?Math.pow(10,d):d;if(l.fixNum)x=parseFloat(d).toFixed(l.fixNum);p.push(Math.floor(g*y)+.5);if(w&&!this._logScaleCalc){x=Math.round(x*w)/w;d=x}var T=n-r+p[p.length-1];this.canvases["scale"].renderTextAt("middle","left",t,T,s.template(x.toString()),"webix_axis_item_y webix_radar");if(e.length<2){this._drawScaleSector(S,"arc",t,n,r-p[p.length-1],-Math.PI/2,3*Math.PI/2,d);return}var N=-Math.PI/2;var C=N;var k;for(v=0;v<e.length;v++){if(d==a)E.push(C);k=N+e[v]-1e-4;this._drawScaleSector(S,e.length>2?c.lineShape||"line":"arc",t,n,r-p[p.length-1],C,k,d,v,i[d]);C=k}g++}for(d=0;d<E.length;d++){m=this._getPositionByAngle(E[d],t,n,r);if(o.lines.call(this,i[d],d))this._drawLine(S,t,n,m.x,m.y,o?o.lineColor.call(this,i[d]):"#cfcfcf",1);this._drawRadarScaleLabel(S,t,n,r,E[d],o?o.template.call(this,i[d]):"&nbsp;")}},_drawScaleSector:function(e,t,n,r,i,s,o,u,a){var f,l;if(i<0)return false;f=this._getPositionByAngle(s,n,r,i);l=this._getPositionByAngle(o,n,r,i);var c=this._settings.yAxis;if(c.bg){e.beginPath();e.moveTo(n,r);if(t=="arc")e.arc(n,r,i,s,o,false);else{e.lineTo(f.x,f.y);e.lineTo(l.x,l.y)}e.fillStyle=c.bg(u,a);e.moveTo(n,r);e.fill();e.closePath()}if(c.lines.call(this,u)){e.lineWidth=1;e.beginPath();if(t=="arc")e.arc(n,r,i,s,o,false);else{e.moveTo(f.x,f.y);e.lineTo(l.x,l.y)}e.strokeStyle=c.lineColor.call(this,u);e.stroke()}},_drawRadarScaleLabel:function(e,t,n,r,i,s){var o=this.canvases["scale"].renderText(0,0,s,"webix_axis_radar_title",1);var u=o.scrollWidth;var a=o.offsetHeight;var f=.001;var l=this._getPositionByAngle(i,t,n,r+5);var c=0,h=0;if(i<0||i>Math.PI){h=-a}if(i>Math.PI/2){c=-u}if(Math.abs(i+Math.PI/2)<f||Math.abs(i-Math.PI/2)<f){c=-u/2}else if(Math.abs(i)<f||Math.abs(i-Math.PI)<f){h=-a/2}o.style.top=l.y+h+"px";o.style.left=l.x+c+"px";o.style.width=u+"px";o.style.whiteSpace="nowrap"}});webix.extend(webix.ui.chart,{$render_scatter:function(e,t,n,r,i,s){if(!this._settings.xValue)return webix.log("warning","Undefined propery: xValue");var o=this._getLimits();var u=this._getLimits("h","xValue");if(!i){if(!this.canvases["x"])this.canvases["x"]=this._createCanvas("axis_x");if(!this.canvases["y"])this.canvases["y"]=this._createCanvas("axis_y");this._drawYAxis(this.canvases["y"].getCanvas(),t,n,r,o.min,o.max);this._drawHXAxis(this.canvases["x"].getCanvas(),t,n,r,u.min,u.max)}o={min:this._settings.yAxis.start,max:this._settings.yAxis.end};u={min:this._settings.xAxis.start,max:this._settings.xAxis.end};var a=this._getScatterParams(e,t,n,r,u,o);this._mapStart=n;for(var f=0;f<t.length;f++){this._drawScatterItem(e,s,n,r,a,u,o,t[f],i)}},_getScatterParams:function(e,t,n,r,i,s){var o={};o.totalHeight=r.y-n.y;o.totalWidth=r.x-n.x;this._calcScatterUnit(o,i.min,i.max,o.totalWidth,"X");this._calcScatterUnit(o,s.min,s.max,o.totalHeight,"Y");return o},_drawScatterItem:function(e,t,n,r,i,s,o,u,a){var f=this._calculateScatterItemPosition(i,r,n,s,u,"X");var l=this._calculateScatterItemPosition(i,n,r,o,u,"Y");this._drawItem(e,f,l,u,this._settings.label.call(this,u),a,t)},_calculateScatterItemPosition:function(e,t,n,r,i,s){var o=this._settings[s=="X"?"xValue":"value"].call(this,i);var u=e["valueFactor"+s];var a=(parseFloat(o||0)-r.min)*u;var f=e["unit"+s];var l=n[s.toLowerCase()]-(s=="X"?-1:1)*Math.floor(f*a);if(a<0)l=n[s.toLowerCase()];if(o>r.max)l=t[s.toLowerCase()];if(o<r.min)l=n[s.toLowerCase()];return l},_calcScatterUnit:function(e,t,n,r,i){var s=this._getRelativeValue(t,n);i=i||"";e["relValue"+i]=s[0];e["valueFactor"+i]=s[1];e["unit"+i]=e["relValue"+i]?r/e["relValue"+i]:10}});webix.extend(webix.ui.chart,{presets:{simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:false,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:false},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:true},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:true,fill:false,disableItems:false,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:false,disableItems:false,disableLines:false,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:true,alpha:.2,disableLines:false},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:false,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:false,alpha:1}},column:{color:"RAINBOW",gradient:false,barWidth:45,radius:0,alpha:1,border:true},stick:{barWidth:5,gradient:false,color:"#67b5c9",radius:2,alpha:1,border:false},alpha:{color:"#b9a8f9",barWidth:70,gradient:"falling",radius:0,alpha:.5,border:true}}});webix.protoUI({name:"calendar",defaults:{date:new Date,select:false,navigation:true,monthSelect:true,weekHeader:true,weekNumber:false,skipEmptyWeeks:false,calendarHeader:"%F %Y",calendarWeekHeader:"W#",calendarTime:"%H:%i",events:webix.Date.isHoliday,minuteStep:5,timepickerHeight:30,headerHeight:70,dayTemplate:function(e){return e.getDate()},width:259,height:250},dayTemplate_setter:webix.template,calendarHeader_setter:webix.Date.dateToStr,calendarWeekHeader_setter:webix.Date.dateToStr,calendarTime_setter:webix.Date.dateToStr,date_setter:function(e){return this._string_to_date(e)},maxDate_setter:function(e){return this._string_to_date(e)},minDate_setter:function(e){return this._string_to_date(e)},$init:function(){this._viewobj.className+=" webix_calendar";this._special_dates={};this._selected_date_part=this._selected_date=null;this._zoom_level=0},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){this.render()}},$getSize:function(e,t){if(this._settings.cellHeight){var n=this._getDateBoundaries(this._settings.date);this._settings.height=this._settings.cellHeight*n.rows+webix.skin.$active.calendar.height}return webix.ui.view.prototype.$getSize.call(this,e,t)},_getDateBoundaries:function(e,t){if(!this._set_date_bounds||t){var n=e.getMonth();var r=e.getFullYear();var i=new Date(r,n+1,1);var s=webix.Date.weekStart(new Date(r,n,1));var o=Math.round((i.valueOf()-s.valueOf())/(60*1e3*60*24));var u=this._settings.skipEmptyWeeks?Math.ceil(o/7):6;this._set_date_bounds={_month:n,_start:s,_next:i,_rows:u}}return this._set_date_bounds},$skin:function(){if(webix.skin.$active.calendar){if(webix.skin.$active.calendar.width)this.defaults.width=webix.skin.$active.calendar.width;if(webix.skin.$active.calendar.height)this.defaults.height=webix.skin.$active.calendar.height;if(webix.skin.$active.calendar.headerHeight)this.defaults.headerHeight=webix.skin.$active.calendar.headerHeight;if(webix.skin.$active.calendar.timepickerHeight)this.defaults.timepickerHeight=webix.skin.$active.calendar.timepickerHeight}},_getColumnConfigSizes:function(e){var t=this._getDateBoundaries(e);var n=this._settings;var r=[];var i=[];var s=this._content_width-42;var o=this._content_height-this.config.headerHeight-10-(this._settings.timepicker?this.config.timepickerHeight:0);var u=n.weekNumber?8:7;for(var a=0;a<u;a++){i[a]=Math.ceil(s/(u-a));s-=i[a]}var f=t._rows;for(var l=0;l<f;l++){r[l]=Math.ceil(o/(f-l));o-=r[l]}return[i,r]},refresh:function(){this.render()},render:function(){this._zoom_level=0;this._zoom_size=false;var e=this._settings;if(!this.isVisible(e.id))return;this._current_time=webix.Date.datePart(new Date);if(webix.debug_render)webix.log("Render: "+this.name+"@"+e.id);this.callEvent("onBeforeRender",[]);var t=this._settings.date;var n=this._getDateBoundaries(t,true);var r=this._getColumnConfigSizes(t);var i=r[0];var s=r[1];var o="<div class='webix_cal_month'><span class='webix_cal_month_name'>"+e.calendarHeader(t)+"</span>";if(e.navigation)o+="<div class='webix_cal_prev_button'></div><div class='webix_cal_next_button'></div>";o+="</div>";if(e.weekHeader)o+="<div class='webix_cal_header'>"+this._week_template(i)+"</div>";o+="<div class='webix_cal_body'>"+this._body_template(i,s,n)+"</div>";if(this._settings.timepicker)o+="<div class='webix_cal_time'>"+this._timepicker_template(t)+"</div>";this._contentobj.innerHTML=o;this.callEvent("onAfterRender",[])},_timepicker_template:function(e){return"<div><span class='webix_icon fa-clock-o'></span> "+this._settings.calendarTime(e)+"</div>"},_week_template:function(e){var t=this._settings;var n="";var r=0;if(t.weekNumber){r=1;n+="<div class='webix_cal_week_header' style='width: "+e[0]+"px;' >"+t.calendarWeekHeader()+"</div>"}var i=webix.Date.startOnMonday?1:0;for(var s=0;s<7;s++){var o=(i+s)%7;var u=webix.i18n.calendar.dayShort[o];n+="<div day='"+o+"' style='width: "+e[s+r]+"px;' >"+u+"</div>"}return n},blockDates_setter:function(e){return webix.toFunctor(e,this.$scope)},_day_css:function(e,t){var n="webix_cal_day";if(webix.Date.equal(e,this._current_time))n+=" webix_cal_today";if(webix.Date.equal(e,this._selected_date_part))n+=" webix_cal_select";if(e.getMonth()!=t._month)n+=" webix_cal_outside";if(this._settings.blockDates&&this._settings.blockDates.call(this,e)||e<this._settings.minDate||e>this._settings.maxDate)n+=" webix_cal_day_disabled";if(this._settings.events)n+=" "+this._settings.events(e);return n},_body_template:function(e,t,n){var r=this._settings;var i="";var s=webix.Date.datePart(webix.Date.copy(n._start));var o=r.weekNumber?1:0;var u=webix.Date.getISOWeek(webix.Date.add(s,2,"day",true));var a=this._settings.minDate||new Date(1,1,1);var f=this._settings.maxDate||new Date(9999,1,1);for(var l=0;l<t.length;l++){i+="<div class='webix_cal_row' style='height:"+t[l]+"px'>";if(o)i+="<div class='webix_cal_week_num' style='width:"+e[0]+"px'>"+u+"</div>";for(var c=o;c<e.length;c++){var h=this._day_css(s,n);var p=this._settings.dayTemplate.call(this,s);i+="<div day='"+c+"' class='"+h+"' style='width:"+e[c]+"px'><span class='webix_cal_day_inner'>"+p+"</span></div>";s=webix.Date.add(s,1,"day")}i+="</div>";u++}return i},_changeDate:function(e,t,n){var r=this._settings.date;if(!t){t=this._zoom_logic[this._zoom_level]._changeStep}if(!this._zoom_level){r=webix.Date.copy(r);r.setDate(1)}var i=webix.Date.add(r,e*t,"month",true);this._changeDateInternal(r,i)},_changeDateInternal:function(e,t){if(this.callEvent("onBeforeMonthChange",[e,t])){if(this._zoom_level){this._update_zoom_level(t)}else{this.showCalendar(t)}this.callEvent("onAfterMonthChange",[t,e])}},_zoom_logic:{"-2":{_setContent:function(e,t){e.setMinutes(t)}},"-1":{_setContent:function(e,t){e.setHours(t)}},0:{_changeStep:1},1:{_getTitle:function(e){return e.getFullYear()},_getContent:function(e){return webix.i18n.calendar.monthShort[e]},_setContent:function(e,t){if(t!=e.getMonth())e.setDate(1);e.setMonth(t)},_changeStep:12},2:{_getTitle:function(e){var t=e.getFullYear();this._zoom_start_date=t=t-t%10-1;return t+" - "+(t+10)},_getContent:function(e){return this._zoom_start_date+e},_setContent:function(e,t){e.setFullYear(this._zoom_start_date+t)},_changeStep:12*10}},_update_zoom_level:function(e){var t,n,r,i,s;var o="";var u=this._settings.weekHeader?2:1;var a=this._zoom_logic[this._zoom_level];var f=this._contentobj.childNodes;if(e)this._settings.date=e;if(!this._zoom_size){this._reserve_box_height=this._contentobj.offsetHeight-this.config.headerHeight-this.config.timepickerHeight;this._reserve_box_width=f[u].offsetWidth;this._zoom_size=1}if(this._zoom_in){n=this._reserve_box_height/6;s=(this._reserve_box_width-1)/6;o+="<div class='webix_time_header'>"+this._timeHeaderTemplate(s)+"</div>";o+="<div  class='webix_cal_body' style='height:"+this._reserve_box_height+"px'>";o+="<div class='webix_hours'>";i=this._settings.date.getHours();for(r=0;r<24;r++){t=i==r?" webix_selected":"";o+="<div class='webix_cal_block"+t+"' data-value='"+r+"' style='"+this._getCalSizesString(s,n)+(r%4===0?"clear:both;":"")+"'>"+webix.Date.toFixed(r)+"</div>"}o+="</div>";o+="<div class='webix_minutes'>";i=this._settings.date.getMinutes();for(r=0;r<60;r+=this._settings.minuteStep){t=i==r?" webix_selected":"";o+="<div class='webix_cal_block webix_cal_block_min"+t+"' data-value='"+r+"' style='"+this._getCalSizesString(s,n)+"'>"+webix.Date.toFixed(r)+"</div>"}o+="</div>";o+="</div>";o+="<div  class='webix_time_footer'>"+this._timeButtonsTemplate()+"</div>";this._contentobj.innerHTML=o}else{f[0].firstChild.innerHTML=a._getTitle(this._settings.date);n=this._reserve_box_height/3;s=this._reserve_box_width/4;i=this._zoom_level==1?this._settings.date.getMonth():this._settings.date.getFullYear();for(r=0;r<12;r++){t=i==(this._zoom_level==1?r:a._getContent(r))?" webix_selected":"";o+="<div class='webix_cal_block"+t+"' data-value='"+r+"' style='"+this._getCalSizesString(s,n)+"'>"+a._getContent(r)+"</div>"}if(u-1){f[u-1].style.display="none"}f[u].innerHTML=o;if(!f[u+1]){this._contentobj.innerHTML+="<div  class='webix_time_footer'>"+this._timeButtonsTemplate()+"</div>"}else f[u+1].innerHTML=this._timeButtonsTemplate();f[u].style.height=this._reserve_box_height+"px"}},_getCalSizesString:function(e,t){return"width:"+e+"px; height:"+t+"px; line-height:"+t+"px;"},_timeButtonsTemplate:function(){return"<input type='button' style='width:100%' class='webix_cal_done' value='"+webix.i18n.calendar.done+"'>"},_timeHeaderTemplate:function(e){var t=e*4;var n=e*2;return"<div class='webix_cal_hours' style='width:"+t+"px'>"+webix.i18n.calendar.hours+"</div><div class='webix_cal_minutes' style='width:"+n+"px'>"+webix.i18n.calendar.minutes+"</div>"},_changeZoomLevel:function(e,t){if(this.callEvent("onBeforeZoom",[e])){this._zoom_level=e;if(e)this._update_zoom_level(t);else this.showCalendar(t);this.callEvent("onAfterZoom",[e])}},_mode_selected:function(e){var t=this._settings.date;var n=webix.Date.copy(t);this._zoom_logic[this._zoom_level]._setContent(n,e);var r=this._zoom_level-1;this._changeZoomLevel(r,n)},_selectDate:function(e){if(this.callEvent("onBeforeDateSelect",[e])){this.selectDate(e,true);this.callEvent("onDateSelect",[e]);this.callEvent("onAfterDateSelect",[e])}},on_click:{webix_cal_prev_button:function(e,t,n){this._changeDate(-1)},webix_cal_next_button:function(e,t,n){this._changeDate(1)},webix_cal_day:function(e,t,n){if(n.className.indexOf("webix_cal_day_disabled")!==-1)return false;var r=webix.html.index(n)-(this._settings.weekNumber?1:0);var i=webix.html.index(n.parentNode);var s=webix.Date.add(this._getDateBoundaries()._start,r+i*7,"day",true);if(this._settings.timepicker){s.setHours(this._settings.date.getHours());s.setMinutes(this._settings.date.getMinutes())}this._selectDate(s)},webix_cal_time:function(e){if(this._zoom_logic[this._zoom_level-1]){this._zoom_in=true;var t=this._zoom_level-1;this._changeZoomLevel(t)}},webix_cal_done:function(e){this._selectDate(this._settings.date)},webix_cal_month_name:function(e){this._zoom_in=false;if(this._zoom_level==2||!this._settings.monthSelect)return;var t=Math.max(this._zoom_level,0)+1;this._changeZoomLevel(t)},webix_cal_block:function(e,t,n){if(this._zoom_in){var r=n.className.indexOf("webix_cal_block_min")!=-1?this._zoom_level-1:this._zoom_level;var i=this._settings.date;var s=webix.Date.copy(i);this._zoom_logic[r]._setContent(s,n.getAttribute("data-value")*1);this._update_zoom_level(s)}else{this._mode_selected(n.getAttribute("data-value")*1)}}},_string_to_date:function(e,t){if(!e)return new Date;if(typeof e=="string"){if(t)e=webix.Date.strToDate(t)(e);else e=webix.i18n.parseFormatDate(e)}return e},showCalendar:function(e){e=this._string_to_date(e);this._settings.date=e;this.render();this.resize()},getSelectedDate:function(){return this._selected_date?webix.Date.copy(this._selected_date):this._selected_date},getVisibleDate:function(){return webix.Date.copy(this._settings.date)},setValue:function(e,t){this.selectDate(e,true)},getValue:function(e){var t=this.getSelectedDate();if(e)t=webix.Date.dateToStr(e)(t);return t},selectDate:function(e,t){if(e){e=this._string_to_date(e);this._selected_date=e;this._selected_date_part=webix.Date.datePart(webix.Date.copy(e))}else{this._selected_date=null;this._selected_date_part=null}if(t)this.showCalendar(e);else this.render();this.callEvent("onChange",[e])},locate:function(){return null}},webix.MouseEvents,webix.ui.view,webix.EventSystem);webix.protoUI({name:"property",$init:function(){this._contentobj.className+=" webix_property";this._destroy_with_me=[]},defaults:{nameWidth:100,editable:true},on_render:{checkbox:function(e,t){return"<input type='checkbox' class='webix_property_check' "+(e?"checked":"")+">"},color:function(e,t){return'<div class="webix_property_col_val"><div class=\'webix_property_col_ind\' style="background-color:'+(e||"#FFFFFF")+';"></div><span>'+e+"</span></div>"}},on_edit:{label:false},_id:"webix_f_id",on_click:{webix_property_check:function(e){var t=this.locate(e);this.getItem(t).value=!this.getItem(t).value;this.callEvent("onCheck",[t,this.getItem(t).value]);return false}},on_dblclick:{},registerType:function(e,t){if(t.template)this.on_render[e]=t.template;if(t.editor)this.on_edit[e]=t.editor;if(t.click)for(var n in t.click)this.on_click[n]=t.click[n]},elements_setter:function(e){this._idToLine={};for(var t=0;t<e.length;t++){var n=e[t];n.id=n.id||webix.uid();n.label=n.label||"";n.value=n.value||"";this._idToLine[n.id]=t;this.template=this._map_options(e[t])}return e},showItem:function(e){webix.RenderStack.showItem.call(this,e)},locate:function(e){return webix.html.locate(arguments[0],this._id)},getItemNode:function(e){return this._dataobj.childNodes[this._idToLine[e]]},getItem:function(e){return this._settings.elements[this._idToLine[e]]},_get_editor_type:function(e){var t=this.getItem(e).type;if(t=="checkbox")return"inline-checkbox";var n=this.on_edit[t];return n===false?false:n||t},_get_edit_config:function(e){return this.getItem(e)},_find_cell_next:function(e,t,n){var r=this._idToLine[e.id];var i=this._settings.elements;if(n){for(var s=r+1;s<i.length;s++){if(t.call(this,i[s].id))return i[s].id}}else{for(var s=r-1;s>=0;s--){if(t.call(this,i[s].id))return i[s].id}}return null},updateItem:function(){this.refresh()},_cellPosition:function(e){var t=this.getItemNode(e);return{left:t.offsetLeft+this._settings.nameWidth,top:t.offsetTop,height:t.firstChild.offsetHeight,width:this._data_width,parent:this._contentobj}},setValues:function(e){this._clear();for(var t in e){var n=this.getItem(t);if(n)n.value=e[t]}this._props_dataset=e;this.refresh()},_onLoad:function(){return webix.Values._onLoad.apply(this,arguments)},_clear:function(){var e=this._settings.elements;for(var t=0;t<e.length;t++)e[t].value=""},getValues:function(){var e=webix.clone(this._props_dataset||{});for(var t=0;t<this._settings.elements.length;t++){var n=this._settings.elements[t];if(n.type!="label")e[n.id]=n.value}return e},refresh:function(){this.render()},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){this._data_width=this._content_width-this._settings.nameWidth;this.render()}},$getSize:function(e,t){if(this._settings.autoheight){var n=this._settings.elements.length;this._settings.height=Math.max(this.type.height*n,this._settings.minHeight||0)}return webix.ui.view.prototype.$getSize.call(this,e,t)},_toHTML:function(){var e=[];var t=this._settings.elements;if(t)for(var n=0;n<t.length;n++){var r=t[n];if(r.css&&typeof r.css=="object")r.css=webix.html.createCss(r.css);var i='<div webix_f_id="'+r.id+'" class="webix_property_line '+(r.css||"")+'">';if(r.type=="label")e[n]=i+"<div class='webix_property_label_line'>"+r.label+"</div></div>";else{var s=this.on_render[r.type],o;var u="<div class='webix_property_label' style='width:"+this._settings.nameWidth+"px'>"+r.label+"</div><div class='webix_property_value' style='width:"+this._data_width+"px'>";if(r.collection||r.options){o=r.template(r,r.value)}else if(r.format)o=r.format(r.value);else o=r.value;if(s)o=s.call(this,r.value,r);e[n]=i+u+o+"</div></div>"}}return e.join("")},type:{height:24,templateStart:webix.template(""),templateEnd:webix.template("</div>")},$skin:function(){this.type.height=webix.skin.$active.propertyItemHeight||24}},webix.EditAbility,webix.MapCollection,webix.MouseEvents,webix.Scrollable,webix.SingleRender,webix.AtomDataLoader,webix.EventSystem,webix.ui.view);webix.protoUI({name:"colorboard",defaults:{template:'<div style="width:100%;height:100%;background-color:{obj.val}"></div>',palette:null,height:220,width:220,cols:12,rows:10,minLightness:.15,maxLightness:1},$init:function(e){webix.event(this._viewobj,"click",webix.bind(function(e){var t=webix.html.locate(e,"webix_val");this.setValue(t);this.callEvent("onSelect",[this._settings.value,e])},this))},_findIndex:function(e){var t=this._settings.palette;e=e.toUpperCase();for(var n=0,r=t.length;n<r;n++)for(var i=0,s=t[n].length;i<s;i++){if(t[n][i].toUpperCase()==e){return{row:n,col:i}}}return null},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){this.render()}},getValue:function(){return this._settings.value},_getBox:function(){return this._viewobj.firstChild},setValue:function(e){if(!e)return;if(e.charAt(0)!="#")e="#"+e;this._settings.value=e;this._drawSelection(e);return e},_selectBox:null,_getSelectBox:function(){if(this._selectBox&&this._selectBox.parentNode){return this._selectBox}else{var e=this._selectBox=document.createElement("div");e.className="webix_color_selector";this._viewobj.lastChild.appendChild(e);return e}},_drawSelection:function(e,t){if(this.isVisible()){var n=0,r=0;if(!t){var i=this._findIndex(e);if(i){t=this._viewobj.lastChild.childNodes[i.row].childNodes[i.col]}}if(t&&t.parentNode&&t.parentNode.parentNode){var s=t.parentNode;n=t.offsetLeft-s.offsetLeft;r=-(this.$height-(t.offsetTop-s.parentNode.offsetTop))}else{if(this._selectBox)this._selectBox.style.left="-100px";return}var o=this._getSelectBox();var u=["left:"+n+"px","top:"+r+"px","width:"+t.style.width,"height:"+t.style.height].join(";");if(typeof o.style.cssText!=="undefined"){o.style.cssText=u}else{o.setAttribute("style",u)}}},_initPalette:function(e){function t(e){return webix.color.toHex(e,2)}function n(e,n,r){return"#"+t(Math.floor(e))+t(Math.floor(n))+t(Math.floor(r))}function r(e,t,n){var r,s,o;if(!t){r=s=o=n}else{var u=n<.5?n*(1+t):n+t-n*t;var a=2*n-u;r=i(a,u,e+1/3);s=i(a,u,e);o=i(a,u,e-1/3)}return{r:r*255,g:s*255,b:o*255}}function i(e,t,n){if(n<0)n+=1;if(n>1)n-=1;if(n<1/6)return e+(t-e)*6*n;else if(n<=1/2)return t;else if(n<2/3)return e+(t-e)*(2/3-n)*6;else return e}function s(e){var t=[],r=255,i=r/e;for(var s=0;s<e;s++){r=Math.round(r>0?r:0);t.push(n(r,r,r));r-=i}t[t.length-1]="#000000";return t}var o=[];var u=e.rows-1;var a=1/e.cols;var f=(e.maxLightness-e.minLightness)/u;var l=null;o.push(s(e.cols));for(var c=0,h=e.minLightness;c<u;c++){l=[];for(var p=0,d=0;p<e.cols;p++){var v=r(d,1,h);l.push(n(v.r,v.g,v.b));d+=a}o.push(l);h+=f}this._settings.palette=o},render:function(){function p(e,t,i){var s='<div class="webix_color_row">';for(var o=0;o<e.length;o++){r.width=t[o];r.height=i;r.val=e[o];s+=n(r)}s+="</div>";return s}if(!this.isVisible(this._settings.id))return;if(!this._settings.palette)this._initPalette(this._settings);var e=this._settings.palette;this.callEvent("onBeforeRender",[]);var t=this._settings,n=webix.template('<div style="width:{obj.width}px;height:{obj.height}px;" webix_val="{obj.val}">'+(t.template||"")+"</div>"),r={width:0,height:0,val:0},i=this.$width,s=this.$height,o=[];var u='<div class="webix_color_palette">';var a=typeof e[0]=="object"?e[0]:e;for(var f=0;f<a.length;f++){o[f]=Math.floor(i/(a.length-f));i-=o[f]}if(typeof e[0]=="object"){for(var l=0;l<e.length;l++){var c=Math.floor(s/(e.length-l));s-=c;var h=e[l];u+=p(h,o,c)}}else{u+=p(e,o,s)}u+="</div>";this._viewobj.innerHTML=u;this._selectBox=null;this.callEvent("onAfterRender",[])},refresh:function(){this.render()}},webix.ui.view,webix.EventSystem);webix.protoUI({name:"resizer",defaults:{width:7,height:7},$init:function(e){webix.assert(this.getParentView(),"Resizer can't be initialized outside a layout");var t=this.getParentView()._margin;webix.event(this._viewobj,webix.env.mouse.down,this._rsDown,this);webix.event(document.body,webix.env.mouse.up,this._rsUp,this);var n=this._getResizeDir();this._rs_started=false;this._resizer_dir=n;this._resizer_dim=n=="x"?"width":"height";if(n=="x")e.height=0;else e.width=0;if(t>0){this._viewobj.className+=" webix_resizer_v"+n;this._viewobj.style.marginRight="-"+t+"px";if(n=="x")e.width=t;else e.height=t;this.$nospace=true}else this._viewobj.className+=" webix_resizer_"+n;this._viewobj.innerHTML="<div class='webix_resizer_content'></div>";if(n=="y"&&t>0)this._viewobj.style.marginBottom="-"+(e.height||this.defaults.height)+"px"},_rsDown:function(e){var t=this._getResizerCells();if(t){e=e||event;this._rs_started=true;this._rs_process=webix.html.pos(e);this._rsLimit=[];this._rsStart(e,t[0])}},_rsUp:function(){this._rs_started=false;this._rs_process=false},_rsStart:function(e,t){var n,r,i,s,o;e=e||event;n=this._resizer_dir;this.getParentView()._viewobj.style.position="relative";i=webix.html.offset(this._viewobj);s=webix.html.offset(this.getParentView()._viewobj);o=i[n]-s[n];r=webix.html.offset(t.$view)[n]-webix.html.offset(this.getParentView().$view)[n];this._rs_progress=[n,t,o,r];this._resizeStick=new webix.ui.resizearea({container:this.getParentView()._viewobj,dir:n,eventPos:this._rs_process[n],start:o-1,height:this.$height,width:this.$width,border:1,margin:this.getParentView()["_padding"+n.toUpperCase()]});this._resizeStick.attachEvent("onResizeEnd",webix.bind(this._rsEnd,this));this._resizeStick.attachEvent("onResize",webix.bind(this._rsResizeHandler,this));webix.html.addCss(document.body,"webix_noselect")},_getResizeDir:function(){return this.getParentView()._vertical_orientation?"y":"x"},_rsResizeHandler:function(){var e,t,n,r,i,s,o,u,a,f;if(this._rs_progress){e=this._getResizerCells();i=this._rs_progress[0];r=this._resizeStick._last_result-this._rs_progress[2];a=this._rsGetDiffCellSizes(e,i,r);f=e[0]["$"+this._resizer_dim]+e[1]["$"+this._resizer_dim];o=i=="y"?["minHeight","maxHeight"]:["minWidth","maxWidth"];for(s=0;s<2;s++){t=e[s]._settings;n=s?-r:r;var l=t[o[0]];var c=t[o[1]];if(n>0&&c&&c<=a[s]||n<0&&(l||3)>=a[s]){this._rsLimit[s]=n>0?c:l||3;u=this._rsGetLimitCellSizes(e,i);this._resizeStick._dragobj.style[i=="y"?"top":"left"]=this._rs_progress[3]+u[0]+"px";return}else if(a[s]<3){this._resizeStick._dragobj.style[i=="y"?"top":"left"]=this._rs_progress[3]+s*f+1+"px"}else{this._rsLimit[s]=null}}}},_getResizerCells:function(){var e,t;e=this.getParentView()._cells;for(t=0;t<e.length;t++){if(e[t]==this){if(!e[t-1]||e[t-1]._settings.$noresize)return null;if(!e[t+1]||e[t+1]._settings.$noresize)return null;return[e[t-1],e[t+1]]}}},_rsEnd:function(e){if(typeof e=="undefined")return;var t,n,r,i,s;var o=this.getParentView()._vertical_orientation;this._resizerStick=null;if(this._rs_progress){n=this._rs_progress[0];r=e-this._rs_progress[2];t=this._getResizerCells();if(t[0]&&t[1]){s=this._rsGetCellSizes(t,n,r);for(var i=0;i<2;i++){var u=t[i].$getSize(0,0);if(o?u[2]==u[3]:Math.abs(u[1]-u[0])<3){t[i]._settings[this._resizer_dim]=s[i];if(t[i]._bubble_size)t[i]._bubble_size(this._resizer_dim,s[i],o)}else{var a=t[i].$view[o?"offsetHeight":"offsetWidth"];t[i]._settings.gravity=s[i]/a*t[i]._settings.gravity}}t[0].resize();for(var i=0;i<2;i++)if(t[i].callEvent)t[i].callEvent("onViewResize",[]);webix.callEvent("onLayoutResize",[t])}this._rs_progress=false}this._rs_progress=false;this._rs_started=false;this._rsLimit=null;webix.html.removeCss(document.body,"webix_noselect")},_rsGetLimitCellSizes:function(e){var t,n,r;r=e[0]["$"+this._resizer_dim]+e[1]["$"+this._resizer_dim];if(this._rsLimit[0]){t=this._rsLimit[0];n=r-t}else if(this._rsLimit[1]){n=this._rsLimit[1];t=r-n}return[t,n]},_rsGetDiffCellSizes:function(e,t,n){var r=[];for(var i=0;i<2;i++)r[i]=e[i]["$"+this._resizer_dim]+(i?-1:1)*n;return r},_rsGetCellSizes:function(e,t,n){var r,i,s;if(this._rsLimit[0]||this._rsLimit[1]){i=this._rsGetLimitCellSizes(e,t)}else{i=this._rsGetDiffCellSizes(e,t,n);for(r=0;r<2;r++){if(i[r]<0){s=i[0]+i[1];i[r]=1;i[1-r]=s-1}}}return i}},webix.MouseEvents,webix.ui.view);webix.protoUI({name:"multiview",defaults:{animate:{}},setValue:function(e){webix.$$(e).show()},getValue:function(){return this.getActiveId()},$init:function(){this._active_cell=0;this._vertical_orientation=1;this._viewobj.style.position="relative";this._viewobj.className+=" webix_multiview";this._back_queue=[]},_ask_render:function(e,t){var n=webix.$$(e);if(!n._render_hash){n._render_queue=[];n._render_hash={}}if(!n._render_hash[t]){n._render_hash[t]=true;n._render_queue.push(t)}},_render_activation:function(e){var t=webix.$$(e);if(this._back_queue[this._back_queue.length-2]!=e){if(this._back_queue.length==10)this._back_queue.splice(0,1);this._back_queue.push(e)}else this._back_queue.splice(this._back_queue.length-1,1);if(t._render_hash){for(var n=0;n<t._render_queue.length;n++)webix.$$(t._render_queue[n]).render();t._render_queue=[];t._render_hash={}}},_hide:function(){},_parse_cells:function(e){e=e||this._collection;for(var t=0;t<e.length;t++)e[t]._inner=this._settings.borderless?{top:1,left:1,right:1,bottom:1}:this._settings._inner||{};webix.ui.baselayout.prototype._parse_cells.call(this,e);for(var t=1;t<this._cells.length;t++)webix.html.remove(this._cells[t]._viewobj);for(var t=0;t<e.length;t++){var n=this._cells[t];if(n._cells&&!n._render_borders)continue;var r=n._settings._inner;if(r.top)n._viewobj.style.borderTopWidth="0px";if(r.left)n._viewobj.style.borderLeftWidth="0px";if(r.right)n._viewobj.style.borderRightWidth="0px";if(r.bottom)n._viewobj.style.borderBottomWidth="0px"}this._render_activation(this.getActiveId())},cells_setter:function(e){webix.assert(e&&e.length,"Multiview must have at least one view in 'cells'");this._collection=e},_getDirection:function(e,t){var n=(this._settings.animate||{}).direction;var r=n=="top"||n=="bottom";return e<t?r?"bottom":"right":r?"top":"left"},_show:function(e,t){if(this._in_animation)return webix.delay(this._show,this,[e],100);var n=-1;for(var r=0;r<this._cells.length;r++)if(this._cells[r]==e){n=r;break}if(n<0||n==this._active_cell)return;var i=this._cells[this._active_cell]?this._cells[this._active_cell].config.id:null;var s=this._cells[n]?this._cells[n].config.id:null;var o=this._cells[this._active_cell].$getSize(0,0);if((t||typeof t=="undefined")&&webix.animate.isSupported()&&this._settings.animate){var u=webix.extend({},this._settings.animate);u.direction=this._getDirection(n,this._active_cell);u=webix.Settings._mergeSettings(t||{},u);var a=webix.animate.formLine(this._cells[n]._viewobj,this._cells[this._active_cell]._viewobj,u);this._cells[n].$getSize(0,0);this._cells[n].$setSize(this._content_width,this._content_height);var f=u.callback;u.callback=function(){webix.animate.breakLine(a);this._in_animation=false;if(f)f.call(this);f=u.master=u.callback=null;this.resize()};u.master=this;this._active_cell=n;this._render_activation(this.getActiveId());webix.animate(a,u);this._in_animation=true}else{webix.html.remove(this._cells[this._active_cell]._viewobj);this._active_cell=n;this._viewobj.appendChild(this._cells[r]._viewobj);this._cells[this._active_cell].resize();this._render_activation(this.getActiveId())}this.callEvent("onViewChange",[i,s])},$getSize:function(e,t){webix.debug_size_box_start(this,true);var n=this._cells[this._active_cell].$getSize(0,0);if(this._settings.fitBiggest){for(var r=0;r<this._cells.length;r++)if(r!=this._active_cell){var i=this._cells[r].$getSize(0,0);for(var s=0;s<4;s++)n[s]=Math.max(n[s],i[s])}}var o=webix.ui.baseview.prototype.$getSize.call(this,0,0);if(o[1]>=1e5)o[1]=0;if(o[3]>=1e5)o[3]=0;o[0]=(o[0]||n[0])+e;o[1]=(o[1]||n[1])+e;o[2]=(o[2]||n[2])+t;o[3]=(o[3]||n[3])+t;webix.debug_size_box_end(this,o);return o},$setSize:function(e,t){this._layout_sizes=[e,t];webix.ui.baseview.prototype.$setSize.call(this,e,t);this._cells[this._active_cell].$setSize(e,t)},isVisible:function(e,t){if(t&&t!=this.getActiveId()){if(e)this._ask_render(t,e);return false}return webix.ui.view.prototype.isVisible.call(this,e,this._settings.id)},getActiveId:function(){return this._cells.length?this._cells[this._active_cell]._settings.id:null},back:function(e){e=e||1;if(this.callEvent("onBeforeBack",[this.getActiveId(),e])){if(this._back_queue.length>e){var t=this._back_queue[this._back_queue.length-e-1];webix.$$(t).show();return t}return null}return null}},webix.ui.baselayout);webix.protoUI({name:"form",defaults:{type:"form",autoheight:true},_default_height:-1,_form_classname:"webix_form",_form_vertical:true,$getSize:function(e,t){var n=webix.ui.layout.prototype.$getSize.call(this,e,t);if(this._settings.scroll||!this._settings.autoheight){n[2]=this._settings.height||this._settings.minHeight||0;n[3]+=1e5}return n}},webix.ui.toolbar);webix.protoUI({name:"menu",_listClassName:"webix_menu",$init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(){this._hide_sub_menu()},this));this.attachEvent("onMouseMove",this._mouse_move_menu);this.attachEvent("onMouseOut",function(){if(this._menu_was_activated()&&this._settings.openAction=="click")return;if(!this._child_menu_active)this._hide_sub_menu()});this.attachEvent("onItemClick",function(e,t,n){var r=this.getItem(e);if(r){if(r.$template)return;var i=this.getTopMenu();if(!this.data.getMark(e,"webix_disabled")){i.callEvent("onMenuItemClick",[e,t,n]);if(this!=i)i._call_onclick(e,t,n);if(!r.submenu){i._hide_sub_menu(true);if(i._hide_on_item_click)i.hide()}else{if((this===i||webix.env.touch)&&i._settings.openAction=="click"){this._mouse_move_activation(e,n)}i._block_hide_sub_menu(new Date)}}}});this.data.attachEvent("onCleaAll",function(){this._hidden_items=[]});this.data._hidden_items=[]},getTopMenu:function(){var e=this;while(e._parent_menu)e=webix.$$(e._parent_menu);return e},_auto_height_calc:function(e){if(this._settings.autoheight)e=this.count();var t=0;for(var n=0;n<e;n++){var r=this.data.pull[this.data.order[n]];if(r.$template=="Separator")t+=4;else t+=this.type.height}return t},on_mouse_move:{},type:{css:"menu",width:"auto",templateStart:function(e,t,n){if(e.$template){return'<div webix_l_id="#id#" class="webix_context_sep">'}var r=e.target?" target='"+e.target+"' ":"";var i="<a"+(e.href?" href='"+e.href+"' ":"")+r+" class='webix_menu_link' >";return webix.ui.list.prototype.type.templateStart(e,t,n)+i+(e.submenu&&t.subsign?"<div class='webix_submenu_icon'></div>":"")},templateEnd:function(e,t,n){return"</a>"+webix.ui.list.prototype.type.templateEnd(e,t,n)},templateSeparator:webix.template("<div class='sep_line'></div>")},getSubMenu:function(e){if(!this.data.pull[e]){for(var t in this.data.pull){var n=this.getItem(t);if(n.submenu){var r=this._get_submenu(n).getSubMenu(e);if(r)return r}}}else return this},getMenuItem:function(e){return this.getSubMenu(e).getItem(e)},_get_submenu:function(e){var t=webix.$$(e.submenu);if(!t){e.submenu=this._create_sub_menu(e);t=webix.$$(e.submenu)}return t},_mouse_move_menu:function(e,t,n){if(!this._menu_was_activated())return;this._mouse_move_activation(e,n)},_menu_was_activated:function(){var e=this.getTopMenu();if(e._settings.openAction=="click"){if(webix.env.touch)return false;var t=e._open_sub_menu;if(t&&webix.$$(t).isVisible())return true;return false}return true},_mouse_move_activation:function(e,t){var n=this.getItem(e);if(!n)return;this._child_menu_active=null;if(this._open_sub_menu&&n.submenu!=this._open_sub_menu)this._hide_sub_menu(true);if(n.submenu&&!this.config.hidden){var r=this._get_submenu(n);if(this.data.getMark(e,"webix_disabled"))return;r.show(t,{pos:this._settings.subMenuPos});r._parent_menu=this._settings.id;this._open_sub_menu=n.submenu}},disableItem:function(e){this.getSubMenu(e).addCss(e,"webix_disabled")},enableItem:function(e){this.getSubMenu(e).removeCss(e,"webix_disabled")},_set_item_hidden:function(e,t){var n=this.data;if(n._hidden_items[e]!=t){n._hidden_items[e]=t;n.filter(function(e){return!n._hidden_items[e.id]});this.resize()}},hideItem:function(e){var t=this.getSubMenu(e);if(t)t._set_item_hidden(e,true)},showItem:function(e){var t=this.getSubMenu(e);if(t){t._set_item_hidden(e,false);return webix.ui.list.prototype.showItem.call(t,e)}},_block_hide_sub_menu:function(e){this._show_time_click=e;if(this._open_sub_menu){var t=webix.$$(this._open_sub_menu);if(t._block_hide_sub_menu)t._block_hide_sub_menu(e)}},_hide_sub_menu:function(e){if(this._open_sub_menu){var t=webix.$$(this._open_sub_menu);if(t._hide_sub_menu)t._hide_sub_menu(e);if(e||!t._show_on_mouse_out){t._show_time=new Date(2012,1,1);t.hide();this._open_sub_menu=null}}},_create_sub_menu:function(e){var t={view:"submenu",data:e.submenu};var n=this.getMenuItem(e.id);if(n&&n.config){webix.extend(t,n.config)}var r=this.getTopMenu()._settings.submenuConfig;if(r)webix.extend(t,r);var i=webix.ui(t);return i._settings.id},$skin:function(){webix.ui.list.prototype.$skin.call(this);this.type.height=webix.skin.$active.menuHeight},defaults:{scroll:"",layout:"x",mouseEventDelay:100,subMenuPos:"bottom"}},webix.ui.list);webix.protoUI({name:"submenu",$init:function(){this._body_cell=this._dummy_cell_interface;this._body_cell._view=this;this.attachEvent("onMouseOut",function(){if(this.getTopMenu()._settings.openAction=="click")return;if(!this._child_menu_active&&!this._show_on_mouse_out)this.hide()});this.attachEvent("onMouseMoving",function(){if(this._parent_menu)webix.$$(this._parent_menu)._child_menu_active=true})},$skin:function(){webix.ui.menu.prototype.$skin.call(this);webix.ui.popup.prototype.$skin.call(this);this.type.height=webix.skin.$active.menuHeight},_dummy_cell_interface:{$getSize:function(e,t){var n=this._view._settings.height;var r=this._view._settings.width;var i=webix.ui.menu.prototype.$getSize.call(this._view,e,t);this._view._settings.height=n;this._view._settings.width=r;return i},$setSize:function(e,t){if(this._view._settings.scroll)this._view._bodyobj.style.height=t+"px"},destructor:function(){this._view=null}},body_setter:function(){},defaults:{width:150,subMenuPos:"right",layout:"y",autoheight:true},type:{height:webix.skin.menuHeight,subsign:true}},webix.ui.menu,webix.ui.popup);webix.ContextHelper={defaults:{padding:"4",hidden:true},body_setter:function(e){e=webix.ui.window.prototype.body_setter.call(this,e);this._body_cell._viewobj.style.borderWidth="0px";return e},attachTo:function(e){webix.assert(e,"Invalid target for Context::attach");if(e.on_context)e.attachEvent("onAfterContextMenu",webix.bind(this._show_at_ui,this));else webix.event(e,"contextmenu",this._show_at_node,this)},getContext:function(){return this._area},_show_at_node:function(e){this._area=webix.toNode(e||event);return this._show_at(e)},_show_at_ui:function(e,t,n){this._area={obj:webix.$$(t),id:e};return this._show_at(t)},_show_at:function(e){if(!this.callEvent("onBeforeShow",[e]))return;this.show(e,null,true);webix.callEvent("onClick",[e]);return webix.html.preventEvent(e)},_show_on_mouse_out:true,master_setter:function(e){this.attachTo(e);return null}};webix.protoUI({name:"context"},webix.ContextHelper,webix.ui.popup);webix.protoUI({name:"contextmenu",_hide_on_item_click:true,$init:function(e){if(e.submenuConfig)webix.extend(e,e.submenuConfig)}},webix.ContextHelper,webix.ui.submenu);webix.protoUI({name:"tabbar",$skin:function(){var e=webix.skin.$active;var t=this.defaults;t.topOffset=e.tabTopOffset||0;t.tabOffset=typeof e.tabOffset!="undefined"?e.tabOffset:10;t.bottomOffset=e.tabBottomOffset||0;t.height=e.tabbarHeight;t.tabMargin=e.tabMargin;t.inputPadding=e.inputPadding;t.tabMinWidth=e.tabMinWidth||100;t.tabMoreWidth=e.tabMoreWidth||40},_getTabbarSizes:function(){var e=this.config,t=e.options.length,n=this._input_width-e.tabOffset*2-(!e.type?e.tabMargin*(t-1):0)-t+1;if(n/t<e.tabMinWidth){return{max:parseInt(n/e.tabMinWidth,10)||1}}return{width:n/t}},_init_popup:function(){var e=this._settings;if(!e.tabbarPopup){var t={view:"popup",width:e.popupWidth||200,body:{view:"list",borderless:true,select:true,css:"webix_tab_list",autoheight:true,yCount:e.yCount,type:{template:e.popupTemplate}}};var n=webix.ui(t);n.getBody().attachEvent("onBeforeSelect",webix.bind(function(e){if(e&&this.callEvent("onBeforeTabClick",[e])){this.setValue(e);webix.$$(this._settings.tabbarPopup).hide();this.callEvent("onAfterTabClick",[e]);return true}},this));e.tabbarPopup=n._settings.id;this._destroy_with_me.push(n)}this._init_popup=function(){}},getPopup:function(){this._init_popup();return webix.$$(this._settings.tabbarPopup)},moreTemplate_setter:webix.template,popupTemplate_setter:webix.template,defaults:{popupWidth:200,popupTemplate:"#value#",yCount:7,moreTemplate:'<span class="webix_icon fa-ellipsis-h"></span>',template:function(e,t){var n,r,i,s,o,u,a,f,l,c=e.options;if(!c.length){r="<div class='webix_tab_filler' style='width:"+t._input_width+"px; border-right:0px;'></div>"}else{t._check_options(c);if(!e.value&&c.length)e.value=c[0].id;c=webix.copy(c);r="";if(e.tabOffset)r+="<div class='webix_tab_filler' style='width:"+e.tabOffset+"px;'>&nbsp;</div>";n=t._input_width-e.tabOffset*2-(!e.type?e.tabMargin*(c.length-1):0)-c.length+1;f=e.topOffset+e.bottomOffset;var h=t._getTabbarSizes();if(h.max&&h.max<c.length){var p=t.getPopup();p.hide();var d=p.getBody()||null;if(d){if(h.max){var v=false;for(i=0;i<c.length&&!v;i++)if(c[i].id==e.value){v=true;if(i+1>h.max){var m=c.splice(i+1-h.max,h.max);c=m.concat(c)}}d.clearAll();d.parse(c.slice(h.max))}else{d.clearAll()}}}else if(t._settings.tabbarPopup)webix.$$(t._settings.tabbarPopup).hide();a=e.tabOffset;var g=false;for(i=0;i<c.length&&!g;i++){if(h&&h.max){if(h.max==i+1){g=true}n=t._input_width-e.tabOffset*2-(!e.type&&h.max>1?e.tabMargin*(h.max-1):0)-h.max+1;l=(n-e.tabMoreWidth)/h.max}else l=h.width;l=c[i].width||e.optionWidth||l;a+=l+(i&&!e.type?e.tabMargin+1:0)+1;if(e.tabMargin>0&&i&&!e.type)r+="<div class='webix_tab_filler' style='width:"+e.tabMargin+"px;'></div>";r+=t._getTabHTML(c[i],l);if(g){var y=t._content_height-(!e.type?f:0);r+='<div class="webix_tab_more_icon" style="width:'+e.tabMoreWidth+"px;line-height:"+y+'px">'+e.moreTemplate(e,t)+"</div>";a+=e.tabMoreWidth}}s=t._content_width-a-e.tabOffset*2;if(s>0&&!e.type)r+="<div class='webix_tab_filler' style='width:"+s+"px;'>&nbsp;</div>"}o="";u=f&&!e.type?"height:"+(t._content_height-f)+"px'":"";if(e.topOffset&&!e.type)o+="<div class='webix_before_all_tabs' style='width:100%;height:"+e.topOffset+"px'></div>";o+="<div style='"+u+"' class='webix_all_tabs "+(e.type?"webixtype_"+e.type:"")+"'>"+r+"</div>";if(e.bottomOffset&&!e.type)o+="<div class='webix_after_all_tabs' style='width:100%;height:"+e.bottomOffset+"px'></div>";return o}},_getTabHTML:function(e,t){var n,r="",i=this.config;if(e.id==i.value)r=" webix_selected";if(e.css)r+=" "+e.css;t=e.width||t;n='<div class="webix_item_tab'+r+'" button_id="'+e.id+'" style="width:'+t+'px;">';if(this._tabTemplate){var s=this._content_height-i.inputPadding*2-2;var o=this._content_height-2;var u=webix.extend({cheight:s,aheight:o},e);n+=this._tabTemplate(u)}else n+=e.value;n+="</div>";return n},_types:{image:"<div class='webix_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='webix_img_btn_text'>#value#</div></div>",icon:"<div class='webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>",iconTop:"<div class='webix_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#value#</div></div>"},type_setter:function(e){this._settings.tabOffset=0;if(this._types[e])this._tabTemplate=webix.template(this._types[e]);return e}},webix.ui.segmented);webix.protoUI({name:"tabview",defaults:{type:"clean"},setValue:function(e){this._cells[0].setValue(e)},getValue:function(){return this._cells[0].getValue()},getTabbar:function(){return this._cells[0]},getMultiview:function(){return this._cells[1]},$init:function(e){var t=e.cells;var n=[];webix.assert(t&&t.length,"tabview must have cells collection");for(var r=t.length-1;r>=0;r--){var i=t[r].body||t[r];if(!i.id)i.id="view"+webix.uid();n[r]={value:t[r].header,id:i.id};t[r]=i}var s={view:"tabbar",multiview:true};var o={view:"multiview",cells:t,animate:!!e.animate};if(e.value)s.vaue=e.value;if(e.tabbar)webix.extend(s,e.tabbar,true);if(e.multiview)webix.extend(o,e.multiview,true);s.options=s.options||n;e.rows=[s,o];delete e.cells;delete e.tabs}},webix.ui.layout);webix.protoUI({name:"htmlform",_default_values:null,$init:function(e){this.elements=null;if(e.content&&(e.container==e.content||!e.container&&e.content==document.body))this._copy_inner_content=true},content_setter:function(e){e=webix.toNode(e);if(this._copy_inner_content){while(e.childNodes.length>1)this._viewobj.childNodes[0].appendChild(e.childNodes[0])}else{this._viewobj.childNodes[0].appendChild(e)}return true},render:function(){if(!this._default_values){webix.ui.template.prototype.render.apply(this,arguments);this._default_values=this.getValues()}},_parse_inputs:function(){if(!this.elements)this.elements=this._viewobj.querySelectorAll("[name]");return this.elements},getValues:function(){var e=this._values?webix.clone(this._values):{};var t=this._parse_inputs();for(var n=0;n<t.length;n++){if(this._tagname(t[n])==="input"&&this._attribute(t[n],"type")==="radio"&&t[n].checked===false)continue;e[t[n].name]=this._get_html_value(t[n])}return e},setValues:function(e){this.render();this._values=webix.clone(e);if(webix.debug_render)webix.log("Render: "+this.name+"@"+this._settings.id);var t=this._parse_inputs();for(var n=0;n<t.length;n++){if(!webix.isUndefined(e[t[n].name]))this._set_html_value(t[n],e[t[n].name])}this.callEvent("onChange",[])},focus:function(e){var t;if(!webix.isUndefined(e))t=this._viewobj.querySelector('[name="'+e+'"]');else t=this._parse_inputs()[0];if(!webix.isUndefined(t))t.focus()},clear:function(){if(this._default_values){this.render();var e=this._parse_inputs();for(var t=0;t<e.length;t++){this._set_html_value(e[t],this._default_values[e[t].name]||"")}}},_tagname:function(e){if(!e.tagName)return null;return e.tagName.toLowerCase()},_attribute:function(e,t){if(!e.getAttribute)return null;var n=e.getAttribute(t);return n.toLowerCase?n.toLowerCase():null},_get_html_value:function(e){var t=this._tagname(e);if(this._get_value[t])return this._get_value[t].call(this,e);return this._get_value.other.call(this,e)},_get_value:{input:function(e){var t=this._attribute(e,"type");if(t==="checkbox")return e.checked;return e.value},textarea:function(e){return e.value},select:function(e){var t=e.selectedIndex;return e.options[t].value},other:function(e){return e.innerHTML}},_set_html_value:function(e,t){var n=this._tagname(e);if(this._set_value[n])return this._set_value[n].call(this,e,t);return this._set_value.other.call(this,e,t)},_set_value:{input:function(e,t){var n=this._attribute(e,"type");if(n==="checkbox")e.checked=t?true:false;else if(n==="radio")e.checked=e.value===t?true:false;else e.value=t},textarea:function(e,t){e.value=t},select:function(e,t){e.value=t},other:function(e,t){e.innerHTML=t}},_mark_invalid:function(e,t){this._clear_invalid(e,t);var n=this._viewobj.querySelector('[name="'+e+'"]');if(n)webix.html.addCss(n,"invalid")},_clear_invalid:function(e,t){var n=this._viewobj.querySelector('[name="'+e+'"]');if(n)webix.html.removeCss(n,"invalid")}},webix.ui.template,webix.Values,webix.ValidateData);webix.dp=function(e){if(typeof e=="object"&&e._settings)e=e._settings.id;if(webix.dp._pull[e])return webix.dp._pull[e];if(typeof e=="string"||typeof e=="number")e={master:webix.$$(e)};var t=new webix.DataProcessor(e);var n=t._settings.master._settings.id;webix.dp._pull[n]=t;webix.$$(n).attachEvent("onDestruct",function(){webix.dp._pull[this._settings.id]=null;delete webix.dp._pull[this._settings.id]});return t};webix.dp._pull={};webix.dp.$$=function(e){return webix.dp._pull[e]};webix.DataProcessor=webix.proto({defaults:{autoupdate:true,updateFromResponse:false,mode:"post",operationName:"webix_operation",trackMove:false},$init:function(){this.reset();this._ignore=false;this.name="DataProcessor";this.$ready.push(this._after_init_call)},reset:function(){this._updates=[]},url_setter:function(e){var t="";if(typeof e=="string"){var n=e.split("->");if(n.length>1){e=n[1];t=n[0]}}else if(e&&e.mode){t=e.mode;e=e.url}if(t)return webix.proxy(t,e);return e},master_setter:function(e){var t=e;if(e.name!="DataStore")t=e.data;this._settings.store=t;return e},_after_init_call:function(){webix.assert(this._settings.store,"store or master need to be defined for the dataprocessor");this._settings.store.attachEvent("onStoreUpdated",webix.bind(this._onStoreUpdated,this));this._settings.store.attachEvent("onDataMove",webix.bind(this._onDataMove,this))},ignore:function(e,t){var n=this._ignore;this._ignore=true;e.call(t||this);this._ignore=n},off:function(){this._ignore=true},on:function(){this._ignore=false},_copy_data:function(e){var t={};for(var n in e)if(n.indexOf("$")!==0)t[n]=e[n];return t},save:function(e,t,n){t=t||"update";this._save_inner(e,n||this._settings.store.getItem(e),t)},_save_inner:function(e,t,n){if(typeof e=="object")e=e.toString();if(!e||this._ignore===true||!n||n=="paint")return true;var r={id:e,data:this._copy_data(t),operation:n};if(!webix.isUndefined(t.$parent))r.data.parent=t.$parent;if(r.operation!="delete"&&!this.validate(r.data))return false;var i=this._settings.master;if(i&&i.data&&i.data.getMark&&i.data.getMark(e,"webix_invalid"))r._invalid=true;if(this._check_unique(r))this._updates.push(r);if(this._settings.autoupdate)this.send();return true},_onDataMove:function(e,t,n){if(this._settings.trackMove){var r=webix.copy(this._settings.store.getItem(e));var i=this._settings.store.order;r.webix_move_index=t;r.webix_move_id=i[t+1]||"";r.webix_move_parent=n;this._save_inner(e,r,"update")}},_onStoreUpdated:function(e,t,n){switch(n){case"save":n="update";break;case"update":n="update";break;case"add":n="insert";break;case"delete":n="delete";break;default:return true}return this._save_inner(e,t,n)},_check_unique:function(e){for(var t=0;t<this._updates.length;t++){var n=this._updates[t];if(n.id==e.id){if(e.operation=="delete"){if(n.operation=="insert")this._updates.splice(t,1);else n.operation="delete"}n.data=e.data;n._invalid=e._invalid;return false}}return true},send:function(){this._sendData()},_sendData:function(){if(!this._settings.url)return;var e=this._updates;var t=[];var n=this._settings.url;for(var r=0;r<e.length;r++){var i=e[r];if(i._in_progress)continue;if(i._invalid)continue;var s=i.id;var o=i.operation;var u=typeof n=="object"&&!n.$proxy?n[o]:n;var a=u&&(u.$proxy||typeof u==="function");if(!u)continue;if(this._settings.store._scheme_save)this._settings.store._scheme_save(i.data);if(!this.callEvent("onBefore"+o,[s,i]))continue;i._in_progress=true;if(!this.callEvent("onBeforeDataSend",[i]))return;i.data=this._updatesData(i.data);var f=this._send_callback({id:i.id,status:i.operation});if(u.$proxy){if(u.save)u.save(this.config.master,i,this,f);else t.push(i)}else{if(o=="insert")delete i.data.id;if(a){u(i.id,i.operation,i.data).then(function(e){f.success("",e,-1)},function(e){f.error("",null,e)})}else{i.data[this._settings.operationName]=o;this._send(u,i.data,this._settings.mode,o,f)}}this.callEvent("onAfterDataSend",[i])}if(n.$proxy&&n.saveAll&&t.length)n.saveAll(this.config.master,t,this,this._send_callback({}))},_updatesData:function(e){var t={};for(var n in e){if(n.indexOf("$")!==0)t[n]=e[n]}return t},_send:function(e,t,n,r,i){webix.assert(e,"url was not set for DataProcessor");if(typeof e=="function")return e(t,r,i);webix.ajax()[n](e,t,i)},_send_callback:function(e){var t=this;return{success:function(n,r,i){return t._processResult(e,n,r,i)},error:function(n,r,i){return t._processError(e,n,r,i)}}},attachProgress:function(e,t,n){this.attachEvent("onBeforeDataSend",e);this.attachEvent("onAfterSync",t);this.attachEvent("onAfterSaveError",n);this.attachEvent("onLoadError",n)},_processError:function(e,t,n,r){if(e)this._innerProcessResult(true,e.id,false,e.status,false,{text:t,data:n,loader:r});else{this.callEvent("onLoadError",arguments);webix.callEvent("onLoadError",[t,n,r,this])}},_innerProcessResult:function(e,t,n,r,i,s){var o=this.getItemState(t);o._in_progress=false;if(e){if(this.callEvent("onBeforeSaveError",[t,r,i,s])){o._invalid=true;this.callEvent("onAfterSaveError",[t,r,i,s]);return}}else this.setItemState(t,false);if(i&&r!="delete"&&this._settings.updateFromResponse){var u=this._settings.store.getItem(t);webix.extend(u,i,true);this._settings.store.refresh(t)}if(n&&t!=n)this._settings.store.changeId(t,n);this.callEvent("onAfterSave",[i,t,s]);this.callEvent("onAfter"+r,[i,t,s])},processResult:function(e,t,n){var r=t&&(t.status=="error"||t.status=="invalid");var i=t?t.newid||t.id:false;this._innerProcessResult(r,e.id,i,e.status,t,n)},_processResult:function(e,t,n,r){this.callEvent("onBeforeSync",[e,t,n,r]);if(r===-1){this.processResult(e,n,{})}else{var i=this._settings.url;if(i.$proxy&&i.result)i.result(e,this._settings.master,this,t,n,r);else{var s;if(t){s=n.json();if(t&&typeof s=="undefined")s={status:"error"}}this.processResult(e,s,{text:t,data:n,loader:r})}}this.callEvent("onAfterSync",[e,t,n,r])},escape:function(e){if(this._settings.escape)return this._settings.escape(e);else return encodeURIComponent(e)},getItemState:function(e){var t=this._get_stack_index(e);return this._updates[t]||null},setItemState:function(e,t){if(t)this.save(e,t);else{var n=this._get_stack_index(e);if(n>-1)this._updates.splice(n,1)}},_get_stack_index:function(e){var t=-1;var n=null;for(var r=0;r<this._updates.length;r++)if(this._updates[r].id==e){t=r;break}return t}},webix.Settings,webix.EventSystem,webix.ValidateData);webix.jsonp=function(e,t,n,r){var i="webix_jsonp_"+webix.uid();var s=document.createElement("script");s.id=i;s.type="text/javascript";var o=document.getElementsByTagName("head")[0];if(typeof t=="function"){r=n;n=t;t={}}if(!t)t={};t.jsonp="webix.jsonp."+i;webix.jsonp[i]=function(){n.apply(r||window,arguments);s.parentNode.removeChild(s);n=o=r=s=null;delete webix.jsonp[i]};var u=[];for(var a in t)u.push(a+"="+encodeURIComponent(t[a]));e+=(e.indexOf("?")==-1?"?":"&")+u.join("&");s.src=e;o.appendChild(s)};webix.markup={namespace:"x",attribute:"data-",dataTag:"li",_dash:/-([a-z])/g,_after_dash:function(e){return e[1].toUpperCase()},_parse_int:{width:true,height:true,gravity:true,margin:true,padding:true,paddingX:true,paddingY:true,minWidth:true,maxWidth:true,minHeight:true,maxHeight:true,headerRowHeight:true},_view_has_method:function(e,t){return webix.ui.hasMethod(e,t)},init:function(e,t,n){e=e||document.body;var r=[];var i=this._get_core_els(e);var s=i.html;for(var o=i.length-1;o>=0;o--)r[o]=i[o];for(var o=0;o<r.length;o++){var u,a;u=this._sub_markup(r[o],s);u.$scope=n;this._initComponent(u,r[o],s,t)}},parse:function(e,t){if(typeof e=="string")e=webix.DataDriver[t||"xml"].toObject(e,e);var n=this._get_core_els(e,t);return this._sub_markup(n[0],n.html)},_initComponent:function(e,t,n,r){if(!r){e.container=t.parentNode;webix.html.remove(t)}else e.container=r;if(this._view_has_method(e.view,"setPosition"))delete e.container;webix.ui(e)},_get_core_els:function(e){this._full_prefix=this.namespace?this.namespace+":":"";this._full_prefix_top=this._full_prefix+"ui";var t=e.getElementsByTagName(this._full_prefix_top);if(!t.length&&e.documentElement&&e.documentElement.tagName==this._full_prefix_top)t=[e.documentElement];if(!t.length&&this.namespace){t=e.getElementsByTagName("ui");if(!t.length&&e.documentElement&&e.documentElement.tagName=="ui")t=[e.documentElement]}if(!t.length){t=this._get_html_tops(e);t.html=true}return t},_get_html_tops:function(e){if(e.getAttribute&&e.getAttribute(this.attribute+"view"))return[e];var t=e.querySelectorAll("["+this.attribute+"view]");var n=[];var r=[];for(var i=0;i<t.length;i++)if(!t[i].parentNode.getAttribute(this.attribute+"view"))n.push(t[i]);return n},_sub_markup:function(e,t,n){var r=false;if(!n){var i=this._get_name(e,t);if(i=="ui"){var s=e.childNodes;for(var o=0;o<s.length;o++)if(s[o].nodeType==1){return this._sub_markup(s[o],t)}}n={view:i};if(t&&e.tagName.toLowerCase()=="table"){n.data=e;n.datatype="htmltable";r=true}}var u=n.view=="cols"||n.view=="rows"||this._view_has_method(n.view,"addView");var a=[];var f=0;var l=!(t||e.style);var c=e.firstChild;while(c){if(c.nodeType==1){var i=this._get_name(c,t);if(i=="data"){f=1;var h=c;c=c.nextSibling;n.data=this._handle_data(h,t);continue}else if(i=="config"){this._get_config_html(c,n,t);var p=c;c=c.nextSibling;webix.html.remove(p);continue}else if(i=="column"){f=1;var d=this._tag_to_json(c,t);d.header=d.header||d.value;d.width=d.width*1||"";n.columns=n.columns||[];n.columns.push(d)}else if(i||u&&t){var v=this._sub_markup(c,t,{view:i});if(v.view=="head")n.head=v.rows?v.rows[0]:v.template;else if(v.view=="body"){if(this._view_has_method(n.view,"addView")){a.push({body:v.rows?v.rows[0]:v.value,header:v.header||""})}else{n.body=v.rows?v.rows.length==1?v.rows[0]:{rows:v.rows}:v.value}}else a.push(v)}else if(l){f=1;n[c.tagName]=webix.DataDriver.xml.tagToObject(c)}}c=c.nextSibling}this._attrs_to_json(e,n,t);if(a.length){if(n.stack)n[n.stack]=a;else if(this._view_has_method(n.view,"setValues"))n["elements"]=a;else if(n.view=="rows"){n.view="layout";n.rows=a}else if(n.view=="cols"){n.view="layout";n.cols=a}else if(this._view_has_method(n.view,"setValue")){n["cells"]=a}else if(this._view_has_method(n.view,"getBody")){n.body=a.length==1?a[0]:{rows:a}}else n["rows"]=a}else if(!r&&!f){if(t&&!n.template&&(!n.view||n.view=="template")){n.view="template";n.content=e}else{var m=this._content(e,t);if(m){var g="template";if(this._view_has_method(n.view,"setValue"))g="value";n[g]=n[g]||m}}}return n},_empty:function(e){var t=e.replace(/\s+/gm,"");return t.length>0?false:true},_markup_names:{body:1,head:1,data:1,rows:1,cols:1,cells:1,elements:1,ui:1,column:1,config:1},_get_config_html:function(e,t,n){var r=this._attrs_to_json(e,{});if(r.name){t[r.name]=r;delete r.name}else if(r.stack)t[r.stack]=[];else t=r;var i=e.childNodes;for(var s=0;s<i.length;s++){var o=null;if(i[s].nodeType==1&&i[s].tagName.toLowerCase()=="config"&&i[s].attributes.length)o=this._get_config_html(i[s],r,n);else o=i[s].innerHTML;if(r.stack&&o)t[r.stack].push(o)}return t},_get_name:function(e,t){if(t)return e.getAttribute(this.attribute+"view")||(e.tagName.toLowerCase()=="config"?"config":null);var n=e.tagName.toLowerCase();if(this.namespace){if(n.indexOf(this._full_prefix)===0||e.scopeName==this.namespace)return n.replace(this._full_prefix,"")}else{if(webix.ui[n]||this._markup_names[n])return n}return 0},_handle_data:function(e,t){var n=[];var r=e.getElementsByTagName(webix.markup.dataTag);for(var i=0;i<r.length;i++){var s=r[i];if(s.parentNode.parentNode.tagName!=webix.markup.dataTag){var o=this._tag_to_json(s,t);if(s.className)o.$css=s.className;n.push(o)}}webix.html.remove(e);return n},_content:function(e,t){if(e.style)return e.innerHTML;if(e.firstChild)return e.firstChild.wholeText||e.firstChild.data||"";return""},_tag_to_json:function(e,t){if(!t)return webix.DataDriver.xml.tagToObject(e);var n=this._attrs_to_json(e,{},t);if(!n.value&&e.childNodes.length)n.value=this._content(e,t);return n},_attrs_to_json:function(e,t,n){var r=e.attributes;for(var i=0;i<r.length;i++){var s=r[i].name;if(n){if(s.indexOf(this.attribute)!==0)continue;s=s.replace(this.attribute,"").replace(this._dash,this._after_dash)}var o=r[i].value;if(o.indexOf("json://")!=-1)o=JSON.parse(o.replace("json://",""));if(this._parse_int[s])o=parseInt(o,10);t[s]=o}return t}};(function(){function t(t,n){var i=t.callback;r(false);t.box.parentNode.removeChild(t.box);e=t.box=null;if(i)i(n)}function n(n){if(e){n=n||event;var r=n.which||event.keyCode;if(webix.message.keyboard){if(r==13||r==32)t(e,true);if(r==27)t(e,false);if(n.preventDefault)n.preventDefault();return!(n.cancelBubble=true)}}}function r(e){if(!r.cover||!r.cover.parentNode){r.cover=document.createElement("DIV");r.cover.onkeydown=n;r.cover.className="webix_modal_cover";document.body.appendChild(r.cover)}r.cover.style.display=e?"inline-block":"none"}function i(e,t,n){return"<div class='webix_popup_button"+(n?" "+n:"")+"' result='"+t+"' ><div>"+e+"</div></div>"}function s(e){if(!p.area){p.area=document.createElement("DIV");p.area.className="webix_message_area";p.area.style[p.position]="5px";document.body.appendChild(p.area)}p.hide(e.id);var t=document.createElement("DIV");t.innerHTML="<div>"+e.text+"</div>";t.className="webix_info webix_"+e.type;t.onclick=function(){p.hide(e.id);e=null};if(webix.$testmode)t.className+=" webix_no_transition";if(p.position=="bottom"&&p.area.firstChild)p.area.insertBefore(t,p.area.firstChild);else p.area.appendChild(t);if(e.expire>0)p.timers[e.id]=window.setTimeout(function(){p.hide(e.id)},e.expire);t.style.height=t.offsetHeight-2+"px";p.pull[e.id]=t;t=null;return e.id}function o(n,r,s){var o=document.createElement("DIV");o.className=" webix_modal_box webix_"+n.type;o.setAttribute("webixbox",1);var u="";if(n.width)o.style.width=n.width;if(n.height)o.style.height=n.height;if(n.title)u+='<div class="webix_popup_title">'+n.title+"</div>";u+='<div class="webix_popup_text"><span>'+(n.content?"":n.text)+'</span></div><div  class="webix_popup_controls">';if(r||n.ok)u+=i(n.ok||"OK",true,"confirm");if(s||n.cancel)u+=i(n.cancel||"Cancel",false);if(n.buttons){for(var a=0;a<n.buttons.length;a++)u+=i(n.buttons[a],a)}u+="</div>";o.innerHTML=u;if(n.content){var f=n.content;if(typeof f=="string")f=document.getElementById(f);if(f.style.display=="none")f.style.display="";o.childNodes[n.title?1:0].appendChild(f)}o.onclick=function(e){e=e||event;var r=e.target||e.srcElement;if(!r.className)r=r.parentNode;if(r.className.indexOf("webix_popup_button")!=-1){var i=r.getAttribute("result");i=i=="true"||(i=="false"?false:i);t(n,i)}e.cancelBubble=true};n.box=o;if(r||s||n.buttons)e=n;return o}function u(e,t,i){var s=e.tagName?e:o(e,t,i);if(!e.hidden)r(true);document.body.appendChild(s);var u=e.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-s.offsetWidth)/2));var a=e.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-s.offsetHeight)/2));if(e.position=="top")s.style.top="-3px";else s.style.top=a+"px";s.style.left=u+"px";s.onkeydown=n;s.focus();if(e.hidden)webix.modalbox.hide(s);return s}function a(e){return u(e,true,false)}function f(e){return u(e,true,true)}function l(e){return u(e)}function c(e,t,n){if(typeof e!="object"){if(typeof t=="function"){n=t;t=""}e={text:e,type:t,callback:n}}return e}function h(e,t,n,r){if(typeof e!="object")e={text:e,type:t,expire:n,id:r};e.id=e.id||p.uid();e.expire=e.expire||p.expire;return e}var e=null;if(document.attachEvent)document.attachEvent("onkeydown",n);else document.addEventListener("keydown",n,true);webix.alert=function(){var e=c.apply(this,arguments);e.type=e.type||"confirm";return a(e)};webix.confirm=function(){var e=c.apply(this,arguments);e.type=e.type||"alert";return f(e)};webix.modalbox=function(){var e=c.apply(this,arguments);e.type=e.type||"alert";return l(e)};webix.modalbox.hide=function(t){if(t){while(t&&t.getAttribute&&!t.getAttribute("webixbox"))t=t.parentNode;if(t){t.parentNode.removeChild(t)}}r(false);e=null};var p=webix.message=function(e,t,n,r){e=h.apply(this,arguments);e.type=e.type||"info";var i=e.type.split("-")[0];switch(i){case"alert":return a(e);case"confirm":return f(e);case"modalbox":return l(e);default:return s(e)}};p.seed=(new Date).valueOf();p.uid=function(){return p.seed++};p.expire=4e3;p.keyboard=true;p.position="top";p.pull={};p.timers={};p.hideAll=function(){for(var e in p.pull)p.hide(e)};p.hide=function(e){var t=p.pull[e];if(t&&t.parentNode){window.setTimeout(function(){t.parentNode.removeChild(t);t=null},2e3);t.style.height=0;t.className+=" hidden";if(p.timers[e])window.clearTimeout(p.timers[e]);delete p.pull[e]}}})();webix.debug_ready(function(){function t(t){var n={};var r=[];t=webix.$$(t);for(var i in t.config){if(e[i])continue;if(typeof t.config[i]=="object")continue;if(typeof t.config[i]=="undefined")continue;if(typeof t.config[i]=="function")continue;if(i=="view"||i=="id")r.push({label:i,id:i});else r.push({label:i,type:"text",id:i});if(t.defaults[i]==t.config[i])r[r.length-1].css={color:"#888"};n[i]=t.config[i]}r.sort(function(e,t){if(!e.css&&t.css)return-1;if(e.css&&!t.css)return 1;return e.id>t.id?1:e.id==t.id?0:-1});return{elements:r,data:n,head:" ["+t.name+"] <strong>"+t._settings.id+"</strong>"}}function n(){if(!webix.$$("webix_debug_inspector_win"))webix.ui({id:"webix_debug_inspector_win",view:"window",top:2,left:0,width:350,height:350,head:false,autofit:false,body:{cols:[{width:10},{type:"clean",rows:[{view:"toolbar",elements:[{view:"label",value:"",id:"webix_debug_inspector_head"},{view:"button",width:100,value:"Hide",type:"custom",click:function(){webix.debug_inspect()}}]},{id:"webix_debug_inspector",nameWidth:150,view:"property",scroll:"y",elements:[],on:{onaftereditstop:function(e,t){if(e.old==e.value)return;var n=e.value;if(n==="true"||n==="false"){n=n==="true"}else{var r=parseInt(n,10);if(r==n)n=r}var i=webix.$$(this.config.view);i.define(t.id,n);if(i.refreshColumns)i.refreshColumns();else if(i.refresh)i.refresh();i.resize()}}}]}]}})}function r(e,r){n();var i=webix.$$("webix_debug_inspector_win");if(e){var s=t(e);var o=document.body.offsetWidth;var u=document.body.offsetHeight;var a=r?webix.html.pos(r):{x:0,y:0};i.define("height",Math.max(350,u-4));i.resize();var f=webix.$$("webix_debug_inspector");f.define("elements",s.elements);f.define("view",e);i.show({x:a.x>o/2?0:o-370,y:0});webix.$$("webix_debug_inspector").setValues(s.data);webix.$$("webix_debug_inspector_head").setValue(s.head)}else i.hide()}function i(e){if(e>=1e5)return"Any";return e}function s(e,t,n){window.console.log((e==n?">>":"  ")+t+e.name+" / "+e.config.id);t+="  ";if(e._cells)for(var r=0;r<e._cells.length;r++){s(e._cells[r],t,n)}if(e._head_cell)s(e._head_cell,t,n);if(e._body_cell)s(e._body_cell,t,n)}var e={_inner:true,awidth:true,cheight:true,bheight:true,aheight:true};webix.debug_inspect=r;webix.ui({view:"contextmenu",on:{onBeforeShow:function(e){if(!e.ctrlKey)return false;var t=webix.html.locate(e,"view_id");if(!t)return false;this.config.lastTarget=t;webix.blockEvent();webix.delay(function(){webix.unblockEvent()})},onShow:function(){var e=webix.$$(this.config.lastTarget);var t="<span style='color:#888'>"+e._settings.id+"<sup style='float:right'>["+e.name+"]</sup></span>";document.getElementById("webix_debug_cmx").innerHTML=t}},data:["<div id='webix_debug_cmx'></div>",{id:"inspect",value:"Inspect"},{id:"docs",value:"Documentation"},{value:"Log to Console",submenu:[{id:"size",value:"Sizes"},{id:"tree",value:"Tree"},{id:"dump",value:"Dump"}]}],click:function(e,t){var n=webix.$$(this.config.lastTarget);if(e=="dump"){window.console.info("\n"+n.name+" / "+n.config.id);window.console.log("\nView: ",n,", Config: ",n.config,", Data: ",n.data);window.console.log(n.$view)}if(e=="tree"){var o=n;while(n.getParentView())n=n.getParentView();window.console.log("");s(n,"",o)}if(e=="size"){window.console.info("");window.console.info("\n"+n.name+" / "+n.config.id);window.console.info("\n[min]   ",n.config.width," x ",n.config.height);var u=n.$getSize(0,0);window.console.info("[max]    ",i(u[1])," x ",i(u[3])+(n.config.autoheight?", auto height":""));window.console.info("[gravity]   ",n.config.gravity);window.console.info("\n[content]    ",n._content_width," x ",n._content_height);window.console.info("[last set]   ",n._last_size[0]," x ",n._last_size[1]);if(n._settings._inner)window.console.info("\n[borders]   ","left:",!n._settings._inner.left,"	top:",!n._settings._inner.top,"	right:",!n._settings._inner.right,"	bottom:",!n._settings._inner.bottom);else window.console.info("\n[borders]   none")}if(e=="docs")window.open("http://docs.webix.com/api__refs__ui."+n.name+".html","__blank");if(e=="inspect"){r(this.config.lastTarget,t)}},master:document.body})});webix.protoUI({name:"carousel",defaults:{scrollSpeed:"300ms",type:"clean",navigation:{}},$init:function(){this._viewobj.className+=" webix_carousel";this._layout=null;this._dataobj=null;this._active_cell=0;this.$ready.push(this._after_init_call)},cols_setter:function(e){this._vertical_orientation=0;this._initLayout.call(this,{cols:e})},rows_setter:function(e){this._vertical_orientation=1;this._initLayout.call(this,{rows:e})},_initLayout:function(e){if(this._layout&&this._layout.destructor)this._layout.destructor();this._layout=webix.ui._view(e);this._layout._parent_cell=this;this._viewobj.appendChild(this._layout._viewobj);this._cells=this._layout._cells;this._layout._show=webix.bind(webix.ui.carousel.prototype._show,this);this._layout.adjustScroll=webix.bind(webix.ui.carousel.prototype.adjustScroll,this);webix.attachEvent("onReconstruct",webix.bind(function(e){if(e==this._layout)this._setScroll()},this));this._contentobj=this._viewobj.firstChild},getChildViews:function(){return[this._layout]},getLayout:function(){return this._layout},_after_init_call:function(){this._contentobj.setAttribute("touch_scroll",this._vertical_orientation?"y":"x")},adjustScroll:function(e){var t=this._vertical_orientation?this._content_height:this._content_width;var n;if(this._vertical_orientation){n=Math.round(e.f/t);e.f=n*t}else{n=Math.round(e.e/t);e.e=n*t}this._active_cell=-n;if(this._settings.navigation)this._renderNavItems();return true},_show:function(e){var t,n,r,i,s,o;r=-1;n=this._layout;for(t=0;t<n._cells.length;t++){if(n._cells[t]==e){r=t;break}}if(r<0||r==this._active_cell)return;this._active_cell=r;i=n._vertical_orientation?this._content_height:this._content_width;s=-(n._vertical_orientation?0:r*i);o=-(n._vertical_orientation?r*i:0);this.scrollTo(s,o);this.callEvent("onShow",[n._cells[this._active_cell]._settings.id]);if(this._settings.navigation)this._renderPanel()},scrollTo:function(e,t){if(webix.Touch&&webix.animate.isSupported())webix.Touch._set_matrix(this._contentobj,e,t,this._settings.scrollSpeed||"100ms");else{this._contentobj.style.marginLeft=e+"px";this._contentobj.style.marginTop=t+"px"}},navigation_setter:function(e){this._mergeSettings(e,{type:"corner",buttons:true,items:true});return e},showNext:function(){if(this._active_cell<this._layout._cells.length-1)this.setActiveIndex(this._active_cell+1)},showPrev:function(){if(this._active_cell>0)this.setActiveIndex(this._active_cell-1)},setActiveIndex:function(e){webix.assert(e<this._layout._cells.length,"Not existing index in collection");var t=this._layout._cells[e]._settings.id;webix.$$(t).show()},getActiveIndex:function(){return this._active_cell},$getSize:function(e,t){var n=this._layout.$getSize(0,0);var r=webix.ui.view.prototype.$getSize.call(this,e,t);if(this._layout._vertical_orientation){r[0]=Math.max(r[0],n[0]);r[1]=Math.min(r[1],n[1])}else{r[2]=Math.max(r[2],n[2]);r[3]=Math.min(r[3],n[3])}return r},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){var n=this._layout;var r=n._cells.length;var i=this._content_height*(n._vertical_orientation?r:1);var s=this._content_width*(n._vertical_orientation?1:r);this._contentobj.style.height=i+"px";this._contentobj.style.width=s+"px";n.$setSize(s,i);this._setScroll()}},_setScroll:function(){var e=this._layout;var t=this._active_cell||0;var n=e._vertical_orientation?this._content_height:this._content_width;var r=-(e._vertical_orientation?0:t*n);var i=-(e._vertical_orientation?t*n:0);this.scrollTo(r,i);if(this._settings.navigation)this._renderPanel()},getActiveId:function(){return this._layout._cells[this._active_cell]._settings.id},setActive:function(e){webix.$$(e).show()}},webix.EventSystem,webix.NavigationButtons,webix.ui.view);webix.type(webix.ui.list,{name:"uploader",template:"#name#  {common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>",percent:function(e){if(e.status=="transfer")return"<div style='width:60px; text-align:center; float:right'>"+e.percent+"%</div>";return"<div class='webix_upload_"+e.status+"'><span class='"+(e.status=="error"?"error_icon":"fa-ok webix_icon")+"'></span></div>"},removeIcon:function(e){return"<div class='webix_remove_upload'><span class='cancel_icon'></span></div>"},on_click:{webix_remove_upload:function(e,t){webix.$$(this.config.uploader).files.remove(t)}}});webix.UploadDriver={flash:{},html5:{$render:function(e){if(this._upload_area){this._contentobj.appendChild(this._upload_area);return}this.files.attachEvent("onBeforeDelete",this._stop_file);var t={type:"file","class":"webix_hidden_upload",tabindex:-1};if(this._settings.multiple)t.multiple="true";var n=webix.html.create("input",t);this._upload_area=this._contentobj.appendChild(n);webix.event(this._viewobj,"drop",webix.bind(function(e){this._drop(e);webix.html.preventEvent(e)},this));webix.event(n,"change",webix.bind(function(){this._add_files(n.files)},this));webix.event(this._viewobj,"click",webix.bind(function(){var e=new Date;if(e-(this._upload_timer_click||0)>250){this.fileDialog()}},this));webix.event(this._viewobj,"dragenter",webix.html.preventEvent);webix.event(this._viewobj,"dragexit",webix.html.preventEvent);webix.event(this._viewobj,"dragover",webix.html.preventEvent)},_drop:function(e){var t=e.dataTransfer.files;if(this.callEvent("onBeforeFileDrop",[t,e]))this._add_files(t);this.callEvent("onAfterFileDrop",[t,e])},fileDialog:function(e){this._upload_timer_click=new Date;this._last_file_context=e;var t=this._viewobj.getElementsByTagName("INPUT");t[t.length-1].click()},send:function(e){if(typeof e=="function"){this._last_assigned_upload_callback=e;e=0}if(!e){var t=this.files.data.order;var n=true;if(t.length)for(var r=0;r<t.length;r++)n=!this.send(t[r])&&n;if(n)this._upload_complete();return}var i=this.files.getItem(e);if(i.status!=="client")return false;webix.assert(this._settings.upload,"You need to define upload url for uploader component");i.status="transfer";var s=new FormData;s.append("upload",i.file);var o=i.xhr=new XMLHttpRequest;o.upload.addEventListener("progress",webix.bind(function(t){this._update_progress(e,t.loaded/t.total*100)},this),false);o.onload=webix.bind(function(t){this._file_complete(e)},this);o.open("POST",this._settings.upload,true);o.send(s);this._update_progress(e,0);return true},_file_complete:function(e){var t=this.files.getItem(e);if(t){var n=webix.DataDriver.json.toObject(t.xhr.responseText);if(t.xhr.status!=200||!n||n.status=="error"){t.status="error";delete t.percent;this.files.updateItem(e);this.callEvent("onFileUploadError",[t,n])}else{this._complete(e,n)}delete t.xhr}},stopUpload:function(e){webix.bind(this._stop_file,this.files)(e)},_stop_file:function(e){var t=this.getItem(e);if(typeof t.xhr!=="undefined")t.xhr.abort();delete t.xhr;t.status="client"}}};webix.protoUI({name:"uploader",defaults:{autosend:true,multiple:true},$cssName:"button",_allowsClear:true,$init:function(e){var t=webix.UploadDriver.html5;this.files=new webix.DataCollection;if(webix.isUndefined(XMLHttpRequest)||webix.isUndefined((new XMLHttpRequest).upload))t=webix.UploadDriver.flash;webix.assert(t,"incorrect driver");webix.extend(this,t)},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){this.render()}},apiOnly_setter:function(e){webix.delay(this.render,this);return this.$apiOnly=e},_add_files:function(e){for(var t=0;t<e.length;t++)this.addFile(e[t])},link_setter:function(e){if(e)webix.delay(function(){var e=webix.$$(this._settings.link);if(e.sync&&e.filter)e.sync(this.files);else if(e.setValues)this.files.data.attachEvent("onStoreUpdated",function(){e.setValues(this)});e._settings.uploader=this._settings.id},this);return e},addFile:function(e,t,n){var r=null;if(typeof e=="object"){r=e;e=r.name;t=r.size}var i=this._format_size(t);n=n||e.split(".").pop();var s={file:r,name:e,id:webix.uid(),size:t,sizetext:i,type:n,context:this._last_file_context,status:"client"};if(this.callEvent("onBeforeFileAdd",[s])){if(!this._settings.multiple)this.files.clearAll();var o=this.files.add(s);this.callEvent("onAfterFileAdd",[s]);if(o&&this._settings.autosend)this.send(o)}},_format_size:function(e){var t=0;while(e>1024){t++;e=e/1024}return Math.round(e*100)/100+" "+webix.i18n.fileSize[t]},_complete:function(e,t){if(t.status==="server"){var n=this.files.getItem(e);n.status="server";n.progress=100;webix.extend(n,t,true);this.callEvent("onFileUpload",[n,t]);this.callEvent("onChange",[]);this.files.updateItem(e)}if(this.isUploaded())this._upload_complete(t)},_upload_complete:function(e){this.callEvent("onUploadComplete",[e]);if(this._last_assigned_upload_callback){this._last_assigned_upload_callback.call(this,e);this._last_assigned_upload_callback=0}},isUploaded:function(){var e=this.files.data.order;for(var t=0;t<e.length;t++)if(this.files.getItem(e[t]).status!="server")return false;return true},_update_progress:function(e,t){var n=this.files.getItem(e);n.percent=Math.round(t);this.files.updateItem(e)},setValue:function(e){if(typeof e=="string")e={value:e,status:"server"};this.files.clearAll();if(e)this.files.parse(e);this.callEvent("onChange",[])},getValue:function(){var e=[];this.files.data.each(function(t){if(t.status=="server")e.push(t.value||t.name)});return e.join(",")}},webix.ui.button);webix.html.addMeta=function(e,t){document.getElementsByTagName("head").item(0).appendChild(webix.html.create("meta",{name:e,content:t}))};(function(){var e=function(){var e=!!(window.orientation%180);if(webix.ui.orientation===e)return;webix.ui.orientation=e;webix.callEvent("onRotate",[e])};if(webix.env.touch){webix.ui.orientation=!!((webix.isUndefined(window.orientation)?90:window.orientation)%180);webix.event(window,"onorientationchange"in window?"orientationchange":"resize",e)}if(webix.env.isFF&&window.matchMedia){window.matchMedia("(orientation: portrait)").addListener(function(){webix.ui.orientation=false});window.matchMedia("(orientation: landscape)").addListener(function(){webix.ui.orientation=true})}webix.ui.fullScreen=function(){if(!webix.env.touch)return;webix.html.addMeta("apple-mobile-web-app-capable","yes");webix.html.addMeta("viewport","initial-scale=1, maximum-scale=1, user-scalable=no");var t=document.body.offsetHeight||document.body.scrollHeight;var n=navigator.userAgent.indexOf("iPhone")!=-1;var r=navigator.userAgent.indexOf("iPad")!=-1;var i=navigator.userAgent.indexOf("OS 7")!=-1;var s=n&&(t==356||t==208||t==306||t==158||t==444);var o=window.screen.height==568;var u=function(){var e=0;var t=0;if(n&&!i){if(!webix.ui.orientation){e=320;t=o?s?504:548:s?416:460}else{e=o?568:480;t=s?268:300}}else if(webix.env.isAndroid){if(!webix.env.isFF){document.body.style.width=document.body.style.height="1px";document.body.style.overflow="hidden";var r=window.outerWidth/window.innerWidth;e=window.outerWidth/r;t=window.outerHeight/r}}else{e=window.innerWidth;t=window.innerHeight}if(t){document.body.style.height=t+"px";document.body.style.width=e+"px"}webix.ui._freeze=false;webix.ui.resize()};var a=function(){webix.ui._freeze=true;if(webix.env.isSafari)u();else webix.delay(u,null,[],500)};webix.attachEvent("onRotate",a);e();webix.delay(a)}})();if(window.jQuery){(function(e){function n(e){if(e&&e.getAttribute)return e.getAttribute("view_id")}function r(r){return function(i){if(typeof i==="string"){if(t[i]){return t[i].apply(this,[])}else{e.error("Method "+i+" does not exist on jQuery.".name)}}else{var s=[];this.each(function(){var e;var t;var t=n(this)||n(this.firstChild);if(t)e=webix.$$(t);if(!e){var o=i?i.data:0;if(o)i.data=null;var u=webix.copy(i||{autoheight:true,autowidth:true});u.view=r;if(o)i.data=u.data=o;if(this.tagName.toLowerCase()==="table"){var a=webix.html.create("div",{id:this.getAttribute("id")||"","class":this.getAttribute("class")||""},"");this.parentNode.insertBefore(a,this);u.container=a;e=webix.ui(u);e.parse(this,"htmltable")}else{u.container=this;e=webix.ui(u)}}s.push(e)});if(s.length===1)return s[0];return s}}}var t=[];for(var i in webix.ui){var s="webix_"+i;e.fn[s]=r(i)}})(jQuery)}webix.history={track:function(e,t){this._init_state(e,t);var n=webix.$$(e);var r=function(){if(webix.history._ignored)return;if(n.getValue)webix.history.push(e,n.getValue())};if(n.getActiveId)n.attachEvent("onViewChange",r);else n.attachEvent("onChange",r)},_set_state:function(e,t){webix.history._ignored=1;e=webix.$$(e);if(e.callEvent("onBeforeHistoryNav",[t]))if(e.setValue)e.setValue(t);webix.history._ignored=0},push:function(e,t,n){e=webix.$$(e);var r="";if(t)r="#!/"+t;if(webix.isUndefined(n)){if(e.getValue)n=e.getValue();else n=t}window.history.pushState({webix:true,id:e._settings.id,value:n},"",r)},_init_state:function(e,t){webix.event(window,"popstate",function(e){if(e.state&&e.state.webix){webix.history._set_state(e.state.id,e.state.value)}});var n=window.location.hash;webix.noanimate=true;if(n&&n.indexOf("#!/")===0)webix.history._set_state(e,n.replace("#!/",""));else if(t){webix.history.push(e,t);webix.history._set_state(e,t)}webix.noanimate=false;this._init_state=function(){}}};webix.protoUI({name:"fieldset",defaults:{borderless:true},$init:function(e){webix.assert(e.body,"fieldset must have not-empty body");this._viewobj.className+=" webix_fieldset";this._viewobj.innerHTML="<fieldset><legend></legend><div></div></fieldset>"},label_setter:function(e){this._viewobj.firstChild.childNodes[0].innerHTML=e;return e},getChildViews:function(){return[this._body_view]},body_setter:function(e){this._body_view=webix.ui(e,this._viewobj.firstChild.childNodes[1]);this._body_view._parent_cell=this;return e},getBody:function(){return this._body_view},$getSize:function(e,t){webix.debug_size_box_start(this,true);e+=18;t+=45;var n=this._last_body_size=this._body_view.$getSize(e,t);webix.debug_size_box_end(this,n);return n},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){t=Math.min(this._last_body_size[3],t);e=Math.min(this._last_body_size[1],e);this._body_view.$setSize(e-18,t-45)}}},webix.ui.view);webix.protoUI({name:"slider",defaults:{min:0,max:100,value:50,step:1,title:false,template:function(e,t){var n=t._handle_id="x"+(e.id||webix.uid());var r="<div class='webix_slider_title'></div><div class='webix_slider_box'><div class='webix_slider_left'>&nbsp;</div><div class='webix_slider_right'></div><div class='webix_slider_handle' id='"+n+"'>&nbsp;</div></div>";return t.$renderInput(e,r,n)}},type_setter:function(e){this._viewobj.className+=" webix_slider_"+e},title_setter:function(e){if(typeof e=="string")return webix.template(e);return e},_get_slider_handle:function(){return document.getElementById(this._handle_id)},_set_inner_size:function(){var e=this._get_slider_handle();var t=this._settings;if(e){var n=this._get_input_width(t);var r=t.value%t.step?Math.round(t.value/t.step)*t.step:t.value;r=Math.max(Math.min(r,t.max),t.min);var i=t.max-t.min;var s=Math.ceil((n-20)*(r-t.min)/i);var o=n-20-s;e.style.left=10+s-8+"px";e.parentNode.style.width=n+"px";o=Math.min(Math.max(o,2),n-22);s=Math.min(Math.max(s,2),n-22);var u=e.previousSibling;u.style.width=o+"px";var a=u.previousSibling;a.style.width=s+"px";if(this._settings.title){e.parentNode.previousSibling.innerHTML=this._settings.title(this._settings,this)}}},refresh:function(){this._set_inner_size()},$setValue:function(){this.refresh()},$getValue:function(){return this._settings.value},$init:function(){if(webix.env.touch){this.attachEvent("onTouchStart",webix.bind(this._on_mouse_down_start,this))}else webix.event(this._viewobj,"mousedown",webix.bind(this._on_mouse_down_start,this))},_on_mouse_down_start:function(e){var t=e.target||e.srcElement;if(t.className=="webix_slider_handle")return this._start_handle_dnd.apply(this,arguments);else if(t.className.indexOf("webix_slider")!=-1){this.setValue(this._get_value_from_event.apply(this,arguments));this._start_handle_dnd(e)}},_start_handle_dnd:function(e){if(webix.env.touch){this._handle_drag_events=[this.attachEvent("onTouchMove",webix.bind(this._handle_move_process,this)),this.attachEvent("onTouchEnd",webix.bind(this._handle_move_stop,this))]}else this._handle_drag_events=[webix.event(document.body,"mousemove",webix.bind(this._handle_move_process,this)),webix.event(document.body,"mouseup",webix.bind(this._handle_move_stop,this))];webix.html.addCss(document.body,"webix_noselect")},_handle_move_stop:function(e){if(this._handle_drag_events){if(webix.env.touch){webix.detachEvent(this._handle_drag_events[0]);webix.detachEvent(this._handle_drag_events[1])}else{webix.eventRemove(this._handle_drag_events[0]);webix.eventRemove(this._handle_drag_events[1])}this._handle_drag_events=[]}webix.html.removeCss(document.body,"webix_noselect");this.setValue(this._get_value_from_event.apply(this,arguments))},_handle_move_process:function(e){this._settings.value=this._get_value_from_event.apply(this,arguments);this.refresh();this.callEvent("onSliderDrag",[])},_get_value_from_event:function(e,t){var n=0;if(webix.env.touch){n=t?t.x:e.x}else n=webix.html.pos(e).x;return this._get_value_from_pos(n)},_get_value_from_pos:function(e){var t=this._settings;var n=t.max-t.min;var r=webix.html.offset(this._get_slider_handle().parentNode).x;var i=Math.ceil((e-r)*n/this._get_input_width(t));i=Math.round((i+t.min)/t.step)*t.step;return Math.max(Math.min(i,t.max),t.min)},_init_onchange:function(){}},webix.ui.text);webix.proxy.offline={$proxy:true,storage:webix.storage.local,cache:false,data:"",_is_offline:function(){if(!this.cache&&!webix.env.offline){webix.call("onOfflineMode",[]);webix.env.offline=true}},_is_online:function(){if(!this.cache&&webix.env.offline){webix.env.offline=false;webix.call("onOnlineMode",[])}},load:function(e,t){var n={error:function(){var n=this.getCache()||this.data;var r={responseText:n};var i=webix.ajax.prototype._data(r);this._is_offline();webix.ajax.$callback(e,t,n,i,r)},success:function(n,r,i){this._is_online();webix.ajax.$callback(e,t,n,r,i);this.setCache(n)}};if(this.cache&&this.getCache())n.error.call(this);else{if(this.source.$proxy)this.source.load(this,n);else webix.ajax(this.source,n,this)}},getCache:function(){return this.storage.get(this._data_name())},clearCache:function(){this.storage.remove(this._data_name())},setCache:function(e){if(typeof e!="string")e=JSON.stringify(e);this.storage.put(this._data_name(),e)},_data_name:function(){if(this.source.$proxy)return this.source.source+"_$proxy$_data";else return this.source+"_$proxy$_data"},saveAll:function(e,t,n,r){this.setCache(JSON.stringify(e.serialize()));webix.ajax.$callback(e,r,"",t)},result:function(e,t,n,r,i){for(var s=0;s<i.length;s++)n.processResult({id:i[s].id,status:i[s].operation},{},{})}};webix.proxy.cache={init:function(){webix.extend(this,webix.proxy.offline)},cache:true};webix.proxy.local={init:function(){webix.extend(this,webix.proxy.offline)},cache:true,data:[]};if(window.angular)(function(){function e(e){var t=e.attr("id");if(!t){t=webix.uid();e.attr("id",t)}return t}function t(e){if(typeof e.attr("webix-ui")!="undefined")return e.attr("id");return t(e.parent())}angular.module("webix",[]).directive("webixUi",["$parse",function(t){return{restrict:"A",scope:false,link:function(n,r,i,s){var o=i["webixUi"];var u=i["webixReady"];var a=null;var f=e(r);r.ready(function(){if(a)return;if(u)u=t(u);r.bind("$destroy",function(){if(a)a.destructor()});if(o){var e=function(e){if(a)a.destructor();if(n[o]){var t=webix.copy(n[o]);t.$scope=n;a=webix.ui(t,r[0]);if(u)u(n,{root:a})}};n.$watch(o,e);e()}else{if(!i["view"])r.attr("view","rows");var s=webix.markup;var f=s.attribute;s.attribute="";if(typeof i["webixRefresh"]!="undefined")a=s.init(r[0],r[0],n);else a=s.init(r[0],null,n);s.attribute=f;if(u)u(n,{root:a})}n.$watch(function(){return r[0].offsetWidth+"."+r[0].offsetHeight},function(){if(a)a.adjust()})})}}}]).directive("webixShow",["$parse",function(t){return{restrict:"A",scope:false,link:function(n,r,i,s){var o=t(i["webixShow"]);var u=e(r);if(!o(n))r.attr("hidden","true");n.$watch(i["webixShow"],function(){var e=webix.$$(u);if(e){if(o(n)){webix.$$(u).show();r[0].removeAttribute("hidden")}else webix.$$(u).hide()}})}}}]).directive("webixEvent",["$parse",function(t){var n=function(e,n,r){var i=r.split("=");var s=t(i[1]);var o=i[0].trim();n.attachEvent(o,function(){return s(e,{id:arguments[0],details:arguments})})};return{restrict:"A",scope:false,link:function(t,r,i,s){var o=i["webixEvent"].split(";");var u=e(r);setTimeout(function(){var e=r[0].firstChild;if(e&&e.nodeType==1)u=e.getAttribute("view_id")||u;var i=webix.$$(u);for(var s=0;s<o.length;s++){n(t,i,o[s])}})}}}]).directive("webixElements",["$parse",function(t){return{restrict:"A",scope:false,link:function(t,n,r,i){var s=r["webixElements"];var o=e(n);if(t.$watchCollection)t.$watchCollection(s,function(e){setTimeout(function(){var t=webix.$$(o);if(t){t.define("elements",e);t.refresh()}},1)})}}}]).directive("webixData",["$parse",function(t){return{restrict:"A",scope:false,link:function(t,n,r,i){var s=r["webixData"];var o=e(n);if(t.$watchCollection)t.$watchCollection(s,function(e){if(e){setTimeout(function(){var t=n[0].firstChild;if(t&&t.nodeType==1)o=t.getAttribute("view_id")||o;var r=webix.$$(o);if(r){if(r.options_setter){r.define("options",e);r.refresh()}else{if(r.clearAll)r.clearAll();r.parse(e)}}},1)}})}}}])})();if(window.Backbone)(function(){function t(e){e._backbone_loading=true;e.callEvent("onBeforeLoad",[]);e.blockEvent()}function n(e){e.unblockEvent();e._backbone_loading=false;e.refresh()}var e={use_id:false};webix.attachEvent("onUnSyncUnknown",function(e,t){var n=e._sync_events;var r=e._sync_backbone_events;for(var i=0;i<n.length;i++)e.detachEvent(n[i]);for(var i=0;i<r.length;i++)t.off.apply(t,r[i])});webix.attachEvent("onSyncUnknown",function(r,i,s){function o(t){if(e.use_id)return t;var n={};for(var r in t)if(r!="id")n[r]=t[r];return n}function u(t){return e.use_id?t.id:t.cid}function a(e,t){var n=[];t.each(function(e){var t=u(e);var r=f(e);r.id=t;n.push(r)});e.clearAll();e._parse(n)}function f(t){if(e.get){var n={};for(var r=0;r<e.get.length;r++){var i=e.get[r];n[i]=t.get(i)}return n}return t.toJSON()}if(s)e=s;if(e.get&&typeof e.get=="string")e.get=e.get.split(",");var l=[["change",function(e,t){var n=u(e);var i=r.pull[n]=f(e);i.id=n;if(r._scheme_update)r._scheme_update(i);r.refresh(i.id)}],["remove",function(e,t){var n=u(e);if(r.pull[n])r.remove(n)}],["add",function(e,t){var n=u(e);if(!r.pull[n]){var i=f(e);i.id=n;if(r._scheme_init)r._scheme_init(i);r.add(i)}}],["reset",function(e,t){a(r,i)}],["request",function(e){if(e instanceof Backbone.Collection)t(r)}],["sync",function(e){if(e instanceof Backbone.Collection)n(r)}],["error",function(e){if(e instanceof Backbone.Collection)n(r)}]];for(var c=0;c<l.length;c++)i.bind.apply(i,l[c]);var h=[r.attachEvent("onAfterAdd",function(e){if(!i.get(e)){var t=o(r.getItem(e));var n=new i.model(t);var s=u(n);if(s!=e)this.changeId(e,s);i.add(n);i.trigger("webix:add",n)}return true}),r.attachEvent("onDataUpdate",function(e){var t=i.get(e);var n=o(r.getItem(e));t.set(n);i.trigger("webix:change",t);return true}),r.attachEvent("onAfterDelete",function(e){var t=i.get(e);if(t){i.trigger("webix:remove",t);i.remove(e)}return true})];r._sync_source=i;r._sync_events=h;r._sync_backbone_events=l;if(i.length||r.count()){a(r,i)}});window.WebixView=Backbone.View.extend({tagName:"div",initialize:function(e){this.options=e||{}},render:function(){if(this.beforeRender)this.beforeRender.apply(this,arguments);var e=this.config||this.options.config;var t=this.el?$(this.el)[0]:document.body;if(t&&!t.config)t.innerHTML="";this.root=webix.ui(webix.copy(e),t);if(this.afterRender)this.afterRender.apply(this,arguments);return this},destroy:function(){if(this.root)this.root.destructor()},getRoot:function(){return this.root},getChild:function(e){webix.assert(this.root.$$,"You need to set isolate property for top view");return this.root.$$(e)}})})();webix.ActiveContent={$init:function(e){if(e.activeContent){this.$ready.push(this._init_active_content_list);this._active_holders={};this._active_holders_item={};this._active_holders_values={};this._active_references={};for(var t in e.activeContent){this[t]=this._bind_active_content(t);if(e.activeContent[t].earlyInit){var n=webix._parent_cell;webix._parent_cell=null;this[t].call(this,{},this,e.activeContent);webix._parent_cell=n}}}},_init_active_content_list:function(){if(this.filter){for(var e in this._settings.activeContent){this.type[e]=this[e];this[e]=this._locate_active_content_by_id(e)}this.type.masterUI=this}},_locate_active_content_by_id:function(e){return function(t){var n=this._active_references[e];var r=n._settings.id;var i=this.getItemNode(t).getElementsByTagName("DIV");for(var s=0;s<i.length;s++){if(i[s].getAttribute("view_id")==r){n._viewobj=n._dataobj=i[s];break}}return n}},_get_active_node:function(e,t,n){return function(r){if(r){var i=r.target||r.srcElement;while(i){if(i.getAttribute&&i.getAttribute("view_id")){e._dataobj=e._viewobj=e.$view=i;if(n.locate){var s=n.locate(i.parentNode);var o=n._active_holders_values[t][s];e._settings.value=o;e._settings.$masterId=s}return i}i=i.parentNode}}return e._viewobj}},_set_new_active_value:function(e,t){return function(n){var r=t.data;if(t.filter){var i=t.locate(this._viewobj.parentNode);r=t.getItem(i);this.refresh();t._active_holders_item[e][i]=this._viewobj.outerHTML||(new XMLSerializer).serializeToString(this._viewobj);t._active_holders_values[e][i]=n}r[e]=n}},_bind_active_content:function(e){return function(t,n,r){var i=n._active_holders?n:n.masterUI;if(!i._active_holders[e]){var s=document.createElement("DIV");r=r||i._settings.activeContent;var o=webix.ui(r[e],s);s.firstChild.setAttribute("onclick","webix.callEvent('onClick',[event]); event.cancelBubble = true;");o.getNode=i._get_active_node(o,e,i);o.attachEvent("onChange",i._set_new_active_value(e,i));i._active_references[e]=o;i._active_holders[e]=s.innerHTML;i._active_holders_item[e]={};i._active_holders_values[e]={}}if(i.filter&&t[e]!=i._active_holders_values[e]&&!webix.isUndefined(t[e])){var o=i._active_references[e];o.blockEvent();o.setValue(t[e]);o.unblockEvent();i._active_holders_values[e][t.id]=t[e];i._active_holders_item[e][t.id]=o._viewobj.outerHTML||(new XMLSerializer).serializeToString(o._viewobj)}return i._active_holders_item[e][t.id]||i._active_holders[e]}}};webix.protoUI({name:"video",$init:function(e){if(!e.id)e.id=webix.uid();this.$ready.push(this._init_video)},_init_video:function(){var e=this._settings;this._contentobj=webix.html.create("video",{"class":"webix_view_video",style:"width:100%;height:100%;",autobuffer:"autobuffer"},"");if(e.poster)this._contentobj.poster=e.poster;if(e.src){if(typeof e.src!="object")e.src=[e.src];for(var t=0;t<e.src.length;t++)this._contentobj.innerHTML+=' <source src="'+e.src[t]+'">'}if(e.controls)this._contentobj.controls=true;if(e.autoplay)this._contentobj.autoplay=true;this._viewobj.appendChild(this._contentobj)},getVideo:function(){return this._contentobj},defaults:{src:"",controls:true}},webix.ui.view);

/* filedownload.js */
(function(e,t){var n=/[<>&\r\n"']/gm;var r={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"#39;"};e.extend({fileDownload:function(i,s){function E(){if(document.cookie.indexOf(o.cookieName+"="+o.cookieValue)!=-1){d.onSuccess(i);var t=o.cookieName+"=; path="+o.cookiePath+"; expires="+(new Date(0)).toUTCString()+";";if(o.cookieDomain)t+=" domain="+o.cookieDomain+";";document.cookie=t;x(false);return}if(m||v){try{var n=m?m.document:S(v);if(n&&n.body!=null&&n.body.innerHTML.length){var r=true;if(y&&y.length){var s=e(n.body).contents().first();try{if(s.length&&s[0]===y[0]){r=false}}catch(u){if(u&&u.number==-2146828218){r=true}else{throw u}}}if(r){setTimeout(function(){d.onFail(n.body.innerHTML,i);x(true)},100);return}}}catch(a){d.onFail("",i);x(true);return}}setTimeout(E,o.checkInterval)}function S(e){var t=e[0].contentWindow||e[0].contentDocument;if(t.document){t=t.document}return t}function x(e){setTimeout(function(){if(m){if(l){m.close()}if(f){if(m.focus){m.focus();if(e){m.close()}}}}},0)}function T(e){return e.replace(n,function(e){return"&"+r[e]})}var o=e.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:true},prepareCallback:function(e){},successCallback:function(e){},failCallback:function(e,t){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",cookieDomain:null,popupWindowTitle:"Initiating file download...",encodeHTMLEntities:true},s);var u=new e.Deferred;var a=(navigator.userAgent||navigator.vendor||t.opera).toLowerCase();var f;var l;var c;if(/ip(ad|hone|od)/.test(a)){f=true}else if(a.indexOf("android")!==-1){l=true}else{c=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}var h=o.httpMethod.toUpperCase();if(l&&h!=="GET"){if(e().dialog){e("<div>").html(o.androidPostUnsupportedMessageHtml).dialog(o.dialogOptions)}else{alert(o.androidPostUnsupportedMessageHtml)}return u.reject()}var p=null;var d={onPrepare:function(t){if(o.preparingMessageHtml){p=e("<div>").html(o.preparingMessageHtml).dialog(o.dialogOptions)}else if(o.prepareCallback){o.prepareCallback(t)}},onSuccess:function(e){if(p){p.dialog("close")}o.successCallback(e);u.resolve(e)},onFail:function(t,n){if(p){p.dialog("close")}if(o.failMessageHtml){e("<div>").html(o.failMessageHtml).dialog(o.dialogOptions)}o.failCallback(t,n);u.reject(t,n)}};d.onPrepare(i);if(o.data!==null&&typeof o.data!=="string"){o.data=e.param(o.data)}var v,m,g,y;if(h==="GET"){if(o.data!==null){var b=i.indexOf("?");if(b!==-1){if(i.substring(i.length-1)!=="&"){i=i+"&"}}else{i=i+"?"}i=i+o.data}if(f||l){m=t.open(i);m.document.title=o.popupWindowTitle;t.focus()}else if(c){t.location(i)}else{v=e("<iframe>").hide().prop("src",i).appendTo("body")}}else{var w="";if(o.data!==null){e.each(o.data.replace(/\+/g," ").split("&"),function(){var e=this.split("=");var t=o.encodeHTMLEntities?T(decodeURIComponent(e[0])):decodeURIComponent(e[0]);if(t){var n=o.encodeHTMLEntities?T(decodeURIComponent(e[1])):decodeURIComponent(e[1]);w+='<input type="hidden" name="'+t+'" value="'+n+'" />'}})}if(c){y=e("<form>").appendTo("body");y.hide().prop("method",o.httpMethod).prop("action",i).html(w)}else{if(f){m=t.open("about:blank");m.document.title=o.popupWindowTitle;g=m.document;t.focus()}else{v=e("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body");g=S(v)}g.write("<html><head></head><body><form method='"+o.httpMethod+"' action='"+i+"'>"+w+"</form>"+o.popupWindowTitle+"</body></html>");y=e(g).find("form")}y.submit()}setTimeout(E,o.checkInterval);return u.promise()}})})(jQuery,this);

/* Reset Form */
jQuery.fn.clearForm = function() {
  return this.each(function() {
    
    var type = this.type, tag = this.tagName.toLowerCase();
    if (tag == 'form') {
      return $(':input',this).clearForm();
    }; 

    if (type == 'text' || type == 'password' || tag == 'textarea') {
      this.value = '';
    } else if (type == 'checkbox' || type == 'radio') {
      this.checked = false;
    } else if (tag == 'select') {
      this.selectedIndex = -1;
    }
  });
};

/* Reload */
function reLoad() { window.location.reload(); }; 
function wLoad(url) { window.open(url,'_blank'); }; 
function uLoad(url) { window.open(url,'_parent'); }; 
function fLoad(url) { window.open(url,'_self'); };

/* printContent(id) */
function printContent(e){str=document.getElementById(e).innerHTML;newwin=window.open("","printwin","left=100,top=100,width=400,height=400");newwin.document.write("<HTML>\n<HEAD>\n");newwin.document.write("<TITLE>Print Page</TITLE>\n");newwin.document.write("<script>\n");newwin.document.write("function chkstate(){\n");newwin.document.write('if(document.readyState=="complete"){\n');newwin.document.write("window.close()\n");newwin.document.write("}\n");newwin.document.write("else{\n");newwin.document.write('setTimeout("chkstate()",2000)\n');newwin.document.write("}\n");newwin.document.write("}\n");newwin.document.write("function print_win(){\n");newwin.document.write("window.print();\n");newwin.document.write("chkstate();\n");newwin.document.write("}\n");newwin.document.write("</script>\n");newwin.document.write("</HEAD>\n");newwin.document.write('<BODY onload="print_win()">\n');newwin.document.write(str);newwin.document.write("</BODY>\n");newwin.document.write("</HTML>\n");newwin.document.close()};

//* Create a jquery plugin that prints the given element. $(element).print();
jQuery.fn.print=function(){if(this.size()>1){this.eq(0).print();return}else if(!this.size()){return}var e="printer-"+(new Date).getTime();var t=$("<iframe name='"+e+"'>");t.css("width","1px").css("height","1px").css("position","absolute").css("left","-9999px").appendTo($("body:first"));var n=window.frames[e];var r=n.document;var i=$("<div>").append($("style").clone());r.open();r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');r.write("<html>");r.write("<body>");r.write("<head>");r.write("<title>");r.write(document.title);r.write("</title>");r.write(i.html());r.write("</head>");r.write(this.html());r.write("</body>");r.write("</html>");r.close();n.focus();n.print();setTimeout(function(){t.remove()},60*1e3)};

//* Noty */
"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(a){var b={init:function(b){return this.options=a.extend({},a.noty.defaults,b),this.options.layout=this.options.custom?a.noty.layouts.inline:a.noty.layouts[this.options.layout],a.noty.themes[this.options.theme]?this.options.theme=a.noty.themes[this.options.theme]:b.themeClassName=this.options.theme,delete b.layout,delete b.theme,this.options=a.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=a.extend({},this.options,b),this._build(),this},_build:function(){var b=a('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(b.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?a(this.options.layout.parent.object).css(this.options.layout.parent.css).append(b):b,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var c=a("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(c):this.$bar.append(c);var d=this;a.each(this.options.buttons,function(b,c){var e=a("<button/>").addClass(c.addClass?c.addClass:"gray").html(c.text).attr("id",c.id?c.id:"button-"+b).appendTo(d.$bar.find(".noty_buttons")).bind("click",function(){a.isFunction(c.onClick)&&c.onClick.call(e,d)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),a.noty.store[this.options.id]=this},show:function(){var b=this;return b.options.custom?b.options.custom.find(b.options.layout.container.selector).append(b.$bar):a(b.options.layout.container.selector).append(b.$bar),b.options.theme&&b.options.theme.style&&b.options.theme.style.apply(b),"function"===a.type(b.options.layout.css)?this.options.layout.css.apply(b.$bar):b.$bar.css(this.options.layout.css||{}),b.$bar.addClass(b.options.layout.addClass),b.options.layout.container.style.apply(a(b.options.layout.container.selector)),b.showing=!0,b.options.theme&&b.options.theme.style&&b.options.theme.callback.onShow.apply(this),a.inArray("click",b.options.closeWith)>-1&&b.$bar.css("cursor","pointer").one("click",function(a){b.stopPropagation(a),b.options.callback.onCloseClick&&b.options.callback.onCloseClick.apply(b),b.close()}),a.inArray("hover",b.options.closeWith)>-1&&b.$bar.one("mouseenter",function(){b.close()}),a.inArray("button",b.options.closeWith)>-1&&b.$closeButton.one("click",function(a){b.stopPropagation(a),b.close()}),-1==a.inArray("button",b.options.closeWith)&&b.$closeButton.remove(),b.options.callback.onShow&&b.options.callback.onShow.apply(b),b.$bar.animate(b.options.animation.open,b.options.animation.speed,b.options.animation.easing,function(){b.options.callback.afterShow&&b.options.callback.afterShow.apply(b),b.showing=!1,b.shown=!0}),b.options.timeout&&b.$bar.delay(b.options.timeout).promise().done(function(){b.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var b=this;if(this.showing)return b.$bar.queue(function(){b.close.apply(b)}),void 0;if(!this.shown&&!this.showing){var c=[];return a.each(a.noty.queue,function(a,d){d.options.id!=b.options.id&&c.push(d)}),a.noty.queue=c,void 0}b.$bar.addClass("i-am-closing-now"),b.options.callback.onClose&&b.options.callback.onClose.apply(b),b.$bar.clearQueue().stop().animate(b.options.animation.close,b.options.animation.speed,b.options.animation.easing,function(){b.options.callback.afterClose&&b.options.callback.afterClose.apply(b)}).promise().done(function(){b.options.modal&&(a.notyRenderer.setModalCount(-1),0==a.notyRenderer.getModalCount()&&a(".noty_modal").fadeOut("fast",function(){a(this).remove()})),a.notyRenderer.setLayoutCountFor(b,-1),0==a.notyRenderer.getLayoutCountFor(b)&&a(b.options.layout.container.selector).remove(),"undefined"!=typeof b.$bar&&null!==b.$bar&&(b.$bar.remove(),b.$bar=null,b.closed=!0),delete a.noty.store[b.options.id],b.options.theme.callback&&b.options.theme.callback.onClose&&b.options.theme.callback.onClose.apply(b),b.options.dismissQueue||(a.noty.ontap=!0,a.notyRenderer.render()),b.options.maxVisible>0&&b.options.dismissQueue&&a.notyRenderer.render()})}},setText:function(a){return this.closed||(this.options.text=a,this.$bar.find(".noty_text").html(a)),this},setType:function(a){return this.closed||(this.options.type=a,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(a){if(!this.closed){var b=this;this.options.timeout=a,b.$bar.delay(b.options.timeout).promise().done(function(){b.close()})}return this},stopPropagation:function(a){a=a||window.event,"undefined"!=typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},closed:!1,showing:!1,shown:!1};a.notyRenderer={},a.notyRenderer.init=function(c){var d=Object.create(b).init(c);return d.options.killer&&a.noty.closeAll(),d.options.force?a.noty.queue.unshift(d):a.noty.queue.push(d),a.notyRenderer.render(),"object"==a.noty.returns?d:d.options.id},a.notyRenderer.render=function(){var b=a.noty.queue[0];"object"===a.type(b)?b.options.dismissQueue?b.options.maxVisible>0?a(b.options.layout.container.selector+" li").length<b.options.maxVisible&&a.notyRenderer.show(a.noty.queue.shift()):a.notyRenderer.show(a.noty.queue.shift()):a.noty.ontap&&(a.notyRenderer.show(a.noty.queue.shift()),a.noty.ontap=!1):a.noty.ontap=!0},a.notyRenderer.show=function(b){b.options.modal&&(a.notyRenderer.createModalFor(b),a.notyRenderer.setModalCount(1)),b.options.custom?0==b.options.custom.find(b.options.layout.container.selector).length?b.options.custom.append(a(b.options.layout.container.object).addClass("i-am-new")):b.options.custom.find(b.options.layout.container.selector).removeClass("i-am-new"):0==a(b.options.layout.container.selector).length?a("body").append(a(b.options.layout.container.object).addClass("i-am-new")):a(b.options.layout.container.selector).removeClass("i-am-new"),a.notyRenderer.setLayoutCountFor(b,1),b.show()},a.notyRenderer.createModalFor=function(b){if(0==a(".noty_modal").length){var c=a("<div/>").addClass("noty_modal").addClass(b.options.theme).data("noty_modal_count",0);b.options.theme.modal&&b.options.theme.modal.css&&c.css(b.options.theme.modal.css),c.prependTo(a("body")).fadeIn("fast")}},a.notyRenderer.getLayoutCountFor=function(b){return a(b.options.layout.container.selector).data("noty_layout_count")||0},a.notyRenderer.setLayoutCountFor=function(b,c){return a(b.options.layout.container.selector).data("noty_layout_count",a.notyRenderer.getLayoutCountFor(b)+c)},a.notyRenderer.getModalCount=function(){return a(".noty_modal").data("noty_modal_count")||0},a.notyRenderer.setModalCount=function(b){return a(".noty_modal").data("noty_modal_count",a.notyRenderer.getModalCount()+b)},a.fn.noty=function(b){return b.custom=a(this),a.notyRenderer.init(b)},a.noty={},a.noty.queue=[],a.noty.ontap=!0,a.noty.layouts={},a.noty.themes={},a.noty.returns="object",a.noty.store={},a.noty.get=function(b){return a.noty.store.hasOwnProperty(b)?a.noty.store[b]:!1},a.noty.close=function(b){return a.noty.get(b)?a.noty.get(b).close():!1},a.noty.setText=function(b,c){return a.noty.get(b)?a.noty.get(b).setText(c):!1},a.noty.setType=function(b,c){return a.noty.get(b)?a.noty.get(b).setType(c):!1},a.noty.clearQueue=function(){a.noty.queue=[]},a.noty.closeAll=function(){a.noty.clearQueue(),a.each(a.noty.store,function(a,b){b.close()})};var c=window.alert;a.noty.consumeAlert=function(b){window.alert=function(c){b?b.text=c:b={text:c},a.notyRenderer.init(b)}},a.noty.stopConsumeAlert=function(){window.alert=c},a.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},a(window).resize(function(){a.each(a.noty.layouts,function(b,c){c.container.style.apply(a(c.container.selector))})})}(jQuery),window.noty=function(a){return jQuery.notyRenderer.init(a)},function(a){a.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){a(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(a){a.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){a(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),a(this).css({left:(a(window).width()-a(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(a){a.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){a(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&a(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(a){a.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){a(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&a(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(a){a.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){a(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var b=a(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");a("body").append(b),b.find(".i-am-closing-now").remove(),b.find("li").css("display","block");var c=b.height();b.remove(),a(this).hasClass("i-am-new")?a(this).css({left:(a(window).width()-a(this).outerWidth(!1))/2+"px",top:(a(window).height()-c)/2+"px"}):a(this).animate({left:(a(window).width()-a(this).outerWidth(!1))/2+"px",top:(a(window).height()-c)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(a){a.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){a(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var b=a(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");a("body").append(b),b.find(".i-am-closing-now").remove(),b.find("li").css("display","block");var c=b.height();b.remove(),a(this).hasClass("i-am-new")?a(this).css({top:(a(window).height()-c)/2+"px"}):a(this).animate({top:(a(window).height()-c)/2+"px"},500),window.innerWidth<600&&a(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(a){a.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){a(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var b=a(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");a("body").append(b),b.find(".i-am-closing-now").remove(),b.find("li").css("display","block");var c=b.height();b.remove(),a(this).hasClass("i-am-new")?a(this).css({top:(a(window).height()-c)/2+"px"}):a(this).animate({top:(a(window).height()-c)/2+"px"},500),window.innerWidth<600&&a(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(a){a.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){a(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(a){a.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){a(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(a){a.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){a(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),a(this).css({left:(a(window).width()-a(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(a){a.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){a(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&a(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(a){a.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){a(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&a(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(a){a.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var b=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":a(b).css({borderRadius:"0px 0px 0px 0px"}),a(b).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":a(b).css({borderRadius:"0px 0px 0px 0px"}),a(b).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),a(b).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":a(b).css({borderRadius:"0px 0px 0px 0px"}),a(b).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){a(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){a(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){a.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){a.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery);

/* Base 64 Encode eg */
(function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var c=function(a){a=a.replace(/\x0d\x0a/g,"\n");var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);if(d<128){b+=String.fromCharCode(d)}else if(d>127&&d<2048){b+=String.fromCharCode(d>>6|192);b+=String.fromCharCode(d&63|128)}else{b+=String.fromCharCode(d>>12|224);b+=String.fromCharCode(d>>6&63|128);b+=String.fromCharCode(d&63|128)}}return b};var d=function(a){var b="";var c=0;var d=c1=c2=0;while(c<a.length){d=a.charCodeAt(c);if(d<128){b+=String.fromCharCode(d);c++}else if(d>191&&d<224){c2=a.charCodeAt(c+1);b+=String.fromCharCode((d&31)<<6|c2&63);c+=2}else{c2=a.charCodeAt(c+1);c3=a.charCodeAt(c+2);b+=String.fromCharCode((d&15)<<12|(c2&63)<<6|c3&63);c+=3}}return b};a.extend({base64Encode:function(a){var d="";var e,f,g,h,i,j,k;var l=0;a=c(a);while(l<a.length){e=a.charCodeAt(l++);f=a.charCodeAt(l++);g=a.charCodeAt(l++);h=e>>2;i=(e&3)<<4|f>>4;j=(f&15)<<2|g>>6;k=g&63;if(isNaN(f)){j=k=64}else if(isNaN(g)){k=64}d=d+b.charAt(h)+b.charAt(i)+b.charAt(j)+b.charAt(k)}return d},base64Decode:function(a){var c="";var e,f,g;var h,i,j,k;var l=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(l<a.length){h=b.indexOf(a.charAt(l++));i=b.indexOf(a.charAt(l++));j=b.indexOf(a.charAt(l++));k=b.indexOf(a.charAt(l++));e=h<<2|i>>4;f=(i&15)<<4|j>>2;g=(j&3)<<6|k;c=c+String.fromCharCode(e);if(j!=64){c=c+String.fromCharCode(f)}if(k!=64){c=c+String.fromCharCode(g)}}c=d(c);return c}})})(jQuery);

/* Exists function eg \$('#captcha_code').exists() */
$.fn.exists = function() { return (this.length > 0); }; $.fn.notexists = function() { return (this.length <= 0); };

/* isset equivalent */
function isset(a) { if (typeof a != 'undefined') { return true; } else { return false; }};

/* Tiny Box */
TINY={};TINY.box=function(){var a,b,c,d,e,f=0;return{show:function(h){e={opacity:70,close:1,animate:1,fixed:1,mask:1,maskid:"",boxid:"",topsplit:2,url:0,post:0,height:0,width:0,html:0,iframe:0};for(s in h){e[s]=h[s]}if(!f){a=document.createElement("div");a.className="tbox";f=document.createElement("div");f.className="tinner";c=document.createElement("div");c.className="tcontent";b=document.createElement("div");b.className="tmask";d=document.createElement("div");d.className="tclose";d.v=0;document.body.appendChild(b);document.body.appendChild(a);a.appendChild(f);f.appendChild(c);b.onclick=d.onclick=TINY.box.hide;window.onresize=TINY.box.resize}else{a.style.display="none";clearTimeout(f.ah);if(d.v){f.removeChild(d);d.v=0}}f.id=e.boxid;b.id=e.maskid;a.style.position=e.fixed?"fixed":"absolute";if(e.html&&!e.animate){f.style.backgroundImage="none";c.innerHTML=e.html;c.style.display="";f.style.width=e.width?e.width+"px":"auto";f.style.height=e.height?e.height+"px":"auto"}else{c.style.display="none";if(!e.animate&&e.width&&e.height){f.style.width=e.width+"px";f.style.height=e.height+"px"}else{f.style.width=f.style.height="100px"}}if(e.mask){this.mask();this.alpha(b,1,e.opacity)}else{this.alpha(a,1,100)}if(e.autohide){f.ah=setTimeout(TINY.box.hide,1e3*e.autohide)}else{document.onkeyup=TINY.box.esc}},fill:function(a,b,c,d,g,h){if(b){if(e.image){var i=new Image;i.onload=function(){g=g||i.width;h=h||i.height;TINY.box.psh(i,d,g,h)};i.src=e.image}else if(e.iframe){this.psh('<iframe id="popupframe" src="'+e.iframe+'" width="'+e.width+'" frameborder="0" height="'+e.height+'"></iframe>',d,g,h)}else{var j=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");j.onreadystatechange=function(){if(j.readyState==4&&j.status==200){f.style.backgroundImage="";TINY.box.psh(j.responseText,d,g,h)}};if(c){j.open("POST",a,true);j.setRequestHeader("Content-type","application/x-www-form-urlencoded");j.send(c)}else{j.open("GET",a,true);j.send(null)}}}else{this.psh(a,d,g,h)}},psh:function(a,b,d,e){if(typeof a=="object"){c.appendChild(a)}else{c.innerHTML=a}var g=f.style.width,h=f.style.height;if(!d||!e){f.style.width=d?d+"px":"";f.style.height=e?e+"px":"";c.style.display="";if(!e){e=parseInt(c.offsetHeight)}if(!d){d=parseInt(c.offsetWidth)}c.style.display="none"}f.style.width=g;f.style.height=h;this.size(d,e,b)},esc:function(a){a=a||window.event;if(a.keyCode==27){TINY.box.hide()}},hide:function(){TINY.box.alpha(a,-1,0,3);document.onkeypress=null;if(e.closejs){e.closejs()}},resize:function(){TINY.box.pos();TINY.box.mask()},mask:function(){b.style.height=this.total(1)+"px";b.style.width=this.total(0)+"px"},pos:function(){var b;if(typeof e.top!="undefined"){b=e.top}else{b=this.height()/e.topsplit-a.offsetHeight/2;b=b<20?20:b}if(!e.fixed&&!e.top){b+=this.top()}a.style.top=b+"px";a.style.left=typeof e.left!="undefined"?e.left+"px":this.width()/2-a.offsetWidth/2+"px"},alpha:function(a,b,c){clearInterval(a.ai);if(b){a.style.opacity=0;a.style.filter="alpha(opacity=0)";a.style.display="block";TINY.box.pos()}a.ai=setInterval(function(){TINY.box.ta(a,c,b)},20)},ta:function(d,g,h){var i=Math.round(d.style.opacity*100);if(i==g){clearInterval(d.ai);if(h==-1){d.style.display="none";d==a?TINY.box.alpha(b,-1,0,2):c.innerHTML=f.style.backgroundImage=""}else{if(d==b){this.alpha(a,1,100)}else{a.style.filter="";TINY.box.fill(e.html||e.url,e.url||e.iframe||e.image,e.post,e.animate,e.width,e.height)}}}else{var k=g-Math.floor(Math.abs(g-i)*.5)*h;d.style.opacity=k/100;d.style.filter="alpha(opacity="+k+")"}},size:function(a,b,h){if(h){clearInterval(f.si);var i=parseInt(f.style.width)>a?-1:1,j=parseInt(f.style.height)>b?-1:1;f.si=setInterval(function(){TINY.box.ts(a,i,b,j)},20)}else{f.style.backgroundImage="none";if(e.close){f.appendChild(d);d.v=1}f.style.width=a+"px";f.style.height=b+"px";c.style.display="";this.pos();if(e.openjs){e.openjs()}}},ts:function(a,b,h,i){var j=parseInt(f.style.width),k=parseInt(f.style.height);if(j==a&&k==h){clearInterval(f.si);f.style.backgroundImage="none";c.style.display="block";if(e.close){f.appendChild(d);d.v=1}if(e.openjs){e.openjs()}}else{if(j!=a){f.style.width=a-Math.floor(Math.abs(a-j)*.6)*b+"px"}if(k!=h){f.style.height=h-Math.floor(Math.abs(h-k)*.6)*i+"px"}this.pos()}},top:function(){return document.documentElement.scrollTop||document.body.scrollTop},width:function(){return self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},total:function(a){var b=document.body,c=document.documentElement;return a?Math.max(Math.max(b.scrollHeight,c.scrollHeight),Math.max(b.clientHeight,c.clientHeight)):Math.max(Math.max(b.scrollWidth,c.scrollWidth),Math.max(b.clientWidth,c.clientWidth))}}}();

/** jQuery.require('xyz.js',{ browserType:jQuery.browser.msie, callback:myCallback, cache:false } */
(function(a){a.require=function(b,c){var c=c||{};var d=c.browserType===false?false:true;var e="";if(!d){return a}var f=c.callBack||function(){};var g=c.cache===false?false:true;if(!a.require.loadedLib)a.require.loadedLib={};if(!a.scriptPath){var h=a("script").attr("src");a.scriptPath=h.replace(/\w+\.js$/,"")}if(typeof b==="string"){b=new Array(b)}for(var i=0;i<b.length;i++){if(!a.require.loadedLib[b[i]]){a.ajax({type:"GET",url:a.scriptPath+b[i],success:f,dataType:"script",cache:g,async:false});a.require.loadedLib[b[i]]=true}}return a}})(jQuery);

/* Character to Table Image */
jQuery.fn.charToTable=function(a){a=jQuery.extend({requestUrl:"chartopixels.php",character:" ",append:true,tableClass:"chartable",tdClass:"pixel",withRgb:false,callback:null},a);return this.each(function(){var b=this;if(!a.character||a.character=="")a.character=" ";a.character=a.character.substr(0,1);jQuery.getJSON(a.requestUrl,{c:a.character},function(c){var d='<table class="'+a.tableClass+'" />';if(a.append)jQuery(b).append(d);else jQuery(b).html(d);var e=jQuery(b).find("table."+a.tableClass+":last");for(var f=0;f<c.length;f++){jQuery(e).append("<tr />");var g=jQuery(e).find("tr:last");jQuery.each(c[f],function(b,c){if(c==0)d="<td />";else{d='<td class="'+a.tdClass;if(a.withRgb)d+=" rgb-"+c;d+='" />'}jQuery(g).append(d)})}if(jQuery.isFunction(a.callback))a.callback()})})};

/* LiveQuery $('a').livequery('click', function(event) { alert('clicked'); return false; }); */
(function(a){a.extend(a.fn,{livequery:function(e,d,c){var b=this,f;if(a.isFunction(e)){c=d,d=e,e=undefined}a.each(a.livequery.queries,function(g,h){if(b.selector==h.selector&&b.context==h.context&&e==h.type&&(!d||d.$lqguid==h.fn.$lqguid)&&(!c||c.$lqguid==h.fn2.$lqguid)){return(f=h)&&false}});f=f||new a.livequery(this.selector,this.context,e,d,c);f.stopped=false;f.run();return this},expire:function(e,d,c){var b=this;if(a.isFunction(e)){c=d,d=e,e=undefined}a.each(a.livequery.queries,function(f,g){if(b.selector==g.selector&&b.context==g.context&&(!e||e==g.type)&&(!d||d.$lqguid==g.fn.$lqguid)&&(!c||c.$lqguid==g.fn2.$lqguid)&&!this.stopped){a.livequery.stop(g.id)}});return this}});a.livequery=function(b,d,f,e,c){this.selector=b;this.context=d;this.type=f;this.fn=e;this.fn2=c;this.elements=[];this.stopped=false;this.id=a.livequery.queries.push(this)-1;e.$lqguid=e.$lqguid||a.livequery.guid++;if(c){c.$lqguid=c.$lqguid||a.livequery.guid++}return this};a.livequery.prototype={stop:function(){var b=this;if(this.type){this.elements.unbind(this.type,this.fn)}else{if(this.fn2){this.elements.each(function(c,d){b.fn2.apply(d)})}}this.elements=[];this.stopped=true},run:function(){if(this.stopped){return}var d=this;var e=this.elements,c=a(this.selector,this.context),b=c.not(e);this.elements=c;if(this.type){b.bind(this.type,this.fn);if(e.length>0){a.each(e,function(f,g){if(a.inArray(g,c)<0){a.event.remove(g,d.type,d.fn)}})}}else{b.each(function(){d.fn.apply(this)});if(this.fn2&&e.length>0){a.each(e,function(f,g){if(a.inArray(g,c)<0){d.fn2.apply(g)}})}}}};a.extend(a.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length){var b=a.livequery.queue.length;while(b--){a.livequery.queries[a.livequery.queue.shift()].run()}}},pause:function(){a.livequery.running=false},play:function(){a.livequery.running=true;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(c,d){if(!a.fn[d]){return}var b=a.fn[d];a.fn[d]=function(){var e=b.apply(this,arguments);a.livequery.run();return e}})},run:function(b){if(b!=undefined){if(a.inArray(b,a.livequery.queue)<0){a.livequery.queue.push(b)}}else{a.each(a.livequery.queries,function(c){if(a.inArray(c,a.livequery.queue)<0){a.livequery.queue.push(c)}})}if(a.livequery.timeout){clearTimeout(a.livequery.timeout)}a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(b){if(b!=undefined){a.livequery.queries[b].stop()}else{a.each(a.livequery.queries,function(c){a.livequery.queries[c].stop()})}}});a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html");a(function(){a.livequery.play()})})(jQuery);

/* Populate $(form).populate(msg) */
jQuery.fn.populate=function(g,h){function parseJSON(a,b){b=b||'';if(a==undefined){}else if(a.constructor==Object){for(var c in a){var d=b+(b==''?c:'['+c+']');parseJSON(a[c],d)}}else if(a.constructor==Array){for(var i=0;i<a.length;i++){var e=h.useIndices?i:'';e=h.phpNaming?'['+e+']':e;var d=b+e;parseJSON(a[i],d)}}else{if(k[b]==undefined){k[b]=a}else if(k[b].constructor!=Array){k[b]=[k[b],a]}else{k[b].push(a)}}};function debug(a){if(window.console&&console.log){console.log(a)}}function getElementName(a){if(!h.phpNaming){a=a.replace(/\[\]$/,'')}return a}function populateElement(a,b,c){var d=h.identifier=='id'?'#'+b:'['+h.identifier+'="'+b+'"]';var e=jQuery(d,a);c=c.toString();c=c=='null'?'':c;e.html(c)}function populateFormElement(a,b,c){var b=getElementName(b);var d=a[b];if(d==undefined){d=jQuery('#'+b,a);if(d){d.html(c);return true}if(h.debug){debug('No such element as '+b)}return false}if(h.debug){_populate.elements.push(d)}elements=d.type==undefined&&d.length?d:[d];for(var e=0;e<elements.length;e++){var d=elements[e];if(!d||typeof d=='undefined'||typeof d=='function'){continue}switch(d.type||d.tagName){case'radio':d.checked=(d.value!=''&&c.toString()==d.value);case'checkbox':var f=c.constructor==Array?c:[c];for(var j=0;j<f.length;j++){d.checked|=d.value==f[j]}break;case'select-multiple':var f=c.constructor==Array?c:[c];for(var i=0;i<d.options.length;i++){for(var j=0;j<f.length;j++){d.options[i].selected|=d.options[i].value==f[j]}}break;case'select':case'select-one':d.value=c.toString()||c;break;case'text':case'button':case'textarea':case'submit':default:c=c==null?'':c;d.value=c}}}if(g===undefined){return this};var h=jQuery.extend({phpNaming:true,phpIndices:false,resetForm:true,identifier:'id',debug:false},h);if(h.phpIndices){h.phpNaming=true}var k=[];parseJSON(g);if(h.debug){_populate={arr:k,obj:g,elements:[]}}this.each(function(){var a=this.tagName.toLowerCase();var b=a=='form'?populateFormElement:populateElement;if(a=='form'&&h.resetForm){this.reset()}for(var i in k){b(this,i,k[i])}});return this};

/* RSS Feed Display 
*  $('div').rssfeed('http://feeds.reuters.com/reuters/oddlyEnoughNews', {limit: 5});
// Set pluign defaults
var defaults = {
limit: 10, header: true, titletag: 'h4',
date: true, content: true, snippet: true,
showerror: true, errormsg: '', key: null,
ssl: false, linktarget: '_self'
}; 
*/
(function($){$.fn.rssfeed=function(url,options,fn){var defaults={limit:10,header:true,titletag:'h4',date:true,content:true,snippet:true,showerror:true,errormsg:'',key:null,ssl:false,linktarget:'_self'};var options=$.extend(defaults,options);return this.each(function(i,e){var $e=$(e);var s='';if(options.ssl)s='s';if(!$e.hasClass('rssFeed'))$e.addClass('rssFeed');if(url==null)return false;var api="http"+s+"://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURIComponent(url);if(options.limit!=null)api+="&num="+options.limit;if(options.key!=null)api+="&key="+options.key;api+="&output=json_xml"
$.getJSON(api,function(data){if(data.responseStatus==200){_process(e,data.responseData,options);if($.isFunction(fn))fn.call(this,$e);}else{if(options.showerror)
if(options.errormsg!=''){var msg=options.errormsg;}else{var msg=data.responseDetails;};$(e).html('<div class="rssError"><p>'+msg+'</p></div>');};});});};var _process=function(e,data,options){var feeds=data.feed;if(!feeds){return false;}
var html='';var row='odd';var xml=getXMLDocument(data.xmlString);var xmlEntries=xml.getElementsByTagName('item');if(options.header)
html+='<div class="rssHeader">'+'<a href="'+feeds.link+'" title="'+feeds.description+'">'+feeds.title+'</a>'+'</div>';html+='<div class="rssBody">'+'<ul>';for(var i=0;i<feeds.entries.length;i++){var entry=feeds.entries[i];var pubDate;if(entry.publishedDate){var entryDate=new Date(entry.publishedDate);var pubDate=entryDate.toLocaleDateString()+' '+entryDate.toLocaleTimeString();}
html+='<li class="rssRow '+row+'">'+'<'+options.titletag+'><a href="'+entry.link+'" title="View this feed at '+feeds.title+'" target="'+options.linktarget+'">'+entry.title+'</a></'+options.titletag+'>'
if(options.date&&pubDate)html+='<div>'+pubDate+'</div>'
if(options.content){if(options.snippet&&entry.contentSnippet!=''){var content=entry.contentSnippet;}else{var content=entry.content;}
html+='<p>'+content+'</p>'}
if(xmlEntries.length>0){var xmlMedia=xmlEntries[i].getElementsByTagName('enclosure');if(xmlMedia.length>0){html+='<div class="rssMedia"><div>Media files</div><ul>'
for(var m=0;m<xmlMedia.length;m++){var xmlUrl=xmlMedia[m].getAttribute("url");var xmlType=xmlMedia[m].getAttribute("type");var xmlSize=xmlMedia[m].getAttribute("length");html+='<li><a href="'+xmlUrl+'" title="Download this media">'+xmlUrl.split('/').pop()+'</a> ('+xmlType+', '+formatFilesize(xmlSize)+')</li>';}
html+='</ul></div>'}
html+='</li>';}
if(row=='odd'){row='even';}else{row='odd';}}
html+='</ul>'+'</div>'
$(e).html(html);};function formatFilesize(bytes){var s=['bytes','kb','MB','GB','TB','PB'];var e=Math.floor(Math.log(bytes)/Math.log(1024));return(bytes/Math.pow(1024,Math.floor(e))).toFixed(2)+" "+s[e];}
function getXMLDocument(string){var browser=navigator.appName;var xml;if(browser=='Microsoft Internet Explorer'){xml=new ActiveXObject('Microsoft.XMLDOM');xml.async='false'
xml.loadXML(string);}else{xml=(new DOMParser()).parseFromString(string,'text/xml');}
return xml;}})(jQuery);

/*  
* $('scrolling_item').fixed('scrolling_container');
* useFixed: Default: true - Setting this to false will instead always use relative positioning
* animate: Default: false - Setting this to true will animate the scrolling
* animTime: Default: 300 - Animation duration time
*/
;(function($,window,undefined){"use strict";var Fixed=function(elm,par,options){this.element=elm;this.parent=par;this._frozen=false;this.options=$.extend({animate:false,useFixed:true,animTime:300},options);this.init()};Fixed.prototype.init=function(){this.element.addClass("fixed-scroll");this.update()};Fixed.prototype.update=function(){this.setBoundaries();this.moveIt()};Fixed.prototype.moveIt=function(){var scrollTop=$(window).scrollTop();var height=this.element.outerHeight(true);var realStop=this._stop-height;if(this._parentHeight-this._offset>height&&!this._frozen){if(scrollTop>=this._start&&scrollTop<=realStop){if(this.options.useFixed){this.element.css({'position':'fixed','top':0,'left':this.element.offset().left})}else{this.updateOffset(scrollTop-this._start)}}else{this.element.css({'position':'relative','left':0});if(scrollTop<this._start){this.updateOffset(0)}else if(scrollTop>realStop){this.updateOffset(this._parentHeight-height-this._offset)}}}};Fixed.prototype.setBoundaries=function(){this._offset=this.element.position().top;this._start=this.parent.offset().top+this._offset;this._parentHeight=this.parent.outerHeight();this._stop=this._start+this._parentHeight-this._offset};Fixed.prototype.updateOffset=function(yOffset){if(!this._lastPosition!==yOffset){if(this.animate){this.element.stop().animate({'top':yOffset},this.animTime)}else{this.element.css('top',yOffset)}this._lastPosition=yOffset}};Fixed.prototype.toggleFreeze=function(){this._frozen=!this._frozen};$.fn.fixed=function(par,options){var method,args,ret=false;if(typeof options==="string"){args=[].slice.call(arguments,0)}this.each(function(){var self=$(this);var parent=par;if(parent){parent=self.parent().closest(parent)}else{parent=self.parent()}parent.css({'position':'relative'});self.css({'position':'relative'});var instance=self.data("fixedInstance");if(instance&&options){if(typeof options==="object"){ret=$.extend(instance.options,options)}else if(options==="options"){ret=instance.options}else if(typeof instance[options]==="function"){ret=instance[options].apply(instance,args.slice(1))}else{throw new Error("Fixed Element has no option/method named "+method);}}else{instance=new Fixed(self,parent,options||{});self.data("fixedInstance",instance);$.fn.fixed._instances.push(instance)}});return ret||this};$.fn.fixed._instances=[];$(window).on({'resize':function(e){$.each($.fn.fixed._instances,function(){this.update()})},'scroll':function(){$.each($.fn.fixed._instances,function(){if(!this._frozen){this.moveIt()}})}})}(jQuery,window));

/*  Field Plugin */
(function($){var defaults={delimiter:",",checkboxRangeKeyBinding:"shiftKey",useArray:false};$.Field={version:"0.9.6",setDefaults:function(options){$.extend(defaults,options)},setProperty:function(prop,value){defaults[prop]=value},getProperty:function(prop){return defaults[prop]}};$.fn.fieldArray=function(v){var t=$type(v);if(t=="undefined")return getValue(this);if(t=="string"||t=="number"){v=v.toString().split(defaults.delimiter);t="array"}if(t=="array")return setValue(this,v);return this};$.fn.getValue=function(){return getValue(this).join(defaults.delimiter)};var getValue=function(jq){var v=[];jq.each(function(lc){var t=getType(this);switch(t){case"checkbox":case"radio":if(this.checked)v.push(this.value);break;case"select":if(this.type=="select-one"){v.push((this.selectedIndex==-1)?"":getOptionVal(this[this.selectedIndex]))}else{for(var i=0;i<this.length;i++){if(this[i].selected){v.push(getOptionVal(this[i]))}}}break;case"text":v.push(this.value);break}});return v};$.fn.setValue=function(v){return setValue(this,((!v&&(v!==0))?[""]:v.toString().split(defaults.delimiter)))};var setValue=function(jq,v){jq.each(function(lc){var t=getType(this),x;switch(t){case"checkbox":case"radio":if(valueExists(v,this.value))this.checked=true;else this.checked=false;break;case"select":var bSelectOne=(this.type=="select-one");var bKeepLooking=true;for(var i=0;i<this.length;i++){x=getOptionVal(this[i]);bSelectItem=valueExists(v,x);if(bSelectItem){this[i].selected=true;if(bSelectOne){bKeepLooking=false;break}}else if(!bSelectOne)this[i].selected=false}if(bSelectOne&&bKeepLooking&&!!this[0]){this[0].selected=true}break;case"text":this.value=v.join(defaults.delimiter);break}});return jq};$.fn.formHash=function(map,clear){var isGet=(arguments.length==0);var hash={};this.filter("form").each(function(){var els=this.elements,el,n,fields={},$el;for(var i=0,elsMax=els.length;i<elsMax;i++){el=els[i];n=el.name;if(!n||fields[n])continue;var $el=$(el.form[n]);if(isGet){hash[n]=$el[defaults.useArray?"fieldArray":"getValue"]()}else if(n in map){$el[defaults.useArray?"fieldArray":"setValue"](map[n])}else if(clear===true){$el[defaults.useArray?"fieldArray":"setValue"]("")}fields[n]=true}});return(isGet)?hash:this};$.fn.fieldHash=function(map,clear){var isGet=!(map&&typeof map=="object");var hash={},fields={};this.filter(":input").each(function(){var el=this,n=el.name;if(!n||fields[n])return;var $el=$(el.form[n]);if(isGet){hash[n]=$el[defaults.useArray?"fieldArray":"getValue"]()}else if(n in map){$el[defaults.useArray?"fieldArray":"setValue"](map[n])}else if(clear===true){$el[defaults.useArray?"fieldArray":"setValue"]("")}fields[n]=true});return(isGet)?hash:this};$.fn.autoAdvance=function(callback){return this.find(":text,:password,textarea").bind("keyup.autoAdvance",function(e){var $field=$(this),iMaxLength=parseInt($field.attr("maxlength"),10);if(isNaN(iMaxLength)||("|9|16|37|38|39|40|".indexOf("|"+e.keyCode+"|")>-1))return true;if($field.getValue().length>=$field.attr("maxlength")){var $next=$field.moveNext().select();if($.isFunction(callback))callback.apply($field,[$next])}})};$.fn.moveNext=function(){return this.moveIndex("next")};$.fn.movePrev=function(){return this.moveIndex("prev")};$.fn.moveIndex=function(i){var pos=getFieldPosition(this);if(i=="next")i=pos[0]+1;else if(i=="prev")i=pos[0]-1;if(i<0)i=pos[1].length-1;else if(i>=pos[1].length)i=0;return $(pos[1][i]).trigger("focus")};$.fn.getTabIndex=function(){return getFieldPosition(this)[0]};var getFieldPosition=function(jq){var $field=jq.filter("input, select, textarea").get(0),tabIndex=[],posIndex=[];if(!$field)return[-1,[]];$.each($field.form.elements,function(i,o){if(o.tagName!="FIELDSET"&&!o.disabled&&jQuery(o).is(":visible")){if(o.tabIndex>0){tabIndex.push(o)}else{posIndex.push(o)}}});tabIndex.sort(function(a,b){return a.tabIndex-b.tabIndex});tabIndex=$.merge(tabIndex,posIndex);for(var i=0;i<tabIndex.length;i++){if(tabIndex[i]==$field)return[i,tabIndex]}return[-1,tabIndex]};$.fn.limitSelection=function(limit,options){var opt=jQuery.extend((limit&&limit.constructor==Object?limit:{limit:limit,onsuccess:function(limit){return true},onfailure:function(limit){alert("You can only select a maximum a of "+limit+" items.");return false}}),options);var self=this;var getCount=function(el){if(el.type=="select-multiple")return $("option:selected",self).length;else if(el.type=="checkbox")return self.filter(":checked").length;return 0};var undoSelect=function(){setValue(self,getValue(self).slice(0,opt.limit));return opt.onfailure.apply(self,[opt.limit])};return this.bind((!!self[0]&&self[0].type=="select-multiple")?"change.limitSelection":"click.limitSelection",function(){if(getCount(this)>opt.limit){return(this.type=="select-multiple")?undoSelect():opt.onfailure.apply(self,[opt.limit])}opt.onsuccess.apply(self,[opt.limit]);return true})};$.fn.createCheckboxRange=function(callback){var opt=jQuery.extend((callback&&callback.constructor==Object?callback:{bind:defaults.checkboxRangeKeyBinding,click:callback}),callback);var iLastSelection=0,self=this,bCallback=$.isFunction(opt.click);if(bCallback)this.each(function(){opt.click.apply(this,[$.event.fix({type:null}),$(this).is(":checked")])});return this.each(function(){if(this.type!="checkbox")return false;var el=this;var updateLastCheckbox=function(e){iLastSelection=self.index(e.target)};var checkboxClicked=function(e){var bSetChecked=this.checked,current=self.index(e.target),low=Math.min(iLastSelection,current),high=Math.max(iLastSelection+1,current);if(bCallback)opt.click.apply(this,[e,bSetChecked]);if(!e[opt.bind])return;for(var i=low;i<high;i++){var item=self.eq(i).attr("checked",bSetChecked).trigger("change");if(bCallback)opt.click.apply(item[0],[e,bSetChecked])}return true};$(this).unbind("click.createCheckboxRange").bind("click.createCheckboxRange",checkboxClicked).bind("click.createCheckboxRange",updateLastCheckbox);return true})};var getType=function(el){var t=el.type;switch(t){case"select":case"select-one":case"select-multiple":t="select";break;case"text":case"hidden":case"textarea":case"password":case"button":case"submit":case"submit":case"file":t="text";break;case"checkbox":case"radio":t=t;break}return t};var getOptionVal=function(el){return el.value||((el.attributes&&el.attributes['value']&&!(el.attributes['value'].specified))?el.text:null)||""};var valueExists=function(a,v){return($.inArray(v,a)>-1)};var $type=function(o){var t=(typeof o).toLowerCase();if(t=="object"){if(o instanceof Array)t="array";else if(o instanceof Date)t="date"}return t};var $isType=function(o,v){return($type(o)==String(v).toLowerCase())}})(jQuery);

// GET CURSOR POSITION
jQuery.fn.getCursorPosition=function(){if(this.lengh==0)return-1;return $(this).getSelectionStart()};
jQuery.fn.getSelectionStart=function(){if(this.lengh==0)return-1;input=this[0];var e=input.value.length;if(input.createTextRange){var t=document.selection.createRange().duplicate();t.moveEnd("character",input.value.length);if(t.text=="")e=input.value.length;e=input.value.lastIndexOf(t.text)}else if(typeof input.selectionStart!="undefined")e=input.selectionStart;return e};
jQuery.fn.setCursorPosition=function(e){this.each(function(t,n){if(n.setSelectionRange){n.setSelectionRange(e,e)}else if(n.createTextRange){var r=n.createTextRange();r.collapse(true);r.moveEnd("character",e);r.moveStart("character",e);r.select()}});return this};

/* dForm - clqform.js */
;(function(e){var t={},n={},r=e.each,i=function(t){var n=function(r,i,s){if(typeof r==="object"){e.each(r,function(e,t){n(e,t,s)})}else if(s===undefined||s===true){if(!t[r]){t[r]=[]}t[r].push(i)}};return n},s=e.isArray,o=function(t){return e.map(t,function(e,t){return t})},u=function(e,t){var n={};r(t,function(t,r){if(e[r]){n[r]=e[r]}});return n},a=function(t,n){var i={};r(t,function(t,r){if(!~e.inArray(t,n)){i[t]=r}});return i},f=function(n,i,s){if(e.clqform.hasSubscription(n)){this.each(function(){var o=e(this);r(t[n],function(e,t){t.call(o,i,s)})})}return this},l=function(e){var t=e.type,n=this;this.clqform("run","[pre]",e,t);r(e,function(e,r){n.clqform("run",e,r,t)});this.clqform("run","[post]",e,t);return this};e.extend(e,{keyset:o,withKeys:u,withoutKeys:a,clqform:{options:{prefix:"ui-clqform-"},defaultType:function(t){return e("<"+t.type+">").clqform("attr",t)},types:function(e){return e?n[e]:n},addType:i(n),subscribers:function(e){return e?t[e]:t},subscribe:i(t),hasSubscription:function(e){return t[e]?true:false},createElement:function(t){if(!t.type){throw"No element type given! Must always exist."}var i=t.type,s=null,o=e.withoutKeys(t,["type"]);if(n[i]){r(n[i],function(e,t){s=t.call(s,o)})}else{s=e.clqform.defaultType(t)}return e(s)},methods:{run:function(e,t,n){if(typeof e!=="string"){return l.call(this,e)}return f.call(this,e,t,n)},append:function(t,n){if(n&&e.clqform.converters&&e.isFunction(e.clqform.converters[n])){t=e.clqform.converters[n](t)}var r=e.clqform.createElement(t);this.append(r);r.clqform("run",t)},attr:function(n,r){var i=e.keyset(t);s(r)&&e.merge(i,r);this.attr(e.withoutKeys(n,i))},ajax:function(t,n,r){var i={error:r,url:t},s=this;if(typeof t!=="string"){e.extend(i,t)}i.success=function(e){var r=n||t.success;s.clqform(e);if(r){r.call(s,e)}};e.ajax(i)},init:function(t,n){var r=t.type?t:e.extend({type:"form"},t);if(n&&e.clqform.converters&&e.isFunction(e.clqform.converters[n])){r=e.clqform.converters[n](r)}if(this.is(r.type)){this.clqform("attr",r);this.clqform("run",r)}else{this.clqform("append",r)}}}}});e.fn.clqform=function(t,n,r){var i=e(this);if(e.clqform.methods[t]){e.clqform.methods[t].apply(i,Array.prototype.slice.call(arguments,1))}else{if(typeof t==="string"){e.clqform.methods.ajax.call(i,{url:t,dataType:"json"},n,r)}else{e.clqform.methods.init.apply(i,arguments)}}return this}})(jQuery);(function(e){var t=e.each,n=function(t,n){return function(r){return e(t).clqform("attr",r,n)}},r=function(n,r){var i=this;if(e.isPlainObject(n)){i.clqform("append",n)}else if(e.isArray(n)){t(n,function(e,t){i.clqform("append",t)})}else{i.html(n)}};
	e.clqform.addType({container:n("<div>"), date:n('<input type="date" />'), text:n('<input type="text" />'),password:n('<input type="password" />'),submit:n('<input type="submit" />'),reset:n('<input type="reset" />'),hidden:n('<input type="hidden" />'),radio:n('<input type="radio" />'),checkbox:n('<input type="checkbox" />'),file:n('<input type="file" />'),number:n('<input type="number" />'),url:n('<input type="url" />'),tel:n('<input type="tel" />'),email:n('<input type="email" />'),checkboxes:n("<div>",["name"]),radiobuttons:n("<div>",["name"])});
	e.clqform.subscribe({"class":function(e,t){this.addClass(e)},html:r,elements:r,value:function(e){this.val(e)},css:function(e){this.css(e)},options:function(n,r){var i=this;if((r==="select"||r==="optgroup")&&typeof n!=="string"){t(n,function(t,n){var r={type:"option",value:t};if(typeof n==="string"){r.html=n}if(typeof n==="object"){r=e.extend(r,n)}i.clqform("append",r)})}else if(r==="checkboxes"||r==="radiobuttons"){t(n,function(t,n){var s=r==="radiobuttons"?{type:"radio"}:{type:"checkbox"};if(typeof n==="string"){s["caption"]=n}else{e.extend(s,n)}s["value"]=t;i.clqform("append",s)})}},caption:function(t,n){var r={};if(typeof t==="string"){r["html"]=t}else{e.extend(r,t)}if(n=="fieldset"){r.type="legend";this.clqform("append",r)}else{r.type="label";if(this.attr("id")){r["for"]=this.attr("id")}var i=e(e.clqform.createElement(r));if(n==="checkbox"||n==="radio"){this.parent().append(e(i))}else{i.insertBefore(this)}i.clqform("run",r)}},type:function(t,n){if(e.clqform.options.prefix){this.addClass(e.clqform.options.prefix+n)}},url:function(e){this.clqform("ajax",e)},"[post]":function(t,n){if(n==="checkboxes"||n==="radiobuttons"){var r=n==="checkboxes"?"checkbox":"radio";this.children("[type="+r+"]").each(function(){e(this).attr("name",t.name)})}}})})(jQuery);(function(e){var t=function(t,n){return e.withKeys(n,e.keyset(e.ui[t]["prototype"]["options"]))},n=function(e,t){for(var n=t,r=0;r<e.length;r++){n=n[e[r]];if(!n){return null}}return n};e.clqform.addType("progressbar",function(n){return e("<div>").clqform("attr",n).progressbar(t("progressbar",n))},e.isFunction(e.fn.progressbar));e.clqform.addType("slider",function(n){return e("<div>").clqform("attr",n).slider(t("slider",n))},e.isFunction(e.fn.slider));e.clqform.addType("accordion",function(t){return e("<div>").clqform("attr",t)},e.isFunction(e.fn.accordion));e.clqform.addType("tabs",function(t){return e("<div>").clqform("attr",t)},e.isFunction(e.fn.tabs));e.clqform.subscribe("entries",function(t,n){if(n=="accordion"){var r=this;e.each(t,function(t,n){var i=e.extend({type:"div"},n);e(r).clqform("append",i);if(n.caption){var s=e(r).children("div:last").prev();s.replaceWith('<h3><a href="#">'+s.html()+"</a></h3>")}})}},e.isFunction(e.fn.accordion));e.clqform.subscribe("entries",function(t,n){if(n=="tabs"){var r=this;this.append("<ul>");var i=e(r).children("ul:first");e.each(t,function(t,n){var s=n.id?n.id:t;e.extend(n,{type:"container",id:s});e(r).clqform("append",n);var o=e(r).children("div:last").prev();e(o).wrapInner(e("<a>").attr("href","#"+s));e(i).append(e("<li>").wrapInner(o))})}},e.isFunction(e.fn.tabs));e.clqform.subscribe("dialog",function(e){this.dialog(e)},e.isFunction(e.fn.dialog));e.clqform.subscribe("resizable",function(e){this.resizable(e)},e.isFunction(e.fn.resizable));e.clqform.subscribe("datepicker",function(e,t){if(t=="text"){this.datepicker(e)}},e.isFunction(e.fn.datepicker));e.clqform.subscribe("autocomplete",function(e,t){if(t=="text"){this.autocomplete(e)}},e.isFunction(e.fn.autocomplete));e.clqform.subscribe("[post]",function(n,r){if(this.parents("form").hasClass("ui-widget")){if((r==="button"||r==="submit")&&e.isFunction(e.fn.button)){this.button()}if(!!~e.inArray(r,["text","textarea","password","fieldset"])){this.addClass("ui-widget-content ui-corner-all")}}if(r==="accordion"||r==="tabs"){this[r](t(r,n))}});e.clqform.subscribe("[pre]",function(t,n){if(n=="form"){var r={};if(this.hasClass("ui-widget")){r={highlight:function(t){e(t).addClass("ui-state-highlight")},unhighlight:function(t){e(t).removeClass("ui-state-highlight")}}}if(typeof t.validate=="object"){e.extend(r,t.validate)}this.validate(r)}},e.isFunction(e.fn.validate));e.clqform.subscribe("validate",function(e,t){if(t!="form"){this.rules("add",e)}},e.isFunction(e.fn.validate));e.clqform.subscribe("ajax",function(e,t){if(t==="form"){this.ajaxForm(e)}},e.isFunction(e.fn.ajaxForm));e.clqform.subscribe("html",function(t,r){if(typeof t==="string"){var i=t.split("."),s=Globalize.localize(i.shift());if(s=n(i,s)){e(this).html(s)}}},typeof Globalize!=="undefined"&&e.isFunction(Globalize.localize));e.clqform.subscribe("options",function(t,r){if(r==="select"&&typeof t==="string"){e(this).html("");var i=t.split("."),s=Globalize.localize(i.shift());if(s=n(i,s)){e(this).clqform("run","options",s,r)}}},typeof Globalize!=="undefined"&&e.isFunction(Globalize.localize))})(jQuery);
$.clqform.addType("button", function(options) { return $('<button type=\'button\' />').clqform('attr', options).html(options.txt);});
$.clqform.addType('textarea', function(options) { return $('<textarea />').clqform('attr', options).html(options.txt);});
$.clqform.addType('span', function(options) { return $('<span />').clqform('attr', options).html(options.txt);});
$.clqform.addType('cfs', function() {return '</fieldset>'; });
$.clqform.addType('image', function(options) { return $('<input type="text" /><i class="fa fa-picture-o" style="cursor:pointer;"></i>').clqform('attr', options); });
$.clqform.addType('yesno', function() {return '<input type="radio" class="clqform-radio" value="y" id="clq_y"/><label for="clq_y">Yes</label><input type="radio" class="clqform-radio" id="clq_n" /><label for="clq_n">No</label>'; });

/* Copyright (c) 2010-2013 Marcus Westin store.js with json support = localstorage database */
this.JSON||(this.JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)r=rep[n],typeof r=="string"&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){function s(){try{return r in e&&e[r]}catch(t){return!1}}var t={},n=e.document,r="localStorage",i;t.disabled=!1,t.set=function(e,t){},t.get=function(e){},t.remove=function(e){},t.clear=function(){},t.transact=function(e,n,r){var i=t.get(e);r==null&&(r=n,n=null),typeof i=="undefined"&&(i=n||{}),r(i),t.set(e,i)},t.getAll=function(){},t.forEach=function(){},t.serialize=function(e){return JSON.stringify(e)},t.deserialize=function(e){if(typeof e!="string")return undefined;try{return JSON.parse(e)}catch(t){return e||undefined}};if(s())i=e[r],t.set=function(e,n){return n===undefined?t.remove(e):(i.setItem(e,t.serialize(n)),n)},t.get=function(e){return t.deserialize(i.getItem(e))},t.remove=function(e){i.removeItem(e)},t.clear=function(){i.clear()},t.getAll=function(){var e={};return t.forEach(function(t,n){e[t]=n}),e},t.forEach=function(e){for(var n=0;n<i.length;n++){var r=i.key(n);e(r,t.get(r))}};else if(n.documentElement.addBehavior){var o,u;try{u=new ActiveXObject("htmlfile"),u.open(),u.write('<script>document.w=window</script><iframe src="/favicon.ico"></iframe>'),u.close(),o=u.w.frames[0].document,i=o.createElement("div")}catch(a){i=n.createElement("div"),o=n.body}function f(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(i),o.appendChild(i),i.addBehavior("#default#userData"),i.load(r);var s=e.apply(t,n);return o.removeChild(i),s}}var l=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function c(e){return e.replace(l,"___")}t.set=f(function(e,n,i){return n=c(n),i===undefined?t.remove(n):(e.setAttribute(n,t.serialize(i)),e.save(r),i)}),t.get=f(function(e,n){return n=c(n),t.deserialize(e.getAttribute(n))}),t.remove=f(function(e,t){t=c(t),e.removeAttribute(t),e.save(r)}),t.clear=f(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var n=0,i;i=t[n];n++)e.removeAttribute(i.name);e.save(r)}),t.getAll=function(e){var n={};return t.forEach(function(e,t){n[e]=t}),n},t.forEach=f(function(e,n){var r=e.XMLDocument.documentElement.attributes;for(var i=0,s;s=r[i];++i)n(s.name,t.deserialize(e.getAttribute(s.name)))})}try{var h="__storejs__";t.set(h,h),t.get(h)!=h&&(t.disabled=!0),t.remove(h)}catch(a){t.disabled=!0}t.enabled=!t.disabled,typeof module!="undefined"&&module.exports?module.exports=t:typeof define=="function"&&define.amd?define(t):e.store=t}(this.window||global);

/*! jQuery JSON plugin 2.4.0 | code.google.com/p/jquery-json */
(function($){'use strict';var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},hasOwn=Object.prototype.hasOwnProperty;$.toJSON=typeof JSON==='object'&&JSON.stringify?JSON.stringify:function(o){if(o===null){return'null';}
var pairs,k,name,val,type=$.type(o);if(type==='undefined'){return undefined;}
if(type==='number'||type==='boolean'){return String(o);}
if(type==='string'){return $.quoteString(o);}
if(typeof o.toJSON==='function'){return $.toJSON(o.toJSON());}
if(type==='date'){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month='0'+month;}
if(day<10){day='0'+day;}
if(hours<10){hours='0'+hours;}
if(minutes<10){minutes='0'+minutes;}
if(seconds<10){seconds='0'+seconds;}
if(milli<100){milli='0'+milli;}
if(milli<10){milli='0'+milli;}
return'"'+year+'-'+month+'-'+day+'T'+
hours+':'+minutes+':'+seconds+'.'+milli+'Z"';}
pairs=[];if($.isArray(o)){for(k=0;k<o.length;k++){pairs.push($.toJSON(o[k])||'null');}
return'['+pairs.join(',')+']';}
if(typeof o==='object'){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==='number'){name='"'+k+'"';}else if(type==='string'){name=$.quoteString(k);}else{continue;}
type=typeof o[k];if(type!=='function'&&type!=='undefined'){val=$.toJSON(o[k]);pairs.push(name+':'+val);}}}
return'{'+pairs.join(',')+'}';}};$.evalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(str){return eval('('+str+')');};$.secureEvalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered)){return eval('('+str+')');}
throw new SyntaxError('Error parsing JSON, source is not valid.');};$.quoteString=function(str){if(str.match(escape)){return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==='string'){return c;}
c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}
return'"'+str+'"';};}(jQuery));

/*! Parsleyjs Guillaume Potier - <guillaume@wisembly.com> Version 2.0.2 - built Tue Jun 17 2014 15:26:34 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(){var a={attr:function(a,b,c){var d,e={},f=this.msieversion(),g=new RegExp("^"+b,"i");if("undefined"==typeof a||"undefined"==typeof a[0])return{};for(var h in a[0].attributes)if(d=a[0].attributes[h],"undefined"!=typeof d&&null!==d&&(!f||f>=8||d.specified)&&g.test(d.name)){if("undefined"!=typeof c&&new RegExp(c+"$","i").test(d.name))return!0;e[this.camelize(d.name.replace(b,""))]=this.deserializeValue(d.value)}return"undefined"==typeof c?e:!1},setAttr:function(a,b,c,d){a[0].setAttribute(this.dasherize(b+c),String(d))},get:function(a,b){for(var c=0,d=(b||"").split(".");this.isObject(a)||this.isArray(a);)if(a=a[d[c++]],c===d.length)return a;return void 0},hash:function(a){return String(Math.random()).substring(2,a?a+2:9)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return a===Object(a)},deserializeValue:function(a){var b;try{return a?"true"==a||("false"==a?!1:"null"==a?null:isNaN(b=Number(a))?/^[\[\{]/.test(a)?$.parseJSON(a):a:b):a}catch(c){return a}},camelize:function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},dasherize:function(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},msieversion:function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");return b>0||navigator.userAgent.match(/Trident.*rv\:11\./)?parseInt(a.substring(b+5,a.indexOf(".",b)),10):0}},b={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"},c=function(){};c.prototype={asyncSupport:!1,actualizeOptions:function(){return this.options=this.OptionsFactory.get(this),this},validateThroughValidator:function(a,b,c){return window.ParsleyValidator.validate.apply(window.ParsleyValidator,[a,b,c])},subscribe:function(a,b){return $.listenTo(this,a.toLowerCase(),b),this},unsubscribe:function(a){return $.unsubscribeTo(this,a.toLowerCase()),this},reset:function(){if("ParsleyForm"!==this.__class__)return $.emit("parsley:field:reset",this);for(var a=0;a<this.fields.length;a++)$.emit("parsley:field:reset",this.fields[a]);$.emit("parsley:form:reset",this)},destroy:function(){if("ParsleyForm"!==this.__class__)return this.$element.removeData("Parsley"),this.$element.removeData("ParsleyFieldMultiple"),void $.emit("parsley:field:destroy",this);for(var a=0;a<this.fields.length;a++)this.fields[a].destroy();this.$element.removeData("Parsley"),$.emit("parsley:form:destroy",this)}},function(a){var b=function(a){return this.__class__="Validator",this.__version__="0.5.8",this.options=a||{},this.bindingKey=this.options.bindingKey||"_validatorjsConstraint",this};b.prototype={constructor:b,validate:function(a,b,c){if("string"!=typeof a&&"object"!=typeof a)throw new Error("You must validate an object or a string");return"string"==typeof a||g(a)?this._validateString(a,b,c):this.isBinded(a)?this._validateBindedObject(a,b):this._validateObject(a,b,c)},bind:function(a,b){if("object"!=typeof a)throw new Error("Must bind a Constraint to an object");return a[this.bindingKey]=new c(b),this},unbind:function(a){return"undefined"==typeof a._validatorjsConstraint?this:(delete a[this.bindingKey],this)},isBinded:function(a){return"undefined"!=typeof a[this.bindingKey]},getBinded:function(a){return this.isBinded(a)?a[this.bindingKey]:null},_validateString:function(a,b,c){var f,h=[];g(b)||(b=[b]);for(var i=0;i<b.length;i++){if(!(b[i]instanceof e))throw new Error("You must give an Assert or an Asserts array to validate a string");f=b[i].check(a,c),f instanceof d&&h.push(f)}return h.length?h:!0},_validateObject:function(a,b,d){if("object"!=typeof b)throw new Error("You must give a constraint to validate an object");return b instanceof c?b.check(a,d):new c(b).check(a,d)},_validateBindedObject:function(a,b){return a[this.bindingKey].check(a,b)}},b.errorCode={must_be_a_string:"must_be_a_string",must_be_an_array:"must_be_an_array",must_be_a_number:"must_be_a_number",must_be_a_string_or_array:"must_be_a_string_or_array"};var c=function(a,b){if(this.__class__="Constraint",this.options=b||{},this.nodes={},a)try{this._bootstrap(a)}catch(c){throw new Error("Should give a valid mapping object to Constraint",c,a)}return this};c.prototype={constructor:c,check:function(a,b){var c,d={};for(var h in this.options.strict?this.nodes:a)if(this.options.strict?this.has(h,a):this.has(h))c=this._check(h,a[h],b),(g(c)&&c.length>0||!g(c)&&!f(c))&&(d[h]=c);else if(this.options.strict)try{(new e).HaveProperty(h).validate(a)}catch(i){d[h]=i}return f(d)?!0:d},add:function(a,b){if(b instanceof e||g(b)&&b[0]instanceof e)return this.nodes[a]=b,this;if("object"==typeof b&&!g(b))return this.nodes[a]=b instanceof c?b:new c(b),this;throw new Error("Should give an Assert, an Asserts array, a Constraint",b)},has:function(a,b){return b="undefined"!=typeof b?b:this.nodes,"undefined"!=typeof b[a]},get:function(a,b){return this.has(a)?this.nodes[a]:b||null},remove:function(a){var b=[];for(var c in this.nodes)c!==a&&(b[c]=this.nodes[c]);return this.nodes=b,this},_bootstrap:function(a){if(a instanceof c)return this.nodes=a.nodes;for(var b in a)this.add(b,a[b])},_check:function(a,b,d){if(this.nodes[a]instanceof e)return this._checkAsserts(b,[this.nodes[a]],d);if(g(this.nodes[a]))return this._checkAsserts(b,this.nodes[a],d);if(this.nodes[a]instanceof c)return this.nodes[a].check(b,d);throw new Error("Invalid node",this.nodes[a])},_checkAsserts:function(a,b,c){for(var d,e=[],f=0;f<b.length;f++)d=b[f].check(a,c),"undefined"!=typeof d&&!0!==d&&e.push(d);return e}};var d=function(a,b,c){if(this.__class__="Violation",!(a instanceof e))throw new Error("Should give an assertion implementing the Assert interface");this.assert=a,this.value=b,"undefined"!=typeof c&&(this.violation=c)};d.prototype={show:function(){var a={assert:this.assert.__class__,value:this.value};return this.violation&&(a.violation=this.violation),a},__toString:function(){return"undefined"!=typeof this.violation&&(this.violation='", '+this.getViolation().constraint+" expected was "+this.getViolation().expected),this.assert.__class__+' assert failed for "'+this.value+this.violation||""},getViolation:function(){var a,b;for(a in this.violation)b=this.violation[a];return{constraint:a,expected:b}}};var e=function(a){return this.__class__="Assert",this.__parentClass__=this.__class__,this.groups=[],"undefined"!=typeof a&&this.addGroup(a),this};e.prototype={construct:e,check:function(a,b){if(!(b&&!this.hasGroup(b)||!b&&this.hasGroups()))try{return this.validate(a,b)}catch(c){return c}},hasGroup:function(a){return g(a)?this.hasOneOf(a):"Any"===a?!0:this.hasGroups()?-1!==this.groups.indexOf(a):"Default"===a},hasOneOf:function(a){for(var b=0;b<a.length;b++)if(this.hasGroup(a[b]))return!0;return!1},hasGroups:function(){return this.groups.length>0},addGroup:function(a){return g(a)?this.addGroups(a):(this.hasGroup(a)||this.groups.push(a),this)},removeGroup:function(a){for(var b=[],c=0;c<this.groups.length;c++)a!==this.groups[c]&&b.push(this.groups[c]);return this.groups=b,this},addGroups:function(a){for(var b=0;b<a.length;b++)this.addGroup(a[b]);return this},HaveProperty:function(a){return this.__class__="HaveProperty",this.node=a,this.validate=function(a){if("undefined"==typeof a[this.node])throw new d(this,a,{value:this.node});return!0},this},Blank:function(){return this.__class__="Blank",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(""!==a.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,a);return!0},this},Callback:function(a){if(this.__class__="Callback",this.arguments=Array.prototype.slice.call(arguments),1===this.arguments.length?this.arguments=[]:this.arguments.splice(0,1),"function"!=typeof a)throw new Error("Callback must be instanciated with a function");return this.fn=a,this.validate=function(a){var b=this.fn.apply(this,[a].concat(this.arguments));if(!0!==b)throw new d(this,a,{result:b});return!0},this},Choice:function(a){if(this.__class__="Choice",!g(a)&&"function"!=typeof a)throw new Error("Choice must be instanciated with an array or a function");return this.list=a,this.validate=function(a){for(var b="function"==typeof this.list?this.list():this.list,c=0;c<b.length;c++)if(a===b[c])return!0;throw new d(this,a,{choices:b})},this},Collection:function(a){return this.__class__="Collection",this.constraint="undefined"!=typeof a?new c(a):!1,this.validate=function(a,c){var e,h=new b,i=0,j={},k=this.groups.length?this.groups:c;if(!g(a))throw new d(this,array,{value:b.errorCode.must_be_an_array});for(var l=0;l<a.length;l++)e=this.constraint?h.validate(a[l],this.constraint,k):h.validate(a[l],k),f(e)||(j[i]=e),i++;return f(j)?!0:j},this},Count:function(a){return this.__class__="Count",this.count=a,this.validate=function(a){if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});var c="function"==typeof this.count?this.count(a):this.count;if(isNaN(Number(c)))throw new Error("Count must be a valid interger",c);if(c!==a.length)throw new d(this,a,{count:c});return!0},this},Email:function(){return this.__class__="Email",this.validate=function(a){var c=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!c.test(a))throw new d(this,a);return!0},this},Eql:function(a){if(this.__class__="Eql","undefined"==typeof a)throw new Error("Equal must be instanciated with an Array or an Object");return this.eql=a,this.validate=function(a){var b="function"==typeof this.eql?this.eql(a):this.eql;if(!h.eql(b,a))throw new d(this,a,{eql:b});return!0},this},EqualTo:function(a){if(this.__class__="EqualTo","undefined"==typeof a)throw new Error("EqualTo must be instanciated with a value or a function");return this.reference=a,this.validate=function(a){var b="function"==typeof this.reference?this.reference(a):this.reference;if(b!==a)throw new d(this,a,{value:b});return!0},this},GreaterThan:function(a){if(this.__class__="GreaterThan","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold>=a)throw new d(this,a,{threshold:this.threshold});return!0},this},GreaterThanOrEqual:function(a){if(this.__class__="GreaterThanOrEqual","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold>a)throw new d(this,a,{threshold:this.threshold});return!0},this},InstanceOf:function(a){if(this.__class__="InstanceOf","undefined"==typeof a)throw new Error("InstanceOf must be instanciated with a value");return this.classRef=a,this.validate=function(a){if(!0!=a instanceof this.classRef)throw new d(this,a,{classRef:this.classRef});return!0},this},IPv4:function(){return this.__class__="IPv4",this.validate=function(a){var c=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!c.test(a))throw new d(this,a);return!0},this},Length:function(a){if(this.__class__="Length",!a.min&&!a.max)throw new Error("Lenth assert must be instanciated with a { min: x, max: y } object");return this.min=a.min,this.max=a.max,this.validate=function(a){if("string"!=typeof a&&!g(a))throw new d(this,a,{value:b.errorCode.must_be_a_string_or_array});if("undefined"!=typeof this.min&&this.min===this.max&&a.length!==this.min)throw new d(this,a,{min:this.min,max:this.max});if("undefined"!=typeof this.max&&a.length>this.max)throw new d(this,a,{max:this.max});if("undefined"!=typeof this.min&&a.length<this.min)throw new d(this,a,{min:this.min});return!0},this},LessThan:function(a){if(this.__class__="LessThan","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold<=a)throw new d(this,a,{threshold:this.threshold});return!0},this},LessThanOrEqual:function(a){if(this.__class__="LessThanOrEqual","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold<a)throw new d(this,a,{threshold:this.threshold});return!0},this},Mac:function(){return this.__class__="Mac",this.validate=function(a){var c=/^(?:[0-9A-F]{2}:){5}[0-9A-F]{2}$/i;if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!c.test(a))throw new d(this,a);return!0},this},NotNull:function(){return this.__class__="NotNull",this.validate=function(a){if(null===a||"undefined"==typeof a)throw new d(this,a);return!0},this},NotBlank:function(){return this.__class__="NotBlank",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(""===a.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,a);return!0},this},Null:function(){return this.__class__="Null",this.validate=function(a){if(null!==a)throw new d(this,a);return!0},this},Range:function(a,b){if(this.__class__="Range","undefined"==typeof a||"undefined"==typeof b)throw new Error("Range assert expects min and max values");return this.min=a,this.max=b,this.validate=function(a){try{return"string"==typeof a&&isNaN(Number(a))||g(a)?(new e).Length({min:this.min,max:this.max}).validate(a):(new e).GreaterThanOrEqual(this.min).validate(a)&&(new e).LessThanOrEqual(this.max).validate(a),!0}catch(b){throw new d(this,a,b.violation)}return!0},this},Regexp:function(a,c){if(this.__class__="Regexp","undefined"==typeof a)throw new Error("You must give a regexp");return this.regexp=a,this.flag=c||"",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!new RegExp(this.regexp,this.flag).test(a))throw new d(this,a,{regexp:this.regexp,flag:this.flag});return!0},this},Required:function(){return this.__class__="Required",this.validate=function(a){if("undefined"==typeof a)throw new d(this,a);try{"string"==typeof a?(new e).NotNull().validate(a)&&(new e).NotBlank().validate(a):!0===g(a)&&(new e).Length({min:1}).validate(a)}catch(b){throw new d(this,a)}return!0},this},Unique:function(a){return this.__class__="Unique","object"==typeof a&&(this.key=a.key),this.validate=function(a){var c,e=[];if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});for(var f=0;f<a.length;f++)if(c="object"==typeof a[f]?a[f][this.key]:a[f],"undefined"!=typeof c){if(-1!==e.indexOf(c))throw new d(this,a,{value:c});e.push(c)}return!0},this}},a.Assert=e,a.Validator=b,a.Violation=d,a.Constraint=c,Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1});var f=function(a){for(var b in a)return!1;return!0},g=function(a){return"[object Array]"===Object.prototype.toString.call(a)},h={eql:function(a,b){if(a===b)return!0;if("undefined"!=typeof Buffer&&Buffer.isBuffer(a)&&Buffer.isBuffer(b)){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return a instanceof Date&&b instanceof Date?a.getTime()===b.getTime():"object"!=typeof a&&"object"!=typeof b?a==b:this.objEquiv(a,b)},isUndefinedOrNull:function(a){return null===a||"undefined"==typeof a},isArguments:function(a){return"[object Arguments]"==Object.prototype.toString.call(a)},keys:function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},objEquiv:function(a,b){if(this.isUndefinedOrNull(a)||this.isUndefinedOrNull(b))return!1;if(a.prototype!==b.prototype)return!1;if(this.isArguments(a))return this.isArguments(b)?eql(pSlice.call(a),pSlice.call(b)):!1;try{var c,d,e=this.keys(a),f=this.keys(b);if(e.length!==f.length)return!1;for(e.sort(),f.sort(),d=e.length-1;d>=0;d--)if(e[d]!=f[d])return!1;for(d=e.length-1;d>=0;d--)if(c=e[d],!this.eql(a[c],b[c]))return!1;return!0}catch(g){return!1}}};"function"==typeof define&&define.amd&&define("validator",[],function(){return a})}("undefined"==typeof exports?this["undefined"!=typeof validatorjs_ns?validatorjs_ns:"Validator"]={}:exports);var d=function(a,b){this.__class__="ParsleyValidator",this.Validator=Validator,this.locale="en",this.init(a||{},b||{})};d.prototype={init:function(a,b){this.catalog=b;for(var c in a)this.addValidator(c,a[c].fn,a[c].priority,a[c].requirementsTransformer);$.emit("parsley:validator:init")},setLocale:function(a){if("undefined"==typeof this.catalog[a])throw new Error(a+" is not available in the catalog");return this.locale=a,this},addCatalog:function(a,b,c){return"object"==typeof b&&(this.catalog[a]=b),!0===c?this.setLocale(a):this},addMessage:function(a,b,c){return void 0===typeof this.catalog[a]&&(this.catalog[a]={}),this.catalog[a][b.toLowerCase()]=c,this},validate:function(){return(new this.Validator.Validator).validate.apply(new Validator.Validator,arguments)},addValidator:function(a,b,c,d){return this.validators[a.toLowerCase()]=function(a){return $.extend((new Validator.Assert).Callback(b,a),{priority:c,requirementsTransformer:d})},this},updateValidator:function(a,b,c,d){return this.addValidator(a,b,c,d)},removeValidator:function(a){return delete this.validators[a],this},getErrorMessage:function(a){var b;return b="type"===a.name?this.catalog[this.locale][a.name][a.requirements]:this.formatMessage(this.catalog[this.locale][a.name],a.requirements),""!==b?b:this.catalog[this.locale].defaultMessage},formatMessage:function(a,b){if("object"==typeof b){for(var c in b)a=this.formatMessage(a,b[c]);return a}return"string"==typeof a?a.replace(new RegExp("%s","i"),b):""},validators:{notblank:function(){return $.extend((new Validator.Assert).NotBlank(),{priority:2})},required:function(){return $.extend((new Validator.Assert).Required(),{priority:512})},type:function(a){var b;switch(a){case"email":b=(new Validator.Assert).Email();break;case"range":case"number":b=(new Validator.Assert).Regexp("^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$");break;case"integer":b=(new Validator.Assert).Regexp("^-?\\d+$");break;case"digits":b=(new Validator.Assert).Regexp("^\\d+$");break;case"alphanum":b=(new Validator.Assert).Regexp("^\\w+$","i");break;case"url":b=(new Validator.Assert).Regexp("(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)","i");break;default:throw new Error("validator type `"+a+"` is not supported")}return $.extend(b,{priority:256})},pattern:function(a){var b="";return/^\/.*\/(?:[gimy]*)$/.test(a)&&(b=a.replace(/.*\/([gimy]*)$/,"$1"),a=a.replace(new RegExp("^/(.*?)/"+b+"$"),"$1")),$.extend((new Validator.Assert).Regexp(a,b),{priority:64})},minlength:function(a){return $.extend((new Validator.Assert).Length({min:a}),{priority:30,requirementsTransformer:function(){return"string"!=typeof a||isNaN(a)?a:parseInt(a,10)}})},maxlength:function(a){return $.extend((new Validator.Assert).Length({max:a}),{priority:30,requirementsTransformer:function(){return"string"!=typeof a||isNaN(a)?a:parseInt(a,10)}})},length:function(a){return $.extend((new Validator.Assert).Length({min:a[0],max:a[1]}),{priority:32})},mincheck:function(a){return this.minlength(a)},maxcheck:function(a){return this.maxlength(a)},check:function(a){return this.length(a)},min:function(a){return $.extend((new Validator.Assert).GreaterThanOrEqual(a),{priority:30,requirementsTransformer:function(){return"string"!=typeof a||isNaN(a)?a:parseInt(a,10)}})},max:function(a){return $.extend((new Validator.Assert).LessThanOrEqual(a),{priority:30,requirementsTransformer:function(){return"string"!=typeof a||isNaN(a)?a:parseInt(a,10)}})},range:function(a){return $.extend((new Validator.Assert).Range(a[0],a[1]),{priority:32,requirementsTransformer:function(){for(var b=0;b<a.length;b++)a[b]="string"!=typeof a[b]||isNaN(a[b])?a[b]:parseInt(a[b],10);return a}})},equalto:function(a){return $.extend((new Validator.Assert).EqualTo(a),{priority:256,requirementsTransformer:function(){return $(a).length?$(a).val():a}})}}};var e=function(){this.__class__="ParsleyUI"};e.prototype={listen:function(){return $.listen("parsley:form:init",this,this.setupForm),$.listen("parsley:field:init",this,this.setupField),$.listen("parsley:field:validated",this,this.reflow),$.listen("parsley:form:validated",this,this.focus),$.listen("parsley:field:reset",this,this.reset),$.listen("parsley:form:destroy",this,this.destroy),$.listen("parsley:field:destroy",this,this.destroy),this},reflow:function(a){if("undefined"!=typeof a._ui&&!1!==a._ui.active){var b=this._diff(a.validationResult,a._ui.lastValidationResult);a._ui.lastValidationResult=a.validationResult,a._ui.validatedOnce=!0,this.manageStatusClass(a),this.manageErrorsMessages(a,b),this.actualizeTriggers(a),(b.kept.length||b.added.length)&&"undefined"==typeof a._ui.failedOnce&&this.manageFailingFieldTrigger(a)}},getErrorsMessages:function(a){if(!0===a.validationResult)return[];for(var b=[],c=0;c<a.validationResult.length;c++)b.push(this._getErrorMessage(a,a.validationResult[c].assert));return b},manageStatusClass:function(a){!0===a.validationResult?this._successClass(a):a.validationResult.length>0?this._errorClass(a):this._resetClass(a)},manageErrorsMessages:function(a,b){if("undefined"==typeof a.options.errorsMessagesDisabled){if("undefined"!=typeof a.options.errorMessage)return b.added.length||b.kept.length?(0===a._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&a._ui.$errorsWrapper.append($(a.options.errorTemplate).addClass("parsley-custom-error-message")),a._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(a.options.errorMessage)):a._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove();for(var c=0;c<b.removed.length;c++)this.removeError(a,b.removed[c].assert.name,!0);for(c=0;c<b.added.length;c++)this.addError(a,b.added[c].assert.name,void 0,b.added[c].assert,!0);for(c=0;c<b.kept.length;c++)this.updateError(a,b.kept[c].assert.name,void 0,b.kept[c].assert,!0)}},addError:function(a,b,c,d,e){a._ui.$errorsWrapper.addClass("filled").append($(a.options.errorTemplate).addClass("parsley-"+b).html(c||this._getErrorMessage(a,d))),!0!==e&&this._errorClass(a)},updateError:function(a,b,c,d,e){a._ui.$errorsWrapper.addClass("filled").find(".parsley-"+b).html(c||this._getErrorMessage(a,d)),!0!==e&&this._errorClass(a)},removeError:function(a,b,c){a._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+b).remove(),!0!==c&&this.manageStatusClass(a)},focus:function(a){if(!0===a.validationResult||"none"===a.options.focus)return a._focusedField=null;a._focusedField=null;for(var b=0;b<a.fields.length;b++)if(!0!==a.fields[b].validationResult&&a.fields[b].validationResult.length>0&&"undefined"==typeof a.fields[b].options.noFocus){if("first"===a.options.focus)return a._focusedField=a.fields[b].$element,a._focusedField.focus();a._focusedField=a.fields[b].$element}return null===a._focusedField?null:a._focusedField.focus()},_getErrorMessage:function(a,b){var c=b.name+"Message";return"undefined"!=typeof a.options[c]?window.ParsleyValidator.formatMessage(a.options[c],b.requirements):window.ParsleyValidator.getErrorMessage(b)},_diff:function(a,b,c){for(var d=[],e=[],f=0;f<a.length;f++){for(var g=!1,h=0;h<b.length;h++)if(a[f].assert.name===b[h].assert.name){g=!0;break}g?e.push(a[f]):d.push(a[f])}return{kept:e,added:d,removed:c?[]:this._diff(b,a,!0).added}},setupForm:function(a){a.$element.on("submit.Parsley",!1,$.proxy(a.onSubmitValidate,a)),!1!==a.options.uiEnabled&&a.$element.attr("novalidate","")},setupField:function(a){var b={active:!1};!1!==a.options.uiEnabled&&(b.active=!0,a.$element.attr(a.options.namespace+"id",a.__id__),b.$errorClassHandler=this._manageClassHandler(a),b.errorsWrapperId="parsley-id-"+("undefined"!=typeof a.options.multiple?"multiple-"+a.options.multiple:a.__id__),b.$errorsWrapper=$(a.options.errorsWrapper).attr("id",b.errorsWrapperId),b.lastValidationResult=[],b.validatedOnce=!1,b.validationInformationVisible=!1,a._ui=b,this._insertErrorWrapper(a),this.actualizeTriggers(a))},_manageClassHandler:function(a){if("string"==typeof a.options.classHandler&&$(a.options.classHandler).length)return $(a.options.classHandler);var b=a.options.classHandler(a);return"undefined"!=typeof b&&b.length?b:"undefined"==typeof a.options.multiple||a.$element.is("select")?a.$element:a.$element.parent()},_insertErrorWrapper:function(a){var b;if("string"==typeof a.options.errorsContainer){if($(a.options.errorsContainer).length)return $(a.options.errorsContainer).append(a._ui.$errorsWrapper);window.console&&window.console.warn&&window.console.warn("The errors container `"+a.options.errorsContainer+"` does not exist in DOM")}else"function"==typeof a.options.errorsContainer&&(b=a.options.errorsContainer(a));return"undefined"!=typeof b&&b.length?b.append(a._ui.$errorsWrapper):"undefined"==typeof a.options.multiple?a.$element.after(a._ui.$errorsWrapper):a.$element.parent().after(a._ui.$errorsWrapper)},actualizeTriggers:function(a){var b=this;if(a.options.multiple?$("["+a.options.namespace+'multiple="'+a.options.multiple+'"]').each(function(){$(this).off(".Parsley")}):a.$element.off(".Parsley"),!1!==a.options.trigger){var c=a.options.trigger.replace(/^\s+/g,"").replace(/\s+$/g,"");""!==c&&(a.options.multiple?$("["+a.options.namespace+'multiple="'+a.options.multiple+'"]').each(function(){$(this).on(c.split(" ").join(".Parsley ")+".Parsley",!1,$.proxy("function"==typeof a.eventValidate?a.eventValidate:b.eventValidate,a))}):a.$element.on(c.split(" ").join(".Parsley ")+".Parsley",!1,$.proxy("function"==typeof a.eventValidate?a.eventValidate:this.eventValidate,a)))}},eventValidate:function(a){new RegExp("key").test(a.type)&&!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold||(this._ui.validatedOnce=!0,this.validate())},manageFailingFieldTrigger:function(a){return a._ui.failedOnce=!0,a.options.multiple&&$("["+a.options.namespace+'multiple="'+a.options.multiple+'"]').each(function(){return new RegExp("change","i").test($(this).parsley().options.trigger||"")?void 0:$(this).on("change.ParsleyFailedOnce",!1,$.proxy(a.validate,a))}),a.$element.is("select")&&!new RegExp("change","i").test(a.options.trigger||"")?a.$element.on("change.ParsleyFailedOnce",!1,$.proxy(a.validate,a)):new RegExp("keyup","i").test(a.options.trigger||"")?void 0:a.$element.on("keyup.ParsleyFailedOnce",!1,$.proxy(a.validate,a))},reset:function(a){a.$element.off(".Parsley"),a.$element.off(".ParsleyFailedOnce"),"undefined"!=typeof a._ui&&"ParsleyForm"!==a.__class__&&(a._ui.$errorsWrapper.children().each(function(){$(this).remove()}),this._resetClass(a),a._ui.validatedOnce=!1,a._ui.lastValidationResult=[],a._ui.validationInformationVisible=!1)},destroy:function(a){this.reset(a),"ParsleyForm"!==a.__class__&&("undefined"!=typeof a._ui&&a._ui.$errorsWrapper.remove(),delete a._ui)},_successClass:function(a){a._ui.validationInformationVisible=!0,a._ui.$errorClassHandler.removeClass(a.options.errorClass).addClass(a.options.successClass)},_errorClass:function(a){a._ui.validationInformationVisible=!0,a._ui.$errorClassHandler.removeClass(a.options.successClass).addClass(a.options.errorClass)},_resetClass:function(a){a._ui.$errorClassHandler.removeClass(a.options.successClass).removeClass(a.options.errorClass)}};var f=function(b,c,d,e){this.__class__="OptionsFactory",this.__id__=a.hash(4),this.formOptions=null,this.fieldOptions=null,this.staticOptions=$.extend(!0,{},b,c,d,{namespace:e})};f.prototype={get:function(a){if("undefined"==typeof a.__class__)throw new Error("Parsley Instance expected");switch(a.__class__){case"Parsley":return this.staticOptions;case"ParsleyForm":return this.getFormOptions(a);case"ParsleyField":case"ParsleyFieldMultiple":return this.getFieldOptions(a);default:throw new Error("Instance "+a.__class__+" is not supported")}},getFormOptions:function(b){return this.formOptions=a.attr(b.$element,this.staticOptions.namespace),$.extend({},this.staticOptions,this.formOptions)},getFieldOptions:function(b){return this.fieldOptions=a.attr(b.$element,this.staticOptions.namespace),null===this.formOptions&&"undefined"!=typeof b.parent&&(this.formOptions=this.getFormOptions(b.parent)),$.extend({},this.staticOptions,this.formOptions,this.fieldOptions)}};var g=function(b,c){if(this.__class__="ParsleyForm",this.__id__=a.hash(4),"OptionsFactory"!==a.get(c,"__class__"))throw new Error("You must give an OptionsFactory instance");this.OptionsFactory=c,this.$element=$(b),this.validationResult=null,this.options=this.OptionsFactory.get(this)};g.prototype={onSubmitValidate:function(a){return this.validate(void 0,void 0,a),!1===this.validationResult&&a instanceof $.Event&&(a.stopImmediatePropagation(),a.preventDefault()),this},validate:function(a,b,c){this.submitEvent=c,this.validationResult=!0;var d=[];this._refreshFields(),$.emit("parsley:form:validate",this);for(var e=0;e<this.fields.length;e++)a&&a!==this.fields[e].options.group||(d=this.fields[e].validate(b),!0!==d&&d.length>0&&this.validationResult&&(this.validationResult=!1));return $.emit("parsley:form:validated",this),this.validationResult},isValid:function(a,b){this._refreshFields();for(var c=0;c<this.fields.length;c++)if((!a||a===this.fields[c].options.group)&&!1===this.fields[c].isValid(b))return!1;return!0},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var a=this;return this.fields=[],this.fieldsMappedById={},this.$element.find(this.options.inputs).each(function(){var b=new window.Parsley(this,{},a);"ParsleyField"!==b.__class__&&"ParsleyFieldMultiple"!==b.__class__||b.$element.is(b.options.excluded)||"undefined"==typeof a.fieldsMappedById[b.__class__+"-"+b.__id__]&&(a.fieldsMappedById[b.__class__+"-"+b.__id__]=b,a.fields.push(b))}),this}};var h=function(b,c,d,e,f){if(!new RegExp("ParsleyField").test(a.get(b,"__class__")))throw new Error("ParsleyField or ParsleyFieldMultiple instance expected");if("function"!=typeof window.ParsleyValidator.validators[c]&&"Assert"!==window.ParsleyValidator.validators[c](d).__parentClass__)throw new Error("Valid validator expected");var g=function(b,c){return"undefined"!=typeof b.options[c+"Priority"]?b.options[c+"Priority"]:a.get(window.ParsleyValidator.validators[c](d),"priority")||2
};return e=e||g(b,c),"function"==typeof window.ParsleyValidator.validators[c](d).requirementsTransformer&&(d=window.ParsleyValidator.validators[c](d).requirementsTransformer()),$.extend(window.ParsleyValidator.validators[c](d),{name:c,requirements:d,priority:e,groups:[e],isDomConstraint:f||a.attr(b.$element,b.options.namespace,c)})},i=function(b,c,d){this.__class__="ParsleyField",this.__id__=a.hash(4),this.$element=$(b),"undefined"!=typeof d?(this.parent=d,this.OptionsFactory=this.parent.OptionsFactory,this.options=this.OptionsFactory.get(this)):(this.OptionsFactory=c,this.options=this.OptionsFactory.get(this)),this.constraints=[],this.constraintsByName={},this.validationResult=[],this._bindConstraints()};i.prototype={validate:function(a){return this.value=this.getValue(),$.emit("parsley:field:validate",this),$.emit("parsley:field:"+(this.isValid(a,this.value)?"success":"error"),this),$.emit("parsley:field:validated",this),this.validationResult},isValid:function(a,b){this.refreshConstraints();var c=this._getConstraintsSortedPriorities();if(b=b||this.getValue(),0===b.length&&!this._isRequired()&&"undefined"==typeof this.options.validateIfEmpty&&!0!==a)return this.validationResult=[];if(!1===this.options.priorityEnabled)return!0===(this.validationResult=this.validateThroughValidator(b,this.constraints,"Any"));for(var d=0;d<c.length;d++)if(!0!==(this.validationResult=this.validateThroughValidator(b,this.constraints,c[d])))return!1;return!0},getValue:function(){var a;return a="undefined"!=typeof this.options.value?this.options.value:this.$element.val(),"undefined"==typeof a||null===a?"":!0===this.options.trimValue?a.replace(/^\s+|\s+$/g,""):a},refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},addConstraint:function(a,b,c,d){if(a=a.toLowerCase(),"function"==typeof window.ParsleyValidator.validators[a]){var e=new h(this,a,b,c,d);"undefined"!==this.constraintsByName[e.name]&&this.removeConstraint(e.name),this.constraints.push(e),this.constraintsByName[e.name]=e}return this},removeConstraint:function(a){for(var b=0;b<this.constraints.length;b++)if(a===this.constraints[b].name){this.constraints.splice(b,1);break}return this},updateConstraint:function(a,b,c){return this.removeConstraint(a).addConstraint(a,b,c)},_bindConstraints:function(){for(var a=[],b=0;b<this.constraints.length;b++)!1===this.constraints[b].isDomConstraint&&a.push(this.constraints[b]);this.constraints=a;for(var c in this.options)this.addConstraint(c,this.options[c]);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.attr("required"))&&this.addConstraint("required",!0,void 0,!0),"string"==typeof this.$element.attr("pattern")&&this.addConstraint("pattern",this.$element.attr("pattern"),void 0,!0),"undefined"!=typeof this.$element.attr("min")&&"undefined"!=typeof this.$element.attr("max")?this.addConstraint("range",[this.$element.attr("min"),this.$element.attr("max")],void 0,!0):"undefined"!=typeof this.$element.attr("min")?this.addConstraint("min",this.$element.attr("min"),void 0,!0):"undefined"!=typeof this.$element.attr("max")&&this.addConstraint("max",this.$element.attr("max"),void 0,!0);var a=this.$element.attr("type");return"undefined"==typeof a?this:"number"===a?this.addConstraint("type","integer",void 0,!0):new RegExp(a,"i").test("email url range")?this.addConstraint("type",a,void 0,!0):this},_isRequired:function(){return"undefined"==typeof this.constraintsByName.required?!1:!1!==this.constraintsByName.required.requirements},_getConstraintsSortedPriorities:function(){for(var a=[],b=0;b<this.constraints.length;b++)-1===a.indexOf(this.constraints[b].priority)&&a.push(this.constraints[b].priority);return a.sort(function(a,b){return b-a}),a}};var j=function(){this.__class__="ParsleyFieldMultiple"};j.prototype={addElement:function(a){return this.$elements.push(a),this},refreshConstraints:function(){var a;if(this.constraints=[],this.$element.is("select"))return this.actualizeOptions()._bindConstraints(),this;for(var b=0;b<this.$elements.length;b++)if($("html").has(this.$elements[b]).length){a=this.$elements[b].data("ParsleyFieldMultiple").refreshConstraints().constraints;for(var c=0;c<a.length;c++)this.addConstraint(a[c].name,a[c].requirements,a[c].priority,a[c].isDomConstraint)}else this.$elements.splice(b,1);return this},getValue:function(){if("undefined"!=typeof this.options.value)return this.options.value;if(this.$element.is("input[type=radio]"))return $("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').val()||"";if(this.$element.is("input[type=checkbox]")){var a=[];return $("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').each(function(){a.push($(this).val())}),a.length?a:[]}return this.$element.is("select")&&null===this.$element.val()?[]:this.$element.val()},_init:function(a){return this.$elements=[this.$element],this.options.multiple=a,this}};var k=$({}),l={};$.listen=function(a){if("undefined"==typeof l[a]&&(l[a]=[]),"function"==typeof arguments[1])return l[a].push({fn:arguments[1]});if("object"==typeof arguments[1]&&"function"==typeof arguments[2])return l[a].push({fn:arguments[2],ctxt:arguments[1]});throw new Error("Wrong parameters")},$.listenTo=function(a,b,c){if("undefined"==typeof l[b]&&(l[b]=[]),!(a instanceof i||a instanceof g))throw new Error("Must give Parsley instance");if("string"!=typeof b||"function"!=typeof c)throw new Error("Wrong parameters");l[b].push({instance:a,fn:c})},$.unsubscribe=function(a,b){if("undefined"!=typeof l[a]){if("string"!=typeof a||"function"!=typeof b)throw new Error("Wrong arguments");for(var c=0;c<l[a].length;c++)if(l[a][c].fn===b)return l[a].splice(c,1)}},$.unsubscribeTo=function(a,b){if("undefined"!=typeof l[b]){if(!(a instanceof i||a instanceof g))throw new Error("Must give Parsley instance");for(var c=0;c<l[b].length;c++)if("undefined"!=typeof l[b][c].instance&&l[b][c].instance.__id__===a.__id__)return l[b].splice(c,1)}},$.unsubscribeAll=function(a){"undefined"!=typeof l[a]&&delete l[a]},$.emit=function(a,b){if("undefined"!=typeof l[a])for(var c=0;c<l[a].length;c++)if("undefined"!=typeof l[a][c].instance){if(b instanceof i||b instanceof g)if(l[a][c].instance.__id__!==b.__id__){if(l[a][c].instance instanceof g&&b instanceof i)for(var d=0;d<l[a][c].instance.fields.length;d++)if(l[a][c].instance.fields[d].__id__===b.__id__){l[a][c].fn.apply(k,Array.prototype.slice.call(arguments,1));continue}}else l[a][c].fn.apply(k,Array.prototype.slice.call(arguments,1))}else l[a][c].fn.apply("undefined"!=typeof l[a][c].ctxt?l[a][c].ctxt:k,Array.prototype.slice.call(arguments,1))},$.subscribed=function(){return l},window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.en=$.extend(window.ParsleyConfig.i18n.en||{},{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("en",window.ParsleyConfig.i18n.en,!0);var m=function(b,c,d){if(this.__class__="Parsley",this.__version__="2.0.2",this.__id__=a.hash(4),"undefined"==typeof b)throw new Error("You must give an element");if("undefined"!=typeof d&&"ParsleyForm"!==d.__class__)throw new Error("Parent instance must be a ParsleyForm instance");return this.init($(b),c,d)};m.prototype={init:function(c,d,e){if(!c.length)throw new Error("You must bind Parsley on an existing element.");if(this.$element=c,this.$element.data("Parsley")){var g=this.$element.data("Parsley");return"undefined"!=typeof e&&(g.parent=e),g}return this.OptionsFactory=new f(b,a.get(window,"ParsleyConfig")||{},d,this.getNamespace(d)),this.options=this.OptionsFactory.get(this),this.$element.is("form")||a.attr(this.$element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm"):this.$element.is(this.options.inputs)&&!this.$element.is(this.options.excluded)?this.isMultiple()?this.handleMultiple(e):this.bind("parsleyField",e):this},isMultiple:function(){return this.$element.is("input[type=radio], input[type=checkbox]")&&"undefined"==typeof this.options.multiple||this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple")},handleMultiple:function(b){var c,d,e,f=this;if(this.options=$.extend(this.options,b?b.OptionsFactory.get(b):{},a.attr(this.$element,this.options.namespace)),this.options.multiple?d=this.options.multiple:"undefined"!=typeof this.$element.attr("name")&&this.$element.attr("name").length?d=c=this.$element.attr("name"):"undefined"!=typeof this.$element.attr("id")&&this.$element.attr("id").length&&(d=this.$element.attr("id")),this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple"))return this.bind("parsleyFieldMultiple",b,d||this.__id__);if("undefined"==typeof d)return window.console&&window.console.warn&&window.console.warn("To be binded by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;if(d=d.replace(/(:|\.|\[|\]|\$)/g,""),"undefined"!=typeof c&&$('input[name="'+c+'"]').each(function(){$(this).is("input[type=radio], input[type=checkbox]")&&$(this).attr(f.options.namespace+"multiple",d)}),$("["+this.options.namespace+"multiple="+d+"]").length)for(var g=0;g<$("["+this.options.namespace+"multiple="+d+"]").length;g++)if("undefined"!=typeof $($("["+this.options.namespace+"multiple="+d+"]").get(g)).data("Parsley")){e=$($("["+this.options.namespace+"multiple="+d+"]").get(g)).data("Parsley"),this.$element.data("ParsleyFieldMultiple")||(e.addElement(this.$element),this.$element.attr(this.options.namespace+"id",e.__id__));break}return this.bind("parsleyField",b,d,!0),e||this.bind("parsleyFieldMultiple",b,d)},getNamespace:function(c){return"undefined"!=typeof this.$element.data("parsleyNamespace")?this.$element.data("parsleyNamespace"):"undefined"!=typeof a.get(c,"namespace")?c.namespace:"undefined"!=typeof a.get(window,"ParsleyConfig.namespace")?window.ParsleyConfig.namespace:b.namespace},bind:function(b,d,e,f){var h;switch(b){case"parsleyForm":h=$.extend(new g(this.$element,this.OptionsFactory),new c,window.ParsleyExtend)._bindFields();break;case"parsleyField":h=$.extend(new i(this.$element,this.OptionsFactory,d),new c,window.ParsleyExtend);break;case"parsleyFieldMultiple":h=$.extend(new i(this.$element,this.OptionsFactory,d),new c,new j,window.ParsleyExtend)._init(e);break;default:throw new Error(b+"is not a supported Parsley type")}return"undefined"!=typeof e&&a.setAttr(this.$element,this.options.namespace,"multiple",e),"undefined"!=typeof f?(this.$element.data("ParsleyFieldMultiple",h),h):(new RegExp("ParsleyF","i").test(h.__class__)&&(this.$element.data("Parsley",h),$.emit("parsley:"+("parsleyForm"===b?"form":"field")+":init",h)),h)}},$.fn.parsley=$.fn.psly=function(a){if(this.length>1){var b=[];return this.each(function(){b.push($(this).parsley(a))}),b}return $(this).length?new m(this,a):void(window.console&&window.console.warn&&window.console.warn("You must bind Parsley on an existing element."))},window.ParsleyUI="function"==typeof a.get(window,"ParsleyConfig.ParsleyUI")?(new window.ParsleyConfig.ParsleyUI).listen():(new e).listen(),"undefined"==typeof window.ParsleyExtend&&(window.ParsleyExtend={}),"undefined"==typeof window.ParsleyConfig&&(window.ParsleyConfig={}),window.Parsley=window.psly=m,window.ParsleyUtils=a,window.ParsleyValidator=new d(window.ParsleyConfig.validators,window.ParsleyConfig.i18n),!1!==a.get(window,"ParsleyConfig.autoBind")&&$(document).ready(function(){$("[data-parsley-validate]").length&&$("[data-parsley-validate]").parsley()})});

// Underscore.js 1.5.2
(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?(this._wrapped=n,void 0):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.5.2";var A=j.each=j.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a=j.keys(n),u=0,i=a.length;i>u;u++)if(t.call(e,n[a[u]],a[u],n)===r)return};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var E="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(E);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(E);return r},j.find=j.detect=function(n,t,r){var e;return O(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var O=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:O(n,function(n){return n===t})},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,function(n){return n[t]})},j.where=function(n,t,r){return j.isEmpty(t)?r?void 0:[]:j[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},j.findWhere=function(n,t){return j.where(n,t,!0)},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&j.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>e.computed&&(e={value:n,computed:a})}),e.value},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&j.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return arguments.length<2||r?n[j.random(n.length-1)]:j.shuffle(n).slice(0,Math.max(0,t))};var k=function(n){return j.isFunction(n)?n:function(t){return t[n]}};j.sortBy=function(n,t,r){var e=k(t);return j.pluck(j.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={},i=null==r?j.identity:k(r);return A(t,function(r,a){var o=i.call(e,r,a,t);n(u,o,r)}),u}};j.groupBy=F(function(n,t,r){(j.has(n,t)?n[t]:n[t]=[]).push(r)}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=null==r?j.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.indexOf(t,n)>=0})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:new Date,a=null,i=n.apply(e,u)};return function(){var l=new Date;o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u)):a||r.trailing===!1||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o;return function(){i=this,u=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u)))},l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u)),o}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=w||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]===void 0&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return n===void 0},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=j.invert(I.escape);var T={escape:new RegExp("["+j.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(I.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(T[n],function(t){return I[n][t]})}}),j.result=function(n,t){if(null==n)return void 0;var r=n[t];return j.isFunction(r)?r.call(n):r},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);
//# sourceMappingURL=underscore-min.map

/* IS library */
var jumpkick;!function(a){var b=function(){function a(a,b){this.value=a,this.inverse=!1,this.inverse=b||this.inverse}return a.prototype.is=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];if(!this.value)return new a;for(var d=!this.inverse,e=0;e<b.length;e++){var f=b[e];if("NaN"==f.toString())isNaN(this.value)||(d=this.inverse);else if("function"==typeof f)b[e](this.value)||(d=this.inverse);else{if(f.indexOf("<")>-1)return this.checkForLengthOrCompareNumber(f);if(f.indexOf(">")>-1)return this.checkForLengthOrCompareNumber(f);f&&this.value!=f&&(d=this.inverse)}}return d?new a(this.value):new a},a.prototype.checkForLengthOrCompareNumber=function(a){if(a.indexOf("<")>-1){var b=a.split("<");if(""==b[0])return this.isLessThan(parseInt(b[1]));if("length"==b[0])return this.isShorterThan(parseInt(b[1]))}else if(a.indexOf(">")>-1){var b=a.split(">");if(""==b[0])return this.isGreaterThan(parseInt(b[1]));if("length"==b[0])return this.isLongerThan(parseInt(b[1]))}},a.prototype.any=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];if(!this.value)return new a;for(var d=0,e=0;e<b.length;e++){var f=b[e];"NaN"==f.toString()?isNaN(this.value)&&d++:"function"==typeof f?b[e](this.value)&&d++:f.indexOf("<")>-1?this.checkForLengthOrCompareNumber(f).value&&d++:f.indexOf(">")>-1?this.checkForLengthOrCompareNumber(f).value&&d++:f&&this.value===f&&d++}return d>0&&!this.inverse||0==d&&this.inverse?new a(this.value):new a},a.prototype.or=function(){return this},a.prototype.isLongerThan=function(b){return this.value?this.inverse?this.value.toString().length<b?new a(this.value):new a:this.value.toString().length>b?new a(this.value):new a:new a},a.prototype.isShorterThan=function(b){return this.value?this.inverse?this.value.toString().length>b?new a(this.value):new a:this.value.toString().length<b?new a(this.value):new a:new a},a.prototype.not=function(){return this.value?new a(this.value,!0):new a},a.prototype.equals=function(b){return this.value?this.inverse?this.value!=b?new a(this.value):new a:this.value===b?new a(this.value):new a:new a},a.prototype.isLessThan=function(b){return this.value?this.inverse?this.value>=b?new a(this.value):new a:this.value<b?new a(this.value):new a:new a},a.prototype.isNumber=function(){return this.value?this.inverse?"number"==typeof this.value?new a:new a(this.value):"number"!=typeof this.value?new a:new a(this.value):new a},a.prototype.isGreaterThan=function(b){return this.value?this.inverse?this.value<=b?new a(this.value):new a:this.value>b?new a(this.value):new a:new a},a.prototype.then=function(b){return this.value?(b(),new a(this.value)):new a},a.prototype.catch=function(a){this.value||a()},a}();a.Is=b}(jumpkick||(jumpkick={}));

/* Extend jQuery function to include special Regex */
jQuery.expr[":"].regex=function(e,t,n){var r=n[3].split(","),i=/^(data|css):/,s={method:r[0].match(i)?r[0].split(":")[0]:"attr",property:r.shift().replace(i,"")},o="ig",u=new RegExp(r.join("").replace(/^\s+|\s+$/g,""),o);return u.test(jQuery(e)[s.method](s.property))};

/*! vex.js, vex.dialog.js 2.1.1 */
(function(){var a;a=function(a){var b,c;return b=!1,a(function(){var d;return d=(document.body||document.documentElement).style,b=void 0!==d.animation||void 0!==d.WebkitAnimation||void 0!==d.MozAnimation||void 0!==d.MsAnimation||void 0!==d.OAnimation,a(window).bind("keyup.vex",function(a){return 27===a.keyCode?c.closeByEscape():void 0})}),c={globalID:1,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{vex:"vex",content:"vex-content",overlay:"vex-overlay",close:"vex-close",closing:"vex-closing",open:"vex-open"},defaultOptions:{content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",closeCSS:{}},open:function(b){return b=a.extend({},c.defaultOptions,b),b.id=c.globalID,c.globalID+=1,b.$vex=a("<div>").addClass(c.baseClassNames.vex).addClass(b.className).css(b.css).data({vex:b}),b.$vexOverlay=a("<div>").addClass(c.baseClassNames.overlay).addClass(b.overlayClassName).css(b.overlayCSS).data({vex:b}),b.overlayClosesOnClick&&b.$vexOverlay.bind("click.vex",function(b){return b.target===this?c.close(a(this).data().vex.id):void 0}),b.$vex.append(b.$vexOverlay),b.$vexContent=a("<div>").addClass(c.baseClassNames.content).addClass(b.contentClassName).css(b.contentCSS).append(b.content).data({vex:b}),b.$vex.append(b.$vexContent),b.showCloseButton&&(b.$closeButton=a("<div>").addClass(c.baseClassNames.close).addClass(b.closeClassName).css(b.closeCSS).data({vex:b}).bind("click.vex",function(){return c.close(a(this).data().vex.id)}),b.$vexContent.append(b.$closeButton)),a(b.appendLocation).append(b.$vex),c.setupBodyClassName(b.$vex),b.afterOpen&&b.afterOpen(b.$vexContent,b),setTimeout(function(){return b.$vexContent.trigger("vexOpen",b)},0),b.$vexContent},getAllVexes:function(){return a("."+c.baseClassNames.vex+':not(".'+c.baseClassNames.closing+'") .'+c.baseClassNames.content)},getVexByID:function(b){return c.getAllVexes().filter(function(){return a(this).data().vex.id===b})},close:function(a){var b;if(!a){if(b=c.getAllVexes().last(),!b.length)return!1;a=b.data().vex.id}return c.closeByID(a)},closeAll:function(){var b;return b=c.getAllVexes().map(function(){return a(this).data().vex.id}).toArray(),(null!=b?b.length:void 0)?(a.each(b.reverse(),function(a,b){return c.closeByID(b)}),!0):!1},closeByID:function(d){var e,f,g,h,i;return f=c.getVexByID(d),f.length?(e=f.data().vex.$vex,i=a.extend({},f.data().vex),g=function(){return i.beforeClose?i.beforeClose(f,i):void 0},h=function(){return f.trigger("vexClose",i),e.remove(),a("body").trigger("vexAfterClose",i),i.afterClose?i.afterClose(f,i):void 0},b?(g(),e.unbind(c.animationEndEvent).bind(c.animationEndEvent,function(){return h()}).addClass(c.baseClassNames.closing)):(g(),h()),!0):void 0},closeByEscape:function(){var b,d,e;return e=c.getAllVexes().map(function(){return a(this).data().vex.id}).toArray(),(null!=e?e.length:void 0)?(d=Math.max.apply(Math,e),b=c.getVexByID(d),b.data().vex.escapeButtonCloses!==!0?!1:c.closeByID(d)):!1},setupBodyClassName:function(){return a("body").bind("vexOpen.vex",function(){return a("body").addClass(c.baseClassNames.open)}).bind("vexAfterClose.vex",function(){return c.getAllVexes().length?void 0:a("body").removeClass(c.baseClassNames.open)})},hideLoading:function(){return a(".vex-loading-spinner").remove()},showLoading:function(){return c.hideLoading(),a("body").append('<div class="vex-loading-spinner '+c.defaultOptions.className+'"></div>')}}},"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):window.vex=a(jQuery)}).call(this),function(){var a;a=function(a,b){var c,d;return null==b?a.error("Vex is required to use vex.dialog"):(c=function(b){var c;return c={},a.each(b.serializeArray(),function(){return c[this.name]?(c[this.name].push||(c[this.name]=[c[this.name]]),c[this.name].push(this.value||"")):c[this.name]=this.value||""}),c},d={},d.buttons={YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary"},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(a){return a.data().vex.value=!1,b.close(a.data().vex.id)}}},d.defaultOptions={callback:function(){},afterOpen:function(){},message:"Message",input:'<input name="vex" type="hidden" value="_vex-empty-value" />',value:!1,buttons:[d.buttons.YES,d.buttons.NO],showCloseButton:!1,onSubmit:function(e){var f,g;return f=a(this),g=f.parent(),e.preventDefault(),e.stopPropagation(),g.data().vex.value=d.getFormValueOnSubmit(c(f)),b.close(g.data().vex.id)},focusFirstInput:!0},d.defaultAlertOptions={message:"Alert",buttons:[d.buttons.YES]},d.defaultConfirmOptions={message:"Confirm"},d.open=function(c){var e;return c=a.extend({},b.defaultOptions,d.defaultOptions,c),c.content=d.buildDialogForm(c),c.beforeClose=function(a){return c.callback(a.data().vex.value)},e=b.open(c),c.focusFirstInput&&e.find('input[type="submit"], textarea, input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="month"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="text"], input[type="time"], input[type="url"], input[type="week"]').first().focus(),e},d.alert=function(b){return"string"==typeof b&&(b={message:b}),b=a.extend({},d.defaultAlertOptions,b),d.open(b)},d.confirm=function(b){return"string"==typeof b?a.error("dialog.confirm(options) requires options.callback."):(b=a.extend({},d.defaultConfirmOptions,b),d.open(b))},d.prompt=function(b){var c;return"string"==typeof b?a.error("dialog.prompt(options) requires options.callback."):(c={message:'<label for="vex">'+(b.label||"Prompt:")+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+(b.placeholder||"")+'"  value="'+(b.value||"")+'" />'},b=a.extend({},c,b),d.open(b))},d.buildDialogForm=function(b){var c,e,f;return c=a('<form class="vex-dialog-form" />'),f=a('<div class="vex-dialog-message" />'),e=a('<div class="vex-dialog-input" />'),c.append(f.append(b.message)).append(e.append(b.input)).append(d.buttonsToDOM(b.buttons)).bind("submit.vex",b.onSubmit),c},d.getFormValueOnSubmit=function(a){return a.vex||""===a.vex?"_vex-empty-value"===a.vex?!0:a.vex:a},d.buttonsToDOM=function(c){var d;return d=a('<div class="vex-dialog-buttons" />'),a.each(c,function(e,f){return d.append(a('<input type="'+f.type+'" />').val(f.text).addClass(f.className+" vex-dialog-button "+(0===e?"vex-first ":"")+(e===c.length-1?"vex-last ":"")).bind("click.vex",function(c){return f.click?f.click(a(this).parents("."+b.baseClassNames.content),c):void 0}))}),d},d)},"function"==typeof define&&define.amd?define(["jquery","vex"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("vex")):window.vex.dialog=a(window.jQuery,window.vex)}.call(this);
vex.defaultOptions.className = 'vex-theme-plain';

/*! toolbar.js 2013-04-05 */
"function"!=typeof Object.create&&(Object.create=function(t){function o(){}return o.prototype=t,new o}),function(t,o){var e={init:function(o,e){var i=this;i.elem=e,i.$elem=t(e),i.options=t.extend({},t.fn.toolbar.options,o),i.toolbar=t('<div class="tool-container gradient" />').addClass("tool-"+i.options.position).addClass("tool-rounded").append('<div class="tool-items" />').append('<div class="arrow" />').appendTo("body").css("opacity",0).hide(),i.toolbar_arrow=i.toolbar.find(".arrow"),i.initializeToolbar()},initializeToolbar:function(){var t=this;t.populateContent(),t.setTrigger(),t.toolbarWidth=t.toolbar.width()},setTrigger:function(){var e=this;e.$elem.on("click",function(t){t.preventDefault(),e.$elem.hasClass("pressed")?e.hide():e.show()}),e.options.hideOnClick&&t("html").on("click.toolbar",function(t){t.target!=e.elem&&0===e.$elem.has(t.target).length&&0===e.toolbar.has(t.target).length&&e.toolbar.is(":visible")&&e.hide()}),t(o).resize(function(t){t.stopPropagation(),e.toolbar.is(":visible")&&(e.toolbarCss=e.getCoordinates(e.options.position,20),e.collisionDetection(),e.toolbar.css(e.toolbarCss),e.toolbar_arrow.css(e.arrowCss))})},populateContent:function(){var o=this,e=o.toolbar.find(".tool-items"),i=t(o.options.content).clone(!0).find("a").addClass("tool-item gradient");e.html(i),e.find(".tool-item").on("click",function(t){t.preventDefault(),o.$elem.trigger("toolbarItemClick",this)})},calculatePosition:function(){var t=this;t.arrowCss={},t.toolbarCss=t.getCoordinates(t.options.position,0),t.toolbarCss.position="absolute",t.toolbarCss.zIndex=t.options.zIndex,t.collisionDetection(),t.toolbar.css(t.toolbarCss),t.toolbar_arrow.css(t.arrowCss)},getCoordinates:function(t,o){var e=this;switch(e.coordinates=e.$elem.offset(),e.options.adjustment&&e.options.adjustment[e.options.position]&&(o=e.options.adjustment[e.options.position]),e.options.position){case"top":return{left:e.coordinates.left-e.toolbar.width()/2+e.$elem.outerWidth()/2,top:e.coordinates.top-e.$elem.height()-o,right:"auto"};case"left":return{left:e.coordinates.left-e.toolbar.width()/2-e.$elem.width()/2-o,top:e.coordinates.top-e.toolbar.height()/2+e.$elem.outerHeight()/2,right:"auto"};case"right":return{left:e.coordinates.left+e.toolbar.width()/2+e.$elem.width()/3+o,top:e.coordinates.top-e.toolbar.height()/2+e.$elem.outerHeight()/2,right:"auto"};case"bottom":return{left:e.coordinates.left-e.toolbar.width()/2+e.$elem.outerWidth()/2,top:e.coordinates.top+e.$elem.height()+o,right:"auto"}}},collisionDetection:function(){var e=this,i=20;("top"==e.options.position||"bottom"==e.options.position)&&(e.arrowCss={left:"50%",right:"50%"},i>e.toolbarCss.left?(e.toolbarCss.left=i,e.arrowCss.left=e.$elem.offset().left+e.$elem.width()/2-i):i>t(o).width()-(e.toolbarCss.left+e.toolbarWidth)&&(e.toolbarCss.right=i,e.toolbarCss.left="auto",e.arrowCss.left="auto",e.arrowCss.right=t(o).width()-e.$elem.offset().left-e.$elem.width()/2-i-5))},show:function(){var t=this,o={opacity:1};switch(t.$elem.addClass("pressed"),t.calculatePosition(),t.options.position){case"top":o.top="-=20";break;case"left":o.left="-=20";break;case"right":o.left="+=20";break;case"bottom":o.top="+=20"}t.toolbar.show().animate(o,200),t.$elem.trigger("toolbarShown")},hide:function(){var t=this,o={opacity:0};switch(t.$elem.removeClass("pressed"),t.options.position){case"top":o.top="+=20";break;case"left":o.left="+=20";break;case"right":o.left="-=20";break;case"bottom":o.top="-=20"}t.toolbar.animate(o,200,function(){t.toolbar.hide()}),t.$elem.trigger("toolbarHidden")},getToolbarElement:function(){return this.toolbar.find(".tool-items")}};t.fn.toolbar=function(o){if(t.isPlainObject(o))return this.each(function(){var i=Object.create(e);i.init(o,this),t(this).data("toolbarObj",i)});if("string"==typeof o&&0!==o.indexOf("_")){var i=t(this).data("toolbarObj"),s=i[o];return s.apply(i,t.makeArray(arguments).slice(1))}},t.fn.toolbar.options={content:"#myContent",position:"top",hideOnClick:!1,zIndex:120}}(jQuery,window,document);

/* popwin.js - open Popup Window */
(function(e){e.fn.popwin=function(t){return this.each(function(){e(this).click(function(){e.fn.popwin.defaultSettings={centerBrowser:0,centerScreen:0,height:500,left:0,location:0,menubar:0,resizable:0,scrollbars:0,status:0,width:500,windowName:null,windowURL:null,top:0,toolbar:0};settings=e.extend({},e.fn.popwin.defaultSettings,t||{});var n="height="+settings.height+",width="+settings.width+",toolbar="+settings.toolbar+",scrollbars="+settings.scrollbars+",status="+settings.status+",resizable="+settings.resizable+",location="+settings.location+",menuBar="+settings.menubar;settings.windowName=this.name||settings.windowName;settings.windowURL=this.href||settings.windowURL;var r,i;if(settings.centerBrowser){if(e.browser.msie){r=window.screenTop-120+((document.documentElement.clientHeight+120)/2-settings.height/2);i=window.screenLeft+((document.body.offsetWidth+20)/2-settings.width/2)}else{r=window.screenY+(window.outerHeight/2-settings.height/2);i=window.screenX+(window.outerWidth/2-settings.width/2)}window.open(settings.windowURL,settings.windowName,n+",left="+i+",top="+r).focus()}else if(settings.centerScreen){r=(screen.height-settings.height)/2;i=(screen.width-settings.width)/2;window.open(settings.windowURL,settings.windowName,n+",left="+i+",top="+r).focus()}else{window.open(settings.windowURL,settings.windowName,n+",left="+settings.left+",top="+settings.top).focus()}return false})})}})(jQuery);

/* $.popupWindow(url, {options}) */
(function(e){var t={height:500,width:500,toolbar:false,scrollbars:false,status:false,resizable:false,left:0,top:0,center:true,createNew:true,name:null,location:false,menubar:false,onUnload:null};e.popupWindow=function(n,r){var i=e.extend({},t,r);if(i.center){i.top=(screen.height-i.height)/2-50;i.left=(screen.width-i.width)/2}var s=[];s.push("location="+(i.location?"yes":"no"));s.push("menubar="+(i.menubar?"yes":"no"));s.push("toolbar="+(i.toolbar?"yes":"no"));s.push("scrollbars="+(i.scrollbars?"yes":"no"));s.push("status="+(i.status?"yes":"no"));s.push("resizable="+(i.resizable?"yes":"no"));s.push("height="+i.height);s.push("width="+i.width);s.push("left="+i.left);s.push("top="+i.top);var o=(new Date).getTime();var u=i.name||(i.createNew?"popup_window_"+o:"popup_window");var a=window.open(n,u,s.join(","));if(i.onUnload&&typeof i.onUnload==="function"){var f=setInterval(function(){if(!a||a.closed){clearInterval(f);i.onUnload()}},50)}if(a&&a.focus)a.focus();return a}})(jQuery);

/* Format Currency */
function formatCurrency(num) {return accounting.formatMoney(num, "", 2, ".", ",");};
function formatNumber(num) {return accounting.formatNumber(num, 2, ",");};
/* accounting.js v0.3.2, copyright 2011 Joss Crowcroft, MIT license, http://josscrowcroft.github.com/accounting.js */
(function(p,z){function q(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function m(a){return u?u(a):"[object Array]"===v.call(a)}function r(a){return"[object Object]"===v.call(a)}function s(a,b){var d,a=a||{},b=b||{};for(d in b)b.hasOwnProperty(d)&&null==a[d]&&(a[d]=b[d]);return a}function j(a,b,d){var c=[],e,h;if(!a)return c;if(w&&a.map===w)return a.map(b,d);for(e=0,h=a.length;e<h;e++)c[e]=b.call(d,a[e],e,a);return c}function n(a,b){a=Math.round(Math.abs(a));return isNaN(a)?b:a}function x(a){var b=c.settings.currency.format;"function"===typeof a&&(a=a());return q(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:!a||!a.pos||!a.pos.match("%v")?!q(b)?b:c.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:a}var c={version:"0.3.2",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},w=Array.prototype.map,u=Array.isArray,v=Object.prototype.toString,o=c.unformat=c.parse=function(a,b){if(m(a))return j(a,function(a){return o(a,b)});a=a||0;if("number"===typeof a)return a;var b=b||".",c=RegExp("[^0-9-"+b+"]",["g"]),c=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(c,"").replace(b,"."));return!isNaN(c)?c:0},y=c.toFixed=function(a,b){var b=n(b,c.settings.number.precision),d=Math.pow(10,b);return(Math.round(c.unformat(a)*d)/d).toFixed(b)},t=c.formatNumber=function(a,b,d,i){if(m(a))return j(a,function(a){return t(a,b,d,i)});var a=o(a),e=s(r(b)?b:{precision:b,thousand:d,decimal:i},c.settings.number),h=n(e.precision),f=0>a?"-":"",g=parseInt(y(Math.abs(a||0),h),10)+"",l=3<g.length?g.length%3:0;return f+(l?g.substr(0,l)+e.thousand:"")+g.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(h?e.decimal+y(Math.abs(a),h).split(".")[1]:"")},A=c.formatMoney=function(a,b,d,i,e,h){if(m(a))return j(a,function(a){return A(a,b,d,i,e,h)});var a=o(a),f=s(r(b)?b:{symbol:b,precision:d,thousand:i,decimal:e,format:h},c.settings.currency),g=x(f.format);return(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",t(Math.abs(a),n(f.precision),f.thousand,f.decimal))};c.formatColumn=function(a,b,d,i,e,h){if(!a)return[];var f=s(r(b)?b:{symbol:b,precision:d,thousand:i,decimal:e,format:h},c.settings.currency),g=x(f.format),l=g.pos.indexOf("%s")<g.pos.indexOf("%v")?!0:!1,k=0,a=j(a,function(a){if(m(a))return c.formatColumn(a,f);a=o(a);a=(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",t(Math.abs(a),n(f.precision),f.thousand,f.decimal));if(a.length>k)k=a.length;return a});return j(a,function(a){return q(a)&&a.length<k?l?a.replace(f.symbol,f.symbol+Array(k-a.length+1).join(" ")):Array(k-a.length+1).join(" ")+a:a})};if("undefined"!==typeof exports){if("undefined"!==typeof module&&module.exports)exports=module.exports=c;exports.accounting=c}else"function"===typeof define&&define.amd?define([],function(){return c}):(c.noConflict=function(a){return function(){p.accounting=a;c.noConflict=z;return c}}(p.accounting),p.accounting=c)})(this);

/* $(content).dialogModal({}) */
(function(a){a.fn.dialogModal=function(b){function g(){var b=a("."+c);setTimeout(function(){b.removeClass("open");setTimeout(function(){b.remove();a("body").removeClass(c+"Open");a("html."+c+"Open").off("."+c+"Event").removeClass(c+"Open");b.find("."+m).off("click");b.find("."+n).off("click")},e)},e)}var h=a(this),d,f,c="dialogModal",m="dialogPrev",n="dialogNext",l,e,k={init:function(b){function k(){var b=f.outerHeight();a(window).height()>b+80?f.css({marginTop:(a(window).height()-b)/2+"px"}):f.css({marginTop:"60px"});a("body").addClass(c+"Open");d.addClass("open");setTimeout(function(){d.addClass("open");f.css({marginTop:parseInt(f.css("marginTop"))-20+"px"})},e);v()}function v(){d.find('[data-dialogModalBut="close"]').bind("click",function(){g()});d.find('[data-dialogModalBut="ok"]').bind("click",function(c){var b;l.onOkBut&&a.isFunction(l.onOkBut)&&(b=l.onOkBut(c));!1!==b&&g()});d.find('[data-dialogModalBut="cancel"]').bind("click",function(){if(l.onCancelBut&&a.isFunction(l.onCancelBut))l.onCancelBut();g()})}l=a.extend({onOkBut:function(){return!0},onCancelBut:function(){},onLoad:function(){},onClose:function(){}},b);a("html."+c+"Open").off("."+c+"Event").removeClass(c+"Open");a("."+c+" ."+m+", ."+c+" ."+n).off("click");a("."+c).remove();var q=0,t=h.length-1;b=a('<div class="'+c+'"></div>');var u=a('<div class="'+c+'_container"></div>'),w=a('<button type="button" class="close">&times;</button>'),s=a('<div class="'+c+'_body"></div>');b.append(u);u.append(w,s);s.append(h[q].innerHTML);0<t&&u.prepend(a('<div class="'+m+' notactive"></div><div class="'+n+'"></div>'));a("body").append(b);d=a("."+c);f=a("."+c+"_container");e||(e=d.css("transitionDuration"),e=void 0!=e?1E3*e.replace("s",""):0);if(l.onLoad&&a.isFunction(l.onLoad))l.onLoad();d.on("destroyed",function(){if(l.onClose&&a.isFunction(l.onClose))l.onClose()});k();d.find("."+m).bind("click",function(){0<q&&(--q,q<t&&d.find("."+n).removeClass("notactive"),0==q&&d.find("."+m).addClass("notactive"),s.empty().append(h[q].innerHTML),k())});d.find("."+n).bind("click",function(){q<t&&(++q,0<q&&d.find("."+m).removeClass("notactive"),q==t&&d.find("."+n).addClass("notactive"),s.empty().append(h[q].innerHTML),k())});d.find(".close").bind("click",function(){g()});a("html").on("keydown."+c+"Event",function(a){27==a.keyCode?g():37==a.keyCode?d.find("."+m).click():39==a.keyCode&&d.find("."+n).click()})},hide:function(){g()}};if(k[b])return k[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return k.init.apply(this,arguments)};a("* [data-dialogModalBind]").bind("click",function(){var b=a(this).attr("data-dialogModalBind");a(b).dialogModal()});a.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}})(jQuery);

/* Fieldset collapse */
jQuery.fn.collapse = function(options) {
	var defaults = {
		closed : false
	}
	settings = jQuery.extend({}, defaults, options);

	return this.each(function() {
		var obj = jQuery(this);
		obj.find("legend:first").addClass('collapsible').click(function() {
			if (obj.hasClass('collapsed'))
				obj.removeClass('collapsed').addClass('collapsible');
	
			jQuery(this).removeClass('collapsed');
	
			obj.children().not('legend').toggle("slow", function() {
			 
				 if (jQuery(this).is(":visible"))
					obj.find("legend:first").addClass('collapsible');
				 else
					obj.addClass('collapsed').find("legend").addClass('collapsed');
			 });
		});
		if (settings.closed) {
			obj.addClass('collapsed').find("legend:first").addClass('collapsed');
			obj.children().not("legend:first").css('display', 'none');
		}
	});
};

/*  Tags $('#tags').tagsInput();  */
(function(a){var b=new Array;var c=new Array;a.fn.doAutosize=function(b){var c=a(this).data("minwidth"),d=a(this).data("maxwidth"),e="",f=a(this),g=a("#"+a(this).data("tester_id"));if(e===(e=f.val())){return}var h=e.replace(/&/g,"&").replace(/\s/g," ").replace(/</g,"<").replace(/>/g,">");g.html(h);var i=g.width(),j=i+b.comfortZone>=c?i+b.comfortZone:c,k=f.width(),l=j<k&&j>=c||j>c&&j<d;if(l){f.width(j)}};a.fn.resetAutosize=function(b){var c=a(this).data("minwidth")||b.minInputWidth||a(this).width(),d=a(this).data("maxwidth")||b.maxInputWidth||a(this).closest(".tagsinput").width()-b.inputPadding,e="",f=a(this),g=a("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:f.css("fontSize"),fontFamily:f.css("fontFamily"),fontWeight:f.css("fontWeight"),letterSpacing:f.css("letterSpacing"),whiteSpace:"nowrap"}),h=a(this).attr("id")+"_autosize_tester";if(!a("#"+h).length>0){g.attr("id",h);g.appendTo("body")}f.data("minwidth",c);f.data("maxwidth",d);f.data("tester_id",h);f.css("width",c)};a.fn.addTag=function(d,e){e=jQuery.extend({focus:false,callback:true},e);this.each(function(){var f=a(this).attr("id");var g=a(this).val().split(b[f]);if(g[0]==""){g=new Array}d=jQuery.trim(d);if(e.unique){var h=a(g).tagExist(d);if(h==true){a("#"+f+"_tag").addClass("not_valid")}}else{var h=false}if(d!=""&&h!=true){a("<span>").addClass("tag").append(a("<span>").text(d).append("  "),a("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return a("#"+f).removeTag(escape(d))})).insertBefore("#"+f+"_addTag");g.push(d);a("#"+f+"_tag").val("");if(e.focus){a("#"+f+"_tag").focus()}else{a("#"+f+"_tag").blur()}a.fn.tagsInput.updateTagsField(this,g);if(e.callback&&c[f]&&c[f]["onAddTag"]){var i=c[f]["onAddTag"];i.call(this,d)}if(c[f]&&c[f]["onChange"]){var j=g.length;var i=c[f]["onChange"];i.call(this,a(this),g[j-1])}}});return false};a.fn.removeTag=function(d){d=unescape(d);this.each(function(){var e=a(this).attr("id");var f=a(this).val().split(b[e]);a("#"+e+"_tagsinput .tag").remove();str="";for(i=0;i<f.length;i++){if(f[i]!=d){str=str+b[e]+f[i]}}a.fn.tagsInput.importTags(this,str);if(c[e]&&c[e]["onRemoveTag"]){var g=c[e]["onRemoveTag"];g.call(this,d)}});return false};a.fn.tagExist=function(b){return jQuery.inArray(b,a(this))>=0};a.fn.importTags=function(b){id=a(this).attr("id");a("#"+id+"_tagsinput .tag").remove();a.fn.tagsInput.importTags(this,b)};a.fn.tagsInput=function(d){var e=jQuery.extend({interactive:true,defaultText:"add a tag",minChars:0,width:"300px",height:"35px",autocomplete:{selectFirst:false},hide:true,delimiter:",",unique:true,removeWithBackspace:true,placeholderColor:"#666666",autosize:true,comfortZone:20,inputPadding:6*2},d);this.each(function(){if(e.hide){a(this).hide()}var d=a(this).attr("id");if(!d||b[a(this).attr("id")]){d=a(this).attr("id","tags"+(new Date).getTime()).attr("id")}var f=jQuery.extend({pid:d,real_input:"#"+d,holder:"#"+d+"_tagsinput",input_wrapper:"#"+d+"_addTag",fake_input:"#"+d+"_tag"},e);b[d]=f.delimiter;if(e.onAddTag||e.onRemoveTag||e.onChange){c[d]=new Array;c[d]["onAddTag"]=e.onAddTag;c[d]["onRemoveTag"]=e.onRemoveTag;c[d]["onChange"]=e.onChange}var g='<div id="'+d+'_tagsinput" class="tagsinput"><div id="'+d+'_addTag">';if(e.interactive){g=g+'<input id="'+d+'_tag" value="" data-default="'+e.defaultText+'" />'}g=g+'</div><div class="tags_clear"></div></div>';a(g).insertAfter(this);a(f.holder).css("width",e.width);a(f.holder).css("height",e.height);if(a(f.real_input).val()!=""){a.fn.tagsInput.importTags(a(f.real_input),a(f.real_input).val())}if(e.interactive){a(f.fake_input).val(a(f.fake_input).attr("data-default"));a(f.fake_input).css("color",e.placeholderColor);a(f.fake_input).resetAutosize(e);a(f.holder).bind("click",f,function(b){a(b.data.fake_input).focus()});a(f.fake_input).bind("focus",f,function(b){if(a(b.data.fake_input).val()==a(b.data.fake_input).attr("data-default")){a(b.data.fake_input).val("")}a(b.data.fake_input).css("color","#000000")});if(e.autocomplete_url!=undefined){autocomplete_options={source:e.autocomplete_url};for(attrname in e.autocomplete){autocomplete_options[attrname]=e.autocomplete[attrname]}if(jQuery.Autocompleter!==undefined){a(f.fake_input).autocomplete(e.autocomplete_url,e.autocomplete);a(f.fake_input).bind("result",f,function(b,c,f){if(c){a("#"+d).addTag(c[0]+"",{focus:true,unique:e.unique})}})}else if(jQuery.ui.autocomplete!==undefined){a(f.fake_input).autocomplete(autocomplete_options);a(f.fake_input).bind("autocompleteselect",f,function(b,c){a(b.data.real_input).addTag(c.item.value,{focus:true,unique:e.unique});return false})}}else{a(f.fake_input).bind("blur",f,function(b){var c=a(this).attr("data-default");if(a(b.data.fake_input).val()!=""&&a(b.data.fake_input).val()!=c){if(b.data.minChars<=a(b.data.fake_input).val().length&&(!b.data.maxChars||b.data.maxChars>=a(b.data.fake_input).val().length))a(b.data.real_input).addTag(a(b.data.fake_input).val(),{focus:true,unique:e.unique})}else{a(b.data.fake_input).val(a(b.data.fake_input).attr("data-default"));a(b.data.fake_input).css("color",e.placeholderColor)}return false})}a(f.fake_input).bind("keypress",f,function(b){if(b.which==b.data.delimiter.charCodeAt(0)||b.which==13){b.preventDefault();if(b.data.minChars<=a(b.data.fake_input).val().length&&(!b.data.maxChars||b.data.maxChars>=a(b.data.fake_input).val().length))a(b.data.real_input).addTag(a(b.data.fake_input).val(),{focus:true,unique:e.unique});a(b.data.fake_input).resetAutosize(e);return false}else if(b.data.autosize){a(b.data.fake_input).doAutosize(e)}});f.removeWithBackspace&&a(f.fake_input).bind("keydown",function(b){if(b.keyCode==8&&a(this).val()==""){b.preventDefault();var c=a(this).closest(".tagsinput").find(".tag:last").text();var d=a(this).attr("id").replace(/_tag$/,"");c=c.replace(/[\s]+x$/,"");a("#"+d).removeTag(escape(c));a(this).trigger("focus")}});a(f.fake_input).blur();if(f.unique){a(f.fake_input).keydown(function(b){if(b.keyCode==8||String.fromCharCode(b.which).match(/\w+|[,/]+/)){a(this).removeClass("not_valid")}})}}});return this};a.fn.tagsInput.updateTagsField=function(c,d){var e=a(c).attr("id");a(c).val(d.join(b[e]))};a.fn.tagsInput.importTags=function(d,e){a(d).val("");var f=a(d).attr("id");var g=e.split(b[f]);for(i=0;i<g.length;i++){a(d).addTag(g[i],{focus:false,callback:false})}if(c[f]&&c[f]["onChange"]){var h=c[f]["onChange"];h.call(d,d,g[i])}}})(jQuery);

/*! tinyscrollbar - v2.1.7 - 2014-05-21 http://www.baijs.com/tinyscrollbar */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)}(function(a){"use strict";function b(b,e){function f(){return m.update(),h(),m}function g(){r.css(x,m.contentPosition/m.trackRatio),o.css(x,-m.contentPosition),p.css(w,m.trackSize),q.css(w,m.trackSize),r.css(w,m.thumbSize)}function h(){u?n[0].ontouchstart=function(a){1===a.touches.length&&(a.stopPropagation(),i(a.touches[0]))}:(r.bind("mousedown",i),q.bind("mousedown",k)),a(window).resize(function(){m.update("relative")}),m.options.wheel&&window.addEventListener?b[0].addEventListener(v,j,!1):m.options.wheel&&(b[0].onmousewheel=j)}function i(b){a("body").addClass("noSelect"),s=t?b.pageX:b.pageY,m.thumbPosition=parseInt(r.css(x),10)||0,u?(document.ontouchmove=function(a){a.preventDefault(),k(a.touches[0])},document.ontouchend=l):(a(document).bind("mousemove",k),a(document).bind("mouseup",l),r.bind("mouseup",l))}function j(c){if(m.contentRatio<1){var d=c||window.event,e="delta"+m.options.axis.toUpperCase(),f=-(d[e]||d.detail||-1/3*d.wheelDelta)/40;m.contentPosition-=f*m.options.wheelSpeed,m.contentPosition=Math.min(m.contentSize-m.viewportSize,Math.max(0,m.contentPosition)),b.trigger("move"),r.css(x,m.contentPosition/m.trackRatio),o.css(x,-m.contentPosition),(m.options.wheelLock||m.contentPosition!==m.contentSize-m.viewportSize&&0!==m.contentPosition)&&(d=a.event.fix(d),d.preventDefault())}}function k(a){if(m.contentRatio<1){var c=t?a.pageX:a.pageY,d=c-s;m.options.scrollInvert&&u&&(d=s-c);var e=Math.min(m.trackSize-m.thumbSize,Math.max(0,m.thumbPosition+d));m.contentPosition=e*m.trackRatio,b.trigger("move"),r.css(x,e),o.css(x,-m.contentPosition)}}function l(){a("body").removeClass("noSelect"),a(document).unbind("mousemove",k),a(document).unbind("mouseup",l),r.unbind("mouseup",l),document.ontouchmove=document.ontouchend=null}this.options=a.extend({},d,e),this._defaults=d,this._name=c;var m=this,n=b.find(".viewport"),o=b.find(".overview"),p=b.find(".scrollbar"),q=p.find(".track"),r=p.find(".thumb"),s=0,t="x"===this.options.axis,u="ontouchstart"in document.documentElement,v="onwheel"in document||document.documentMode>=9?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",w=t?"width":"height",x=t?"left":"top";return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.update=function(a){var b=w.charAt(0).toUpperCase()+w.slice(1).toLowerCase();switch(this.viewportSize=n[0]["offset"+b],this.contentSize=o[0]["scroll"+b],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(0,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=this.options.thumbSize?(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize):this.contentSize/this.trackSize,p.toggleClass("disable",this.contentRatio>=1),a){case"bottom":this.contentPosition=this.contentSize-this.viewportSize;break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(a,10)||0}return g(),m},f()}var c="tinyscrollbar",d={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,scrollInvert:!1,trackSize:!1,thumbSize:!1};a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(a(this),d))})}});

/* $(".element").imgLiquid();  Resizes an image in different axis in order to fit the element */
var imgLiquid=imgLiquid||{VER:"0.9.944"};imgLiquid.bgs_Available=!1,imgLiquid.bgs_CheckRunned=!1,imgLiquid.injectCss=".imgLiquid img {visibility:hidden}",function(i){function t(){if(!imgLiquid.bgs_CheckRunned){imgLiquid.bgs_CheckRunned=!0;var t=i('<span style="background-size:cover" />');i("body").append(t),!function(){var i=t[0];if(i&&window.getComputedStyle){var e=window.getComputedStyle(i,null);e&&e.backgroundSize&&(imgLiquid.bgs_Available="cover"===e.backgroundSize)}}(),t.remove()}}i.fn.extend({imgLiquid:function(e){this.defaults={fill:!0,verticalAlign:"center",horizontalAlign:"center",useBackgroundSize:!0,useDataHtmlAttr:!0,responsive:!0,delay:0,fadeInTime:0,removeBoxBackground:!0,hardPixels:!0,responsiveCheckTime:500,timecheckvisibility:500,onStart:null,onFinish:null,onItemStart:null,onItemFinish:null,onItemError:null},t();var a=this;return this.options=e,this.settings=i.extend({},this.defaults,this.options),this.settings.onStart&&this.settings.onStart(),this.each(function(t){function e(){-1===u.css("background-image").indexOf(encodeURI(c.attr("src")))&&u.css({"background-image":'url("'+encodeURI(c.attr("src"))+'")'}),u.css({"background-size":g.fill?"cover":"contain","background-position":(g.horizontalAlign+" "+g.verticalAlign).toLowerCase(),"background-repeat":"no-repeat"}),i("a:first",u).css({display:"block",width:"100%",height:"100%"}),i("img",u).css({display:"none"}),g.onItemFinish&&g.onItemFinish(t,u,c),u.addClass("imgLiquid_bgSize"),u.addClass("imgLiquid_ready"),l()}function d(){function e(){c.data("imgLiquid_error")||c.data("imgLiquid_loaded")||c.data("imgLiquid_oldProcessed")||(u.is(":visible")&&c[0].complete&&c[0].width>0&&c[0].height>0?(c.data("imgLiquid_loaded",!0),setTimeout(r,t*g.delay)):setTimeout(e,g.timecheckvisibility))}if(c.data("oldSrc")&&c.data("oldSrc")!==c.attr("src")){var a=c.clone().removeAttr("style");return a.data("imgLiquid_settings",c.data("imgLiquid_settings")),c.parent().prepend(a),c.remove(),c=a,c[0].width=0,setTimeout(d,10),void 0}return c.data("imgLiquid_oldProcessed")?(r(),void 0):(c.data("imgLiquid_oldProcessed",!1),c.data("oldSrc",c.attr("src")),i("img:not(:first)",u).css("display","none"),u.css({overflow:"hidden"}),c.fadeTo(0,0).removeAttr("width").removeAttr("height").css({visibility:"visible","max-width":"none","max-height":"none",width:"auto",height:"auto",display:"block"}),c.on("error",n),c[0].onerror=n,e(),o(),void 0)}function o(){(g.responsive||c.data("imgLiquid_oldProcessed"))&&c.data("imgLiquid_settings")&&(g=c.data("imgLiquid_settings"),u.actualSize=u.get(0).offsetWidth+u.get(0).offsetHeight/1e4,u.sizeOld&&u.actualSize!==u.sizeOld&&r(),u.sizeOld=u.actualSize,setTimeout(o,g.responsiveCheckTime))}function n(){c.data("imgLiquid_error",!0),u.addClass("imgLiquid_error"),g.onItemError&&g.onItemError(t,u,c),l()}function s(){var i={};if(a.settings.useDataHtmlAttr){var t=u.attr("data-imgLiquid-fill"),e=u.attr("data-imgLiquid-horizontalAlign"),d=u.attr("data-imgLiquid-verticalAlign");("true"===t||"false"===t)&&(i.fill=Boolean("true"===t)),void 0===e||"left"!==e&&"center"!==e&&"right"!==e&&-1===e.indexOf("%")||(i.horizontalAlign=e),void 0===d||"top"!==d&&"bottom"!==d&&"center"!==d&&-1===d.indexOf("%")||(i.verticalAlign=d)}return imgLiquid.isIE&&a.settings.ieFadeInDisabled&&(i.fadeInTime=0),i}function r(){var i,e,a,d,o,n,s,r,m=0,h=0,f=u.width(),v=u.height();void 0===c.data("owidth")&&c.data("owidth",c[0].width),void 0===c.data("oheight")&&c.data("oheight",c[0].height),g.fill===f/v>=c.data("owidth")/c.data("oheight")?(i="100%",e="auto",a=Math.floor(f),d=Math.floor(f*(c.data("oheight")/c.data("owidth")))):(i="auto",e="100%",a=Math.floor(v*(c.data("owidth")/c.data("oheight"))),d=Math.floor(v)),o=g.horizontalAlign.toLowerCase(),s=f-a,"left"===o&&(h=0),"center"===o&&(h=.5*s),"right"===o&&(h=s),-1!==o.indexOf("%")&&(o=parseInt(o.replace("%",""),10),o>0&&(h=.01*s*o)),n=g.verticalAlign.toLowerCase(),r=v-d,"left"===n&&(m=0),"center"===n&&(m=.5*r),"bottom"===n&&(m=r),-1!==n.indexOf("%")&&(n=parseInt(n.replace("%",""),10),n>0&&(m=.01*r*n)),g.hardPixels&&(i=a,e=d),c.css({width:i,height:e,"margin-left":Math.floor(h),"margin-top":Math.floor(m)}),c.data("imgLiquid_oldProcessed")||(c.fadeTo(g.fadeInTime,1),c.data("imgLiquid_oldProcessed",!0),g.removeBoxBackground&&u.css("background-image","none"),u.addClass("imgLiquid_nobgSize"),u.addClass("imgLiquid_ready")),g.onItemFinish&&g.onItemFinish(t,u,c),l()}function l(){t===a.length-1&&a.settings.onFinish&&a.settings.onFinish()}var g=a.settings,u=i(this),c=i("img:first",u);return c.length?(c.data("imgLiquid_settings")?(u.removeClass("imgLiquid_error").removeClass("imgLiquid_ready"),g=i.extend({},c.data("imgLiquid_settings"),a.options)):g=i.extend({},a.settings,s()),c.data("imgLiquid_settings",g),g.onItemStart&&g.onItemStart(t,u,c),imgLiquid.bgs_Available&&g.useBackgroundSize?e():d(),void 0):(n(),void 0)})}})}(jQuery),!function(){var i=imgLiquid.injectCss,t=document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=i:e.appendChild(document.createTextNode(i)),t.appendChild(e)}();

/* Freetile.js v0.3.0 A dynamic layout plugin for jQuery - new Masonry is possibly better */
(function(b){b.fn.freetile=function(c){if(typeof a[c]==="function"){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.Freetile")}}return this};var a={init:function(e){var d=this,f=a.setupOptions(d,e),g=a.newContent(f.contentToAppend);if(!f.tiled){a.setupContainerBindings(d,f)}if(f.tiled&&g){d.append(g);g.filter(f.selector||"*").filter(f.loadCheckSelector).imagesLoaded(function(){a.positionAll(d,f)})}else{d.children(f.loadCheckSelector).imagesLoaded(function(){a.positionAll(d,f)})}return d},append:function(e){var d=this,f=a.setupOptions(d,e),g=a.newContent(f.contentToAppend);if(f.tiled&&g){d.append(g);g.filter(f.loadCheckSelector).imagesLoaded(function(){a.positionAll(d,f)})}return d},layout:function(d){var c=this,e=a.setupOptions(c,d);a.positionAll(c,e);return c},destroy:function(){var c=this,d=c.data("FreetileData");a.resetElementsStyle(c,d);b(window).off("resize",this.windowResizeCallback);c.off(d.customEvents,this.customEventsCallback);return true},setupOptions:function(d,e){var c=d.data("FreetileData");var f=b.extend(true,{},this.defaults,c,this.reset,e);d.data("FreetileData",f);f.tiled=(c!==undefined);f._animate=f.animate&&f.tiled&&b.isEmptyObject(f.contentToAppend);this.reset.callback=f.persistentCallback&&f.callback?f.callback:function(){};return f},windowResizeCallback:function(c,d,e){clearTimeout(c.data("FreetileTimeout"));c.data("FreetileTimeout",setTimeout(function(){var h=b(window),g=h.width(),f=h.height();if(g!=d||f!=e){d=g,e=f;c.freetile("layout")}},400))},customEventsCallback:function(c){clearTimeout(c.data("FreetileTimeout"));c.data("FreetileTimeout",setTimeout(function(){c.freetile("layout")},400))},setupContainerBindings:function(c,f){if(f.containerResize){var e=b(window),d=e.width(),g=e.height();e.resize(b.proxy(this.windowResizeCallback,c,c,d,g))}if(f.customEvents){c.bind(f.customEvents,b.proxy(this.customEventsCallback,c,c))}return c},newContent:function(c){if((typeof c==="object"&&!b.isEmptyObject(c))||(typeof c==="string"&&b(c).length)){return b(c)}return false},calculatePositions:function(c,d,e){d.each(function(o){var p=b(this),n=0;e.ElementWidth=p.outerWidth(true);e.ElementHeight=p.outerHeight(true);e.ElementTop=0;e.ElementIndex=o;e.IndexStart=0;e.IndexEnd=0;e.BestScore=0;e.TestedTop=0;e.TestedLeft=0;e.TestedTop=e.currentPos[0].top;for(n=1;n<e.currentPos.length&&e.currentPos[n].left<e.ElementWidth;n++){e.TestedTop=Math.max(e.TestedTop,e.currentPos[n].top)}e.ElementTop=e.TestedTop;e.IndexEnd=n;e.BestScore=e.scoreFunction(e);for(var o=1;(o<e.currentPos.length)&&(e.currentPos[o].left+e.ElementWidth<=e.containerWidth);o++){e.TestedLeft=e.currentPos[o].left;e.TestedTop=e.currentPos[o].top;for(n=o+1;(n<e.currentPos.length)&&(e.currentPos[n].left-e.currentPos[o].left<e.ElementWidth);n++){e.TestedTop=Math.max(e.TestedTop,e.currentPos[n].top)}var l=e.scoreFunction(e);if(l>e.BestScore){e.IndexStart=o;e.IndexEnd=n;e.ElementTop=e.TestedTop;e.BestScore=l}}var h=p.position(),q={left:e.currentPos[e.IndexStart].left+e.xPadding,top:e.ElementTop+e.yPadding};if(h.top!=q.top||h.left!=q.left){var k={el:p,f:"css",d:0};if(e._animate&&!p.hasClass("noanim")){var f=p.offset(),m={left:q.left+(f.left-h.left),top:q.top+(f.top-h.top)};if((f.top+e.ElementHeight>e.viewportY&&f.top<e.viewportYH||m.top+e.ElementHeight>e.viewportY&&m.top<e.viewportYH)){k.f="animate";k.d=e.currentDelay;++(e.iteration);e.currentDelay+=e.elementDelay}}k.style=q;e.styleQueue.push(k)}--(e.iteration);var r=e.currentPos[e.IndexEnd-1].top,s=e.currentPos[e.IndexEnd]?e.currentPos[e.IndexEnd].left:e.containerWidth,g=e.currentPos[e.IndexStart].left+e.ElementWidth;e.currentPos[e.IndexStart].top=e.ElementTop+e.ElementHeight;if(g<s){e.currentPos.splice(e.IndexStart+1,e.IndexEnd-e.IndexStart-1,{left:g,top:r})}else{e.currentPos.splice(e.IndexStart+1,e.IndexEnd-e.IndexStart-1)}})},prepareElements:function(c,d,e){d.each(function(){var f=b(this);if(f.is(":visible")){f.css({display:"block"})}}).css({position:"absolute"})},applyStyles:function(f){var e;for(var d=0,c=f.styleQueue.length;d<c;d++){e=f.styleQueue[d];if(e.f=="animate"){e.el.delay(e.d).animate(e.style,b.extend(true,{},f.animationOptions))}else{e.el.css(e.style)}}},positionAll:function(c,g){if(b.isEmptyObject(g.contentToAppend)){var j=g.selector?c.children(g.selector):c.children()}else{var j=g.selector?g.contentToAppend.filter(g.selector):g.contentToAppend}g.ElementsCount=j.length;if(!g.ElementsCount){if(typeof(g.callback=="function")){g.callback(g)}c[g._animate&&g.containerAnimate?"animate":"css"]({height:"0px"});return c}var d=c.css("display")||"";var f=c.css("visibility")||"";c.css({display:"block",width:"",visibility:"hidden"});g.containerWidth=c.width();var i=c.data("FreetilePos");g.currentPos=!b.isEmptyObject(g.contentToAppend)&&i?i:[{left:0,top:0}];g.xPadding=parseInt(c.css("padding-left"),10);g.yPadding=parseInt(c.css("padding-top"),10);g.viewportY=b(window).scrollTop();g.viewportYH=g.viewportY+b(window).height();g.iteration=j.length;g.currentDelay=0;g.styleQueue=[];g.animationOptions.complete=function(){if(--(g.iteration)<=0){g.callback(g)}};a.prepareElements(c,j,g);a.calculatePositions(c,j,g);a.applyStyles(g);var h={};if(d){h.display=d}if(f){h.visibility=f}if(c.css("position")=="static"){h.position="relative"}if(g.forceWidth&&g.containerWidthStep>0){h.width=g.containerWidthStep*(parseInt(c.width()/g.containerWidthStep,10))}c.css(h);var e=b.map(g.currentPos,function(l,k){return l.top});h={height:Math.max.apply(Math,e)};if(g._animate&&g.containerAnimate){c.stop().animate(h,b.extend(true,{},g.animationOptions))}else{c.css(h)}if(g.iteration<=0){g.callback(g)}c.data("FreetilePos",g.currentPos);j.addClass("tiled");return c},resetElementsStyle:function(c,d){var e;if(b.isEmptyObject(d.contentToAppend)){e=d.selector?c.children(d.selector):c.children()}else{e=d.selector?d.contentToAppend.filter(d.selector):d.contentToAppend}e.each(function(){b(this).attr("style","")})},defaults:{selector:"*",animate:false,elementDelay:0,containerResize:true,containerAnimate:false,customEvents:"",persistentCallback:false,forceWidth:false,containerWidthStep:1,loadCheckSelector:":not(.ignore-load-check)",scoreFunction:function(c){return -(c.TestedTop)}},reset:{animationOptions:{complete:function(){}},callback:function(){},contentToAppend:{}}}})(jQuery);

/* HTML5 Shiv v3.6.2pre | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed */
(function(l,f){function m(){var a=e.elements;return"string"==typeof a?a.split(" "):a}function i(a){var b=n[a[o]];b||(b={},h++,a[o]=h,n[h]=b);return b}function p(a,b,c){b||(b=f);if(g)return b.createElement(a);c||(c=i(b));b=c.cache[a]?c.cache[a].cloneNode():r.test(a)?(c.cache[a]=c.createElem(a)).cloneNode():c.createElem(a);return b.canHaveChildren&&!s.test(a)?c.frag.appendChild(b):b}function t(a,b){if(!b.cache)b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag();a.createElement=function(c){return!e.shivMethods?b.createElem(c):p(c,a,b)};a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/\w+/g,function(a){b.createElem(a);b.frag.createElement(a);return'c("'+a+'")'})+");return n}")(e,b.frag)}function q(a){a||(a=f);var b=i(a);if(e.shivCSS&&!j&&!b.hasCSS){var c,d=a;c=d.createElement("p");d=d.getElementsByTagName("head")[0]||d.documentElement;c.innerHTML="x<style>article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}</style>";c=d.insertBefore(c.lastChild,d.firstChild);b.hasCSS=!!c}g||t(a,b);return a}var k=l.html5||{},s=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,r=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,j,o="_html5shiv",h=0,n={},g;(function(){try{var a=f.createElement("a");a.innerHTML="<xyz></xyz>";j="hidden"in a;var b;if(!(b=1==a.childNodes.length)){f.createElement("a");var c=f.createDocumentFragment();b="undefined"==typeof c.cloneNode|| "undefined"==typeof c.createDocumentFragment||"undefined"==typeof c.createElement}g=b}catch(d){g=j=!0}})();var e={elements:k.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",version:"3.6.2pre",shivCSS:!1!==k.shivCSS,supportsUnknownElements:g,shivMethods:!1!==k.shivMethods,type:"default",shivDocument:q,createElement:p,createDocumentFragment:function(a,b){a||(a=f);if(g)return a.createDocumentFragment();
for(var b=b||i(a),c=b.frag.cloneNode(),d=0,e=m(),h=e.length;d<h;d++)c.createElement(e[d]);return c}};l.html5=e;q(f)})(this,document);

/* $(element).pin() 
 * $(".pinned").pin({containerSelector: ".container"})
 * $(".pinned").pin({padding: {top: 10, bottom: 10}})
 * */
(function(e){e.fn.pin=function(a){var g=0,h=[],n=!1,k=e(window),a=a||{},m=function(){for(var i=0,d=h.length;i<d;i++){var b=h[i];if(a.minWidth&&k.width()<=a.minWidth)b.parent().is(".pin-wrapper")&&b.unwrap(),b.css({width:"",left:"",top:"",position:""}),a.activeClass&&b.removeClass(a.activeClass),n=!0;else{n=!1;var c=a.containerSelector?b.closest(a.containerSelector):e(document.body),f=b.offset(),j=c.offset(),l=b.offsetParent().offset();b.parent().is(".pin-wrapper")||b.wrap("<div class='pin-wrapper'>"); var g=e.extend({top:0,bottom:0},a.padding||{});b.data("pin",{pad:g,from:(a.containerSelector?j.top:f.top)-g.top,to:j.top+c.height()-b.outerHeight()-g.bottom,end:j.top+c.height(),parentTop:l.top});b.css({width:b.outerWidth()});b.parent().css("height",b.outerHeight())}}},o=function(){if(!n){g=k.scrollTop();for(var i=[],d=0,b=h.length;d<b;d++){var c=e(h[d]),f=c.data("pin");if(f){i.push(c);var j=f.from,l=f.to;j+c.outerHeight()>f.end?c.css("position",""):j<g&&l>g?("fixed"!=c.css("position")&&c.css({left:c.offset().left,top:f.pad.top}).css("position","fixed"),a.activeClass&&c.addClass(a.activeClass)):g>=l?(c.css({left:"",top:l-f.parentTop+f.pad.top}).css("position","absolute"),a.activeClass&&c.addClass(a.activeClass)):(c.css({position:"",top:"",left:""}),a.activeClass&&c.removeClass(a.activeClass))}}h=i}},p=function(){m();o()};this.each(function(){var a=e(this),d=e(this).data("pin")||{};if(!d||!d.update)h.push(a),e("img",this).one("load",m),d.update=p,e(this).data("pin",d)});k.scroll(o);k.resize(function(){m()}); m();k.load(p);return this}})(jQuery);

/* moment.js */
(function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){return function(c){return k(a.call(this,c),b)}}function d(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function e(){}function f(a){w(a),h(this,a)}function g(a){var b=q(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function i(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&qb.hasOwnProperty(b)&&(c[b]=a[b]);return c}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function l(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&db.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function o(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function p(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Tb[a]||Ub[b]||b}return a}function q(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=p(c),b&&(d[b]=a[c]));return d}function r(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}db[b]=function(e,f){var g,h,i=db.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=db().utc().set(d,a);return i.call(db.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function t(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function u(a){return v(a)?366:365}function v(a){return a%4===0&&a%100!==0||a%400===0}function w(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[jb]<0||a._a[jb]>11?jb:a._a[kb]<1||a._a[kb]>t(a._a[ib],a._a[jb])?kb:a._a[lb]<0||a._a[lb]>23?lb:a._a[mb]<0||a._a[mb]>59?mb:a._a[nb]<0||a._a[nb]>59?nb:a._a[ob]<0||a._a[ob]>999?ob:-1,a._pf._overflowDayOfYear&&(ib>b||b>kb)&&(b=kb),a._pf.overflow=b)}function x(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function y(a){return a?a.toLowerCase().replace("_","-"):a}function z(a,b){return b._isUTC?db(a).zone(b._offset||0):db(a).local()}function A(a,b){return b.abbr=a,pb[a]||(pb[a]=new e),pb[a].set(b),pb[a]}function B(a){delete pb[a]}function C(a){var b,c,d,e,f=0,g=function(a){if(!pb[a]&&rb)try{require("./lang/"+a)}catch(b){}return pb[a]};if(!a)return db.fn._lang;if(!m(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=y(a[f]).split("-"),b=e.length,d=y(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&o(e,d,!0)>=b-1)break;b--}f++}return db.fn._lang}function D(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function E(a){var b,c,d=a.match(vb);for(b=0,c=d.length;c>b;b++)d[b]=Yb[d[b]]?Yb[d[b]]:D(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function F(a,b){return a.isValid()?(b=G(b,a.lang()),Vb[b]||(Vb[b]=E(b)),Vb[b](a)):a.lang().invalidDate()}function G(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(wb.lastIndex=0;d>=0&&wb.test(a);)a=a.replace(wb,c),wb.lastIndex=0,d-=1;return a}function H(a,b){var c,d=b._strict;switch(a){case"DDDD":return Ib;case"YYYY":case"GGGG":case"gggg":return d?Jb:zb;case"Y":case"G":case"g":return Lb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Kb:Ab;case"S":if(d)return Gb;case"SS":if(d)return Hb;case"SSS":if(d)return Ib;case"DDD":return yb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Cb;case"a":case"A":return C(b._l)._meridiemParse;case"X":return Fb;case"Z":case"ZZ":return Db;case"T":return Eb;case"SSSS":return Bb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Hb:xb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return xb;default:return c=new RegExp(P(O(a.replace("\\","")),"i"))}}function I(a){a=a||"";var b=a.match(Db)||[],c=b[b.length-1]||[],d=(c+"").match(Qb)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?-e:e}function J(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[jb]=s(b)-1);break;case"MMM":case"MMMM":d=C(c._l).monthsParse(b),null!=d?e[jb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[kb]=s(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=s(b));break;case"YY":e[ib]=s(b)+(s(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ib]=s(b);break;case"a":case"A":c._isPm=C(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[lb]=s(b);break;case"m":case"mm":e[mb]=s(b);break;case"s":case"ss":e[nb]=s(b);break;case"S":case"SS":case"SSS":case"SSSS":e[ob]=s(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=I(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function K(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=M(a),a._w&&null==a._a[kb]&&null==a._a[jb]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ib]?db().weekYear():a._a[ib]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Z(f(g.GG),g.W||1,g.E,4,1):(i=C(a._l),j=null!=g.d?V(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Z(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ib]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ib]?d[ib]:a._a[ib],a._dayOfYear>u(e)&&(a._pf._overflowDayOfYear=!0),c=U(e,0,a._dayOfYear),a._a[jb]=c.getUTCMonth(),a._a[kb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[lb]+=s((a._tzm||0)/60),l[mb]+=s((a._tzm||0)%60),a._d=(a._useUTC?U:T).apply(null,l)}}function L(a){var b;a._d||(b=q(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],K(a))}function M(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function N(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=C(a._l),h=""+a._i,i=h.length,j=0;for(d=G(a._f,g).match(vb)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(H(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Yb[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),J(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[lb]<12&&(a._a[lb]+=12),a._isPm===!1&&12===a._a[lb]&&(a._a[lb]=0),K(a),w(a)}function O(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,a._d=new Date(0/0),void 0;for(f=0;f<a._f.length;f++)g=0,c=h({},a),c._pf=b(),c._f=a._f[f],N(c),x(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));h(a,d||c)}function R(a){var b,c,d=a._i,e=Mb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Ob.length;c>b;b++)if(Ob[b][1].exec(d)){a._f=Ob[b][0]+(e[6]||" ");break}for(b=0,c=Pb.length;c>b;b++)if(Pb[b][1].exec(d)){a._f+=Pb[b][0];break}d.match(Db)&&(a._f+="Z"),N(a)}else a._d=new Date(d)}function S(b){var c=b._i,d=sb.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?R(b):m(c)?(b._a=c.slice(0),K(b)):n(c)?b._d=new Date(+c):"object"==typeof c?L(b):b._d=new Date(c)}function T(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function U(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function V(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function W(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function X(a,b,c){var d=hb(Math.abs(a)/1e3),e=hb(d/60),f=hb(e/60),g=hb(f/24),h=hb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",hb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,W.apply({},i)}function Y(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=db(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Z(a,b,c,d,e){var f,g,h=U(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:u(a-1)+g}}function $(a){var b=a._i,c=a._f;return null===b?db.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=C().preparse(b)),db.isMoment(b)?(a=i(b),a._d=new Date(+b._d)):c?m(c)?Q(a):N(a):S(a),new f(a))}function _(a,b){db.fn[a]=db.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),db.updateOffset(this),this):this._d["get"+c+b]()}}function ab(a){db.duration.fn[a]=function(){return this._data[a]}}function bb(a,b){db.duration.fn["as"+a]=function(){return+this/b}}function cb(a){var b=!1,c=db;"undefined"==typeof ender&&(a?(gb.moment=function(){return!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments)},h(gb.moment,c)):gb.moment=db)}for(var db,eb,fb="2.5.1",gb=this,hb=Math.round,ib=0,jb=1,kb=2,lb=3,mb=4,nb=5,ob=6,pb={},qb={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},rb="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,sb=/^\/?Date\((\-?\d+)/i,tb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ub=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,wb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,xb=/\d\d?/,yb=/\d{1,3}/,zb=/\d{1,4}/,Ab=/[+\-]?\d{1,6}/,Bb=/\d+/,Cb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Db=/Z|[\+\-]\d\d:?\d\d/gi,Eb=/T/i,Fb=/[\+\-]?\d+(\.\d{1,3})?/,Gb=/\d/,Hb=/\d\d/,Ib=/\d{3}/,Jb=/\d{4}/,Kb=/[+-]?\d{6}/,Lb=/[+-]?\d+/,Mb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Nb="YYYY-MM-DDTHH:mm:ssZ",Ob=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Pb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Qb=/([\+\-]|\d\d)/gi,Rb="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Sb={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Tb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ub={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Vb={},Wb="DDD w W M D d".split(" "),Xb="M D H h m s w W".split(" "),Yb={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+k(Math.abs(a),6)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return k(this.weekYear(),4)},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return k(this.isoWeekYear(),4)},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return s(this.milliseconds()/100)},SS:function(){return k(s(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+":"+k(s(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+k(s(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Zb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Wb.length;)eb=Wb.pop(),Yb[eb+"o"]=d(Yb[eb],eb);for(;Xb.length;)eb=Xb.pop(),Yb[eb+eb]=c(Yb[eb],2);for(Yb.DDDD=c(Yb.DDD,3),h(e.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=db.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=db([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Y(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),db=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),$(g)},db.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),$(g).utc()},db.unix=function(a){return db(1e3*a)},db.duration=function(a,b){var c,d,e,f=a,h=null;return db.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(h=tb.exec(a))?(c="-"===h[1]?-1:1,f={y:0,d:s(h[kb])*c,h:s(h[lb])*c,m:s(h[mb])*c,s:s(h[nb])*c,ms:s(h[ob])*c}):(h=ub.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new g(f),db.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},db.version=fb,db.defaultFormat=Nb,db.updateOffset=function(){},db.lang=function(a,b){var c;return a?(b?A(y(a),b):null===b?(B(a),a="en"):pb[a]||C(a),c=db.duration.fn._lang=db.fn._lang=C(a),c._abbr):db.fn._lang._abbr},db.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),C(a)},db.isMoment=function(a){return a instanceof f||null!=a&&a.hasOwnProperty("_isAMomentObject")},db.isDuration=function(a){return a instanceof g},eb=Zb.length-1;eb>=0;--eb)r(Zb[eb]);for(db.normalizeUnits=function(a){return p(a)},db.invalid=function(a){var b=db.utc(0/0);return null!=a?h(b._pf,a):b._pf.userInvalidated=!0,b},db.parseZone=function(a){return db(a).parseZone()},h(db.fn=f.prototype,{clone:function(){return db(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=db(this).utc();return 0<a.year()&&a.year()<=9999?F(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&o(this._a,(this._isUTC?db.utc(this._a):db(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=F(this,a||db.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?db.duration(+b,a):db.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?db.duration(+b,a):db.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=z(a,this),g=6e4*(this.zone()-f.zone());return b=p(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-db(this).startOf("month")-(f-db(f).startOf("month")))/d,e-=6e4*(this.zone()-db(this).startOf("month").zone()-(f.zone()-db(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:j(e)},from:function(a,b){return db.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(db(),a)},calendar:function(){var a=z(db(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=V(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),db.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=p(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=p(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+db(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+db(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+z(a,this).startOf(b)},min:function(a){return a=db.apply(null,arguments),this>a?this:a},max:function(a){return a=db.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=I(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&l(this,db.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?db(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return t(this.year(),this.month())},dayOfYear:function(a){var b=hb((db(this).startOf("day")-db(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Y(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Y(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=p(a),this[a]()},set:function(a,b){return a=p(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=C(b),this)}}),eb=0;eb<Rb.length;eb++)_(Rb[eb].toLowerCase().replace(/s$/,""),Rb[eb]);_("year","FullYear"),db.fn.days=db.fn.day,db.fn.months=db.fn.month,db.fn.weeks=db.fn.week,db.fn.isoWeeks=db.fn.isoWeek,db.fn.toJSON=db.fn.toISOString,h(db.duration.fn=g.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=j(e/1e3),h.seconds=a%60,b=j(a/60),h.minutes=b%60,c=j(b/60),h.hours=c%24,f+=j(c/24),h.days=f%30,g+=j(f/30),h.months=g%12,d=j(g/12),h.years=d},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)},humanize:function(a){var b=+this,c=X(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=db.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=db.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=p(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=p(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:db.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(eb in Sb)Sb.hasOwnProperty(eb)&&(bb(eb,Sb[eb]),ab(eb.toLowerCase()));bb("Weeks",6048e5),db.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},db.lang("en",{ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),rb?(module.exports=db,cb(!0)):"function"==typeof define&&define.amd?define("moment",function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&cb(d.config().noGlobal===a),db}):cb()}).call(this);

/* prettyCheckable */
!function(a,b,c,d){"use strict";var e="prettyCheckable",f="plugin_"+e,g={label:"",labelPosition:"right",customClass:"",color:"blue"},h=function(c){b.ko&&a(c).on("change",function(b){if(b.preventDefault(),b.originalEvent===d){var c=a(this).closest(".clearfix"),e=a(c).find("a:first"),f=e.hasClass("checked");f===!0?e.addClass("checked"):e.removeClass("checked")}}),c.find("a:first, label").on("touchstart click",function(c){c.preventDefault();var d=a(this).closest(".clearfix"),e=d.find("input"),f=d.find("a:first");f.hasClass("disabled")!==!0&&("radio"===e.prop("type")&&a('input[name="'+e.attr("name")+'"]').each(function(b,c){a(c).prop("checked",!1).parent().find("a:first").removeClass("checked")}),b.ko?ko.utils.triggerEvent(e[0],"click"):e.prop("checked")?e.prop("checked",!1).change():e.prop("checked",!0).change(),f.toggleClass("checked"))}),c.find("a:first").on("keyup",function(b){32===b.keyCode&&a(this).click()})},i=function(b){this.element=b,this.options=a.extend({},g)};i.prototype={init:function(b){a.extend(this.options,b);var c=a(this.element);c.parent().addClass("has-pretty-child"),c.css("display","none");var e=c.data("type")!==d?c.data("type"):c.attr("type"),f=null,g=c.attr("id");if(g!==d){var i=a("label[for="+g+"]");i.length>0&&(f=i.text(),i.remove())}""===this.options.label&&(this.options.label=f),f=c.data("label")!==d?c.data("label"):this.options.label;var j=c.data("labelposition")!==d?"label"+c.data("labelposition"):"label"+this.options.labelPosition,k=c.data("customclass")!==d?c.data("customclass"):this.options.customClass,l=c.data("color")!==d?c.data("color"):this.options.color,m=c.prop("disabled")===!0?"disabled":"",n=["pretty"+e,j,k,l].join(" ");c.wrap('<div class="clearfix '+n+'"></div>').parent().html();var o=[],p=c.prop("checked")?"checked":"";"labelright"===j?(o.push('<a href="#" class="'+p+" "+m+'"></a>'),o.push('<label for="'+c.attr("id")+'">'+f+"</label>")):(o.push('<label for="'+c.attr("id")+'">'+f+"</label>"),o.push('<a href="#" class="'+p+" "+m+'"></a>')),c.parent().append(o.join("\n")),h(c.parent())},check:function(){"radio"===a(this.element).prop("type")&&a('input[name="'+a(this.element).attr("name")+'"]').each(function(b,c){a(c).prop("checked",!1).attr("checked",!1).parent().find("a:first").removeClass("checked")}),a(this.element).prop("checked",!0).attr("checked",!0).parent().find("a:first").addClass("checked")},uncheck:function(){a(this.element).prop("checked",!1).attr("checked",!1).parent().find("a:first").removeClass("checked")},enable:function(){a(this.element).removeAttr("disabled").parent().find("a:first").removeClass("disabled")},disable:function(){a(this.element).attr("disabled","disabled").parent().find("a:first").addClass("disabled")},destroy:function(){var b=a(this.element),c=b.clone(),e=b.attr("id");if(e!==d){var f=a("label[for="+e+"]");f.length>0&&f.insertBefore(b.parent())}c.removeAttr("style").insertAfter(f),b.parent().remove()}},a.fn[e]=function(b){var c,d;if(this.data(f)instanceof i||this.data(f,new i(this)),d=this.data(f),d.element=this,"undefined"==typeof b||"object"==typeof b)"function"==typeof d.init&&d.init(b);else{if("string"==typeof b&&"function"==typeof d[b])return c=Array.prototype.slice.call(arguments,1),d[b].apply(d,c);a.error("Method "+b+" does not exist on jQuery."+e)}}}(jQuery,window,document);

/* Fancy Clock*/
(function(e){function n(){var n=["orange","blue","green"];var i;for(var s=0;s<3;s++){i=e("<div>").attr("class",n[s]+" clock").html('<div class="display"></div>'+'<div class="front left"></div>'+'<div class="rotate left">'+'<div class="bg left"></div>'+"</div>"+'<div class="rotate right">'+'<div class="bg right"></div>'+"</div>");e(this).append(i);i.rotateLeft=i.find(".rotate.left");i.rotateRight=i.find(".rotate.right");i.display=i.find(".display");t[n[s]]=i}setInterval(function(){var e=new Date;var n=e.getHours();var i=e.getMinutes();var s=e.getSeconds();r(t.green,s,60);r(t.blue,i,60);r(t.orange,n,24)},1e3)}function r(e,t,n){var r=360/n*(t+1);var s;if(t==0){e.rotateRight.hide();i(e.rotateLeft,0)}if(r<=180){s=e.rotateLeft}else{e.rotateRight.show();e.rotateLeft.show();i(e.rotateLeft,180);s=e.rotateRight;r=r-180}i(s,r);e.display.html(t<10?"0"+t:t)}function i(e,t){var n="rotate("+t+"deg)";if(e.css("MozTransform")!=undefined)e.css("MozTransform",n);else if(e.css("WebkitTransform")!=undefined)e.css("WebkitTransform",n);else if(e.css("filter")!=undefined){var r=Math.cos(Math.PI*2/360*t);var i=Math.sin(Math.PI*2/360*t);e.css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+r+",M12=-"+i+",M21="+i+",M22="+r+",SizingMethod='auto expand',FilterType='nearest neighbor')");e.css("left",-Math.floor((e.width()-200)/2));e.css("top",-Math.floor((e.height()-200)/2))}}var t={};e.fn.tzineClock=function(t){var r=this.eq(0);if(!r){try{console.log("Invalid selector!")}catch(i){}return false}if(!t)t={};var s={};e.each(s,function(e,n){t[e]=t[e]||s[e]});n.call(r);return this}})(jQuery);

/*
  Plugin: iframe autoheight jQuery Plugin
  Version: 1.9.3
  Description: when the page loads set the height of an iframe based on the height of its contents
  see README: http://github.com/house9/jquery-iframe-auto-height 
*/
!function(e){e.fn.iframeAutoHeight=function(t){function i(e){s.debug&&s.debug===!0&&window.console&&console.log(e)}function n(t,n){i("Diagnostics from '"+n+"'");try{i("  "+e(t,window.top.document).contents().find("body")[0].scrollHeight+" for ...find('body')[0].scrollHeight"),i("  "+e(t.contentWindow.document).height()+" for ...contentWindow.document).height()"),i("  "+e(t.contentWindow.document.body).height()+" for ...contentWindow.document.body).height()")}catch(r){i("  unable to check in this state")}i("End diagnostics -> results vary by browser and when diagnostics are requested")}var r;if(e.browser===r){var o=[];return o.push("WARNING: you appear to be using a newer version of jquery which does not support the $.browser variable."),o.push("The jQuery iframe auto height plugin relies heavly on the $.browser features."),o.push("Install jquery-browser: https://raw.github.com/house9/jquery-iframe-auto-height/master/release/jquery.browser.js"),alert(o.join("\n")),e}var s=e.extend({heightOffset:0,minHeight:0,callback:function(){},animate:!1,debug:!1,diagnostics:!1,resetToMinHeight:!1,triggerFunctions:[],heightCalculationOverrides:[]},t);return i(s),this.each(function(){function t(e){var t=null;return jQuery.each(o,function(i,n){return e[n]?(t=h[n],!1):void 0}),null===t&&(t=h["default"]),t}function r(r){s.diagnostics&&n(r,"resizeHeight"),s.resetToMinHeight&&s.resetToMinHeight===!0&&(r.style.height=s.minHeight+"px");var o=e(r,window.top.document).contents().find("body"),h=t(e.browser),a=h(r,o,s,e.browser);i(a),a<s.minHeight&&(i("new height is less than minHeight"),a=s.minHeight+s.heightOffset),i("New Height: "+a),s.animate?e(r).animate({height:a+"px"},{duration:500}):r.style.height=a+"px",s.callback.apply(e(r),[{newFrameHeight:a}])}var o=["webkit","mozilla","msie","opera"],h=[];h["default"]=function(e,t,i){return t[0].scrollHeight+i.heightOffset},jQuery.each(o,function(e,t){h[t]=h["default"]}),jQuery.each(s.heightCalculationOverrides,function(e,t){h[t.browser]=t.calculation});var a=0;if(i(this),s.diagnostics&&n(this,"each iframe"),s.triggerFunctions.length>0){i(s.triggerFunctions.length+" trigger Functions");for(var u=0;u<s.triggerFunctions.length;u++)s.triggerFunctions[u](r,this)}if(e.browser.webkit||e.browser.opera){i("browser is webkit or opera"),e(this).load(function(){var e=0,t=this,n=function(){r(t)};0===a?e=500:t.style.height=s.minHeight+"px",i("load delay: "+e),setTimeout(n,e),a++});var c=e(this).attr("src");e(this).attr("src",""),e(this).attr("src",c)}else e(this).load(function(){r(this)})})}}(jQuery);

/* jQuery Nivo Slider v3.2 */
(function(e){var t=function(t,n){var r=e.extend({},e.fn.nivoSlider.defaults,n);var i={currentSlide:0,currentImage:"",totalSlides:0,running:false,paused:false,stop:false,controlNavEl:false};var s=e(t);s.data("nivo:vars",i).addClass("nivoSlider");var o=s.children();o.each(function(){var t=e(this);var n="";if(!t.is("img")){if(t.is("a")){t.addClass("nivo-imageLink");n=t}t=t.find("img:first")}var r=r===0?t.attr("width"):t.width(),s=s===0?t.attr("height"):t.height();if(n!==""){n.css("display","none")}t.css("display","none");i.totalSlides++});if(r.randomStart){r.startSlide=Math.floor(Math.random()*i.totalSlides)}if(r.startSlide>0){if(r.startSlide>=i.totalSlides){r.startSlide=i.totalSlides-1}i.currentSlide=r.startSlide}if(e(o[i.currentSlide]).is("img")){i.currentImage=e(o[i.currentSlide])}else{i.currentImage=e(o[i.currentSlide]).find("img:first")}if(e(o[i.currentSlide]).is("a")){e(o[i.currentSlide]).css("display","block")}var u=e("<img/>").addClass("nivo-main-image");u.attr("src",i.currentImage.attr("src")).show();s.append(u);e(window).resize(function(){s.children("img").width(s.width());u.attr("src",i.currentImage.attr("src"));u.stop().height("auto");e(".nivo-slice").remove();e(".nivo-box").remove()});s.append(e('<div class="nivo-caption"></div>'));var a=function(t){var n=e(".nivo-caption",s);if(i.currentImage.attr("title")!=""&&i.currentImage.attr("title")!=undefined){var r=i.currentImage.attr("title");if(r.substr(0,1)=="#")r=e(r).html();if(n.css("display")=="block"){setTimeout(function(){n.html(r)},t.animSpeed)}else{n.html(r);n.stop().fadeIn(t.animSpeed)}}else{n.stop().fadeOut(t.animSpeed)}};a(r);var f=0;if(!r.manualAdvance&&o.length>1){f=setInterval(function(){d(s,o,r,false)},r.pauseTime)}if(r.directionNav){s.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+r.prevText+'</a><a class="nivo-nextNav">'+r.nextText+"</a></div>");e(s).on("click","a.nivo-prevNav",function(){if(i.running){return false}clearInterval(f);f="";i.currentSlide-=2;d(s,o,r,"prev")});e(s).on("click","a.nivo-nextNav",function(){if(i.running){return false}clearInterval(f);f="";d(s,o,r,"next")})}if(r.controlNav){i.controlNavEl=e('<div class="nivo-controlNav"></div>');s.after(i.controlNavEl);for(var l=0;l<o.length;l++){if(r.controlNavThumbs){i.controlNavEl.addClass("nivo-thumbs-enabled");var c=o.eq(l);if(!c.is("img")){c=c.find("img:first")}if(c.attr("data-thumb"))i.controlNavEl.append('<a class="nivo-control" rel="'+l+'"><img src="'+c.attr("data-thumb")+'" alt="" /></a>')}else{i.controlNavEl.append('<a class="nivo-control" rel="'+l+'">'+(l+1)+"</a>")}}e("a:eq("+i.currentSlide+")",i.controlNavEl).addClass("active");e("a",i.controlNavEl).bind("click",function(){if(i.running)return false;if(e(this).hasClass("active"))return false;clearInterval(f);f="";u.attr("src",i.currentImage.attr("src"));i.currentSlide=e(this).attr("rel")-1;d(s,o,r,"control")})}if(r.pauseOnHover){s.hover(function(){i.paused=true;clearInterval(f);f=""},function(){i.paused=false;if(f===""&&!r.manualAdvance){f=setInterval(function(){d(s,o,r,false)},r.pauseTime)}})}s.bind("nivo:animFinished",function(){u.attr("src",i.currentImage.attr("src"));i.running=false;e(o).each(function(){if(e(this).is("a")){e(this).css("display","none")}});if(e(o[i.currentSlide]).is("a")){e(o[i.currentSlide]).css("display","block")}if(f===""&&!i.paused&&!r.manualAdvance){f=setInterval(function(){d(s,o,r,false)},r.pauseTime)}r.afterChange.call(this)});var h=function(t,n,r){if(e(r.currentImage).parent().is("a"))e(r.currentImage).parent().css("display","block");e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").width(t.width()).css("visibility","hidden").show();var i=e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").parent().is("a")?e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").parent().height():e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").height();for(var s=0;s<n.slices;s++){var o=Math.round(t.width()/n.slices);if(s===n.slices-1){t.append(e('<div class="nivo-slice" name="'+s+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block !important; top:0; left:-"+(o+s*o-o)+'px;" /></div>').css({left:o*s+"px",width:t.width()-o*s+"px",height:i+"px",opacity:"0",overflow:"hidden"}))}else{t.append(e('<div class="nivo-slice" name="'+s+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block !important; top:0; left:-"+(o+s*o-o)+'px;" /></div>').css({left:o*s+"px",width:o+"px",height:i+"px",opacity:"0",overflow:"hidden"}))}}e(".nivo-slice",t).height(i);u.stop().animate({height:e(r.currentImage).height()},n.animSpeed)};var p=function(t,n,r){if(e(r.currentImage).parent().is("a"))e(r.currentImage).parent().css("display","block");e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").width(t.width()).css("visibility","hidden").show();var i=Math.round(t.width()/n.boxCols),s=Math.round(e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").height()/n.boxRows);for(var o=0;o<n.boxRows;o++){for(var a=0;a<n.boxCols;a++){if(a===n.boxCols-1){t.append(e('<div class="nivo-box" name="'+a+'" rel="'+o+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block; top:-"+s*o+"px; left:-"+i*a+'px;" /></div>').css({opacity:0,left:i*a+"px",top:s*o+"px",width:t.width()-i*a+"px"}));e('.nivo-box[name="'+a+'"]',t).height(e('.nivo-box[name="'+a+'"] img',t).height()+"px")}else{t.append(e('<div class="nivo-box" name="'+a+'" rel="'+o+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block; top:-"+s*o+"px; left:-"+i*a+'px;" /></div>').css({opacity:0,left:i*a+"px",top:s*o+"px",width:i+"px"}));e('.nivo-box[name="'+a+'"]',t).height(e('.nivo-box[name="'+a+'"] img',t).height()+"px")}}}u.stop().animate({height:e(r.currentImage).height()},n.animSpeed)};var d=function(t,n,r,i){var s=t.data("nivo:vars");if(s&&s.currentSlide===s.totalSlides-1){r.lastSlide.call(this)}if((!s||s.stop)&&!i){return false}r.beforeChange.call(this);if(!i){u.attr("src",s.currentImage.attr("src"))}else{if(i==="prev"){u.attr("src",s.currentImage.attr("src"))}if(i==="next"){u.attr("src",s.currentImage.attr("src"))}}s.currentSlide++;if(s.currentSlide===s.totalSlides){s.currentSlide=0;r.slideshowEnd.call(this)}if(s.currentSlide<0){s.currentSlide=s.totalSlides-1}if(e(n[s.currentSlide]).is("img")){s.currentImage=e(n[s.currentSlide])}else{s.currentImage=e(n[s.currentSlide]).find("img:first")}if(r.controlNav){e("a",s.controlNavEl).removeClass("active");e("a:eq("+s.currentSlide+")",s.controlNavEl).addClass("active")}a(r);e(".nivo-slice",t).remove();e(".nivo-box",t).remove();var o=r.effect,f="";if(r.effect==="random"){f=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse");o=f[Math.floor(Math.random()*(f.length+1))];if(o===undefined){o="fade"}}if(r.effect.indexOf(",")!==-1){f=r.effect.split(",");o=f[Math.floor(Math.random()*f.length)];if(o===undefined){o="fade"}}if(s.currentImage.attr("data-transition")){o=s.currentImage.attr("data-transition")}s.running=true;var l=0,c=0,d="",m="",g="",y="";if(o==="sliceDown"||o==="sliceDownRight"||o==="sliceDownLeft"){h(t,r,s);l=0;c=0;d=e(".nivo-slice",t);if(o==="sliceDownLeft"){d=e(".nivo-slice",t)._reverse()}d.each(function(){var n=e(this);n.css({top:"0px"});if(c===r.slices-1){setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+l)}else{setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed)},100+l)}l+=50;c++})}else if(o==="sliceUp"||o==="sliceUpRight"||o==="sliceUpLeft"){h(t,r,s);l=0;c=0;d=e(".nivo-slice",t);if(o==="sliceUpLeft"){d=e(".nivo-slice",t)._reverse()}d.each(function(){var n=e(this);n.css({bottom:"0px"});if(c===r.slices-1){setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+l)}else{setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed)},100+l)}l+=50;c++})}else if(o==="sliceUpDown"||o==="sliceUpDownRight"||o==="sliceUpDownLeft"){h(t,r,s);l=0;c=0;var b=0;d=e(".nivo-slice",t);if(o==="sliceUpDownLeft"){d=e(".nivo-slice",t)._reverse()}d.each(function(){var n=e(this);if(c===0){n.css("top","0px");c++}else{n.css("bottom","0px");c=0}if(b===r.slices-1){setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+l)}else{setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed)},100+l)}l+=50;b++})}else if(o==="fold"){h(t,r,s);l=0;c=0;e(".nivo-slice",t).each(function(){var n=e(this);var i=n.width();n.css({top:"0px",width:"0px"});if(c===r.slices-1){setTimeout(function(){n.animate({width:i,opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+l)}else{setTimeout(function(){n.animate({width:i,opacity:"1.0"},r.animSpeed)},100+l)}l+=50;c++})}else if(o==="fade"){h(t,r,s);m=e(".nivo-slice:first",t);m.css({width:t.width()+"px"});m.animate({opacity:"1.0"},r.animSpeed*2,"",function(){t.trigger("nivo:animFinished")})}else if(o==="slideInRight"){h(t,r,s);m=e(".nivo-slice:first",t);m.css({width:"0px",opacity:"1"});m.animate({width:t.width()+"px"},r.animSpeed*2,"",function(){t.trigger("nivo:animFinished")})}else if(o==="slideInLeft"){h(t,r,s);m=e(".nivo-slice:first",t);m.css({width:"0px",opacity:"1",left:"",right:"0px"});m.animate({width:t.width()+"px"},r.animSpeed*2,"",function(){m.css({left:"0px",right:""});t.trigger("nivo:animFinished")})}else if(o==="boxRandom"){p(t,r,s);g=r.boxCols*r.boxRows;c=0;l=0;y=v(e(".nivo-box",t));y.each(function(){var n=e(this);if(c===g-1){setTimeout(function(){n.animate({opacity:"1"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+l)}else{setTimeout(function(){n.animate({opacity:"1"},r.animSpeed)},100+l)}l+=20;c++})}else if(o==="boxRain"||o==="boxRainReverse"||o==="boxRainGrow"||o==="boxRainGrowReverse"){p(t,r,s);g=r.boxCols*r.boxRows;c=0;l=0;var w=0;var E=0;var S=[];S[w]=[];y=e(".nivo-box",t);if(o==="boxRainReverse"||o==="boxRainGrowReverse"){y=e(".nivo-box",t)._reverse()}y.each(function(){S[w][E]=e(this);E++;if(E===r.boxCols){w++;E=0;S[w]=[]}});for(var x=0;x<r.boxCols*2;x++){var T=x;for(var N=0;N<r.boxRows;N++){if(T>=0&&T<r.boxCols){(function(n,i,s,u,a){var f=e(S[n][i]);var l=f.width();var c=f.height();if(o==="boxRainGrow"||o==="boxRainGrowReverse"){f.width(0).height(0)}if(u===a-1){setTimeout(function(){f.animate({opacity:"1",width:l,height:c},r.animSpeed/1.3,"",function(){t.trigger("nivo:animFinished")})},100+s)}else{setTimeout(function(){f.animate({opacity:"1",width:l,height:c},r.animSpeed/1.3)},100+s)}})(N,T,l,c,g);c++}T--}l+=100}}};var v=function(e){for(var t,n,r=e.length;r;t=parseInt(Math.random()*r,10),n=e[--r],e[r]=e[t],e[t]=n);return e};var m=function(e){if(this.console&&typeof console.log!=="undefined"){console.log(e)}};this.stop=function(){if(!e(t).data("nivo:vars").stop){e(t).data("nivo:vars").stop=true;m("Stop Slider")}};this.start=function(){if(e(t).data("nivo:vars").stop){e(t).data("nivo:vars").stop=false;m("Start Slider")}};r.afterLoad.call(this);return this};e.fn.nivoSlider=function(n){return this.each(function(r,i){var s=e(this);if(s.data("nivoslider")){return s.data("nivoslider")}var o=new t(this,n);s.data("nivoslider",o)})};e.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3e3,startSlide:0,directionNav:true,controlNav:true,controlNavThumbs:false,pauseOnHover:true,manualAdvance:false,prevText:"Prev",nextText:"Next",randomStart:false,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};e.fn._reverse=[].reverse})(jQuery);

/* clqjsdb.min.js */
var clqjsdb,exports,T;(function(){"use strict";var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;if(!clqjsdb){i="2.7";s=1;o="000000";u=1e3;a={};f=function(e){if(clqjsdb.isArray(e)||clqjsdb.isObject(e)){return e}else{return JSON.parse(e)}};y=function(e,t){return b(e,function(e){return t.indexOf(e)>=0})};b=function(e,t,n){var r=[];if(e==null)return r;if(Array.prototype.filter&&e.filter===Array.prototype.filter)return e.filter(t,n);l(e,function(e,i,s){if(t.call(n,e,i,s))r[r.length]=e});return r};S=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"};E=function(e){var t=T.isArray(e)?[]:T.isObject(e)?{}:null;if(e===null)return e;for(var n in e){t[n]=S(e[n])?e[n].toString():T.isArray(e[n])||T.isObject(e[n])?E(e[n]):e[n]}return t};w=function(e){var t=JSON.stringify(e);if(t.match(/regex/)===null)return t;return JSON.stringify(E(e))};l=function(e,t,n){var r,i,s,o;if(e&&(T.isArray(e)&&e.length===1||!T.isArray(e))){t(T.isArray(e)?e[0]:e,0)}else{for(r,i,s=0,e=T.isArray(e)?e:[e],o=e.length;s<o;s++){i=e[s];if(!T.isUndefined(i)||n||false){r=t(i,s);if(r===T.EXIT){break}}}}};c=function(e,t){var n=0,r,i;for(i in e){if(e.hasOwnProperty(i)){r=t(e[i],i,n++);if(r===T.EXIT){break}}}};a.extend=function(e,t){a[e]=function(){return t.apply(this,arguments)}};h=function(e){var t;if(T.isString(e)&&/[t][0-9]*[r][0-9]*/i.test(e)){return true}if(T.isObject(e)&&e.___id&&e.___s){return true}if(T.isArray(e)){t=true;l(e,function(e){if(!h(e)){t=false;return clqjsdb.EXIT}});return t}return false};d=function(e,t){var n=true;l(t,function(t){switch(T.typeOf(t)){case"function":if(!t.apply(e)){n=false;return clqjsdb.EXIT}break;case"array":n=t.length===1?d(e,t[0]):t.length===2?d(e,t[0])||d(e,t[1]):t.length===3?d(e,t[0])||d(e,t[1])||d(e,t[2]):t.length===4?d(e,t[0])||d(e,t[1])||d(e,t[2])||d(e,t[3]):false;if(t.length>4){l(t,function(t){if(d(e,t)){n=true}})}break}});return n};p=function(e){var t=[];if(T.isString(e)&&/[t][0-9]*[r][0-9]*/i.test(e)){e={___id:e}}if(T.isArray(e)){l(e,function(e){t.push(p(e))});e=function(){var e=this,n=false;l(t,function(t){if(d(e,t)){n=true}});return n};return e}if(T.isObject(e)){if(T.isObject(e)&&e.___id&&e.___s){e={___id:e.___id}}c(e,function(e,n){if(!T.isObject(e)){e={is:e}}c(e,function(e,r){var i=[],s;s=r==="hasAll"?function(e,t){t(e)}:l;s(e,function(e){var t=true,s=false,o;o=function(){var i=this[n],s="==",o="!=",u="===",a="<",f=">",l="<=",c=">=",h="!==",p;if(typeof i==="undefined"){return false}if(r.indexOf("!")===0&&r!==o&&r!==h){t=false;r=r.substring(1,r.length)}p=r==="regex"?e.test(i):r==="lt"||r===a?i<e:r==="gt"||r===f?i>e:r==="lte"||r===l?i<=e:r==="gte"||r===c?i>=e:r==="left"?i.indexOf(e)===0:r==="leftnocase"?i.toLowerCase().indexOf(e.toLowerCase())===0:r==="right"?i.substring(i.length-e.length)===e:r==="rightnocase"?i.toLowerCase().substring(i.length-e.length)===e.toLowerCase():r==="like"?i.indexOf(e)>=0:r==="likenocase"?i.toLowerCase().indexOf(e.toLowerCase())>=0:r===u||r==="is"?i===e:r===s?i==e:r===h?i!==e:r===o?i!=e:r==="isnocase"?i.toLowerCase?i.toLowerCase()===e.toLowerCase():i===e:r==="has"?T.has(i,e):r==="hasall"?T.hasAll(i,e):r==="contains"?clqjsdb.isArray(i)&&i.indexOf(e)>-1:r.indexOf("is")===-1&&!clqjsdb.isNull(i)&&!clqjsdb.isUndefined(i)&&!clqjsdb.isObject(e)&&!clqjsdb.isArray(e)?e===i[r]:T[r]&&T.isFunction(T[r])&&r.indexOf("is")===0?T[r](i)===e:T[r]&&T.isFunction(T[r])?T[r](i,e):false;p=p&&!t?false:!p&&!t?true:p;return p};i.push(o)});if(i.length===1){t.push(i[0])}else{t.push(function(){var e=this,t=false;l(i,function(n){if(n.apply(e)){t=true}});return t})}})});e=function(){var e=this,n=true;n=t.length===1&&!t[0].apply(e)?false:t.length===2&&(!t[0].apply(e)||!t[1].apply(e))?false:t.length===3&&(!t[0].apply(e)||!t[1].apply(e)||!t[2].apply(e))?false:t.length===4&&(!t[0].apply(e)||!t[1].apply(e)||!t[2].apply(e)||!t[3].apply(e))?false:true;if(t.length>4){l(t,function(t){if(!d(e,t)){n=false}})}return n};return e}if(T.isFunction(e)){return e}};m=function(e,t){var n=function(e,n){var r=0;T.each(t,function(t){var i,s,o,u,a;i=t.split(" ");s=i[0];o=i.length===1?"logical":i[1];if(o==="logical"){u=v(e[s]);a=v(n[s]);T.each(u.length<=a.length?u:a,function(e,t){if(u[t]<a[t]){r=-1;return clqjsdb.EXIT}else if(u[t]>a[t]){r=1;return clqjsdb.EXIT}})}else if(o==="logicaldesc"){u=v(e[s]);a=v(n[s]);T.each(u.length<=a.length?u:a,function(e,t){if(u[t]>a[t]){r=-1;return clqjsdb.EXIT}else if(u[t]<a[t]){r=1;return clqjsdb.EXIT}})}else if(o==="asec"&&e[s]<n[s]){r=-1;return T.EXIT}else if(o==="asec"&&e[s]>n[s]){r=1;return T.EXIT}else if(o==="desc"&&e[s]>n[s]){r=-1;return T.EXIT}else if(o==="desc"&&e[s]<n[s]){r=1;return T.EXIT}if(r===0&&o==="logical"&&u.length<a.length){r=-1}else if(r===0&&o==="logical"&&u.length>a.length){r=1}else if(r===0&&o==="logicaldesc"&&u.length>a.length){r=-1}else if(r===0&&o==="logicaldesc"&&u.length<a.length){r=1}if(r!==0){return T.EXIT}});return r};return e&&e.push?e.sort(n):e};(function(){var e={},t=0;v=function(n){if(t>u){e={};t=0}return e["_"+n]||function(){var r=String(n),i=[],s="_",o="",u,a,f;for(u=0,a=r.length;u<a;u++){f=r.charCodeAt(u);if(f>=48&&f<=57||f===46){if(o!=="n"){o="n";i.push(s.toLowerCase());s=""}s=s+r.charAt(u)}else{if(o!=="s"){o="s";i.push(parseFloat(s));s=""}s=s+r.charAt(u)}}i.push(o==="n"?parseFloat(s):s.toLowerCase());i.shift();e["_"+n]=i;t++;return i}()}})();g=function(){this.context({results:this.getDBI().query(this.context())})};a.extend("filter",function(){var e=clqjsdb.mergeObj(this.context(),{run:null}),t=[];l(e.q,function(e){t.push(e)});e.q=t;l(arguments,function(t){e.q.push(p(t));e.filterRaw.push(t)});return this.getroot(e)});a.extend("order",function(e){e=e.split(",");var t=[],n;l(e,function(e){t.push(e.replace(/^\s*/,"").replace(/\s*$/,""))});n=clqjsdb.mergeObj(this.context(),{sort:null});n.order=t;return this.getroot(n)});a.extend("limit",function(e){var t=clqjsdb.mergeObj(this.context(),{}),n;t.limit=e;if(t.run&&t.sort){n=[];l(t.results,function(t,r){if(r+1>e){return clqjsdb.EXIT}n.push(t)});t.results=n}return this.getroot(t)});a.extend("start",function(e){var t=clqjsdb.mergeObj(this.context(),{}),n;t.start=e;if(t.run&&t.sort&&!t.limit){n=[];l(t.results,function(t,r){if(r+1>e){n.push(t)}});t.results=n}else{t=clqjsdb.mergeObj(this.context(),{run:null,start:e})}return this.getroot(t)});a.extend("update",function(e,t,n){var r=true,i={},s=arguments,o;if(clqjsdb.isString(e)&&(arguments.length===2||arguments.length===3)){i[e]=t;if(arguments.length===3){r=n}}else{i=e;if(s.length===2){r=t}}o=this;g.call(this);l(this.context().results,function(e){var t=i;if(clqjsdb.isFunction(t)){t=t.apply(clqjsdb.mergeObj(e,{}))}else{if(T.isFunction(t)){t=t(clqjsdb.mergeObj(e,{}))}}if(clqjsdb.isObject(t)){o.getDBI().update(e.___id,t,r)}});if(this.context().results.length){this.context({run:null})}return this});a.extend("remove",function(e){var t=this,n=0;g.call(this);l(this.context().results,function(e){t.getDBI().remove(e.___id);n++});if(this.context().results.length){this.context({run:null});t.getDBI().removeCommit(e)}return n});a.extend("count",function(){g.call(this);return this.context().results.length});a.extend("callback",function(e,t){if(e){var n=this;setTimeout(function(){g.call(n);e.call(n.getroot(n.context()))},t||0)}return null});a.extend("get",function(){g.call(this);return this.context().results});a.extend("stringify",function(){return JSON.stringify(this.get())});a.extend("first",function(){g.call(this);return this.context().results[0]||false});a.extend("last",function(){g.call(this);return this.context().results[this.context().results.length-1]||false});a.extend("sum",function(){var e=0,t=this;g.call(t);l(arguments,function(n){l(t.context().results,function(t){e=e+(t[n]||0)})});return e});a.extend("min",function(e){var t=null;g.call(this);l(this.context().results,function(n){if(t===null||n[e]<t){t=n[e]}});return t});(function(){var e=function(){var e,t,n;e=function(e,t,n){var r,i,s,o;if(n.length===2){r=e[n[0]];s="===";i=t[n[1]]}else{r=e[n[0]];s=n[1];i=t[n[2]]}switch(s){case"===":return r===i;case"!==":return r!==i;case"<":return r<i;case">":return r>i;case"<=":return r<=i;case">=":return r>=i;case"==":return r==i;case"!=":return r!=i;default:throw String(s)+" is not supported"}};t=function(e,t){var n={},r,i;for(r in e){if(e.hasOwnProperty(r)){n[r]=e[r]}}for(r in t){if(t.hasOwnProperty(r)&&r!=="___id"&&r!=="___s"){i=!clqjsdb.isUndefined(n[r])?"right_":"";n[i+String(r)]=t[r]}}return n};n=function(n){var r,i,s=arguments,o=s.length,u=[];if(typeof n.filter!=="function"){if(n.clqjsdb){r=n()}else{throw"clqjsdb DB or result not supplied"}}else{r=n}this.context({results:this.getDBI().query(this.context())});clqjsdb.each(this.context().results,function(n){r.each(function(r){var a,f=true;e:for(i=1;i<o;i++){a=s[i];if(typeof a==="function"){f=a(n,r)}else if(typeof a==="object"&&a.length){f=e(n,r,a)}else{f=false}if(!f){break e}}if(f){u.push(t(n,r))}})});return clqjsdb(u)()};return n}();a.extend("join",e)})();a.extend("max",function(e){var t=null;g.call(this);l(this.context().results,function(n){if(t===null||n[e]>t){t=n[e]}});return t});a.extend("select",function(){var e=[],t=arguments;g.call(this);if(arguments.length===1){l(this.context().results,function(n){e.push(n[t[0]])})}else{l(this.context().results,function(n){var r=[];l(t,function(e){r.push(n[e])});e.push(r)})}return e});a.extend("distinct",function(){var e=[],t=arguments;g.call(this);if(arguments.length===1){l(this.context().results,function(n){var r=n[t[0]],i=false;l(e,function(e){if(r===e){i=true;return clqjsdb.EXIT}});if(!i){e.push(r)}})}else{l(this.context().results,function(n){var r=[],i=false;l(t,function(e){r.push(n[e])});l(e,function(e){var n=true;l(t,function(t,i){if(r[i]!==e[i]){n=false;return clqjsdb.EXIT}});if(n){i=true;return clqjsdb.EXIT}});if(!i){e.push(r)}})}return e});a.extend("supplant",function(e,t){var n=[];g.call(this);l(this.context().results,function(t){n.push(e.replace(/\{([^\{\}]*)\}/g,function(e,n){var r=t[n];return typeof r==="string"||typeof r==="number"?r:e}))});return!t?n.join(""):n});a.extend("each",function(e){g.call(this);l(this.context().results,e);return this});a.extend("map",function(e){var t=[];g.call(this);l(this.context().results,function(n){t.push(e(n))});return t});T=function(e){var t=[],n={},r=1,i={template:false,onInsert:false,onUpdate:false,onRemove:false,onDBChange:false,storageName:false,forcePropertyCase:null,cacheSize:100,name:""},u=new Date,v=0,g=0,y={},b,E,S;E=function(e){var r=[],i=false;if(e.length===0){return t}l(e,function(e){if(T.isString(e)&&/[t][0-9]*[r][0-9]*/i.test(e)&&t[n[e]]){r.push(t[n[e]]);i=true}if(T.isObject(e)&&e.___id&&e.___s&&t[n[e.___id]]){r.push(t[n[e.___id]]);i=true}if(T.isArray(e)){l(e,function(e){l(E(e),function(e){r.push(e)})})}});if(i&&r.length>1){r=[]}return r};b={dm:function(e){if(e){u=e;y={};v=0;g=0}if(i.onDBChange){setTimeout(function(){i.onDBChange.call(t)},0)}if(i.storageName){setTimeout(function(){localStorage.setItem("clqjsdb_"+i.storageName,JSON.stringify(t))})}return u},insert:function(e,u){var a=[],h=[],p=f(e);l(p,function(e,f){var p,d;if(T.isArray(e)&&f===0){l(e,function(e){a.push(i.forcePropertyCase==="lower"?e.toLowerCase():i.forcePropertyCase==="upper"?e.toUpperCase():e)});return true}else if(T.isArray(e)){p={};l(e,function(e,t){p[a[t]]=e});e=p}else if(T.isObject(e)&&i.forcePropertyCase){d={};c(e,function(t,n){d[i.forcePropertyCase==="lower"?n.toLowerCase():i.forcePropertyCase==="upper"?n.toUpperCase():n]=e[n]});e=d}r++;e.___id="T"+String(o+s).slice(-6)+"R"+String(o+r).slice(-6);e.___s=true;h.push(e.___id);if(i.template){e=T.mergeObj(i.template,e)}t.push(e);n[e.___id]=t.length-1;if(i.onInsert&&(u||clqjsdb.isUndefined(u))){i.onInsert.call(e)}b.dm(new Date)});return S(h)},sort:function(e){t=m(t,e.split(","));n={};l(t,function(e,t){n[e.___id]=t});b.dm(new Date);return true},update:function(e,r,s){var o={},u,a,f,l;if(i.forcePropertyCase){c(r,function(e,t){o[i.forcePropertyCase==="lower"?t.toLowerCase():i.forcePropertyCase==="upper"?t.toUpperCase():t]=e});r=o}u=t[n[e]];a=T.mergeObj(u,r);f={};l=false;c(a,function(e,t){if(clqjsdb.isUndefined(u[t])||u[t]!==e){f[t]=e;l=true}});if(l){if(i.onUpdate&&(s||clqjsdb.isUndefined(s))){i.onUpdate.call(a,t[n[e]],f)}t[n[e]]=a;b.dm(new Date)}},remove:function(e){t[n[e]].___s=false},removeCommit:function(e){var r;for(r=t.length-1;r>-1;r--){if(!t[r].___s){if(i.onRemove&&(e||clqjsdb.isUndefined(e))){i.onRemove.call(t[r])}n[t[r].___id]=undefined;t.splice(r,1)}}n={};l(t,function(e,t){n[e.___id]=t});b.dm(new Date)},query:function(e){var n,r,s,o,u,a;if(i.cacheSize){r="";l(e.filterRaw,function(e){if(T.isFunction(e)){r="nocache";return clqjsdb.EXIT}});if(r===""){r=w(T.mergeObj(e,{q:false,run:false,sort:false}))}}if(!e.results||!e.run||e.run&&b.dm()>e.run){s=[];if(i.cacheSize&&y[r]){y[r].i=v++;return y[r].results}else{if(e.q.length===0&&e.index.length===0){l(t,function(e){s.push(e)});n=s}else{o=E(e.index);l(o,function(t){if(e.q.length===0||d(t,e.q)){s.push(t)}});n=s}}}else{n=e.results}if(e.order.length>0&&(!e.run||!e.sort)){n=m(n,e.order)}if(n.length&&(e.limit&&e.limit<n.length||e.start)){u=[];l(n,function(t,n){if(!e.start||e.start&&n+1>=e.start){if(e.limit){a=e.start?n+1-e.start:n;if(a<e.limit){u.push(t)}else if(a>e.limit){return clqjsdb.EXIT}}else{u.push(t)}}});n=u}if(i.cacheSize&&r!=="nocache"){g++;setTimeout(function(){var e,t;if(g>=i.cacheSize*2){g=0;e=v-i.cacheSize;t={};c(function(n,r){if(n.i>=e){t[r]=n}});y=t}},0);y[r]={i:v++,results:n}}return n}};S=function(){var e,t;e=clqjsdb.mergeObj(clqjsdb.mergeObj(a,{insert:undefined}),{getDBI:function(){return b},getroot:function(e){return S.call(e)},context:function(e){if(e){t=clqjsdb.mergeObj(t,e.hasOwnProperty("results")?clqjsdb.mergeObj(e,{run:new Date,sort:new Date}):e)}return t},extend:undefined});t=this&&this.q?this:{limit:false,start:false,q:[],filterRaw:[],index:[],order:[],results:false,run:null,sort:null,settings:i};l(arguments,function(e){if(h(e)){t.index.push(e)}else{t.q.push(p(e))}t.filterRaw.push(e)});return e};s++;if(e){b.insert(e)}S.insert=b.insert;S.merge=function(e,t,n){var r={},i=[],s={};n=n||false;t=t||"id";l(e,function(e){var s;r[t]=e[t];i.push(e[t]);s=S(r).first();if(s){b.update(s.___id,e,n)}else{b.insert(e,n)}});s[t]=i;return S(s)};S.clqjsdb=true;S.sort=b.sort;S.settings=function(e){if(e){i=clqjsdb.mergeObj(i,e);if(e.template){S().update(e.template)}}return i};S.store=function(e){var n=false,r;if(localStorage){if(e){r=localStorage.getItem("clqjsdb_"+e);if(r&&r.length>0){S.insert(r);n=true}if(t.length>0){setTimeout(function(){localStorage.setItem("clqjsdb_"+i.storageName,JSON.stringify(t))})}}S.settings({storageName:e})}return S};return S};clqjsdb=T;T.each=l;T.eachin=c;T.extend=a.extend;clqjsdb.EXIT="clqjsdbEXIT";clqjsdb.mergeObj=function(e,t){var n={};c(e,function(t,r){n[r]=e[r]});c(t,function(e,r){n[r]=t[r]});return n};clqjsdb.has=function(e,t){var n=false,r;if(e.clqjsdb){n=e(t);if(n.length>0){return true}else{return false}}else{switch(T.typeOf(e)){case"object":if(T.isObject(t)){c(t,function(r,i){if(n===true&&!T.isUndefined(e[i])&&e.hasOwnProperty(i)){n=T.has(e[i],t[i])}else{n=false;return clqjsdb.EXIT}})}else if(T.isArray(t)){l(t,function(r,i){n=T.has(e,t[i]);if(n){return clqjsdb.EXIT}})}else if(T.isString(t)){if(!clqjsdb.isUndefined(e[t])){return true}else{return false}}return n;case"array":if(T.isObject(t)){l(e,function(r,i){n=T.has(e[i],t);if(n===true){return clqjsdb.EXIT}})}else if(T.isArray(t)){l(t,function(r,i){l(e,function(r,s){n=T.has(e[s],t[i]);if(n===true){return clqjsdb.EXIT}});if(n===true){return clqjsdb.EXIT}})}else if(T.isString(t)||T.isNumber(t)){n=false;for(r=0;r<e.length;r++){n=T.has(e[r],t);if(n){return true}}}return n;case"string":if(T.isString(t)&&t===e){return true}break;default:if(T.typeOf(e)===T.typeOf(t)&&e===t){return true}break}}return false};clqjsdb.hasAll=function(e,t){var n=clqjsdb,r;if(n.isArray(t)){r=true;l(t,function(t){r=n.has(e,t);if(r===false){return clqjsdb.EXIT}});return r}else{return n.has(e,t)}};clqjsdb.typeOf=function(e){var t=typeof e;if(t==="object"){if(e){if(typeof e.length==="number"&&!e.propertyIsEnumerable("length")){t="array"}}else{t="null"}}return t};clqjsdb.getObjectKeys=function(e){var t=[];c(e,function(e,n){t.push(n)});t.sort();return t};clqjsdb.isSameArray=function(e,t){return clqjsdb.isArray(e)&&clqjsdb.isArray(t)&&e.join(",")===t.join(",")?true:false};clqjsdb.isSameObject=function(e,t){var n=clqjsdb,r=true;if(n.isObject(e)&&n.isObject(t)){if(n.isSameArray(n.getObjectKeys(e),n.getObjectKeys(t))){c(e,function(i,s){if(!(n.isObject(e[s])&&n.isObject(t[s])&&n.isSameObject(e[s],t[s])||n.isArray(e[s])&&n.isArray(t[s])&&n.isSameArray(e[s],t[s])||e[s]===t[s])){r=false;return clqjsdb.EXIT}})}else{r=false}}else{r=false}return r};e=["String","Number","Object","Array","Boolean","Null","Function","Undefined"];t=function(e){return function(t){return clqjsdb.typeOf(t)===e.toLowerCase()?true:false}};for(n=0;n<e.length;n++){r=e[n];clqjsdb["is"+r]=t(r)}}})();if(typeof exports==="object"){exports.clqjsdb=clqjsdb};

/* Transparency */
(function(t,e,n,r){function i(r){if(!n[r]){if(!e[r]){if(t)return t(r);throw Error("Cannot find module '"+r+"'")}var o=n[r]={exports:{}};e[r][0](function(t){var n=e[r][1][t];return i(n?n:t)},o,o.exports)}return n[r].exports}for(var o=0;r.length>o;o++)i(r[o]);return i})("undefined"!=typeof require&&require,{1:[function(t,e){var n,r,i,o,s,u=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};s=t("../lib/lodash.js"),o=t("./helpers"),r=t("./context"),i={},i.render=function(t,e,n,u){var l,a;return null==e&&(e=[]),null==n&&(n={}),null==u&&(u={}),l=u.debug&&console?o.consoleLogger:o.nullLogger,l("Transparency.render:",t,e,n,u),t?(s.isArray(e)||(e=[e]),t=(a=o.data(t)).context||(a.context=new r(t,i)),t.render(e,n,u).el):void 0},i.matcher=function(t,e){return t.el.id===e||u.call(t.classNames,e)>=0||t.el.name===e||t.el.getAttribute("data-bind")===e},i.clone=function(t){return n(t).clone()[0]},i.jQueryPlugin=o.chainable(function(t,e,n){var r,o,s,u;for(u=[],o=0,s=this.length;s>o;o++)r=this[o],u.push(i.render(r,t,e,n));return u}),("undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof Zepto&&null!==Zepto)&&(n=jQuery||Zepto,null!=n&&(n.fn.render=i.jQueryPlugin)),(e!==void 0&&null!==e?e.exports:void 0)&&(e.exports=i),"undefined"!=typeof window&&null!==window&&(window.Transparency=i),("undefined"!=typeof define&&null!==define?define.amd:void 0)&&define(function(){return i})},{"../lib/lodash.js":2,"./helpers":3,"./context":4}],2:[function(t,e,n){var r={};r.toString=Object.prototype.toString,r.toArray=function(t){for(var e=Array(t.length),n=0;t.length>n;n++)e[n]=t[n];return e},r.isString=function(t){return"[object String]"==r.toString.call(t)},r.isNumber=function(t){return"[object Number]"==r.toString.call(t)},r.isArray=Array.isArray||function(t){return"[object Array]"===r.toString.call(t)},r.isDate=function(t){return"[object Date]"===r.toString.call(t)},r.isElement=function(t){return!(!t||1!==t.nodeType)},r.isPlainValue=function(t){var e;return e=typeof t,"object"!==e&&"function"!==e||n.isDate(t)},r.isBoolean=function(t){return t===!0||t===!1},e.exports=r},{}],3:[function(t,e,n){var r,i,o,s;r=t("./elementFactory"),n.before=function(t){return function(e){return function(){return t.apply(this,arguments),e.apply(this,arguments)}}},n.after=function(t){return function(e){return function(){return e.apply(this,arguments),t.apply(this,arguments)}}},n.chainable=n.after(function(){return this}),n.onlyWith$=function(t){return"undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof Zepto&&null!==Zepto?function(){return t(arguments)}(jQuery||Zepto):void 0},n.getElements=function(t){var e;return e=[],s(t,e),e},s=function(t,e){var i,o;for(i=t.firstChild,o=[];i;)i.nodeType===n.ELEMENT_NODE&&(e.push(new r.createElement(i)),s(i,e)),o.push(i=i.nextSibling);return o},n.ELEMENT_NODE=1,n.TEXT_NODE=3,o=function(){return"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML},n.cloneNode="undefined"==typeof document||null===document||o()?function(t){return t.cloneNode(!0)}:function(t){var e,r,o,s,u;if(e=Transparency.clone(t),e.nodeType===n.ELEMENT_NODE)for(e.removeAttribute(i),u=e.getElementsByTagName("*"),o=0,s=u.length;s>o;o++)r=u[o],r.removeAttribute(i);return e},i="transparency",n.data=function(t){return t[i]||(t[i]={})},n.nullLogger=function(){},n.consoleLogger=function(){return console.log(arguments)},n.log=n.nullLogger},{"./elementFactory":5}],4:[function(t,e){var n,r,i,o,s,u,l;l=t("./helpers"),o=l.before,i=l.after,s=l.chainable,u=l.cloneNode,r=t("./instance"),e.exports=n=function(){function t(t,e){this.el=t,this.Transparency=e,this.template=u(this.el),this.instances=[new r(this.el,this.Transparency)],this.instanceCache=[]}var e,n;return n=s(function(){return this.parent=this.el.parentNode,this.parent?(this.nextSibling=this.el.nextSibling,this.parent.removeChild(this.el)):void 0}),e=s(function(){return this.parent?this.nextSibling?this.parent.insertBefore(this.el,this.nextSibling):this.parent.appendChild(this.el):void 0}),t.prototype.render=o(n)(i(e)(s(function(t,e,n){for(var i,o,s,l,a,h,c;t.length<this.instances.length;)this.instanceCache.push(this.instances.pop().remove());for(;t.length>this.instances.length;)s=this.instanceCache.pop()||new r(u(this.template),this.Transparency),this.instances.push(s.appendTo(this.el));for(c=[],o=a=0,h=t.length;h>a;o=++a)l=t[o],s=this.instances[o],i=[],c.push(s.prepare(l,i).renderValues(l,i).renderDirectives(l,o,e).renderChildren(l,i,e,n));return c}))),t}()},{"./helpers":3,"./instance":6}],5:[function(t,e){var n,r,i,o,s,u,l,a,h,c,p,f,d,m,y,g,v={}.hasOwnProperty,b=function(t,e){function n(){this.constructor=t}for(var r in e)v.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};p=t("../lib/lodash.js"),c=t("./helpers"),n=t("./attributeFactory"),e.exports=o={Elements:{input:{}},createElement:function(t){var e,n;return e="input"===(n=t.nodeName.toLowerCase())?o.Elements[n][t.type.toLowerCase()]||s:o.Elements[n]||i,new e(t)}},i=function(){function t(t){this.el=t,this.attributes={},this.childNodes=p.toArray(this.el.childNodes),this.nodeName=this.el.nodeName.toLowerCase(),this.classNames=this.el.className.split(" "),this.originalAttributes={}}return t.prototype.empty=function(){for(var t;t=this.el.firstChild;)this.el.removeChild(t);return this},t.prototype.reset=function(){var t,e,n,r;n=this.attributes,r=[];for(e in n)t=n[e],r.push(t.set(t.templateValue));return r},t.prototype.render=function(t){return this.attr("text",t)},t.prototype.attr=function(t,e){var r,i;return r=(i=this.attributes)[t]||(i[t]=n.createAttribute(this.el,t,e)),null!=e&&r.set(e),r},t.prototype.renderDirectives=function(t,e,n){var r,i,o,s;s=[];for(i in n)v.call(n,i)&&(r=n[i],"function"==typeof r&&(o=r.call(t,{element:this.el,index:e,value:this.attr(i).templateValue}),null!=o?s.push(this.attr(i,o)):s.push(void 0)));return s},t}(),l=function(t){function e(t){e.__super__.constructor.call(this,t),this.elements=c.getElements(t)}return b(e,t),o.Elements.select=e,e.prototype.render=function(t){var e,n,r,i,o;for(t=""+t,i=this.elements,o=[],n=0,r=i.length;r>n;n++)e=i[n],"option"===e.nodeName&&o.push(e.attr("selected",e.el.value===t));return o},e}(i),h=function(t){function e(){return f=e.__super__.constructor.apply(this,arguments)}var n,r,i,s;for(b(e,t),n=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],i=0,s=n.length;s>i;i++)r=n[i],o.Elements[r]=e;return e.prototype.attr=function(t,n){return"text"!==t&&"html"!==t?e.__super__.attr.call(this,t,n):void 0},e}(i),s=function(t){function e(){return d=e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.render=function(t){return this.attr("value",t)},e}(h),a=function(t){function e(){return m=e.__super__.constructor.apply(this,arguments)}return b(e,t),o.Elements.textarea=e,e}(s),r=function(t){function e(){return y=e.__super__.constructor.apply(this,arguments)}return b(e,t),o.Elements.input.checkbox=e,e.prototype.render=function(t){return this.attr("checked",Boolean(t))},e}(s),u=function(t){function e(){return g=e.__super__.constructor.apply(this,arguments)}return b(e,t),o.Elements.input.radio=e,e}(r)},{"../lib/lodash.js":2,"./helpers":3,"./attributeFactory":7}],6:[function(t,e){var n,r,i,o,s={}.hasOwnProperty;o=t("../lib/lodash.js"),r=(i=t("./helpers")).chainable,e.exports=n=function(){function t(t,e){this.Transparency=e,this.queryCache={},this.childNodes=o.toArray(t.childNodes),this.elements=i.getElements(t)}return t.prototype.remove=r(function(){var t,e,n,r,i;for(r=this.childNodes,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(t.parentNode.removeChild(t));return i}),t.prototype.appendTo=r(function(t){var e,n,r,i,o;for(i=this.childNodes,o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(t.appendChild(e));return o}),t.prototype.prepare=r(function(t){var e,n,r,o,s;for(o=this.elements,s=[],n=0,r=o.length;r>n;n++)e=o[n],e.reset(),s.push(i.data(e.el).model=t);return s}),t.prototype.renderValues=r(function(t,e){var n,r,i,u;if(o.isElement(t)&&(n=this.elements[0]))return n.empty().el.appendChild(t);if("object"==typeof t){u=[];for(r in t)s.call(t,r)&&(i=t[r],null!=i&&(o.isString(i)||o.isNumber(i)||o.isBoolean(i)||o.isDate(i)?u.push(function(){var t,e,o,s;for(o=this.matchingElements(r),s=[],t=0,e=o.length;e>t;t++)n=o[t],s.push(n.render(i));return s}.call(this)):"object"==typeof i?u.push(e.push(r)):u.push(void 0)));return u}}),t.prototype.renderDirectives=r(function(t,e,n){var r,i,o,u;u=[];for(o in n)s.call(n,o)&&(r=n[o],"object"==typeof r&&("object"!=typeof t&&(t={value:t}),u.push(function(){var n,s,u,l;for(u=this.matchingElements(o),l=[],n=0,s=u.length;s>n;n++)i=u[n],l.push(i.renderDirectives(t,e,r));return l}.call(this))));return u}),t.prototype.renderChildren=r(function(t,e,n,r){var i,o,s,u,l;for(l=[],s=0,u=e.length;u>s;s++)o=e[s],l.push(function(){var e,s,u,l;for(u=this.matchingElements(o),l=[],e=0,s=u.length;s>e;e++)i=u[e],l.push(this.Transparency.render(i.el,t[o],n[o],r));return l}.call(this));return l}),t.prototype.matchingElements=function(t){var e,n,r;return n=(r=this.queryCache)[t]||(r[t]=function(){var n,r,i,o;for(i=this.elements,o=[],n=0,r=i.length;r>n;n++)e=i[n],this.Transparency.matcher(e,t)&&o.push(e);return o}.call(this)),i.log("Matching elements for '"+t+"':",n),n},t}()},{"../lib/lodash.js":2,"./helpers":3}],7:[function(t,e){var n,r,i,o,s,u,l,a,h={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};a=t("../lib/lodash"),l=t("./helpers"),e.exports=r={Attributes:{},createAttribute:function(t,e){var i;return i=r.Attributes[e]||n,new i(t,e)}},n=function(){function t(t,e){this.el=t,this.name=e,this.templateValue=this.el.getAttribute(this.name)||""}return t.prototype.set=function(t){return this.el[this.name]=t,this.el.setAttribute(this.name,""+t)},t}(),i=function(t){function e(t,e){this.el=t,this.name=e,this.templateValue=this.el.getAttribute(this.name)||!1}var n,i,o,s;for(c(e,t),n=["hidden","async","defer","autofocus","formnovalidate","disabled","autofocus","formnovalidate","multiple","readonly","required","checked","scoped","reversed","selected","loop","muted","autoplay","controls","seamless","default","ismap","novalidate","open","typemustmatch","truespeed"],o=0,s=n.length;s>o;o++)i=n[o],r.Attributes[i]=e;return e.prototype.set=function(t){return this.el[this.name]=t,t?this.el.setAttribute(this.name,this.name):this.el.removeAttribute(this.name)},e}(n),u=function(t){function e(t,e){var n;this.el=t,this.name=e,this.templateValue=function(){var t,e,r,i;for(r=this.el.childNodes,i=[],t=0,e=r.length;e>t;t++)n=r[t],n.nodeType===l.TEXT_NODE&&i.push(n.nodeValue);return i}.call(this).join(""),this.children=a.toArray(this.el.children),(this.textNode=this.el.firstChild)?this.textNode.nodeType!==l.TEXT_NODE&&(this.textNode=this.el.insertBefore(this.el.ownerDocument.createTextNode(""),this.textNode)):this.el.appendChild(this.textNode=this.el.ownerDocument.createTextNode(""))}return c(e,t),r.Attributes.text=e,e.prototype.set=function(t){for(var e,n,r,i,o;e=this.el.firstChild;)this.el.removeChild(e);for(this.textNode.nodeValue=t,this.el.appendChild(this.textNode),i=this.children,o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(this.el.appendChild(e));return o},e}(n),s=function(t){function e(t){this.el=t,this.templateValue="",this.children=a.toArray(this.el.children)}return c(e,t),r.Attributes.html=e,e.prototype.set=function(t){for(var e,n,r,i,o;e=this.el.firstChild;)this.el.removeChild(e);for(this.el.innerHTML=t+this.templateValue,i=this.children,o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(this.el.appendChild(e));return o},e}(n),o=function(t){function e(t){e.__super__.constructor.call(this,t,"class")}return c(e,t),r.Attributes["class"]=e,e}(n)},{"../lib/lodash":2,"./helpers":3}]},{},[1]);

// jQuery Mask Plugin v1.6.5
// github.com/igorescobar/jQuery-Mask-Plugin
(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):g(window.jQuery||window.Zepto)})(function(g){var z=function(b,f,d){var l=this,x,y;b=g(b);f="function"===typeof f?f(b.val(),void 0,b,d):f;l.init=function(){d=d||{};l.byPassKeys=[9,16,17,18,36,37,38,39,40,91];l.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};l.translation=g.extend({},l.translation,d.translation);l=g.extend(!0,{},l,d);y=
c.getRegexMask();b.each(function(){!1!==d.maxlength&&b.attr("maxlength",f.length);d.placeholder&&b.attr("placeholder",d.placeholder);b.attr("autocomplete","off");c.destroyEvents();c.events();var a=c.getCaret();c.val(c.getMasked());c.setCaret(a+c.getMaskCharactersBeforeCount(a,!0))})};var c={getCaret:function(){var a;a=0;var e=b.get(0),c=document.selection,e=e.selectionStart;if(c&&!~navigator.appVersion.indexOf("MSIE 10"))a=c.createRange(),a.moveStart("character",b.is("input")?-b.val().length:-b.text().length),
a=a.text.length;else if(e||"0"===e)a=e;return a},setCaret:function(a){if(b.is(":focus")){var e;e=b.get(0);e.setSelectionRange?e.setSelectionRange(a,a):e.createTextRange&&(e=e.createTextRange(),e.collapse(!0),e.moveEnd("character",a),e.moveStart("character",a),e.select())}},events:function(){b.on("keydown.mask",function(){x=c.val()});b.on("keyup.mask",c.behaviour);b.on("paste.mask drop.mask",function(){setTimeout(function(){b.keydown().keyup()},100)});b.on("change.mask",function(){b.data("changeCalled",
!0)});b.on("blur.mask",function(a){a=g(a.target);a.prop("defaultValue")!==a.val()&&(a.prop("defaultValue",a.val()),a.data("changeCalled")||a.trigger("change"));a.data("changeCalled",!1)});b.on("focusout.mask",function(){d.clearIfNotMatch&&!y.test(c.val())&&c.val("")})},getRegexMask:function(){var a=[],e,b,c,d,k;for(k in f)(e=l.translation[f[k]])?(b=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),c=e.optional,(e=e.recursive)?(a.push(f[k]),d={digit:f[k],pattern:b}):a.push(c||e?b+"?":b)):a.push("\\"+
f[k]);a=a.join("");d&&(a=a.replace(RegExp("("+d.digit+"(.*"+d.digit+")?)"),"($1)?").replace(RegExp(d.digit,"g"),d.pattern));return RegExp(a)},destroyEvents:function(){b.off("keydown.mask keyup.mask paste.mask drop.mask change.mask blur.mask focusout.mask").removeData("changeCalled")},val:function(a){var e=b.is("input");return 0<arguments.length?e?b.val(a):b.text(a):e?b.val():b.text()},getMaskCharactersBeforeCount:function(a,e){for(var b=0,c=0,d=f.length;c<d&&c<a;c++)l.translation[f.charAt(c)]||(a=
e?a+1:a,b++);return b},determineCaretPos:function(a,b,d,h){return l.translation[f.charAt(Math.min(a-1,f.length-1))]?Math.min(a+d-b-h,d):c.determineCaretPos(a+1,b,d,h)},behaviour:function(a){a=a||window.event;var b=a.keyCode||a.which;if(-1===g.inArray(b,l.byPassKeys)){var d=c.getCaret(),f=c.val(),n=f.length,k=d<n,p=c.getMasked(),m=p.length,q=c.getMaskCharactersBeforeCount(m-1)-c.getMaskCharactersBeforeCount(n-1);p!==f&&c.val(p);!k||65===b&&a.ctrlKey||(8!==b&&46!==b&&(d=c.determineCaretPos(d,n,m,q)),
c.setCaret(d));return c.callbacks(a)}},getMasked:function(a){var b=[],g=c.val(),h=0,n=f.length,k=0,p=g.length,m=1,q="push",s=-1,r,u;d.reverse?(q="unshift",m=-1,r=0,h=n-1,k=p-1,u=function(){return-1<h&&-1<k}):(r=n-1,u=function(){return h<n&&k<p});for(;u();){var v=f.charAt(h),w=g.charAt(k),t=l.translation[v];if(t)w.match(t.pattern)?(b[q](w),t.recursive&&(-1===s?s=h:h===r&&(h=s-m),r===s&&(h-=m)),h+=m):t.optional&&(h+=m,k-=m),k+=m;else{if(!a)b[q](v);w===v&&(k+=m);h+=m}}a=f.charAt(r);n!==p+1||l.translation[a]||
b.push(a);return b.join("")},callbacks:function(a){var e=c.val(),g=c.val()!==x;if(!0===g&&"function"===typeof d.onChange)d.onChange(e,a,b,d);if(!0===g&&"function"===typeof d.onKeyPress)d.onKeyPress(e,a,b,d);if("function"===typeof d.onComplete&&e.length===f.length)d.onComplete(e,a,b,d)}};l.remove=function(){var a=c.getCaret(),b=c.getMaskCharactersBeforeCount(a);c.destroyEvents();c.val(l.getCleanVal()).removeAttr("maxlength");c.setCaret(a-b)};l.getCleanVal=function(){return c.getMasked(!0)};l.init()};
g.fn.mask=function(b,f){this.unmask();return this.each(function(){g(this).data("mask",new z(this,b,f))})};g.fn.unmask=function(){return this.each(function(){try{g(this).data("mask").remove()}catch(b){}})};g.fn.cleanVal=function(){return g(this).data("mask").getCleanVal()};g("*[data-mask]").each(function(){var b=g(this),f={};"true"===b.attr("data-mask-reverse")&&(f.reverse=!0);"false"===b.attr("data-mask-maxlength")&&(f.maxlength=!1);"true"===b.attr("data-mask-clearifnotmatch")&&(f.clearIfNotMatch=
!0);b.mask(b.attr("data-mask"),f)})});

/* persist.js */
var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",ON_READY_STATE_CHANGE="onreadystatechange",win=window,doc=document,nav=navigator,plugin=false,domLoadFnArr=[main],regObjArr=[],objIdArr=[],listenersArr=[],storedAltContent,storedAltContentId,storedCallbackFn,storedCallbackObj,isDomLoaded=false,isExpressInstallActive=false,dynamicStylesheet,dynamicStylesheetMedia,autoHideShow=true,ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=!+"\v1",playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){plugin=true;ie=false;d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}
else if(typeof win.ActiveXObject!=UNDEF){try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(a){d=a.GetVariable("$version");if(d){ie=true;d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)];}}}
catch(e){}}
return{w3:w3cdom,pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac};}(),onDomLoad=function(){if(!ua.w3){return;}
if((typeof doc.readyState!=UNDEF&&doc.readyState=="complete")||(typeof doc.readyState==UNDEF&&(doc.getElementsByTagName("body")[0]||doc.body))){callDomLoadFunctions();}
if(!isDomLoaded){if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,false);}
if(ua.ie&&ua.win){doc.attachEvent(ON_READY_STATE_CHANGE,function(){if(doc.readyState=="complete"){doc.detachEvent(ON_READY_STATE_CHANGE,arguments.callee);callDomLoadFunctions();}});if(win==top){(function(){if(isDomLoaded){return;}
try{doc.documentElement.doScroll("left");}
catch(e){setTimeout(arguments.callee,0);return;}
callDomLoadFunctions();})();}}
if(ua.wk){(function(){if(isDomLoaded){return;}
if(!/loaded|complete/.test(doc.readyState)){setTimeout(arguments.callee,0);return;}
callDomLoadFunctions();})();}
addLoadEvent(callDomLoadFunctions);}}();function callDomLoadFunctions(){if(isDomLoaded){return;}
try{var t=doc.getElementsByTagName("body")[0].appendChild(createElement("span"));t.parentNode.removeChild(t);}
catch(e){return;}
isDomLoaded=true;var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]();}}
function addDomLoadEvent(fn){if(isDomLoaded){fn();}
else{domLoadFnArr[domLoadFnArr.length]=fn;}}
function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false);}
else if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false);}
else if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn);}
else if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn();};}
else{win.onload=fn;}}
function main(){if(plugin){testPlayerVersion();}
else{matchVersions();}}
function testPlayerVersion(){var b=doc.getElementsByTagName("body")[0];var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);var t=b.appendChild(o);if(t){var counter=0;(function(){if(typeof t.GetVariable!=UNDEF){var d=t.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");ua.pv=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)];}}
else if(counter<10){counter++;setTimeout(arguments.callee,10);return;}
b.removeChild(o);t=null;matchVersions();})();}
else{matchVersions();}}
function matchVersions(){var rl=regObjArr.length;if(rl>0){for(var i=0;i<rl;i++){var id=regObjArr[i].id;var cb=regObjArr[i].callbackFn;var cbObj={success:false,id:id};if(ua.pv[0]>0){var obj=getElementById(id);if(obj){if(hasPlayerVersion(regObjArr[i].swfVersion)&&!(ua.wk&&ua.wk<312)){setVisibility(id,true);if(cb){cbObj.success=true;cbObj.ref=getObjectById(id);cb(cbObj);}}
else if(regObjArr[i].expressInstall&&canExpressInstall()){var att={};att.data=regObjArr[i].expressInstall;att.width=obj.getAttribute("width")||"0";att.height=obj.getAttribute("height")||"0";if(obj.getAttribute("class")){att.styleclass=obj.getAttribute("class");}
if(obj.getAttribute("align")){att.align=obj.getAttribute("align");}
var par={};var p=obj.getElementsByTagName("param");var pl=p.length;for(var j=0;j<pl;j++){if(p[j].getAttribute("name").toLowerCase()!="movie"){par[p[j].getAttribute("name")]=p[j].getAttribute("value");}}
showExpressInstall(att,par,id,cb);}
else{displayAltContent(obj);if(cb){cb(cbObj);}}}}
else{setVisibility(id,true);if(cb){var o=getObjectById(id);if(o&&typeof o.SetVariable!=UNDEF){cbObj.success=true;cbObj.ref=o;}
cb(cbObj);}}}}}
function getObjectById(objectIdStr){var r=null;var o=getElementById(objectIdStr);if(o&&o.nodeName=="OBJECT"){if(typeof o.SetVariable!=UNDEF){r=o;}
else{var n=o.getElementsByTagName(OBJECT)[0];if(n){r=n;}}}
return r;}
function canExpressInstall(){return!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)&&!(ua.wk&&ua.wk<312);}
function showExpressInstall(att,par,replaceElemIdStr,callbackFn){isExpressInstallActive=true;storedCallbackFn=callbackFn||null;storedCallbackObj={success:false,id:replaceElemIdStr};var obj=getElementById(replaceElemIdStr);if(obj){if(obj.nodeName=="OBJECT"){storedAltContent=abstractAltContent(obj);storedAltContentId=null;}
else{storedAltContent=obj;storedAltContentId=replaceElemIdStr;}
att.id=EXPRESS_INSTALL_ID;if(typeof att.width==UNDEF||(!/%$/.test(att.width)&&parseInt(att.width,10)<310)){att.width="310";}
if(typeof att.height==UNDEF||(!/%$/.test(att.height)&&parseInt(att.height,10)<137)){att.height="137";}
doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",fv="MMredirectURL="+win.location.toString().replace(/&/g,"%26")+"&MMplayerType="+pt+"&MMdoctitle="+doc.title;if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+fv;}
else{par.flashvars=fv;}
if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceElemIdStr+="SWFObjectNew";newObj.setAttribute("id",replaceElemIdStr);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";(function(){if(obj.readyState==4){obj.parentNode.removeChild(obj);}
else{setTimeout(arguments.callee,10);}})();}
createSWF(att,par,replaceElemIdStr);}}
function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";(function(){if(obj.readyState==4){obj.parentNode.removeChild(obj);}
else{setTimeout(arguments.callee,10);}})();}
else{obj.parentNode.replaceChild(abstractAltContent(obj),obj);}}
function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML;}
else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true));}}}}}
return ac;}
function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(ua.wk&&ua.wk<312){return r;}
if(el){if(typeof attObj.id==UNDEF){attObj.id=id;}
if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i];}
else if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"';}
else if(i.toLowerCase()!="classid"){att+=' '+i+'="'+attObj[i]+'"';}}}
var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />';}}
el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+'>'+par+'</object>';objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id);}
else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m]);}
else if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m]);}}}
for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n]);}}
el.parentNode.replaceChild(o,el);r=o;}}
return r;}
function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p);}
function removeSWF(id){var obj=getElementById(id);if(obj&&obj.nodeName=="OBJECT"){if(ua.ie&&ua.win){obj.style.display="none";(function(){if(obj.readyState==4){removeObjectInIE(id);}
else{setTimeout(arguments.callee,10);}})();}
else{obj.parentNode.removeChild(obj);}}}
function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null;}}
obj.parentNode.removeChild(obj);}}
function getElementById(id){var el=null;try{el=doc.getElementById(id);}
catch(e){}
return el;}
function createElement(el){return doc.createElement(el);}
function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn];}
function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false;}
function createCSS(sel,decl,media,newStyle){if(ua.ie&&ua.mac){return;}
var h=doc.getElementsByTagName("head")[0];if(!h){return;}
var m=(media&&typeof media=="string")?media:"screen";if(newStyle){dynamicStylesheet=null;dynamicStylesheetMedia=null;}
if(!dynamicStylesheet||dynamicStylesheetMedia!=m){var s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media",m);dynamicStylesheet=h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){dynamicStylesheet=doc.styleSheets[doc.styleSheets.length-1];}
dynamicStylesheetMedia=m;}
if(ua.ie&&ua.win){if(dynamicStylesheet&&typeof dynamicStylesheet.addRule==OBJECT){dynamicStylesheet.addRule(sel,decl);}}
else{if(dynamicStylesheet&&typeof doc.createTextNode!=UNDEF){dynamicStylesheet.appendChild(doc.createTextNode(sel+" {"+decl+"}"));}}}
function setVisibility(id,isVisible){if(!autoHideShow){return;}
var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v;}
else{createCSS("#"+id,"visibility:"+v);}}
function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars&&typeof encodeURIComponent!=UNDEF?encodeURIComponent(s):s;}
var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2]);}
var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j]);}
for(var k in ua){ua[k]=null;}
ua=null;for(var l in swfobject){swfobject[l]=null;}
swfobject=null;});}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr,callbackFn){if(ua.w3&&objectIdStr&&swfVersionStr){var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr;regObj.callbackFn=callbackFn;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false);}
else if(callbackFn){callbackFn({success:false,id:objectIdStr});}},getObjectById:function(objectIdStr){if(ua.w3){return getObjectById(objectIdStr);}},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj,callbackFn){var callbackObj={success:false,id:replaceElemIdStr};if(ua.w3&&!(ua.wk&&ua.wk<312)&&swfUrlStr&&replaceElemIdStr&&widthStr&&heightStr&&swfVersionStr){setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){widthStr+="";heightStr+="";var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){att[i]=attObj[i];}}
att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){par[j]=parObj[j];}}
if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k];}
else{par.flashvars=k+"="+flashvarsObj[k];}}}
if(hasPlayerVersion(swfVersionStr)){var obj=createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true);}
callbackObj.success=true;callbackObj.ref=obj;}
else if(xiSwfUrlStr&&canExpressInstall()){att.data=xiSwfUrlStr;showExpressInstall(att,par,replaceElemIdStr,callbackFn);return;}
else{setVisibility(replaceElemIdStr,true);}
if(callbackFn){callbackFn(callbackObj);}});}
else if(callbackFn){callbackFn(callbackObj);}},switchOffAutoHideShow:function(){autoHideShow=false;},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]};},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3){return createSWF(attObj,parObj,replaceElemIdStr);}
else{return undefined;}},showExpressInstall:function(att,par,replaceElemIdStr,callbackFn){if(ua.w3&&canExpressInstall()){showExpressInstall(att,par,replaceElemIdStr,callbackFn);}},removeSWF:function(objElemIdStr){if(ua.w3){removeSWF(objElemIdStr);}},createCSS:function(selStr,declStr,mediaStr,newStyleBoolean){if(ua.w3){createCSS(selStr,declStr,mediaStr,newStyleBoolean);}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(q){if(/\?/.test(q)){q=q.split("?")[1];}
if(param==null){return urlEncodeIfNecessary(q);}
var pairs=q.split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring((pairs[i].indexOf("=")+1)));}}}
return"";},expressInstallCallback:function(){if(isExpressInstallActive){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj&&storedAltContent){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block";}}
if(storedCallbackFn){storedCallbackFn(storedCallbackObj);}}
isExpressInstallActive=false;}}};}();(function(){if(window.google&&google.gears){return;}
var F=null;if(typeof GearsFactory!='undefined'){F=new GearsFactory();}else{try{F=new ActiveXObject('Gears.Factory');if(F.getBuildInfo().indexOf('ie_mobile')!=-1){F.privateSetGlobalObject(this);}}catch(e){if((typeof navigator.mimeTypes!='undefined')&&navigator.mimeTypes["application/x-googlegears"]){F=document.createElement("object");F.style.display="none";F.width=0;F.height=0;F.type="application/x-googlegears";document.documentElement.appendChild(F);}}}
if(!F){return;}
if(!window.google){google={};}
if(!google.gears){google.gears={factory:F};}})();Persist=(function(){var VERSION='0.3.1',P,B,esc,init,empty,ec;ec=(function(){var EPOCH='Thu, 01-Jan-1970 00:00:01 GMT',RATIO=1000*60*60*24,KEYS=['expires','path','domain'],esc=escape,un=unescape,doc=document,me;var get_now=function(){var r=new Date();r.setTime(r.getTime());return r;};var cookify=function(c_key,c_val){var i,key,val,r=[],opt=(arguments.length>2)?arguments[2]:{};r.push(esc(c_key)+'='+esc(c_val));for(var idx=0;idx<KEYS.length;idx++){key=KEYS[idx];val=opt[key];if(val){r.push(key+'='+val);}}
if(opt.secure){r.push('secure');}
return r.join('; ');};var alive=function(){var k='__EC_TEST__',v=new Date();v=v.toGMTString();this.set(k,v);this.enabled=(this.remove(k)==v);return this.enabled;};me={set:function(key,val){var opt=(arguments.length>2)?arguments[2]:{},now=get_now(),expire_at,cfg={};if(opt.expires){if(opt.expires==-1){cfg.expires=-1}
else{var expires=opt.expires*RATIO;cfg.expires=new Date(now.getTime()+expires);cfg.expires=cfg.expires.toGMTString();}}
var keys=['path','domain','secure'];for(var i=0;i<keys.length;i++){if(opt[keys[i]]){cfg[keys[i]]=opt[keys[i]];}}
var r=cookify(key,val,cfg);doc.cookie=r;return val;},has:function(key){key=esc(key);var c=doc.cookie,ofs=c.indexOf(key+'='),len=ofs+key.length+1,sub=c.substring(0,key.length);return((!ofs&&key!=sub)||ofs<0)?false:true;},get:function(key){key=esc(key);var c=doc.cookie,ofs=c.indexOf(key+'='),len=ofs+key.length+1,sub=c.substring(0,key.length),end;if((!ofs&&key!=sub)||ofs<0){return null;}
end=c.indexOf(';',len);if(end<0){end=c.length;}
return un(c.substring(len,end));},remove:function(k){var r=me.get(k),opt={expires:EPOCH};doc.cookie=cookify(k,'',opt);return r;},keys:function(){var c=doc.cookie,ps=c.split('; '),i,p,r=[];for(var idx=0;idx<ps.length;idx++){p=ps[idx].split('=');r.push(un(p[0]));}
return r;},all:function(){var c=doc.cookie,ps=c.split('; '),i,p,r=[];for(var idx=0;idx<ps.length;idx++){p=ps[idx].split('=');r.push([un(p[0]),un(p[1])]);}
return r;},version:'0.2.1',enabled:false};me.enabled=alive.call(me);return me;}());var index_of=(function(){if(Array.prototype.indexOf){return function(ary,val){return Array.prototype.indexOf.call(ary,val);};}else{return function(ary,val){var i,l;for(var idx=0,len=ary.length;idx<len;idx++){if(ary[idx]==val){return idx;}}
return-1;};}})();empty=function(){};esc=function(str){return'PS'+str.replace(/_/g,'__').replace(/ /g,'_s');};var C={search_order:['localstorage','globalstorage','gears','cookie','ie','flash'],name_re:/^[a-z][a-z0-9_ \-]+$/i,methods:['init','get','set','remove','load','save','iterate'],sql:{version:'1',create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?",keys:"SELECT * FROM persist_data"},flash:{div_id:'_persist_flash_wrap',id:'_persist_flash',path:'persist.swf',size:{w:1,h:1},params:{autostart:true}}};B={gears:{size:-1,test:function(){return(window.google&&window.google.gears)?true:false;},methods:{init:function(){var db;db=this.db=google.gears.factory.create('beta.database');db.open(esc(this.name));db.execute(C.sql.create).close();},get:function(key){var r,sql=C.sql.get;var db=this.db;var ret;db.execute('BEGIN').close();r=db.execute(sql,[key]);ret=r.isValidRow()?r.field(0):null;r.close();db.execute('COMMIT').close();return ret;},set:function(key,val){var rm_sql=C.sql.remove,sql=C.sql.set,r;var db=this.db;var ret;db.execute('BEGIN').close();db.execute(rm_sql,[key]).close();db.execute(sql,[key,val]).close();db.execute('COMMIT').close();return val;},remove:function(key){var get_sql=C.sql.get,sql=C.sql.remove,r,val=null,is_valid=false;var db=this.db;db.execute('BEGIN').close();db.execute(sql,[key]).close();db.execute('COMMIT').close();return true;},iterate:function(fn,scope){var key_sql=C.sql.keys;var r;var db=this.db;r=db.execute(key_sql);while(r.isValidRow()){fn.call(scope||this,r.field(0),r.field(1));r.next();}
r.close();}}},globalstorage:{size:5*1024*1024,test:function(){if(window.globalStorage){var domain='127.0.0.1';if(this.o&&this.o.domain){domain=this.o.domain;}
try{var dontcare=globalStorage[domain];return true;}catch(e){if(window.console&&window.console.warn){console.warn("globalStorage exists, but couldn't use it because your browser is running on domain:",domain);}
return false;}}else{return false;}},methods:{key:function(key){return esc(this.name)+esc(key);},init:function(){this.store=globalStorage[this.o.domain];},get:function(key){key=this.key(key);return this.store.getItem(key);},set:function(key,val){key=this.key(key);this.store.setItem(key,val);return val;},remove:function(key){var val;key=this.key(key);val=this.store.getItem[key];this.store.removeItem(key);return val;}}},localstorage:{size:-1,test:function(){try{if(window.localStorage&&window.localStorage.setItem("test",null)==undefined){if(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var ffVersion=RegExp.$1;if(ffVersion>=9){return true;}
if(window.location.protocol=='file:'){return false;}}else{return true;}}else{return false;}
return window.localStorage?true:false;}catch(e){return false;}},methods:{key:function(key){return this.name+'>'+key;},init:function(){this.store=localStorage;},get:function(key){key=this.key(key);return this.store.getItem(key);},set:function(key,val){key=this.key(key);this.store.setItem(key,val);return val;},remove:function(key){var val;key=this.key(key);val=this.store.getItem(key);this.store.removeItem(key);return val;},iterate:function(fn,scope){var l=this.store,key,keys;for(var i=0;i<l.length;i++){key=l.key(i);keys=key.split('>');if((keys.length==2)&&(keys[0]==this.name)){fn.call(scope||this,keys[1],l.getItem(key));}}}}},ie:{prefix:'_persist_data-',size:64*1024,test:function(){return window.ActiveXObject?true:false;},make_userdata:function(id){var el=document.createElement('div');el.id=id;el.style.display='none';el.addBehavior('#default#userdata');document.body.appendChild(el);return el;},methods:{init:function(){var id=B.ie.prefix+esc(this.name);this.el=B.ie.make_userdata(id);if(this.o.defer){this.load();}},get:function(key){var val;key=esc(key);if(!this.o.defer){this.load();}
val=this.el.getAttribute(key);return val;},set:function(key,val){key=esc(key);this.el.setAttribute(key,val);if(!this.o.defer){this.save();}
return val;},remove:function(key){var val;key=esc(key);if(!this.o.defer){this.load();}
val=this.el.getAttribute(key);this.el.removeAttribute(key);if(!this.o.defer){this.save();}
return val;},load:function(){this.el.load(esc(this.name));},save:function(){this.el.save(esc(this.name));}}},cookie:{delim:':',size:4000,test:function(){return P.Cookie.enabled?true:false;},methods:{key:function(key){return this.name+B.cookie.delim+key;},get:function(key,fn){var val;key=this.key(key);val=ec.get(key);return val;},set:function(key,val,fn){key=this.key(key);ec.set(key,val,this.o);return val;},remove:function(key,val){var val;key=this.key(key);val=ec.remove(key);return val;}}},flash:{test:function(){try{if(!swfobject){return false;}}catch(e){return false;}
var major=swfobject.getFlashPlayerVersion().major;return(major>=8)?true:false;},methods:{init:function(){if(!B.flash.el){var key,el,fel,cfg=C.flash;el=document.createElement('div');el.id=cfg.div_id;fel=document.createElement('div');fel.id=cfg.id;el.appendChild(fel);document.body.appendChild(el);B.flash.el=swfobject.createSWF({id:cfg.id,data:this.o.swf_path||cfg.path,width:cfg.size.w,height:cfg.size.h},cfg.params,cfg.id);}
this.el=B.flash.el;},get:function(key){var val;key=esc(key);val=this.el.get(this.name,key);return val;},set:function(key,val){var old_val;key=esc(key);old_val=this.el.set(this.name,key,val);return old_val;},remove:function(key){var val;key=esc(key);val=this.el.remove(this.name,key);return val;}}}};init=function(){var i,l,b,key,fns=C.methods,keys=C.search_order;for(var idx=0,len=fns.length;idx<len;idx++){P.Store.prototype[fns[idx]]=empty;}
P.type=null;P.size=-1;for(var idx2=0,len2=keys.length;!P.type&&idx2<len2;idx2++){b=B[keys[idx2]];if(b.test()){P.type=keys[idx2];P.size=b.size;for(key in b.methods){P.Store.prototype[key]=b.methods[key];}}}
P._init=true;};P={VERSION:VERSION,type:null,size:0,add:function(o){B[o.id]=o;C.search_order=[o.id].concat(C.search_order);init();},remove:function(id){var ofs=index_of(C.search_order,id);if(ofs<0){return;}
C.search_order.splice(ofs,1);delete B[id];init();},Cookie:ec,Store:function(name,o){if(!C.name_re.exec(name)){throw new Error("Invalid name");}
if(!P.type){throw new Error("No suitable storage found");}
o=o||{};this.name=name;o.domain=o.domain||location.hostname||'localhost';o.domain=o.domain.replace(/:\d+$/,'');o.domain=(o.domain=='localhost')?'':o.domain;this.o=o;o.expires=o.expires||365*2;o.path=o.path||'/';if(this.o.search_order){C.search_order=this.o.search_order;init();}
this.init();}};init();return P;})();

